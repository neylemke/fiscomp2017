/*!
 * This file is part of SageMathCloud.
 * It was compiled 2017-05-12T12:44:12.962Z at revision 54fddee03658407e336dc864f6f91d8d990ed373 and version 1494252317.
 * See https://github.com/sagemathinc/smc for its GPLv3 code.
 */
webpackJsonp([0],{74:function(t,exports){t.exports=function(t){"undefined"!=typeof execScript?execScript(t):eval.call(null,t)}},101:function(t,exports,e){var n,r,i=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};e(1217),e(1004),console.log("***********************************"),console.log("* Running MOCHA test environment  *"),console.log("***********************************"),r=e(9),n=!1,exports.run=function(t){var a,o,s,c,l,u;if(n)throw Error("you already ran the test suite");for(n=!0,mocha.setup("bdd"),$("body").append("<a class='btn btn-default' id=mocha-clear>Close Test Output</a>").click(exports.clear),l=$("<div id=mocha class='well' style='pointer:cursor; position: absolute;background: white; right: 15px; left: 15px; border: 1px solid lightgrey; border-radius: 4px;'></div>").hide(),$("body").append(l),"string"==typeof t&&(t=r.split(t)),window.expect=e(205),s=function(n){if(null==t||i.call(t,n)>=0)return console.log("loading "+n),e(1271)("./"+n)},u=["account","projects","page","project"],a=0,o=u.length;a<o;a++)c=u[a],s(c);return mocha.run(function(t){return console.log("Testing complete ",t),$("#smc-react-container").hide(),l.show()})},exports.clear=function(){return $("#smc-react-container").show(),$("#mocha").remove(),$("#mocha-clear").remove()}},205:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return new a.default(t)}var i=e(814),a=n(i),o=e(815),s=e(419),c=n(s),l=e(1042),u=n(l);r.createSpy=o.createSpy,r.spyOn=o.spyOn,r.isSpy=o.isSpy,r.restoreSpies=o.restoreSpies,r.assert=c.default,r.extend=u.default,t.exports=r},419:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(1056),i=n(r),a=function(t,e){var n=0;return t.replace(/%s/g,function(){return(0,i.default)(e[n++])})},o=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!t){var o="string"==typeof e?a(e,r):e(r);throw Error(o)}};exports.default=o},420:function(t,exports,e){var n=e(1045);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},783:function(t,exports,e){var n,r,i={REVISION:"78"};n=i,r="function"==typeof n?n.call(exports,e,exports,t):n,!(void 0!==r&&(t.exports=r)),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return(""+this).match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}}(),Object.assign(i,{MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2},CullFaceNone:0,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,BasicShadowMap:0,PCFShadowMap:1,PCFSoftShadowMap:2,FrontSide:0,BackSide:1,DoubleSide:2,FlatShading:1,SmoothShading:2,NoColors:0,FaceColors:1,VertexColors:2,NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5,AddEquation:100,SubtractEquation:101,ReverseSubtractEquation:102,MinEquation:103,MaxEquation:104,ZeroFactor:200,OneFactor:201,SrcColorFactor:202,OneMinusSrcColorFactor:203,SrcAlphaFactor:204,OneMinusSrcAlphaFactor:205,DstAlphaFactor:206,OneMinusDstAlphaFactor:207,DstColorFactor:208,OneMinusDstColorFactor:209,SrcAlphaSaturateFactor:210,NeverDepth:0,AlwaysDepth:1,LessDepth:2,LessEqualDepth:3,EqualDepth:4,GreaterEqualDepth:5,GreaterDepth:6,NotEqualDepth:7,MultiplyOperation:0,MixOperation:1,AddOperation:2,NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,Uncharted2ToneMapping:3,CineonToneMapping:4,UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307,RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002,NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008,UnsignedByteType:1009,ByteType:1010,ShortType:1011,UnsignedShortType:1012,IntType:1013,UnsignedIntType:1014,FloatType:1015,HalfFloatType:1025,UnsignedShort4444Type:1016,UnsignedShort5551Type:1017,UnsignedShort565Type:1018,AlphaFormat:1019,RGBFormat:1020,RGBAFormat:1021,LuminanceFormat:1022,LuminanceAlphaFormat:1023,RGBEFormat:i.RGBAFormat,DepthFormat:1026,RGB_S3TC_DXT1_Format:2001,RGBA_S3TC_DXT1_Format:2002,RGBA_S3TC_DXT3_Format:2003,RGBA_S3TC_DXT5_Format:2004,RGB_PVRTC_4BPPV1_Format:2100,RGB_PVRTC_2BPPV1_Format:2101,RGBA_PVRTC_4BPPV1_Format:2102,RGBA_PVRTC_2BPPV1_Format:2103,RGB_ETC1_Format:2151,LoopOnce:2200,LoopRepeat:2201,LoopPingPong:2202,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,ZeroCurvatureEnding:2400,ZeroSlopeEnding:2401,WrapAroundEnding:2402,TrianglesDrawMode:0,TriangleStripDrawMode:1,TriangleFanDrawMode:2,LinearEncoding:3e3,sRGBEncoding:3001,GammaEncoding:3007,RGBEEncoding:3002,LogLuvEncoding:3003,RGBM7Encoding:3004,RGBM16Encoding:3005,RGBDEncoding:3006,BasicDepthPacking:3200,RGBADepthPacking:3201}),i.Color=function(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)},i.Color.prototype={constructor:i.Color,r:1,g:1,b:1,set:function(t){return t instanceof i.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){this.r=t,this.g=t,this.b=t},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,r){if(e=i.Math.euclideanModulo(e,1),n=i.Math.clamp(n,0,1),r=i.Math.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var a=r<=.5?r*(1+n):r+n-r*n,o=2*r-a;this.r=t(o,a,e+1/3),this.g=t(o,a,e),this.b=t(o,a,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,a=n[1],o=n[2];switch(a){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var s=parseFloat(r[1])/360,c=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(s,c,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=n[1],h=u.length;if(3===h)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(t&&t.length>0){var u=i.ColorKeywords[t];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,n,r=t||{h:0,s:0,l:0},i=this.r,a=this.g,o=this.b,s=Math.max(i,a,o),c=Math.min(i,a,o),l=(c+s)/2;if(c===s)e=0,n=0;else{var u=s-c;switch(n=l<=.5?u/(s+c):u/(2-s-c),s){case i:e=(a-o)/u+(a<o?6:0);break;case a:e=(o-i)/u+2;break;case o:e=(i-a)/u+4}e/=6}return r.h=e,r.s=n,r.l=l,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var r=this.getHSL();return r.h+=t,r.s+=e,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},i.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},i.Quaternion=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1},i.Quaternion.prototype={constructor:i.Quaternion,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(t instanceof i.Euler==!1)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),r=Math.cos(t._y/2),a=Math.cos(t._z/2),o=Math.sin(t._x/2),s=Math.sin(t._y/2),c=Math.sin(t._z/2),l=t.order;return"XYZ"===l?(this._x=o*r*a+n*s*c,this._y=n*s*a-o*r*c,this._z=n*r*c+o*s*a,this._w=n*r*a-o*s*c):"YXZ"===l?(this._x=o*r*a+n*s*c,this._y=n*s*a-o*r*c,this._z=n*r*c-o*s*a,this._w=n*r*a+o*s*c):"ZXY"===l?(this._x=o*r*a-n*s*c,this._y=n*s*a+o*r*c,this._z=n*r*c+o*s*a,this._w=n*r*a-o*s*c):"ZYX"===l?(this._x=o*r*a-n*s*c,this._y=n*s*a+o*r*c,this._z=n*r*c-o*s*a,this._w=n*r*a+o*s*c):"YZX"===l?(this._x=o*r*a+n*s*c,this._y=n*s*a+o*r*c,this._z=n*r*c-o*s*a,this._w=n*r*a-o*s*c):"XZY"===l&&(this._x=o*r*a-n*s*c,this._y=n*s*a-o*r*c,this._z=n*r*c+o*s*a,this._w=n*r*a+o*s*c),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],a=n[8],o=n[1],s=n[5],c=n[9],l=n[2],u=n[6],h=n[10],f=r+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(u-c)*e,this._y=(a-l)*e,this._z=(o-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(u-c)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(a+l)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(a-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(c+u)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(o-i)/e,this._x=(a+l)/e,this._y=(c+u)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,n=1e-6;return function(r,a){return void 0===t&&(t=new i.Vector3),e=r.dot(a)+1,e<n?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,a),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,a=t._w,o=e._x,s=e._y,c=e._z,l=e._w;return this._x=n*l+a*o+r*c-i*s,this._y=r*l+a*s+i*o-n*c,this._z=i*l+a*c+n*s-r*o,this._w=a*l-n*o-r*s-i*c,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*t._w+n*t._x+r*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var c=Math.atan2(s,o),l=Math.sin((1-e)*c)/s,u=Math.sin(e*c)/s;return this._w=a*l+this._w*u,this._x=n*l+this._x*u,this._y=r*l+this._y*u,this._z=i*l+this._z*u,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(i.Quaternion,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,a,o){var s=n[r+0],c=n[r+1],l=n[r+2],u=n[r+3],h=i[a+0],f=i[a+1],p=i[a+2],d=i[a+3];if(u!==d||s!==h||c!==f||l!==p){var m=1-o,g=s*h+c*f+l*p+u*d,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,g*v);m=Math.sin(m*x)/b,o=Math.sin(o*x)/b}var w=o*v;if(s=s*m+h*w,c=c*m+f*w,l=l*m+p*w,u=u*m+d*w,m===1-o){var _=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=_,c*=_,l*=_,u*=_}}t[e]=s,t[e+1]=c,t[e+2]=l,t[e+3]=u}}),i.Vector2=function(t,e){this.x=t||0,this.y=e||0},i.Vector2.prototype={constructor:i.Vector2,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i.Vector2,e=new i.Vector2),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*n-a*r+t.x,this.y=i*r+a*n+t.y,this}},i.Vector3=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0},i.Vector3.prototype={constructor:i.Vector3,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e instanceof i.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new i.Quaternion),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new i.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},applyProjection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,a=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,o=t.z,s=t.w,c=s*e+a*r-o*n,l=s*n+o*e-i*r,u=s*r+i*n-a*e,h=-i*e-a*n-o*r;return this.x=c*s+h*-i+l*-o-u*-a,this.y=l*s+h*-a+u*-i-c*-o,this.z=u*s+h*-o+c*-a-l*-i,this},project:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i.Vector3,e=new i.Vector3),t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,r=this.y,i=this.z;return this.x=r*t.z-i*t.y,this.y=i*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new i.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new i.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(i.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=t;t=e,e=n}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this}},i.Vector4=function(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1},i.Vector4.prototype={constructor:i.Vector4,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*e+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*e+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*e+a[7]*n+a[11]*r+a[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,a=.01,o=.1,s=t.elements,c=s[0],l=s[4],u=s[8],h=s[1],f=s[5],p=s[9],d=s[2],m=s[6],g=s[10];
if(Math.abs(l-h)<a&&Math.abs(u-d)<a&&Math.abs(p-m)<a){if(Math.abs(l+h)<o&&Math.abs(u+d)<o&&Math.abs(p+m)<o&&Math.abs(c+f+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;var v=(c+1)/2,y=(f+1)/2,b=(g+1)/2,x=(l+h)/4,w=(u+d)/4,_=(p+m)/4;return v>y&&v>b?v<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(v),r=x/n,i=w/n):y>b?y<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=x/r,i=_/r):b<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(b),n=w/i,r=_/i),this.set(n,r,i,e),this}var E=Math.sqrt((m-p)*(m-p)+(u-d)*(u-d)+(h-l)*(h-l));return Math.abs(E)<.001&&(E=1),this.x=(m-p)/E,this.y=(u-d)/E,this.z=(h-l)/E,this.w=Math.acos((c+f+g-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i.Vector4,e=new i.Vector4),t.set(n,n,n,n),e.set(r,r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this}},i.Euler=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||i.Euler.DefaultOrder},i.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i.Euler.DefaultOrder="XYZ",i.Euler.prototype={constructor:i.Euler,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=i.Math.clamp,a=t.elements,o=a[0],s=a[4],c=a[8],l=a[1],u=a[5],h=a[9],f=a[2],p=a[6],d=a[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(p,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(c,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===e?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,u))):"YZX"===e?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(c,d))):"XZY"===e?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(p,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-h,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,n,r){return void 0===t&&(t=new i.Matrix4),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new i.Quaternion;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new i.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},i.Line3=function(t,e){this.start=void 0!==t?t:new i.Vector3,this.end=void 0!==e?e:new i.Vector3},i.Line3.prototype={constructor:i.Line3,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},center:function(t){var e=t||new i.Vector3;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var e=t||new i.Vector3;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var n=e||new i.Vector3;return this.delta(n).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new i.Vector3,e=new i.Vector3;return function(n,r){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var a=e.dot(e),o=e.dot(t),s=o/a;return r&&(s=i.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e),a=n||new i.Vector3;return this.delta(a).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},i.Box2=function(t,e){this.min=void 0!==t?t:new i.Vector2(+(1/0),+(1/0)),this.max=void 0!==e?e:new i.Vector2(-(1/0),-(1/0))},i.Box2.prototype={constructor:i.Box2,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i.Vector2;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){var e=t||new i.Vector2;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new i.Vector2;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){var n=e||new i.Vector2;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){var n=e||new i.Vector2;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i.Vector2;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},i.Box3=function(t,e){this.min=void 0!==t?t:new i.Vector3(+(1/0),+(1/0),+(1/0)),this.max=void 0!==e?e:new i.Vector3(-(1/0),-(1/0),-(1/0))},i.Box3.prototype={constructor:i.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=+(1/0),n=+(1/0),r=+(1/0),i=-(1/0),a=-(1/0),o=-(1/0),s=0,c=t.length;s<c;s+=3){var l=t[s],u=t[s+1],h=t[s+2];l<e&&(e=l),u<n&&(n=u),h<r&&(r=h),l>i&&(i=l),u>a&&(a=u),h>o&&(o=h)}this.min.set(e,n,r),this.max.set(i,a,o)},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i.Vector3;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(){var t=new i.Vector3;return function(e){var n=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var r=e.geometry;if(void 0!==r)if(r instanceof i.Geometry)for(var a=r.vertices,o=0,s=a.length;o<s;o++)t.copy(a[o]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t);else if(r instanceof i.BufferGeometry&&void 0!==r.attributes.position)for(var c=r.attributes.position.array,o=0,s=c.length;o<s;o+=3)t.fromArray(c,o),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t)}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){var e=t||new i.Vector3;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new i.Vector3;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){var n=e||new i.Vector3;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new i.Vector3),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},clampPoint:function(t,e){var n=e||new i.Vector3;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i.Vector3;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),getBoundingSphere:function(){var t=new i.Vector3;return function(e){var n=e||new i.Sphere;return n.center=this.center(),n.radius=.5*this.size(t).length(),n}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},i.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},i.Matrix3.prototype={constructor:i.Matrix3,set:function(t,e,n,r,i,a,o,s,c){var l=this.elements;return l[0]=t,l[1]=r,l[2]=o,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToVector3Array:function(){var t;return function(e,n,r){void 0===t&&(t=new i.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=0,o=n;a<r;a+=3,o+=3)t.fromArray(e,o),t.applyMatrix3(this),t.toArray(e,o);return e}}(),applyToBuffer:function(){var t;return function(e,n,r){void 0===t&&(t=new i.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length/e.itemSize);for(var a=0,o=n;a<r;a++,o++)t.x=e.getX(o),t.y=e.getY(o),t.z=e.getZ(o),t.applyMatrix3(this),e.setXYZ(t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],c=t[7],l=t[8];return e*a*l-e*o*c-n*i*l+n*o*s+r*i*c-r*a*s},getInverse:function(t,e){t instanceof i.Matrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,a=n[0],o=n[1],s=n[2],c=n[3],l=n[4],u=n[5],h=n[6],f=n[7],p=n[8],d=p*l-u*f,m=u*h-p*c,g=f*c-l*h,v=a*d+o*m+s*g;if(0===v){var y="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e)throw Error(y);return console.warn(y),this.identity()}var b=1/v;return r[0]=d*b,r[1]=(s*f-p*o)*b,r[2]=(u*o-s*l)*b,r[3]=m*b,r[4]=(p*a-s*h)*b,r[5]=(s*c-u*a)*b,r[6]=g*b,r[7]=(o*h-f*a)*b,r[8]=(l*a-o*c)*b,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},i.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},i.Matrix4.prototype={constructor:i.Matrix4,set:function(t,e,n,r,i,a,o,s,c,l,u,h,f,p,d,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=f,g[7]=p,g[11]=d,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new i.Matrix4).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new i.Vector3);var n=this.elements,r=e.elements,a=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return n[0]=r[0]*a,n[1]=r[1]*a,n[2]=r[2]*a,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,this}}(),makeRotationFromEuler:function(t){t instanceof i.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,a=t.z,o=Math.cos(n),s=Math.sin(n),c=Math.cos(r),l=Math.sin(r),u=Math.cos(a),h=Math.sin(a);if("XYZ"===t.order){var f=o*u,p=o*h,d=s*u,m=s*h;e[0]=c*u,e[4]=-c*h,e[8]=l,e[1]=p+d*l,e[5]=f-m*l,e[9]=-s*c,e[2]=m-f*l,e[6]=d+p*l,e[10]=o*c}else if("YXZ"===t.order){var g=c*u,v=c*h,y=l*u,b=l*h;e[0]=g+b*s,e[4]=y*s-v,e[8]=o*l,e[1]=o*h,e[5]=o*u,e[9]=-s,e[2]=v*s-y,e[6]=b+g*s,e[10]=o*c}else if("ZXY"===t.order){var g=c*u,v=c*h,y=l*u,b=l*h;e[0]=g-b*s,e[4]=-o*h,e[8]=y+v*s,e[1]=v+y*s,e[5]=o*u,e[9]=b-g*s,e[2]=-o*l,e[6]=s,e[10]=o*c}else if("ZYX"===t.order){var f=o*u,p=o*h,d=s*u,m=s*h;e[0]=c*u,e[4]=d*l-p,e[8]=f*l+m,e[1]=c*h,e[5]=m*l+f,e[9]=p*l-d,e[2]=-l,e[6]=s*c,e[10]=o*c}else if("YZX"===t.order){var x=o*c,w=o*l,_=s*c,E=s*l;e[0]=c*u,e[4]=E-x*h,e[8]=_*h+w,e[1]=h,e[5]=o*u,e[9]=-s*u,e[2]=-l*u,e[6]=w*h+_,e[10]=x-E*h}else if("XZY"===t.order){var x=o*c,w=o*l,_=s*c,E=s*l;e[0]=c*u,e[4]=-h,e[8]=l*u,e[1]=x*h+E,e[5]=o*u,e[9]=w*h-_,e[2]=_*h-w,e[6]=s*u,e[10]=E*h+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z,a=t.w,o=n+n,s=r+r,c=i+i,l=n*o,u=n*s,h=n*c,f=r*s,p=r*c,d=i*c,m=a*o,g=a*s,v=a*c;return e[0]=1-(f+d),e[4]=u-v,e[8]=h+g,e[1]=u+v,e[5]=1-(l+d),e[9]=p-m,e[2]=h-g,e[6]=p+m,e[10]=1-(l+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,n;return function(r,a,o){void 0===t&&(t=new i.Vector3,e=new i.Vector3,n=new i.Vector3);var s=this.elements;return n.subVectors(r,a).normalize(),0===n.lengthSq()&&(n.z=1),t.crossVectors(o,n).normalize(),0===t.lengthSq()&&(n.z+=1e-4,t.crossVectors(o,n).normalize()),e.crossVectors(n,t),s[0]=t.x,s[4]=e.x,s[8]=n.x,s[1]=t.y,s[5]=e.y,s[9]=n.y,s[2]=t.z,s[6]=e.z,s[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],f=n[13],p=n[2],d=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],E=r[8],M=r[12],T=r[1],S=r[5],A=r[9],C=r[13],k=r[2],L=r[6],R=r[10],P=r[14],D=r[3],B=r[7],N=r[11],O=r[15];return i[0]=a*w+o*T+s*k+c*D,i[4]=a*_+o*S+s*L+c*B,i[8]=a*E+o*A+s*R+c*N,i[12]=a*M+o*C+s*P+c*O,i[1]=l*w+u*T+h*k+f*D,i[5]=l*_+u*S+h*L+f*B,i[9]=l*E+u*A+h*R+f*N,i[13]=l*M+u*C+h*P+f*O,i[2]=p*w+d*T+m*k+g*D,i[6]=p*_+d*S+m*L+g*B,i[10]=p*E+d*A+m*R+g*N,i[14]=p*M+d*C+m*P+g*O,i[3]=v*w+y*T+b*k+x*D,i[7]=v*_+y*S+b*L+x*B,i[11]=v*E+y*A+b*R+x*N,i[15]=v*M+y*C+b*P+x*O,this},multiplyToArray:function(t,e,n){var r=this.elements;return this.multiplyMatrices(t,e),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToVector3Array:function(){var t;return function(e,n,r){void 0===t&&(t=new i.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=0,o=n;a<r;a+=3,o+=3)t.fromArray(e,o),t.applyMatrix4(this),t.toArray(e,o);return e}}(),applyToBuffer:function(){var t;return function(e,n,r){void 0===t&&(t=new i.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length/e.itemSize);for(var a=0,o=n;a<r;a++,o++)t.x=e.getX(o),t.y=e.getY(o),t.z=e.getZ(o),t.applyMatrix4(this),e.setXYZ(t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],a=t[1],o=t[5],s=t[9],c=t[13],l=t[2],u=t[6],h=t[10],f=t[14],p=t[3],d=t[7],m=t[11],g=t[15];return p*(+i*s*u-r*c*u-i*o*h+n*c*h+r*o*f-n*s*f)+d*(+e*s*f-e*c*h+i*a*h-r*a*f+r*c*l-i*s*l)+m*(+e*c*u-e*o*f-i*a*u+n*a*f+i*o*l-n*c*l)+g*(-r*o*l-e*s*u+e*o*h+r*a*u-n*a*h+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new i.Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],a=r[1],o=r[2],s=r[3],c=r[4],l=r[5],u=r[6],h=r[7],f=r[8],p=r[9],d=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15],x=p*y*h-v*d*h+v*u*m-l*y*m-p*u*b+l*d*b,w=g*d*h-f*y*h-g*u*m+c*y*m+f*u*b-c*d*b,_=f*v*h-g*p*h+g*l*m-c*v*m-f*l*b+c*p*b,E=g*p*u-f*v*u-g*l*d+c*v*d+f*l*y-c*p*y,M=i*x+a*w+o*_+s*E;if(0===M){var T="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e)throw Error(T);return console.warn(T),this.identity()}var S=1/M;return n[0]=x*S,n[1]=(v*d*s-p*y*s-v*o*m+a*y*m+p*o*b-a*d*b)*S,n[2]=(l*y*s-v*u*s+v*o*h-a*y*h-l*o*b+a*u*b)*S,n[3]=(p*u*s-l*d*s-p*o*h+a*d*h+l*o*m-a*u*m)*S,n[4]=w*S,n[5]=(f*y*s-g*d*s+g*o*m-i*y*m-f*o*b+i*d*b)*S,n[6]=(g*u*s-c*y*s-g*o*h+i*y*h+c*o*b-i*u*b)*S,n[7]=(c*d*s-f*u*s+f*o*h-i*d*h-c*o*m+i*u*m)*S,n[8]=_*S,n[9]=(g*p*s-f*v*s-g*a*m+i*v*m+f*a*b-i*p*b)*S,n[10]=(c*v*s-g*l*s+g*a*h-i*v*h-c*a*b+i*l*b)*S,n[11]=(f*l*s-c*p*s-f*a*h+i*p*h+c*a*m-i*l*m)*S,n[12]=E*S,n[13]=(f*v*o-g*p*o+g*a*d-i*v*d-f*a*y+i*p*y)*S,n[14]=(g*l*o-c*v*o-g*a*u+i*v*u+c*a*y-i*l*y)*S,n[15]=(c*p*o-f*l*o+f*a*u-i*p*u-c*a*d+i*l*d)*S,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,a=t.x,o=t.y,s=t.z,c=i*a,l=i*o;return this.set(c*a+n,c*o-r*s,c*s+r*o,0,c*o+r*s,l*o+n,l*s-r*a,0,c*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t,e;return function(n,r,a){void 0===t&&(t=new i.Vector3,e=new i.Matrix4);var o=this.elements,s=t.set(o[0],o[1],o[2]).length(),c=t.set(o[4],o[5],o[6]).length(),l=t.set(o[8],o[9],o[10]).length(),u=this.determinant();u<0&&(s=-s),n.x=o[12],n.y=o[13],n.z=o[14],e.elements.set(this.elements);var h=1/s,f=1/c,p=1/l;return e.elements[0]*=h,e.elements[1]*=h,e.elements[2]*=h,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=p,e.elements[9]*=p,e.elements[10]*=p,r.setFromRotationMatrix(e),a.x=s,a.y=c,a.z=l,this}}(),makeFrustum:function(t,e,n,r,i,a){var o=this.elements,s=2*i/(e-t),c=2*i/(r-n),l=(e+t)/(e-t),u=(r+n)/(r-n),h=-(a+i)/(a-i),f=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(t,e,n,r){var a=n*Math.tan(i.Math.DEG2RAD*t*.5),o=-a,s=o*e,c=a*e;return this.makeFrustum(s,c,o,a,n,r)},makeOrthographic:function(t,e,n,r,i,a){var o=this.elements,s=1/(e-t),c=1/(n-r),l=1/(a-i),u=(e+t)*s,h=(n+r)*c,f=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t){return this.elements.set(t),this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}},i.Ray=function(t,e){this.origin=void 0!==t?t:new i.Vector3,this.direction=void 0!==e?e:new i.Vector3},i.Ray.prototype={constructor:i.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){var n=e||new i.Vector3;return n.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new i.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var n=e||new i.Vector3;n.subVectors(t,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new i.Vector3;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Vector3;return function(r,i,a,o){t.copy(r).add(i).multiplyScalar(.5),e.copy(i).sub(r).normalize(),n.copy(this.origin).sub(t);var s,c,l,u,h=.5*r.distanceTo(i),f=-this.direction.dot(e),p=n.dot(this.direction),d=-n.dot(e),m=n.lengthSq(),g=Math.abs(1-f*f);if(g>0)if(s=f*d-p,c=f*p-d,u=h*g,s>=0)if(c>=-u)if(c<=u){var v=1/g;s*=v,c*=v,l=s*(s+f*c+2*p)+c*(f*s+c+2*d)+m}else c=h,s=Math.max(0,-(f*c+p)),l=-s*s+c*(c+2*d)+m;else c=-h,s=Math.max(0,-(f*c+p)),l=-s*s+c*(c+2*d)+m;else c<=-u?(s=Math.max(0,-(-f*h+p)),c=s>0?-h:Math.min(Math.max(-h,-d),h),l=-s*s+c*(c+2*d)+m):c<=u?(s=0,c=Math.min(Math.max(-h,-d),h),l=c*(c+2*d)+m):(s=Math.max(0,-(f*h+p)),c=s>0?h:Math.min(Math.max(-h,-d),h),l=-s*s+c*(c+2*d)+m);else c=f>0?-h:h,s=Math.max(0,-(f*c+p)),l=-s*s+c*(c+2*d)+m;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(e).multiplyScalar(c).add(t),l}}(),intersectSphere:function(){var t=new i.Vector3;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,a=e.radius*e.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=r-o,c=r+o;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,r,i,a,o,s,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),l>=0?(i=(t.min.y-h.y)*l,a=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,a=(t.min.y-h.y)*l),n>a||i>r?null:((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),u>=0?(o=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(o=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(){var t=new i.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Vector3,r=new i.Vector3;return function(i,a,o,s,c){e.subVectors(a,i),n.subVectors(o,i),r.crossVectors(e,n);var l,u=this.direction.dot(r);if(u>0){if(s)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}t.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var f=l*this.direction.dot(e.cross(t));if(f<0)return null;if(h+f>u)return null;var p=-l*t.dot(r);return p<0?null:this.at(p/u,c)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},i.Sphere=function(t,e){this.center=void 0!==t?t:new i.Vector3,this.radius=void 0!==e?e:0},i.Sphere.prototype={constructor:i.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new i.Box3;return function(e,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(e).center(r);for(var i=0,a=0,o=e.length;a<o;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),
this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),r=e||new i.Vector3;return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){var e=t||new i.Box3;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},i.Frustum=function(t,e,n,r,a,o){this.planes=[void 0!==t?t:new i.Plane,void 0!==e?e:new i.Plane,void 0!==n?n:new i.Plane,void 0!==r?r:new i.Plane,void 0!==a?a:new i.Plane,void 0!==o?o:new i.Plane]},i.Frustum.prototype={constructor:i.Frustum,set:function(t,e,n,r,i,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],f=n[9],p=n[10],d=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(o-r,u-s,d-h,y-m).normalize(),e[1].setComponents(o+r,u+s,d+h,y+m).normalize(),e[2].setComponents(o+i,u+c,d+f,y+g).normalize(),e[3].setComponents(o-i,u-c,d-f,y-g).normalize(),e[4].setComponents(o-a,u-l,d-p,y-v).normalize(),e[5].setComponents(o+a,u+l,d+p,y+v).normalize(),this},intersectsObject:function(){var t=new i.Sphere;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new i.Sphere;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){var a=e[i].distanceToPoint(n);if(a<r)return!1}return!0},intersectsBox:function(){var t=new i.Vector3,e=new i.Vector3;return function(n){for(var r=this.planes,i=0;i<6;i++){var a=r[i];t.x=a.normal.x>0?n.min.x:n.max.x,e.x=a.normal.x>0?n.max.x:n.min.x,t.y=a.normal.y>0?n.min.y:n.max.y,e.y=a.normal.y>0?n.max.y:n.min.y,t.z=a.normal.z>0?n.min.z:n.max.z,e.z=a.normal.z>0?n.max.z:n.min.z;var o=a.distanceToPoint(t),s=a.distanceToPoint(e);if(o<0&&s<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},i.Plane=function(t,e){this.normal=void 0!==t?t:new i.Vector3(1,0,0),this.constant=void 0!==e?e:0},i.Plane.prototype={constructor:i.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new i.Vector3,e=new i.Vector3;return function(n,r,i){var a=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t),r=e||new i.Vector3;return r.copy(this.normal).multiplyScalar(n)},intersectLine:function(){var t=new i.Vector3;return function(e,n){var r=n||new i.Vector3,a=e.delta(t),o=this.normal.dot(a);if(0!==o){var s=-(e.start.dot(this.normal)+this.constant)/o;if(!(s<0||s>1))return r.copy(a).multiplyScalar(s).add(e.start)}else if(0===this.distanceToPoint(e.start))return r.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){var e=t||new i.Vector3;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new i.Vector3,e=new i.Matrix3;return function(n,r){var i=this.coplanarPoint(t).applyMatrix4(n),a=r||e.getNormalMatrix(n),o=this.normal.applyMatrix3(a).normalize();return this.constant=-i.dot(o),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},i.Spherical=function(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this},i.Spherical.prototype={constructor:i.Spherical,set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius.copy(t.radius),this.phi.copy(t.phi),this.theta.copy(t.theta),this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(i.Math.clamp(t.y/this.radius,-1,1))),this}},i.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=Array(36),r=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?n[i]="-":14===i?n[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,n[i]=e[19===i?3&t|8:t]);return n.join("")}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*i.Math.DEG2RAD},radToDeg:function(t){return t*i.Math.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}},i.Spline=function(t){function e(t,e,n,r,i,a,o){var s=.5*(n-t),c=.5*(r-e);return(2*(e-n)+s+c)*o+(-3*(e-n)-2*s-c)*a+s*i+e}this.points=t;var n,r,a,o,s,c,l,u,h,f=[],p={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return n=(this.points.length-1)*t,r=Math.floor(n),a=n-r,f[0]=0===r?r:r-1,f[1]=r,f[2]=r>this.points.length-2?this.points.length-1:r+1,f[3]=r>this.points.length-3?this.points.length-1:r+2,c=this.points[f[0]],l=this.points[f[1]],u=this.points[f[2]],h=this.points[f[3]],o=a*a,s=a*o,p.x=e(c.x,l.x,u.x,h.x,a,o,s),p.y=e(c.y,l.y,u.y,h.y,a,o,s),p.z=e(c.z,l.z,u.z,h.z,a,o,s),p},this.getControlPointsArray=function(){var t,e,n=this.points.length,r=[];for(t=0;t<n;t++)e=this.points[t],r[t]=[e.x,e.y,e.z];return r},this.getLength=function(t){var e,n,r,a,o=0,s=0,c=0,l=new i.Vector3,u=new i.Vector3,h=[],f=0;for(h[0]=0,t||(t=100),r=this.points.length*t,l.copy(this.points[0]),e=1;e<r;e++)n=e/r,a=this.getPoint(n),u.copy(a),f+=u.distanceTo(l),l.copy(a),o=(this.points.length-1)*n,s=Math.floor(o),s!==c&&(h[s]=f,c=s);return h[h.length]=f,{chunks:h,total:f}},this.reparametrizeByArcLength=function(t){var e,n,r,a,o,s,c,l,u=[],h=new i.Vector3,f=this.getLength();for(u.push(h.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(s=f.chunks[e]-f.chunks[e-1],c=Math.ceil(t*s/f.total),a=(e-1)/(this.points.length-1),o=e/(this.points.length-1),n=1;n<c-1;n++)r=a+n*(1/c)*(o-a),l=this.getPoint(r),u.push(h.copy(l).clone());u.push(h.copy(this.points[e]).clone())}this.points=u}},i.Triangle=function(t,e,n){this.a=void 0!==t?t:new i.Vector3,this.b=void 0!==e?e:new i.Vector3,this.c=void 0!==n?n:new i.Vector3},i.Triangle.normal=function(){var t=new i.Vector3;return function(e,n,r,a){var o=a||new i.Vector3;o.subVectors(r,n),t.subVectors(e,n),o.cross(t);var s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}}(),i.Triangle.barycoordFromPoint=function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Vector3;return function(r,a,o,s,c){t.subVectors(s,a),e.subVectors(o,a),n.subVectors(r,a);var l=t.dot(t),u=t.dot(e),h=t.dot(n),f=e.dot(e),p=e.dot(n),d=l*f-u*u,m=c||new i.Vector3;if(0===d)return m.set(-2,-1,-1);var g=1/d,v=(f*h-u*p)*g,y=(l*p-u*h)*g;return m.set(1-v-y,y,v)}}(),i.Triangle.containsPoint=function(){var t=new i.Vector3;return function(e,n,r,a){var o=i.Triangle.barycoordFromPoint(e,n,r,a,t);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),i.Triangle.prototype={constructor:i.Triangle,set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new i.Vector3,e=new i.Vector3;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){var e=t||new i.Vector3;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return i.Triangle.normal(this.a,this.b,this.c,t)},plane:function(t){var e=t||new i.Plane;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return i.Triangle.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return i.Triangle.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,n,r;return function(a,o){void 0===t&&(t=new i.Plane,e=[new i.Line3,new i.Line3,new i.Line3],n=new i.Vector3,r=new i.Vector3);var s=o||new i.Vector3,c=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(a,n),this.containsPoint(n)===!0)s.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var l=0;l<e.length;l++){e[l].closestPointToPoint(n,!0,r);var u=n.distanceToSquared(r);u<c&&(c=u,s.copy(r))}}return s}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},i.Interpolant=function(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n},i.Interpolant.prototype={constructor:i.Interpolant,evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var a;n:{r:if(!(t<r)){for(var o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}a=e.length;break n}{if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(var o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}a=n,n=0}}for(;n<a;){var c=n+a>>>1;t<e[c]?a=c:n=c+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,a=0;a!==r;++a)e[a]=n[i+a];return e},interpolate_:function(t,e,n,r){throw Error("call to abstract method")},intervalChanged_:function(t,e,n){}},Object.assign(i.Interpolant.prototype,{beforeStart_:i.Interpolant.prototype.copySampleValue_,afterEnd_:i.Interpolant.prototype.copySampleValue_}),i.CubicInterpolant=function(t,e,n,r){i.Interpolant.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0},i.CubicInterpolant.prototype=Object.assign(Object.create(i.Interpolant.prototype),{constructor:i.CubicInterpolant,DefaultSettings_:{endingStart:i.ZeroCurvatureEnding,endingEnd:i.ZeroCurvatureEnding},intervalChanged_:function(t,e,n){var r=this.parameterPositions,a=t-2,o=t+1,s=r[a],c=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case i.ZeroSlopeEnding:a=t,s=2*e-n;break;case i.WrapAroundEnding:a=r.length-2,s=e+r[a]-r[a+1];break;default:a=t,s=n}if(void 0===c)switch(this.getSettings_().endingEnd){case i.ZeroSlopeEnding:o=t,c=2*n-e;break;case i.WrapAroundEnding:o=1,c=n+r[1]-r[0];break;default:o=t-1,c=e}var l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(c-n),this._offsetPrev=a*u,this._offsetNext=o*u},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-e)/(r-e),d=p*p,m=d*p,g=-h*m+2*h*d-h*p,v=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*p+1,y=(-1-f)*m+(1.5+f)*d+.5*p,b=f*m-f*d,x=0;x!==o;++x)i[x]=g*a[l+x]+v*a[c+x]+y*a[s+x]+b*a[u+x];return i}}),i.DiscreteInterpolant=function(t,e,n,r){i.Interpolant.call(this,t,e,n,r)},i.DiscreteInterpolant.prototype=Object.assign(Object.create(i.Interpolant.prototype),{constructor:i.DiscreteInterpolant,interpolate_:function(t,e,n,r){return this.copySampleValue_(t-1)}}),i.LinearInterpolant=function(t,e,n,r){i.Interpolant.call(this,t,e,n,r)},i.LinearInterpolant.prototype=Object.assign(Object.create(i.Interpolant.prototype),{constructor:i.LinearInterpolant,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,l=(n-e)/(r-e),u=1-l,h=0;h!==o;++h)i[h]=a[c+h]*u+a[s+h]*l;return i}}),i.QuaternionLinearInterpolant=function(t,e,n,r){i.Interpolant.call(this,t,e,n,r)},i.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(i.Interpolant.prototype),{constructor:i.QuaternionLinearInterpolant,interpolate_:function(t,e,n,r){for(var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,c=t*s,l=(n-e)/(r-e),u=c+s;c!==u;c+=4)i.Quaternion.slerpFlat(a,0,o,c-s,o,c,l);return a}}),i.Clock=function(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},i.Clock.prototype={constructor:i.Clock,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},i.EventDispatcher=function(){},Object.assign(i.EventDispatcher.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,r=n[t];if(void 0!==r){var i=r.indexOf(e);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;var r=[],i=0,a=n.length;for(i=0;i<a;i++)r[i]=n[i];for(i=0;i<a;i++)r[i].call(this,t)}}}}),i.Layers=function(){this.mask=1},i.Layers.prototype={constructor:i.Layers,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!==(this.mask&t.mask)}},function(t){function e(t,e){return t.distance-e.distance}function n(t,e,r,i){if(t.visible!==!1&&(t.raycast(e,r),i===!0))for(var a=t.children,o=0,s=a.length;o<s;o++)n(a[o],e,r,!0)}t.Raycaster=function(e,n,r,i){this.ray=new t.Ray(e,n),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},t.Raycaster.prototype={constructor:t.Raycaster,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(e,n){n instanceof t.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize()):n instanceof t.OrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,r){var i=[];return n(t,this,i,r),i.sort(e),i},intersectObjects:function(t,r){var i=[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var a=0,o=t.length;a<o;a++)n(t[a],this,i,r);return i.sort(e),i}}}(i),i.Object3D=function(){function t(){a.setFromEuler(r,!1)}function e(){r.setFromQuaternion(a,void 0,!1)}Object.defineProperty(this,"id",{value:i.Object3DIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.Object3D.DefaultUp.clone();var n=new i.Vector3,r=new i.Euler,a=new i.Quaternion,o=new i.Vector3(1,1,1);r.onChange(t),a.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:a},scale:{enumerable:!0,value:o},modelViewMatrix:{value:new i.Matrix4},normalMatrix:{value:new i.Matrix3}}),this.matrix=new i.Matrix4,this.matrixWorld=new i.Matrix4,this.matrixAutoUpdate=i.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new i.Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},i.Object3D.DefaultUp=new i.Vector3(0,1,0),i.Object3D.DefaultMatrixAutoUpdate=!0,Object.assign(i.Object3D.prototype,i.EventDispatcher.prototype,{applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new i.Quaternion;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new i.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new i.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new i.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new i.Vector3;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new i.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new i.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new i.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new i.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new i.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t instanceof i.Object3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var n=this.children.indexOf(t);n!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],a=i.getObjectByProperty(t,e);if(void 0!==a)return a}},getWorldPosition:function(t){var e=t||new i.Vector3;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new i.Vector3,e=new i.Vector3;return function(n){var r=n||new i.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,r,e),r}}(),getWorldRotation:function(){var t=new i.Quaternion;return function(e){var n=e||new i.Euler;return this.getWorldQuaternion(t),n.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new i.Vector3,e=new i.Quaternion;return function(n){var r=n||new i.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,r),r}}(),getWorldDirection:function(){var t=new i.Quaternion;return function(e){var n=e||new i.Vector3;return this.getWorldQuaternion(t),n.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&t!==!0||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=0,n=this.children.length;e<n;e++)this.children[e].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var n=void 0===t||""===t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(t).object)}if(n){var o=e(t.geometries),s=e(t.materials),c=e(t.textures),l=e(t.images);o.length>0&&(r.geometries=o),s.length>0&&(r.materials=s),c.length>0&&(r.textures=c),l.length>0&&(r.images=l)}return r.object=i,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),i.Object3DIdCount=0,i.Face3=function(t,e,n,r,a,o){this.a=t,this.b=e,this.c=n,this.normal=r instanceof i.Vector3?r:new i.Vector3,this.vertexNormals=Array.isArray(r)?r:[],this.color=a instanceof i.Color?a:new i.Color,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=void 0!==o?o:0},i.Face3.prototype={constructor:i.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},i.BufferAttribute=function(t,e,n){this.uuid=i.Math.generateUUID(),this.array=t,this.itemSize=e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0,this.normalized=n===!0},i.BufferAttribute.prototype={constructor:i.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new i.Color),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyIndicesArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];e[n++]=a.a,e[n++]=a.b,e[n++]=a.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new i.Vector2),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new i.Vector3),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new i.Vector4),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},i.Int8Attribute=function(t,e){return new i.BufferAttribute(new Int8Array(t),e)},i.Uint8Attribute=function(t,e){return new i.BufferAttribute(new Uint8Array(t),e)},i.Uint8ClampedAttribute=function(t,e){return new i.BufferAttribute(new Uint8ClampedArray(t),e)},i.Int16Attribute=function(t,e){return new i.BufferAttribute(new Int16Array(t),e)},i.Uint16Attribute=function(t,e){return new i.BufferAttribute(new Uint16Array(t),e)},i.Int32Attribute=function(t,e){return new i.BufferAttribute(new Int32Array(t),e)},i.Uint32Attribute=function(t,e){return new i.BufferAttribute(new Uint32Array(t),e)},i.Float32Attribute=function(t,e){return new i.BufferAttribute(new Float32Array(t),e)},i.Float64Attribute=function(t,e){return new i.BufferAttribute(new Float64Array(t),e)},i.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new i.BufferAttribute(t,e).setDynamic(!0)},i.InstancedBufferAttribute=function(t,e,n){i.BufferAttribute.call(this,t,e),this.meshPerAttribute=n||1},i.InstancedBufferAttribute.prototype=Object.create(i.BufferAttribute.prototype),i.InstancedBufferAttribute.prototype.constructor=i.InstancedBufferAttribute,i.InstancedBufferAttribute.prototype.copy=function(t){return i.BufferAttribute.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},i.InterleavedBuffer=function(t,e){this.uuid=i.Math.generateUUID(),this.array=t,this.stride=e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},i.InterleavedBuffer.prototype={constructor:i.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)}},i.InstancedInterleavedBuffer=function(t,e,n){i.InterleavedBuffer.call(this,t,e),this.meshPerAttribute=n||1},i.InstancedInterleavedBuffer.prototype=Object.create(i.InterleavedBuffer.prototype),i.InstancedInterleavedBuffer.prototype.constructor=i.InstancedInterleavedBuffer,i.InstancedInterleavedBuffer.prototype.copy=function(t){return i.InterleavedBuffer.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},i.InterleavedBufferAttribute=function(t,e,n){this.uuid=i.Math.generateUUID(),this.data=t,this.itemSize=e,this.offset=n},i.InterleavedBufferAttribute.prototype={constructor:i.InterleavedBufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.count},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){
return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}},i.Geometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},Object.assign(i.Geometry.prototype,i.EventDispatcher.prototype,{applyMatrix:function(t){for(var e=(new i.Matrix3).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){var a=this.vertices[n];a.applyMatrix4(t)}for(var n=0,r=this.faces.length;n<r;n++){var o=this.faces[n];o.normal.applyMatrix3(e).normalize();for(var s=0,c=o.vertexNormals.length;s<c;s++)o.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,r){return void 0===t&&(t=new i.Matrix4),t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,r){return void 0===t&&(t=new i.Matrix4),t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new i.Object3D),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,r,a){var o=void 0!==s?[h[t].clone(),h[e].clone(),h[r].clone()]:[],d=void 0!==c?[n.colors[t].clone(),n.colors[e].clone(),n.colors[r].clone()]:[],m=new i.Face3(t,e,r,o,d,a);n.faces.push(m),void 0!==l&&n.faceVertexUvs[0].push([f[t].clone(),f[e].clone(),f[r].clone()]),void 0!==u&&n.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[r].clone()])}var n=this,r=null!==t.index?t.index.array:void 0,a=t.attributes,o=a.position.array,s=void 0!==a.normal?a.normal.array:void 0,c=void 0!==a.color?a.color.array:void 0,l=void 0!==a.uv?a.uv.array:void 0,u=void 0!==a.uv2?a.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var h=[],f=[],p=[],d=0,m=0;d<o.length;d+=3,m+=2)n.vertices.push(new i.Vector3(o[d],o[d+1],o[d+2])),void 0!==s&&h.push(new i.Vector3(s[d],s[d+1],s[d+2])),void 0!==c&&n.colors.push(new i.Color(c[d],c[d+1],c[d+2])),void 0!==l&&f.push(new i.Vector2(l[m],l[m+1])),void 0!==u&&p.push(new i.Vector2(u[m],u[m+1]));if(void 0!==r){var g=t.groups;if(g.length>0)for(var d=0;d<g.length;d++)for(var v=g[d],y=v.start,b=v.count,m=y,x=y+b;m<x;m+=3)e(r[m],r[m+1],r[m+2],v.materialIndex);else for(var d=0;d<r.length;d+=3)e(r[d],r[d+1],r[d+2])}else for(var d=0;d<o.length/3;d+=3)e(d,d+1,d+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new i.Matrix4;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new i.Vector3,e=new i.Vector3,n=0,r=this.faces.length;n<r;n++){var a=this.faces[n],o=this.vertices[a.a],s=this.vertices[a.b],c=this.vertices[a.c];t.subVectors(c,s),e.subVectors(o,s),t.cross(e),t.normalize(),a.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,n,r,a,o,s;for(s=Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)s[e]=new i.Vector3;if(t){var c,l,u,h=new i.Vector3,f=new i.Vector3;for(r=0,a=this.faces.length;r<a;r++)o=this.faces[r],c=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c],h.subVectors(u,l),f.subVectors(c,l),h.cross(f),s[o.a].add(h),s[o.b].add(h),s[o.c].add(h)}else for(r=0,a=this.faces.length;r<a;r++)o=this.faces[r],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)s[e].normalize();for(r=0,a=this.faces.length;r<a;r++){o=this.faces[r];var p=o.vertexNormals;3===p.length?(p[0].copy(s[o.a]),p[1].copy(s[o.b]),p[2].copy(s[o.c])):(p[0]=s[o.a].clone(),p[1]=s[o.b].clone(),p[2]=s[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,a;for(n=0,r=this.faces.length;n<r;n++)for(a=this.faces[n],a.__originalFaceNormal?a.__originalFaceNormal.copy(a.normal):a.__originalFaceNormal=a.normal.clone(),a.__originalVertexNormals||(a.__originalVertexNormals=[]),t=0,e=a.vertexNormals.length;t<e;t++)a.__originalVertexNormals[t]?a.__originalVertexNormals[t].copy(a.vertexNormals[t]):a.__originalVertexNormals[t]=a.vertexNormals[t].clone();var o=new i.Geometry;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,c,l=this.morphNormals[t].faceNormals,u=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)s=new i.Vector3,c={a:new i.Vector3,b:new i.Vector3,c:new i.Vector3},l.push(s),u.push(c)}var h=this.morphNormals[t];o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals();var s,c;for(n=0,r=this.faces.length;n<r;n++)a=this.faces[n],s=h.faceNormals[n],c=h.vertexNormals[n],s.copy(a.normal),c.a.copy(a.vertexNormals[0]),c.b.copy(a.vertexNormals[1]),c.c.copy(a.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)a=this.faces[n],a.normal=a.__originalFaceNormal,a.vertexNormals=a.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var t=0,e=this.vertices,n=0,r=e.length;n<r;n++)n>0&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new i.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new i.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t instanceof i.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var r,a=this.vertices.length,o=this.vertices,s=t.vertices,c=this.faces,l=t.faces,u=this.faceVertexUvs[0],h=t.faceVertexUvs[0];void 0===n&&(n=0),void 0!==e&&(r=(new i.Matrix3).getNormalMatrix(e));for(var f=0,p=s.length;f<p;f++){var d=s[f],m=d.clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(f=0,p=l.length;f<p;f++){var g,v,y,b=l[f],x=b.vertexNormals,w=b.vertexColors;g=new i.Face3(b.a+a,b.b+a,b.c+a),g.normal.copy(b.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var _=0,E=x.length;_<E;_++)v=x[_].clone(),void 0!==r&&v.applyMatrix3(r).normalize(),g.vertexNormals.push(v);g.color.copy(b.color);for(var _=0,E=w.length;_<E;_++)y=w[_],g.vertexColors.push(y.clone());g.materialIndex=b.materialIndex+n,c.push(g)}for(f=0,p=h.length;f<p;f++){var M=h[f],T=[];if(void 0!==M){for(var _=0,E=M.length;_<E;_++)T.push(M[_].clone());u.push(T)}}},mergeMesh:function(t){return t instanceof i.Mesh==!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),void this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,n,r,i,a,o,s,c={},l=[],u=[],h=4,f=Math.pow(10,h);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],e=Math.round(t.x*f)+"_"+Math.round(t.y*f)+"_"+Math.round(t.z*f),void 0===c[e]?(c[e]=n,l.push(this.vertices[n]),u[n]=l.length-1):u[n]=u[c[e]];var p=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=u[i.a],i.b=u[i.b],i.c=u[i.c],a=[i.a,i.b,i.c];for(var d=-1,m=0;m<3;m++)if(a[m]===a[(m+1)%3]){d=m,p.push(n);break}}for(n=p.length-1;n>=0;n--){var g=p[n];for(this.faces.splice(g,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(g,1)}var v=this.vertices.length-l.length;return this.vertices=l,v},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,n=e.length,r=0;r<n;r++)e[r]._id=r;e.sort(t);var i,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===n&&(i=[]),s&&s.length===n&&(a=[]);for(var r=0;r<n;r++){var c=e[r]._id;i&&i.push(o[c]),a&&a.push(s[c])}i&&(this.faceVertexUvs[0]=i),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=""+t.x+(""+t.y)+(""+t.z);return void 0!==f[e]?f[e]:(f[e]=h.length/3,h.push(t.x,t.y,t.z),f[e])}function n(t){var e=""+t.r+(""+t.g)+(""+t.b);return void 0!==d[e]?d[e]:(d[e]=p.length,p.push(t.getHex()),d[e])}function r(t){var e=""+t.x+(""+t.y);return void 0!==g[e]?g[e]:(g[e]=m.length/2,m.push(t.x,t.y),g[e])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(i[o]=a[o]);return i}for(var s=[],c=0;c<this.vertices.length;c++){var l=this.vertices[c];s.push(l.x,l.y,l.z)}for(var u=[],h=[],f={},p=[],d={},m=[],g={},c=0;c<this.faces.length;c++){var v=this.faces[c],y=!0,b=!1,x=void 0!==this.faceVertexUvs[0][c],w=v.normal.length()>0,_=v.vertexNormals.length>0,E=1!==v.color.r||1!==v.color.g||1!==v.color.b,M=v.vertexColors.length>0,T=0;if(T=t(T,0,0),T=t(T,1,y),T=t(T,2,b),T=t(T,3,x),T=t(T,4,w),T=t(T,5,_),T=t(T,6,E),T=t(T,7,M),u.push(T),u.push(v.a,v.b,v.c),u.push(v.materialIndex),x){var S=this.faceVertexUvs[0][c];u.push(r(S[0]),r(S[1]),r(S[2]))}if(w&&u.push(e(v.normal)),_){var A=v.vertexNormals;u.push(e(A[0]),e(A[1]),e(A[2]))}if(E&&u.push(n(v.color)),M){var C=v.vertexColors;u.push(n(C[0]),n(C[1]),n(C[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,p.length>0&&(i.data.colors=p),m.length>0&&(i.data.uvs=[m]),i.data.faces=u,i},clone:function(){return(new i.Geometry).copy(this)},copy:function(t){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var e=t.vertices,n=0,r=e.length;n<r;n++)this.vertices.push(e[n].clone());for(var i=t.faces,n=0,r=i.length;n<r;n++)this.faces.push(i[n].clone());for(var n=0,r=t.faceVertexUvs.length;n<r;n++){var a=t.faceVertexUvs[n];void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var o=0,s=a.length;o<s;o++){for(var c=a[o],l=[],u=0,h=c.length;u<h;u++){var f=c[u];l.push(f.clone())}this.faceVertexUvs[n].push(l)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),i.GeometryIdCount=0,i.DirectGeometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1},Object.assign(i.DirectGeometry.prototype,i.EventDispatcher.prototype,{computeBoundingBox:i.Geometry.prototype.computeBoundingBox,computeBoundingSphere:i.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(t){for(var e,n,r=[],i=t.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==n&&(n=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,r.push(e)),e={start:3*a,materialIndex:n})}void 0!==e&&(e.count=3*a-e.start,r.push(e)),this.groups=r},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,a=t.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,c=t.morphTargets,l=c.length;if(l>0){e=[];for(var u=0;u<l;u++)e[u]=[];this.morphTargets.position=e}var h,f=t.morphNormals,p=f.length;if(p>0){h=[];for(var u=0;u<p;u++)h[u]=[];this.morphTargets.normal=h}for(var d=t.skinIndices,m=t.skinWeights,g=d.length===r.length,v=m.length===r.length,u=0;u<n.length;u++){var y=n[u];this.vertices.push(r[y.a],r[y.b],r[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var x=y.normal;this.normals.push(x,x,x)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var _=y.color;this.colors.push(_,_,_)}if(o===!0){var E=a[0][u];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new i.Vector2,new i.Vector2,new i.Vector2))}if(s===!0){var E=a[1][u];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new i.Vector2,new i.Vector2,new i.Vector2))}for(var M=0;M<l;M++){var T=c[M].vertices;e[M].push(T[y.a],T[y.b],T[y.c])}for(var M=0;M<p;M++){var S=f[M].vertexNormals[u];h[M].push(S.a,S.b,S.c)}g&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),i.BufferGeometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}},Object.assign(i.BufferGeometry.prototype,i.EventDispatcher.prototype,{getIndex:function(){return this.index},setIndex:function(t){this.index=t},addAttribute:function(t,e){return e instanceof i.BufferAttribute==!1&&e instanceof i.InterleavedBufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new i.BufferAttribute(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new i.Matrix3).getNormalMatrix(t);r.applyToVector3Array(n.array),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,r){return void 0===t&&(t=new i.Matrix4),t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,r){return void 0===t&&(t=new i.Matrix4),t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new i.Object3D),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t instanceof i.Points||t instanceof i.Line){var n=new i.Float32Attribute(3*e.vertices.length,3),r=new i.Float32Attribute(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var a=new i.Float32Attribute(e.lineDistances.length,1);this.addAttribute("lineDistance",a.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t instanceof i.Mesh&&e instanceof i.Geometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t instanceof i.Mesh){var n=e.__directGeometry;if(void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}if(e.verticesNeedUpdate===!0){var r=this.attributes.position;void 0!==r&&(r.copyVector3sArray(e.vertices),r.needsUpdate=!0),e.verticesNeedUpdate=!1}if(e.normalsNeedUpdate===!0){var r=this.attributes.normal;void 0!==r&&(r.copyVector3sArray(e.normals),r.needsUpdate=!0),e.normalsNeedUpdate=!1}if(e.colorsNeedUpdate===!0){var r=this.attributes.color;void 0!==r&&(r.copyColorsArray(e.colors),r.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){var r=this.attributes.uv;void 0!==r&&(r.copyVector2sArray(e.uvs),r.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){var r=this.attributes.lineDistance;void 0!==r&&(r.copyArray(e.lineDistances),r.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new i.DirectGeometry).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new i.BufferAttribute(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new i.BufferAttribute(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new i.BufferAttribute(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var a=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new i.BufferAttribute(a,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new i.BufferAttribute(o,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var s=t.vertices.length>65535?Uint32Array:Uint16Array,c=new s(3*t.indices.length);this.setIndex(new i.BufferAttribute(c,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var l in t.morphTargets){for(var u=[],h=t.morphTargets[l],f=0,p=h.length;f<p;f++){var d=h[f],m=new i.Float32Attribute(3*d.length,3);u.push(m.copyVector3sArray(d))}this.morphAttributes[l]=u}if(t.skinIndices.length>0){var g=new i.Float32Attribute(4*t.skinIndices.length,4);this.addAttribute("skinIndex",g.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var v=new i.Float32Attribute(4*t.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new i.Box3);var t=this.attributes.position.array;void 0!==t?this.boundingBox.setFromArray(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new i.Box3,e=new i.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new i.Sphere);var n=this.attributes.position;if(n){var r=n.array,a=this.boundingSphere.center;t.setFromArray(r),t.center(a);for(var o=0,s=0,c=r.length;s<c;s+=3)e.fromArray(r,s),o=Math.max(o,a.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var r=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new i.BufferAttribute(new Float32Array(r.length),3));else for(var a=e.normal.array,o=0,s=a.length;o<s;o++)a[o]=0;var c,l,u,h=e.normal.array,f=new i.Vector3,p=new i.Vector3,d=new i.Vector3,m=new i.Vector3,g=new i.Vector3;if(t){var v=t.array;0===n.length&&this.addGroup(0,v.length);for(var y=0,b=n.length;y<b;++y)for(var x=n[y],w=x.start,_=x.count,o=w,s=w+_;o<s;o+=3)c=3*v[o+0],l=3*v[o+1],u=3*v[o+2],f.fromArray(r,c),p.fromArray(r,l),d.fromArray(r,u),m.subVectors(d,p),g.subVectors(f,p),m.cross(g),h[c]+=m.x,h[c+1]+=m.y,h[c+2]+=m.z,h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z,h[u]+=m.x,h[u+1]+=m.y,h[u+2]+=m.z}else for(var o=0,s=r.length;o<s;o+=9)f.fromArray(r,o),p.fromArray(r,o+3),d.fromArray(r,o+6),m.subVectors(d,p),g.subVectors(f,p),m.cross(g),h[o]=m.x,h[o+1]=m.y,h[o+2]=m.z,h[o+3]=m.x,h[o+4]=m.y,h[o+5]=m.z,h[o+6]=m.x,h[o+7]=m.y,h[o+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t instanceof i.BufferGeometry==!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var a=n[r],o=a.array,s=t.attributes[r],c=s.array,l=s.itemSize,u=0,h=l*e;u<c.length;u++,h++)o[h]=c[u];return this},normalizeNormals:function(){for(var t,e,n,r,i=this.attributes.normal.array,a=0,o=i.length;a<o;a+=3)t=i[a],e=i[a+1],n=i[a+2],r=1/Math.sqrt(t*t+e*e+n*n),i[a]*=r,i[a+1]*=r,i[a+2]*=r},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new i.BufferGeometry,e=this.index.array,n=this.attributes;for(var r in n){for(var a=n[r],o=a.array,s=a.itemSize,c=new o.constructor(e.length*s),l=0,u=0,h=0,f=e.length;h<f;h++){l=e[h]*s;for(var p=0;p<s;p++)c[u++]=o[l++]}t.addAttribute(r,new i.BufferAttribute(c,s))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var a=this.attributes;for(var n in a){var o=a[n],i=Array.prototype.slice.call(o.array);t.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new i.BufferGeometry).copy(this)},copy:function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var a=t.groups,o=0,s=a.length;o<s;o++){var c=a[o];this.addGroup(c.start,c.count,c.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),i.BufferGeometry.MaxIndex=65535,i.InstancedBufferGeometry=function(){i.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0},i.InstancedBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.InstancedBufferGeometry.prototype.constructor=i.InstancedBufferGeometry,i.InstancedBufferGeometry.prototype.addGroup=function(t,e,n){this.groups.push({start:t,count:e,instances:n})},i.InstancedBufferGeometry.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var a=t.groups,o=0,s=a.length;o<s;o++){var c=a[o];this.addGroup(c.start,c.count,c.instances)}return this},i.Uniform=function(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t,this.dynamic=!1},i.Uniform.prototype={constructor:i.Uniform,onUpdate:function(t){return this.dynamic=!0,this.onUpdateCallback=t,this}},i.AnimationAction=function(){throw Error("THREE.AnimationAction: Use mixer.clipAction for construction.")},i.AnimationAction._new=function(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,a=r.length,o=Array(a),s={endingStart:i.ZeroCurvatureEnding,endingEnd:i.ZeroCurvatureEnding},c=0;c!==a;++c){var l=r[c].createInterpolant(null);o[c]=l,l.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=i.LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0},i.AnimationAction._new.prototype={constructor:i.AnimationAction._new,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){this._startTime;return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){this._mixer;if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,a=i/r,o=r/i;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+n,c[0]=t/o,c[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){var i=this._startTime;if(null!==i){var a=(t-i)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulate(r,s)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,r=this.loop,a=this._loopCount;if(r===i.LoopOnce){a===-1&&(this.loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=r===i.LoopPingPong;if(a===-1&&(t>=0?(a=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var s=Math.floor(e/n);e-=n*s,a+=Math.abs(s);var c=this.repetitions-a;if(c<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===c){var l=t<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(o&&1===(1&a))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=i.ZeroSlopeEnding,r.endingEnd=i.ZeroSlopeEnding):(t?r.endingStart=this.zeroSlopeAtStart?i.ZeroSlopeEnding:i.ZeroCurvatureEnding:r.endingStart=i.WrapAroundEnding,e?r.endingEnd=this.zeroSlopeAtEnd?i.ZeroSlopeEnding:i.ZeroCurvatureEnding:r.endingEnd=i.WrapAroundEnding)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=e,o[1]=i+t,s[1]=n,this}},i.AnimationClip=function(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=i.Math.generateUUID(),this.duration<0&&this.resetDuration(),this.trim(),this.optimize()},i.AnimationClip.prototype={constructor:i.AnimationClip,resetDuration:function(){for(var t=this.tracks,e=0,n=0,r=t.length;n!==r;++n){
var i=this.tracks[n];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(i.AnimationClip,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),a=0,o=n.length;a!==o;++a)e.push(i.KeyframeTrack.parse(n[a]).scale(r));return new i.AnimationClip(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e},a=0,o=n.length;a!==o;++a)e.push(i.KeyframeTrack.toJSON(n[a]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var a=e.length,o=[],s=0;s<a;s++){var c=[],l=[];c.push((s+a-1)%a,s,(s+1)%a),l.push(0,1,0);var u=i.AnimationUtils.getKeyframeOrder(c);c=i.AnimationUtils.sortedArray(c,1,u),l=i.AnimationUtils.sortedArray(l,1,u),r||0!==c[0]||(c.push(a),l.push(l[0])),o.push(new i.NumberKeyframeTrack(".morphTargetInfluences["+e[s].name+"]",c,l).scale(1/n))}return new i.AnimationClip(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},a=/^([\w-]*?)([\d]+)$/,o=0,s=t.length;o<s;o++){var c=t[o],l=c.name.match(a);if(l&&l.length>1){var u=l[1],h=r[u];h||(r[u]=h=[]),h.push(c)}}var f=[];for(var u in r)f.push(i.AnimationClip.CreateFromMorphTargetSequence(u,r[u],e,n));return f},parseAnimation:function(t,e,n){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var r=function(t,e,n,r,a){if(0!==n.length){var o=[],s=[];i.AnimationUtils.flattenJSON(n,o,s,r),0!==o.length&&a.push(new t(e,o,s))}},a=[],o=t.name||"default",s=t.length||-1,c=t.fps||30,l=t.hierarchy||[],u=0;u<l.length;u++){var h=l[u].keys;if(h&&0!==h.length)if(h[0].morphTargets){for(var f={},p=0;p<h.length;p++)if(h[p].morphTargets)for(var d=0;d<h[p].morphTargets.length;d++)f[h[p].morphTargets[d]]=-1;for(var m in f){for(var g=[],v=[],d=0;d!==h[p].morphTargets.length;++d){var y=h[p];g.push(y.time),v.push(y.morphTarget===m?1:0)}a.push(new i.NumberKeyframeTrack(".morphTargetInfluence["+m+"]",g,v))}s=f.length*(c||1)}else{var b=".bones["+e[u].name+"]";r(i.VectorKeyframeTrack,b+".position",h,"pos",a),r(i.QuaternionKeyframeTrack,b+".quaternion",h,"rot",a),r(i.VectorKeyframeTrack,b+".scale",h,"scl",a)}}if(0===a.length)return null;var x=new i.AnimationClip(o,s,a);return x}}),i.AnimationMixer=function(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1},Object.assign(i.AnimationMixer.prototype,i.EventDispatcher.prototype,{clipAction:function(t,e){var n=e||this._root,r=n.uuid,a="string"==typeof t?i.AnimationClip.findByName(n,t):t,o=null!==a?a.uuid:t,s=this._actionsByClip[o],c=null;if(void 0!==s){var l=s.actionByRoot[r];if(void 0!==l)return l;c=s.knownActions[0],null===a&&(a=c._clip)}if(null===a)return null;var u=new i.AnimationMixer._Action(this,a,e);return this._bindAction(u,c),this._addInactiveAction(u,o,r),u},existingAction:function(t,e){var n=e||this._root,r=n.uuid,a="string"==typeof t?i.AnimationClip.findByName(n,t):t,o=a?a.uuid:t,s=this._actionsByClip[o];return void 0!==s?s.actionByRoot[r]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o){var s=e[o];s.enabled&&s._update(r,t,i,a)}for(var c=this._bindings,l=this._nActiveBindings,o=0;o!==l;++o)c[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var c=a[o];this._deactivateAction(c);var l=c._cacheIndex,u=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,e[l]=u,e.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,a=i[e];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[e];if(void 0!==s)for(var c in s){var l=s[c];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),i.AnimationMixer._Action=i.AnimationAction._new,Object.assign(i.AnimationMixer.prototype,{_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,a=r.length,o=t._propertyBindings,s=t._interpolants,c=n.uuid,l=this._bindingsByRootAndName,u=l[c];void 0===u&&(u={},l[c]=u);for(var h=0;h!==a;++h){var f=r[h],p=f.name,d=u[p];if(void 0!==d)o[h]=d;else{if(d=o[h],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,c,p));continue}var m=e&&e._propertyBindings[h].binding.parsedPath;d=new i.PropertyMixer(i.PropertyBinding.create(n,p,m),f.ValueTypeName,f.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,c,p),o[h]=d}s[h].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,a=i[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=r.length,r.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,c=s[s.length-1],l=t._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),t._byClipCacheIndex=null;var u=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],a=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=e[e.length-1],c=t._cacheIndex;s._cacheIndex=c,e[c]=s,e.pop(),delete o[i];t:{for(var l in o)break t;delete a[r]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new i.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),i.AnimationObjectGroup=function(t){this.uuid=i.Math.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}},i.AnimationObjectGroup.prototype={constructor:i.AnimationObjectGroup,add:function(t){for(var e=this._objects,n=e.length,r=this.nCachedObjects_,a=this._indicesByUUID,o=this._paths,s=this._parsedPaths,c=this._bindings,l=c.length,u=0,h=arguments.length;u!==h;++u){var f=arguments[u],p=f.uuid,d=a[p];if(void 0===d){d=n++,a[p]=d,e.push(f);for(var m=0,g=l;m!==g;++m)c[m].push(new i.PropertyBinding(f,o[m],s[m]))}else if(d<r){var v=e[d],y=--r,b=e[y];a[b.uuid]=d,e[d]=b,a[p]=y,e[y]=f;for(var m=0,g=l;m!==g;++m){var x=c[m],w=x[y],_=x[d];x[d]=w,void 0===_&&(_=new i.PropertyBinding(f,o[m],s[m])),x[y]=_}}else e[d]!==v&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(t){for(var e=this._objects,n=(e.length,this.nCachedObjects_),r=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o],l=c.uuid,u=r[l];if(void 0!==u&&u>=n){var h=n++,f=e[h];r[f.uuid]=u,e[u]=f,r[l]=h,e[h]=c;for(var p=0,d=a;p!==d;++p){var m=i[p],g=m[h],v=m[u];m[u]=g,m[h]=v}}}this.nCachedObjects_=n},uncache:function(t){for(var e=this._objects,n=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,a=this._bindings,o=a.length,s=0,c=arguments.length;s!==c;++s){var l=arguments[s],u=l.uuid,h=i[u];if(void 0!==h)if(delete i[u],h<r){var f=--r,p=e[f],d=--n,m=e[d];i[p.uuid]=h,e[h]=p,i[m.uuid]=f,e[f]=m,e.pop();for(var g=0,v=o;g!==v;++g){var y=a[g],b=y[f],x=y[d];y[h]=b,y[f]=x,y.pop()}}else{var d=--n,m=e[d];i[m.uuid]=h,e[h]=m,e.pop();for(var g=0,v=o;g!==v;++g){var y=a[g];y[h]=y[d],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],a=this._bindings;if(void 0!==r)return a[r];var o=this._paths,s=this._parsedPaths,c=this._objects,l=c.length,u=this.nCachedObjects_,h=Array(l);r=a.length,n[t]=r,o.push(t),s.push(e),a.push(h);for(var f=u,p=c.length;f!==p;++f){var d=c[f];h[f]=new i.PropertyBinding(d,t,e)}return h},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],c=t[o];e[c]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}},i.AnimationUtils={arraySlice:function(t,e,n){return i.AnimationUtils.isTypedArray(t)?new t.constructor(t.subarray(e,n)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,r=Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*e,c=0;c!==e;++c)i[o++]=t[s+c];return i},flattenJSON:function(t,e,n,r){for(var i=1,a=t[0];void 0!==a&&void 0===a[r];)a=t[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o)){do o=a[r],void 0!==o&&(e.push(a.time),n.push.apply(n,o)),a=t[i++];while(void 0!==a)}else if(void 0!==o.toArray){do o=a[r],void 0!==o&&(e.push(a.time),o.toArray(n,n.length)),a=t[i++];while(void 0!==a)}else do o=a[r],void 0!==o&&(e.push(a.time),n.push(o)),a=t[i++];while(void 0!==a)}}},i.KeyframeTrack=function(t,e,n,r){if(void 0===t)throw Error("track name is undefined");if(void 0===e||0===e.length)throw Error("no keyframes in track named "+t);this.name=t,this.times=i.AnimationUtils.convertArray(e,this.TimeBufferType),this.values=i.AnimationUtils.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()},i.KeyframeTrack.prototype={constructor:i.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:i.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(t){return new i.DiscreteInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new i.LinearInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new i.CubicInterpolant(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case i.InterpolateDiscrete:e=this.InterpolantFactoryMethodDiscrete;break;case i.InterpolateLinear:e=this.InterpolantFactoryMethodLinear;break;case i.InterpolateSmooth:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(n)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return i.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return i.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return i.InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,a=0,o=r-1;a!==r&&n[a]<t;)++a;for(;o!==-1&&n[o]>e;)--o;if(++o,0!==a||o!==r){a>=o&&(o=Math.max(o,1),a=o-1);var s=this.getValueSize();this.times=i.AnimationUtils.arraySlice(n,a,o),this.values=i.AnimationUtils.arraySlice(this.values,a*s,o*s)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("invalid value size in track",this),t=!1);var n=this.times,r=this.values,a=n.length;0===a&&(console.error("track is empty",this),t=!1);for(var o=null,s=0;s!==a;s++){var c=n[s];if("number"==typeof c&&isNaN(c)){console.error("time is not a valid number",this,s,c),t=!1;break}if(null!==o&&o>c){console.error("out of order keys",this,s,c,o),t=!1;break}o=c}if(void 0!==r&&i.AnimationUtils.isTypedArray(r))for(var s=0,l=r.length;s!==l;++s){var u=r[s];if(isNaN(u)){console.error("value is not a valid number",this,s,u),t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=1,a=1,o=t.length-1;a<=o;++a){var s=!1,c=t[a],l=t[a+1];if(c!==l&&(1!==a||c!==c[0]))for(var u=a*n,h=u-n,f=u+n,p=0;p!==n;++p){var d=e[u+p];if(d!==e[h+p]||d!==e[f+p]){s=!0;break}}if(s){if(a!==r){t[r]=t[a];for(var m=a*n,g=r*n,p=0;p!==n;++p)e[g+p]=e[m+p]}++r}}return r!==t.length&&(this.times=i.AnimationUtils.arraySlice(t,0,r),this.values=i.AnimationUtils.arraySlice(e,0,r*n)),this}},Object.assign(i.KeyframeTrack,{parse:function(t){if(void 0===t.type)throw Error("track type undefined, can not parse");var e=i.KeyframeTrack._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],r=[];i.AnimationUtils.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:i.AnimationUtils.convertArray(t.times,Array),values:i.AnimationUtils.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return i.NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return i.VectorKeyframeTrack;case"color":return i.ColorKeyframeTrack;case"quaternion":return i.QuaternionKeyframeTrack;case"bool":case"boolean":return i.BooleanKeyframeTrack;case"string":return i.StringKeyframeTrack}throw Error("Unsupported typeName: "+t)}}),i.PropertyBinding=function(t,e,n){this.path=e,this.parsedPath=n||i.PropertyBinding.parseTrackName(e),this.node=i.PropertyBinding.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t},i.PropertyBinding.prototype={constructor:i.PropertyBinding,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,a=e.propertyIndex;if(t||(t=i.PropertyBinding.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[n])return void console.error("  can not bind to objectName of node, undefined",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[o]}}var c=t[r];if(void 0===c){var l=e.nodeName;return void console.error("  trying to update property for track: "+l+"."+r+" but it wasn't found.",t)}var u=this.Versioning.None;void 0!==t.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var h=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(t.geometry.morphTargets[s].name===a){a=s;break}}h=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=a}else void 0!==c.fromArray&&void 0!==c.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=c):void 0!==c.length?(h=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(i.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:i.PropertyBinding.prototype.getValue,_setValue_unbound:i.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),i.PropertyBinding.Composite=function(t,e,n){var r=n||i.PropertyBinding.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)},i.PropertyBinding.Composite.prototype={constructor:i.PropertyBinding.Composite,getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},i.PropertyBinding.create=function(t,e,n){return t instanceof i.AnimationObjectGroup?new i.PropertyBinding.Composite(t,e,n):new i.PropertyBinding(t,e,n)},i.PropertyBinding.parseTrackName=function(t){var e=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,n=e.exec(t);if(!n)throw Error("cannot parse trackName at all: "+t);n.index===e.lastIndex&&e.lastIndex++;var r={nodeName:n[3],objectName:n[5],objectIndex:n[7],propertyName:n[9],propertyIndex:n[11]};if(null===r.propertyName||0===r.propertyName.length)throw Error("can not parse propertyName from trackName: "+t);return r},i.PropertyBinding.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=function(t){for(var n=0;n<t.bones.length;n++){var r=t.bones[n];if(r.name===e)return r}return null},r=n(t.skeleton);if(r)return r}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var a=i(r.children);if(a)return a}return null},a=i(t.children);if(a)return a}return null},i.PropertyMixer=function(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0},i.PropertyMixer.prototype={constructor:i.PropertyMixer,accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=e}else{a+=e;var s=e/a;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*e;this._mixBufferRegion(n,r,o,1-i,e)}for(var s=e,c=e+e;s!==c;++s)if(n[s]!==n[s+e]){a.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var i=n,a=r;i!==a;++i)e[i]=e[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,r,a){i.Quaternion.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*r}}},i.BooleanKeyframeTrack=function(t,e,n){i.KeyframeTrack.call(this,t,e,n)},i.BooleanKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:i.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),i.ColorKeyframeTrack=function(t,e,n,r){i.KeyframeTrack.call(this,t,e,n,r)},i.ColorKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.ColorKeyframeTrack,ValueTypeName:"color"}),i.NumberKeyframeTrack=function(t,e,n,r){i.KeyframeTrack.call(this,t,e,n,r)},i.NumberKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.NumberKeyframeTrack,ValueTypeName:"number"}),i.QuaternionKeyframeTrack=function(t,e,n,r){i.KeyframeTrack.call(this,t,e,n,r)},i.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:i.InterpolateLinear,InterpolantFactoryMethodLinear:function(t){return new i.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),i.StringKeyframeTrack=function(t,e,n,r){i.KeyframeTrack.call(this,t,e,n,r)},i.StringKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:i.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),i.VectorKeyframeTrack=function(t,e,n,r){i.KeyframeTrack.call(this,t,e,n,r)},i.VectorKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.VectorKeyframeTrack,ValueTypeName:"vector"}),i.Audio=function(t){i.Object3D.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]},i.Audio.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.Audio,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.source.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.source.buffer,t.loop=this.source.loop,t.onended=this.source.onended,t.start(0,this.startTime),t.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=t)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),i.AudioAnalyser=function(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)},Object.assign(i.AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.defineProperty(i,"AudioContext",{get:function(){var t;return function(){return void 0===t&&(t=new(window.AudioContext||window.webkitAudioContext)),t}}()}),i.PositionalAudio=function(t){i.Audio.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},i.PositionalAudio.prototype=Object.assign(Object.create(i.Audio.prototype),{constructor:i.PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new i.Vector3;return function(e){i.Object3D.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),i.AudioListener=function(){i.Object3D.call(this),this.type="AudioListener",this.context=i.AudioContext,this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null},i.AudioListener.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),
this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new i.Vector3,e=new i.Quaternion,n=new i.Vector3,r=new i.Vector3;return function(a){i.Object3D.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener,s=this.up;this.matrixWorld.decompose(t,e,n),r.set(0,0,-1).applyQuaternion(e),o.setPosition(t.x,t.y,t.z),o.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),i.Camera=function(){i.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new i.Matrix4,this.projectionMatrix=new i.Matrix4},i.Camera.prototype=Object.create(i.Object3D.prototype),i.Camera.prototype.constructor=i.Camera,i.Camera.prototype.getWorldDirection=function(){var t=new i.Quaternion;return function(e){var n=e||new i.Vector3;return this.getWorldQuaternion(t),n.set(0,0,-1).applyQuaternion(t)}}(),i.Camera.prototype.lookAt=function(){var t=new i.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),i.Camera.prototype.clone=function(){return(new this.constructor).copy(this)},i.Camera.prototype.copy=function(t){return i.Object3D.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},i.CubeCamera=function(t,e,n){i.Object3D.call(this),this.type="CubeCamera";var r=90,a=1,o=new i.PerspectiveCamera(r,a,t,e);o.up.set(0,-1,0),o.lookAt(new i.Vector3(1,0,0)),this.add(o);var s=new i.PerspectiveCamera(r,a,t,e);s.up.set(0,-1,0),s.lookAt(new i.Vector3(-1,0,0)),this.add(s);var c=new i.PerspectiveCamera(r,a,t,e);c.up.set(0,0,1),c.lookAt(new i.Vector3(0,1,0)),this.add(c);var l=new i.PerspectiveCamera(r,a,t,e);l.up.set(0,0,-1),l.lookAt(new i.Vector3(0,-1,0)),this.add(l);var u=new i.PerspectiveCamera(r,a,t,e);u.up.set(0,-1,0),u.lookAt(new i.Vector3(0,0,1)),this.add(u);var h=new i.PerspectiveCamera(r,a,t,e);h.up.set(0,-1,0),h.lookAt(new i.Vector3(0,0,-1)),this.add(h);var f={format:i.RGBFormat,magFilter:i.LinearFilter,minFilter:i.LinearFilter};this.renderTarget=new i.WebGLRenderTargetCube(n,n,f),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,o,n),n.activeCubeFace=1,t.render(e,s,n),n.activeCubeFace=2,t.render(e,c,n),n.activeCubeFace=3,t.render(e,l,n),n.activeCubeFace=4,t.render(e,u,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,t.render(e,h,n),t.setRenderTarget(null)}},i.CubeCamera.prototype=Object.create(i.Object3D.prototype),i.CubeCamera.prototype.constructor=i.CubeCamera,i.OrthographicCamera=function(t,e,n,r,a,o){i.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=void 0!==a?a:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},i.OrthographicCamera.prototype=Object.assign(Object.create(i.Camera.prototype),{constructor:i.OrthographicCamera,copy:function(t){return i.Camera.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,a){this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:r,width:i,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,a=n+t,o=r+e,s=r-e;if(null!==this.view){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=u*(this.view.offsetX/c),a=i+u*(this.view.width/c),o-=h*(this.view.offsetY/l),s=o-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far)},toJSON:function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),i.PerspectiveCamera=function(t,e,n,r){i.Camera.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype=Object.assign(Object.create(i.Camera.prototype),{constructor:i.PerspectiveCamera,copy:function(t){return i.Camera.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*i.Math.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*i.Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*i.Math.RAD2DEG*Math.atan(Math.tan(.5*i.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,a){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:r,width:i,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*i.Math.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,a=-.5*r,o=this.view;if(null!==o){var s=o.fullWidth,c=o.fullHeight;a+=o.offsetX*r/s,e-=o.offsetY*n/c,r*=o.width/s,n*=o.height/c}var l=this.filmOffset;0!==l&&(a+=t*l/this.getFilmWidth()),this.projectionMatrix.makeFrustum(a,a+r,e-n,e,t,this.far)},toJSON:function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),i.StereoCamera=function(){this.type="StereoCamera",this.aspect=1,this.cameraL=new i.PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new i.PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1},Object.assign(i.StereoCamera.prototype,{update:function(){var t,e,n,r,a,o=new i.Matrix4,s=new i.Matrix4;return function(c){var l=t!==c.focus||e!==c.fov||n!==c.aspect*this.aspect||r!==c.near||a!==c.far;if(l){t=c.focus,e=c.fov,n=c.aspect*this.aspect,r=c.near,a=c.far;var u,h,f=c.projectionMatrix.clone(),p=.032,d=p*r/t,m=r*Math.tan(i.Math.DEG2RAD*e*.5);s.elements[12]=-p,o.elements[12]=p,u=-m*n+d,h=m*n+d,f.elements[0]=2*r/(h-u),f.elements[8]=(h+u)/(h-u),this.cameraL.projectionMatrix.copy(f),u=-m*n-d,h=m*n-d,f.elements[0]=2*r/(h-u),f.elements[8]=(h+u)/(h-u),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(s),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(o)}}()}),i.Light=function(t,e){i.Object3D.call(this),this.type="Light",this.color=new i.Color(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0},i.Light.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.Light,copy:function(t){return i.Object3D.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),e}}),i.LightShadow=function(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i.Vector2(512,512),this.map=null,this.matrix=new i.Matrix4},Object.assign(i.LightShadow.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)}}),i.AmbientLight=function(t,e){i.Light.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0},i.AmbientLight.prototype=Object.assign(Object.create(i.Light.prototype),{constructor:i.AmbientLight}),i.DirectionalLight=function(t,e){i.Light.call(this,t,e),this.type="DirectionalLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new i.Object3D,this.shadow=new i.DirectionalLightShadow},i.DirectionalLight.prototype=Object.assign(Object.create(i.Light.prototype),{constructor:i.DirectionalLight,copy:function(t){return i.Light.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),i.DirectionalLightShadow=function(t){i.LightShadow.call(this,new i.OrthographicCamera(-5,5,5,-5,.5,500))},i.DirectionalLightShadow.prototype=Object.assign(Object.create(i.LightShadow.prototype),{constructor:i.DirectionalLightShadow}),i.HemisphereLight=function(t,e,n){i.Light.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.set(0,1,0),this.updateMatrix(),this.groundColor=new i.Color(e)},i.HemisphereLight.prototype=Object.assign(Object.create(i.Light.prototype),{constructor:i.HemisphereLight,copy:function(t){return i.Light.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),i.PointLight=function(t,e,n,r){i.Light.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new i.LightShadow(new i.PerspectiveCamera(90,1,.5,500))},i.PointLight.prototype=Object.assign(Object.create(i.Light.prototype),{constructor:i.PointLight,copy:function(t){return i.Light.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),i.SpotLight=function(t,e,n,r,a,o){i.Light.call(this,t,e),this.type="SpotLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new i.Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==a?a:0,this.decay=void 0!==o?o:1,this.shadow=new i.SpotLightShadow},i.SpotLight.prototype=Object.assign(Object.create(i.Light.prototype),{constructor:i.SpotLight,copy:function(t){return i.Light.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),i.SpotLightShadow=function(){i.LightShadow.call(this,new i.PerspectiveCamera(50,1,.5,500))},i.SpotLightShadow.prototype=Object.assign(Object.create(i.LightShadow.prototype),{constructor:i.SpotLightShadow,update:function(t){var e=2*i.Math.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height,r=t.distance||500,a=this.camera;e===a.fov&&n===a.aspect&&r===a.far||(a.fov=e,a.aspect=n,a.far=r,a.updateProjectionMatrix())}}),i.AudioLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},Object.assign(i.AudioLoader.prototype,{load:function(t,e,n,r){var a=new i.XHRLoader(this.manager);a.setResponseType("arraybuffer"),a.load(t,function(t){var n=i.AudioContext;n.decodeAudioData(t,function(t){e(t)})},n,r)}}),i.Cache={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},i.Loader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},i.Loader.prototype={constructor:i.Loader,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,n){for(var r=[],i=0;i<t.length;++i)r[i]=this.createMaterial(t[i],e,n);return r},createMaterial:function(){var t,e,n;return function(r,a,o){function s(t,n,r,s,l){var u,h=a+t,f=i.Loader.Handlers.get(h);null!==f?u=f.load(h):(e.setCrossOrigin(o),u=e.load(h)),void 0!==n&&(u.repeat.fromArray(n),1!==n[0]&&(u.wrapS=i.RepeatWrapping),1!==n[1]&&(u.wrapT=i.RepeatWrapping)),void 0!==r&&u.offset.fromArray(r),void 0!==s&&("repeat"===s[0]&&(u.wrapS=i.RepeatWrapping),"mirror"===s[0]&&(u.wrapS=i.MirroredRepeatWrapping),"repeat"===s[1]&&(u.wrapT=i.RepeatWrapping),"mirror"===s[1]&&(u.wrapT=i.MirroredRepeatWrapping)),void 0!==l&&(u.anisotropy=l);var p=i.Math.generateUUID();return c[p]=u,p}void 0===t&&(t=new i.Color),void 0===e&&(e=new i.TextureLoader),void 0===n&&(n=new i.MaterialLoader);var c={},l={uuid:i.Math.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var h=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=i[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":l.color=t.fromArray(h).getHex();break;case"colorSpecular":l.specular=t.fromArray(h).getHex();break;case"colorEmissive":l.emissive=t.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=i.BackSide;break;case"doubleSided":l.side=i.DoubleSide;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[u]=h;break;case"vertexColors":h===!0&&(l.vertexColors=i.VertexColors),"face"===h&&(l.vertexColors=i.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),n.setTextures(c),n.parse(l)}}()},i.Loader.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n],a=e[n+1];if(i.test(t))return a}return null}},i.XHRLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},Object.assign(i.XHRLoader.prototype,{load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t);var a=this,o=i.Cache.get(t);if(void 0!==o)return e&&setTimeout(function(){e(o)},0),o;var s=new XMLHttpRequest;return s.overrideMimeType("text/plain"),s.open("GET",t,!0),s.addEventListener("load",function(n){var o=n.target.response;i.Cache.add(t,o),200===this.status?(e&&e(o),a.manager.itemEnd(t)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),e&&e(o),a.manager.itemEnd(t)):(r&&r(n),a.manager.itemError(t))},!1),void 0!==n&&s.addEventListener("progress",function(t){n(t)},!1),s.addEventListener("error",function(e){r&&r(e),a.manager.itemError(t)},!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.send(null),a.manager.itemStart(t),s},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this}}),i.FontLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},Object.assign(i.FontLoader.prototype,{load:function(t,e,n,r){var a=this,o=new i.XHRLoader(this.manager);o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var r=a.parse(n);e&&e(r)},n,r)},parse:function(t){return new i.Font(t)}}),i.ImageLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},Object.assign(i.ImageLoader.prototype,{load:function(t,e,n,r){var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(a.onload=function(){URL.revokeObjectURL(a.src),e&&e(a)},0===t.indexOf("data:"))a.src=t;else{var o=new i.XHRLoader(this.manager);o.setPath(this.path),o.setResponseType("blob"),o.load(t,function(t){a.src=URL.createObjectURL(t)},n,r)}return a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),i.JSONLoader=function(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:i.DefaultLoadingManager,this.withCredentials=!1},Object.assign(i.JSONLoader.prototype,{load:function(t,e,n,r){var a=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:i.Loader.prototype.extractUrlBase(t),s=new i.XHRLoader(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,function(n){var r=JSON.parse(n),i=r.metadata;if(void 0!==i){var s=i.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var c=a.parse(r,o);e(c.geometry,c.materials)},n,r)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){function n(e){function n(t,e){return t&1<<e}var r,a,o,c,l,u,h,f,p,d,m,g,v,y,b,x,w,_,E,M,T,S,A,C,k,L,R,P=t.faces,D=t.vertices,B=t.normals,N=t.colors,O=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&O++;for(r=0;r<O;r++)s.faceVertexUvs[r]=[]}for(c=0,l=D.length;c<l;)_=new i.Vector3,_.x=D[c++]*e,_.y=D[c++]*e,_.z=D[c++]*e,s.vertices.push(_);for(c=0,l=P.length;c<l;)if(d=P[c++],m=n(d,0),g=n(d,1),v=n(d,3),y=n(d,4),b=n(d,5),x=n(d,6),w=n(d,7),m){if(M=new i.Face3,M.a=P[c],M.b=P[c+1],M.c=P[c+3],T=new i.Face3,T.a=P[c+1],T.b=P[c+2],T.c=P[c+3],c+=4,g&&(p=P[c++],M.materialIndex=p,T.materialIndex=p),o=s.faces.length,v)for(r=0;r<O;r++)for(C=t.uvs[r],s.faceVertexUvs[r][o]=[],s.faceVertexUvs[r][o+1]=[],a=0;a<4;a++)f=P[c++],L=C[2*f],R=C[2*f+1],k=new i.Vector2(L,R),2!==a&&s.faceVertexUvs[r][o].push(k),0!==a&&s.faceVertexUvs[r][o+1].push(k);if(y&&(h=3*P[c++],M.normal.set(B[h++],B[h++],B[h]),T.normal.copy(M.normal)),b)for(r=0;r<4;r++)h=3*P[c++],A=new i.Vector3(B[h++],B[h++],B[h]),2!==r&&M.vertexNormals.push(A),0!==r&&T.vertexNormals.push(A);if(x&&(u=P[c++],S=N[u],M.color.setHex(S),T.color.setHex(S)),w)for(r=0;r<4;r++)u=P[c++],S=N[u],2!==r&&M.vertexColors.push(new i.Color(S)),0!==r&&T.vertexColors.push(new i.Color(S));s.faces.push(M),s.faces.push(T)}else{if(E=new i.Face3,E.a=P[c++],E.b=P[c++],E.c=P[c++],g&&(p=P[c++],E.materialIndex=p),o=s.faces.length,v)for(r=0;r<O;r++)for(C=t.uvs[r],s.faceVertexUvs[r][o]=[],a=0;a<3;a++)f=P[c++],L=C[2*f],R=C[2*f+1],k=new i.Vector2(L,R),s.faceVertexUvs[r][o].push(k);if(y&&(h=3*P[c++],E.normal.set(B[h++],B[h++],B[h])),b)for(r=0;r<3;r++)h=3*P[c++],A=new i.Vector3(B[h++],B[h++],B[h]),E.vertexNormals.push(A);if(x&&(u=P[c++],E.color.setHex(N[u])),w)for(r=0;r<3;r++)u=P[c++],E.vertexColors.push(new i.Color(N[u]));s.faces.push(E)}}function r(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,r=t.skinWeights.length;n<r;n+=e){var a=t.skinWeights[n],o=e>1?t.skinWeights[n+1]:0,c=e>2?t.skinWeights[n+2]:0,l=e>3?t.skinWeights[n+3]:0;s.skinWeights.push(new i.Vector4(a,o,c,l))}if(t.skinIndices)for(var n=0,r=t.skinIndices.length;n<r;n+=e){var u=t.skinIndices[n],h=e>1?t.skinIndices[n+1]:0,f=e>2?t.skinIndices[n+2]:0,p=e>3?t.skinIndices[n+3]:0;s.skinIndices.push(new i.Vector4(u,h,f,p))}s.bones=t.bones,s.bones&&s.bones.length>0&&(s.skinWeights.length!==s.skinIndices.length||s.skinIndices.length!==s.vertices.length)&&console.warn("When skinning, number of vertices ("+s.vertices.length+"), skinIndices ("+s.skinIndices.length+"), and skinWeights ("+s.skinWeights.length+") should match.")}function a(e){if(void 0!==t.morphTargets)for(var n=0,r=t.morphTargets.length;n<r;n++){s.morphTargets[n]={},s.morphTargets[n].name=t.morphTargets[n].name,s.morphTargets[n].vertices=[];for(var a=s.morphTargets[n].vertices,o=t.morphTargets[n].vertices,c=0,l=o.length;c<l;c+=3){var u=new i.Vector3;u.x=o[c]*e,u.y=o[c+1]*e,u.z=o[c+2]*e,a.push(u)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=s.faces,f=t.morphColors[0].colors,n=0,r=h.length;n<r;n++)h[n].color.fromArray(f,3*n)}}function o(){var e=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.animations&&(t.animations.length?n=n.concat(t.animations):n.push(t.animations));for(var r=0;r<n.length;r++){var a=i.AnimationClip.parseAnimation(n[r],s.bones);a&&e.push(a)}if(s.morphTargets){var o=i.AnimationClip.CreateClipsFromMorphTargetSequences(s.morphTargets,10);e=e.concat(o)}e.length>0&&(s.animations=e)}var s=new i.Geometry,c=void 0!==t.scale?1/t.scale:1;if(n(c),r(),a(c),o(),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:s};var l=i.Loader.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:s,materials:l}}}),i.LoadingManager=function(t,e,n){var r=this,i=!1,a=0,o=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,i===!1&&void 0!==r.onStart&&r.onStart(t,a,o),i=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,o),a===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)}},i.DefaultLoadingManager=new i.LoadingManager,i.BufferGeometryLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},Object.assign(i.BufferGeometryLoader.prototype,{load:function(t,e,n,r){var a=this,o=new i.XHRLoader(a.manager);o.load(t,function(t){e(a.parse(JSON.parse(t)))},n,r)},parse:function(t){var e=new i.BufferGeometry,n=t.data.index,r={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var a=new r[n.type](n.array);e.setIndex(new i.BufferAttribute(a,1))}var o=t.data.attributes;for(var s in o){var c=o[s],a=new r[c.type](c.array);e.addAttribute(s,new i.BufferAttribute(a,c.itemSize,c.normalized))}var l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(var u=0,h=l.length;u!==h;++u){var f=l[u];e.addGroup(f.start,f.count,f.materialIndex)}var p=t.data.boundingSphere;if(void 0!==p){var d=new i.Vector3;void 0!==p.center&&d.fromArray(p.center),e.boundingSphere=new i.Sphere(d,p.radius)}return e}}),i.MaterialLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager,this.textures={}},Object.assign(i.MaterialLoader.prototype,{load:function(t,e,n,r){var a=this,o=new i.XHRLoader(a.manager);o.load(t,function(t){e(a.parse(JSON.parse(t)))},n,r)},setTextures:function(t){this.textures=t},getTexture:function(t){var e=this.textures;return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]},parse:function(t){var e=new i[t.type];if(void 0!==t.uuid&&(e.uuid=t.uuid),void 0!==t.name&&(e.name=t.name),void 0!==t.color&&e.color.setHex(t.color),void 0!==t.roughness&&(e.roughness=t.roughness),void 0!==t.metalness&&(e.metalness=t.metalness),void 0!==t.emissive&&e.emissive.setHex(t.emissive),void 0!==t.specular&&e.specular.setHex(t.specular),void 0!==t.shininess&&(e.shininess=t.shininess),void 0!==t.uniforms&&(e.uniforms=t.uniforms),void 0!==t.vertexShader&&(e.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(e.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(e.vertexColors=t.vertexColors),void 0!==t.shading&&(e.shading=t.shading),void 0!==t.blending&&(e.blending=t.blending),void 0!==t.side&&(e.side=t.side),void 0!==t.opacity&&(e.opacity=t.opacity),void 0!==t.transparent&&(e.transparent=t.transparent),void 0!==t.alphaTest&&(e.alphaTest=t.alphaTest),void 0!==t.depthTest&&(e.depthTest=t.depthTest),void 0!==t.depthWrite&&(e.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(e.colorWrite=t.colorWrite),void 0!==t.wireframe&&(e.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(e.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.size&&(e.size=t.size),void 0!==t.sizeAttenuation&&(e.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(e.map=this.getTexture(t.map)),void 0!==t.alphaMap&&(e.alphaMap=this.getTexture(t.alphaMap),e.transparent=!0),void 0!==t.bumpMap&&(e.bumpMap=this.getTexture(t.bumpMap)),void 0!==t.bumpScale&&(e.bumpScale=t.bumpScale),void 0!==t.normalMap&&(e.normalMap=this.getTexture(t.normalMap)),void 0!==t.normalScale){var n=t.normalScale;Array.isArray(n)===!1&&(n=[n,n]),e.normalScale=(new i.Vector2).fromArray(n)}if(void 0!==t.displacementMap&&(e.displacementMap=this.getTexture(t.displacementMap)),void 0!==t.displacementScale&&(e.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(e.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(e.roughnessMap=this.getTexture(t.roughnessMap)),void 0!==t.metalnessMap&&(e.metalnessMap=this.getTexture(t.metalnessMap)),void 0!==t.emissiveMap&&(e.emissiveMap=this.getTexture(t.emissiveMap)),void 0!==t.emissiveIntensity&&(e.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(e.specularMap=this.getTexture(t.specularMap)),void 0!==t.envMap&&(e.envMap=this.getTexture(t.envMap),e.combine=i.MultiplyOperation),void 0!==t.reflectivity&&(e.reflectivity=t.reflectivity),void 0!==t.lightMap&&(e.lightMap=this.getTexture(t.lightMap)),void 0!==t.lightMapIntensity&&(e.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(e.aoMap=this.getTexture(t.aoMap)),void 0!==t.aoMapIntensity&&(e.aoMapIntensity=t.aoMapIntensity),void 0!==t.materials)for(var r=0,a=t.materials.length;r<a;r++)e.materials.push(this.parse(t.materials[r]));return e}}),i.ObjectLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager,this.texturePath=""},Object.assign(i.ObjectLoader.prototype,{load:function(t,e,n,r){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var a=this,o=new i.XHRLoader(a.manager);o.load(t,function(t){a.parse(JSON.parse(t),e)},n,r)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseGeometries(t.geometries),r=this.parseImages(t.images,function(){void 0!==e&&e(o)}),i=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,i),o=this.parseObject(t.object,n,a);return t.animations&&(o.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(o),o},parseGeometries:function(t){var e={};if(void 0!==t)for(var n=new i.JSONLoader,r=new i.BufferGeometryLoader,a=0,o=t.length;a<o;a++){var s,c=t[a];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new i[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new i[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new i[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new i[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new i[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new i[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new i[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new i[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new i[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new i[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new i[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"BufferGeometry":s=r.parse(c);break;case"Geometry":s=n.parse(c.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),e[c.uuid]=s}return e},parseMaterials:function(t,e){var n={};if(void 0!==t){var r=new i.MaterialLoader;r.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=r.parse(t[a]);n[s.uuid]=s}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){
var r=i.AnimationClip.parse(t[n]);e.push(r)}return e},parseImages:function(t,e){function n(t){return r.manager.itemStart(t),s.load(t,function(){r.manager.itemEnd(t)})}var r=this,a={};if(void 0!==t&&t.length>0){var o=new i.LoadingManager(e),s=new i.ImageLoader(o);s.setCrossOrigin(this.crossOrigin);for(var c=0,l=t.length;c<l;c++){var u=t[c],h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:r.texturePath+u.url;a[u.uuid]=n(h)}}return a},parseTextures:function(t,e){function n(t){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),i[t])}var r={};if(void 0!==t)for(var a=0,o=t.length;a<o;a++){var s=t[a];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var c=new i.Texture(e[s.image]);c.needsUpdate=!0,c.uuid=s.uuid,void 0!==s.name&&(c.name=s.name),void 0!==s.mapping&&(c.mapping=n(s.mapping)),void 0!==s.offset&&(c.offset=new i.Vector2(s.offset[0],s.offset[1])),void 0!==s.repeat&&(c.repeat=new i.Vector2(s.repeat[0],s.repeat[1])),void 0!==s.minFilter&&(c.minFilter=n(s.minFilter)),void 0!==s.magFilter&&(c.magFilter=n(s.magFilter)),void 0!==s.anisotropy&&(c.anisotropy=s.anisotropy),Array.isArray(s.wrap)&&(c.wrapS=n(s.wrap[0]),c.wrapT=n(s.wrap[1])),r[s.uuid]=c}return r},parseObject:function(){var t=new i.Matrix4;return function(e,n,r){function a(t){return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),n[t]}function o(t){if(void 0!==t)return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),r[t]}var s;switch(e.type){case"Scene":s=new i.Scene;break;case"PerspectiveCamera":s=new i.PerspectiveCamera(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new i.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":s=new i.AmbientLight(e.color,e.intensity);break;case"DirectionalLight":s=new i.DirectionalLight(e.color,e.intensity);break;case"PointLight":s=new i.PointLight(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":s=new i.SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new i.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":var c=a(e.geometry),l=o(e.material);s=c.bones&&c.bones.length>0?new i.SkinnedMesh(c,l):new i.Mesh(c,l);break;case"LOD":s=new i.LOD;break;case"Line":s=new i.Line(a(e.geometry),o(e.material),e.mode);break;case"PointCloud":case"Points":s=new i.Points(a(e.geometry),o(e.material));break;case"Sprite":s=new i.Sprite(o(e.material));break;case"Group":s=new i.Group;break;default:s=new i.Object3D}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.children)for(var u in e.children)s.add(this.parseObject(e.children[u],n,r));if("LOD"===e.type)for(var h=e.levels,f=0;f<h.length;f++){var p=h[f],u=s.getObjectByProperty("uuid",p.object);void 0!==u&&s.addLevel(u,p.distance)}return s}}()}),i.TextureLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},Object.assign(i.TextureLoader.prototype,{load:function(t,e,n,r){var a=new i.Texture,o=new i.ImageLoader(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(t){a.image=t,a.needsUpdate=!0,void 0!==e&&e(a)},n,r),a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),i.CubeTextureLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},Object.assign(i.CubeTextureLoader.prototype,{load:function(t,e,n,r){function a(n){s.load(t[n],function(t){o.images[n]=t,c++,6===c&&(o.needsUpdate=!0,e&&e(o))},void 0,r)}var o=new i.CubeTexture,s=new i.ImageLoader(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);for(var c=0,l=0;l<t.length;++l)a(l);return o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),i.DataTextureLoader=i.BinaryTextureLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager,this._parser=null},Object.assign(i.BinaryTextureLoader.prototype,{load:function(t,e,n,r){var a=this,o=new i.DataTexture,s=new i.XHRLoader(this.manager);return s.setResponseType("arraybuffer"),s.load(t,function(t){var n=a._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:i.ClampToEdgeWrapping,o.wrapT=void 0!==n.wrapT?n.wrapT:i.ClampToEdgeWrapping,o.magFilter=void 0!==n.magFilter?n.magFilter:i.LinearFilter,o.minFilter=void 0!==n.minFilter?n.minFilter:i.LinearMipMapLinearFilter,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=i.LinearFilter),o.needsUpdate=!0,e&&e(o,n))},n,r),o}}),i.CompressedTextureLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager,this._parser=null},Object.assign(i.CompressedTextureLoader.prototype,{load:function(t,e,n,r){function a(a){l.load(t[a],function(t){var n=o._parser(t,!0);s[a]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},u+=1,6===u&&(1===n.mipmapCount&&(c.minFilter=i.LinearFilter),c.format=n.format,c.needsUpdate=!0,e&&e(c))},n,r)}var o=this,s=[],c=new i.CompressedTexture;c.image=s;var l=new i.XHRLoader(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(t))for(var u=0,h=0,f=t.length;h<f;++h)a(h);else l.load(t,function(t){var n=o._parser(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,a=0;a<r;a++){s[a]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)s[a].mipmaps.push(n.mipmaps[a*n.mipmapCount+l]),s[a].format=n.format,s[a].width=n.width,s[a].height=n.height}else c.image.width=n.width,c.image.height=n.height,c.mipmaps=n.mipmaps;1===n.mipmapCount&&(c.minFilter=i.LinearFilter),c.format=n.format,c.needsUpdate=!0,e&&e(c)},n,r);return c},setPath:function(t){return this.path=t,this}}),i.Material=function(){Object.defineProperty(this,"id",{value:i.MaterialIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=i.NormalBlending,this.side=i.FrontSide,this.shading=i.SmoothShading,this.vertexColors=i.NoColors,this.opacity=1,this.transparent=!1,this.blendSrc=i.SrcAlphaFactor,this.blendDst=i.OneMinusSrcAlphaFactor,this.blendEquation=i.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=i.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},i.Material.prototype={constructor:i.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){t===!0&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){var r=this[e];void 0!==r?r instanceof i.Color?r.set(n):r instanceof i.Vector3&&n instanceof i.Vector3?r.copy(n):"overdraw"===e?this[e]=+n:this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var n=void 0===t;n&&(t={textures:{},images:{}});var r={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color instanceof i.Color&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive instanceof i.Color&&(r.emissive=this.emissive.getHex()),this.specular instanceof i.Color&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),this.map instanceof i.Texture&&(r.map=this.map.toJSON(t).uuid),this.alphaMap instanceof i.Texture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap instanceof i.Texture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap instanceof i.Texture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap instanceof i.Texture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap instanceof i.Texture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap instanceof i.Texture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap instanceof i.Texture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap instanceof i.Texture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap instanceof i.Texture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap instanceof i.Texture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==i.NormalBlending&&(r.blending=this.blending),this.shading!==i.SmoothShading&&(r.shading=this.shading),this.side!==i.FrontSide&&(r.side=this.side),this.vertexColors!==i.NoColors&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),n){var a=e(t.textures),o=e(t.images);a.length>0&&(r.textures=a),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(i.Material.prototype,i.EventDispatcher.prototype),i.MaterialIdCount=0,i.LineBasicMaterial=function(t){i.Material.call(this),this.type="LineBasicMaterial",this.color=new i.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)},i.LineBasicMaterial.prototype=Object.create(i.Material.prototype),i.LineBasicMaterial.prototype.constructor=i.LineBasicMaterial,i.LineBasicMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},i.LineDashedMaterial=function(t){i.Material.call(this),this.type="LineDashedMaterial",this.color=new i.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)},i.LineDashedMaterial.prototype=Object.create(i.Material.prototype),i.LineDashedMaterial.prototype.constructor=i.LineDashedMaterial,i.LineDashedMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this},i.MeshBasicMaterial=function(t){i.Material.call(this),this.type="MeshBasicMaterial",this.color=new i.Color(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)},i.MeshBasicMaterial.prototype=Object.create(i.Material.prototype),i.MeshBasicMaterial.prototype.constructor=i.MeshBasicMaterial,i.MeshBasicMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},i.MeshDepthMaterial=function(t){i.Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=i.BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)},i.MeshDepthMaterial.prototype=Object.create(i.Material.prototype),i.MeshDepthMaterial.prototype.constructor=i.MeshDepthMaterial,i.MeshDepthMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},i.MeshLambertMaterial=function(t){i.Material.call(this),this.type="MeshLambertMaterial",this.color=new i.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},i.MeshLambertMaterial.prototype=Object.create(i.Material.prototype),i.MeshLambertMaterial.prototype.constructor=i.MeshLambertMaterial,i.MeshLambertMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},i.MeshNormalMaterial=function(t){i.Material.call(this,t),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.morphTargets=!1,this.setValues(t)},i.MeshNormalMaterial.prototype=Object.create(i.Material.prototype),i.MeshNormalMaterial.prototype.constructor=i.MeshNormalMaterial,i.MeshNormalMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},i.MeshPhongMaterial=function(t){i.Material.call(this),this.type="MeshPhongMaterial",this.color=new i.Color(16777215),this.specular=new i.Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},i.MeshPhongMaterial.prototype=Object.create(i.Material.prototype),i.MeshPhongMaterial.prototype.constructor=i.MeshPhongMaterial,i.MeshPhongMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},i.MeshStandardMaterial=function(t){i.Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new i.Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},i.MeshStandardMaterial.prototype=Object.create(i.Material.prototype),i.MeshStandardMaterial.prototype.constructor=i.MeshStandardMaterial,i.MeshStandardMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},i.MeshPhysicalMaterial=function(t){i.MeshStandardMaterial.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)},i.MeshPhysicalMaterial.prototype=Object.create(i.MeshStandardMaterial.prototype),i.MeshPhysicalMaterial.prototype.constructor=i.MeshPhysicalMaterial,i.MeshPhysicalMaterial.prototype.copy=function(t){return i.MeshStandardMaterial.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},i.MultiMaterial=function(t){this.uuid=i.Math.generateUUID(),this.type="MultiMaterial",this.materials=t instanceof Array?t:[],this.visible=!0},i.MultiMaterial.prototype={constructor:i.MultiMaterial,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,r=0,i=n.length;r<i;r++){var a=n[r].toJSON(t);delete a.metadata,e.materials.push(a)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},i.PointsMaterial=function(t){i.Material.call(this),this.type="PointsMaterial",this.color=new i.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)},i.PointsMaterial.prototype=Object.create(i.Material.prototype),i.PointsMaterial.prototype.constructor=i.PointsMaterial,i.PointsMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},i.ShaderMaterial=function(t){i.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))},i.ShaderMaterial.prototype=Object.create(i.Material.prototype),i.ShaderMaterial.prototype.constructor=i.ShaderMaterial,i.ShaderMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=i.UniformsUtils.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},i.ShaderMaterial.prototype.toJSON=function(t){var e=i.Material.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},i.RawShaderMaterial=function(t){i.ShaderMaterial.call(this,t),this.type="RawShaderMaterial"},i.RawShaderMaterial.prototype=Object.create(i.ShaderMaterial.prototype),i.RawShaderMaterial.prototype.constructor=i.RawShaderMaterial,i.SpriteMaterial=function(t){i.Material.call(this),this.type="SpriteMaterial",this.color=new i.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)},i.SpriteMaterial.prototype=Object.create(i.Material.prototype),i.SpriteMaterial.prototype.constructor=i.SpriteMaterial,i.SpriteMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},i.ShadowMaterial=function(){i.ShaderMaterial.call(this,{uniforms:i.UniformsUtils.merge([i.UniformsLib.lights,{opacity:{value:1}}]),vertexShader:i.ShaderChunk.shadow_vert,fragmentShader:i.ShaderChunk.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}})},i.ShadowMaterial.prototype=Object.create(i.ShaderMaterial.prototype),i.ShadowMaterial.prototype.constructor=i.ShadowMaterial,i.Texture=function(t,e,n,r,a,o,s,c,l,u){Object.defineProperty(this,"id",{value:i.TextureIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==t?t:i.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:i.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:i.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:i.ClampToEdgeWrapping,this.magFilter=void 0!==a?a:i.LinearFilter,this.minFilter=void 0!==o?o:i.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:i.RGBAFormat,this.type=void 0!==c?c:i.UnsignedByteType,this.offset=new i.Vector2(0,0),this.repeat=new i.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:i.LinearEncoding,this.version=0,this.onUpdate=null},i.Texture.DEFAULT_IMAGE=void 0,i.Texture.DEFAULT_MAPPING=i.UVMapping,i.Texture.prototype={constructor:i.Texture,set needsUpdate(t){t===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){function e(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=i.Math.generateUUID()),void 0===t.images[r.uuid]&&(t.images[r.uuid]={uuid:r.uuid,url:e(r)}),n.image=r.uuid}return t.textures[this.uuid]=n,n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===i.UVMapping){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case i.RepeatWrapping:t.x=t.x-Math.floor(t.x);break;case i.ClampToEdgeWrapping:t.x=t.x<0?0:1;break;case i.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case i.RepeatWrapping:t.y=t.y-Math.floor(t.y);break;case i.ClampToEdgeWrapping:t.y=t.y<0?0:1;break;case i.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(i.Texture.prototype,i.EventDispatcher.prototype),i.TextureIdCount=0,i.DepthTexture=function(t,e,n,r,a,o,s,c,l){i.Texture.call(this,null,r,a,o,s,c,i.DepthFormat,n,l),this.image={width:t,height:e},this.type=void 0!==n?n:i.UnsignedShortType,this.magFilter=void 0!==s?s:i.NearestFilter,this.minFilter=void 0!==c?c:i.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},i.DepthTexture.prototype=Object.create(i.Texture.prototype),i.DepthTexture.prototype.constructor=i.DepthTexture,i.CanvasTexture=function(t,e,n,r,a,o,s,c,l){i.Texture.call(this,t,e,n,r,a,o,s,c,l),this.needsUpdate=!0},i.CanvasTexture.prototype=Object.create(i.Texture.prototype),i.CanvasTexture.prototype.constructor=i.CanvasTexture,i.CubeTexture=function(t,e,n,r,a,o,s,c,l,u){t=void 0!==t?t:[],e=void 0!==e?e:i.CubeReflectionMapping,i.Texture.call(this,t,e,n,r,a,o,s,c,l,u),this.flipY=!1},i.CubeTexture.prototype=Object.create(i.Texture.prototype),i.CubeTexture.prototype.constructor=i.CubeTexture,Object.defineProperty(i.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),i.CompressedTexture=function(t,e,n,r,a,o,s,c,l,u,h,f){i.Texture.call(this,null,o,s,c,l,u,r,a,h,f),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1},i.CompressedTexture.prototype=Object.create(i.Texture.prototype),i.CompressedTexture.prototype.constructor=i.CompressedTexture,i.DataTexture=function(t,e,n,r,a,o,s,c,l,u,h,f){i.Texture.call(this,null,o,s,c,l,u,r,a,h,f),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:i.NearestFilter,this.minFilter=void 0!==u?u:i.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},i.DataTexture.prototype=Object.create(i.Texture.prototype),i.DataTexture.prototype.constructor=i.DataTexture,i.VideoTexture=function(t,e,n,r,a,o,s,c,l){function u(){requestAnimationFrame(u),t.readyState>=t.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}i.Texture.call(this,t,e,n,r,a,o,s,c,l),this.generateMipmaps=!1;var h=this;u()},i.VideoTexture.prototype=Object.create(i.Texture.prototype),i.VideoTexture.prototype.constructor=i.VideoTexture,i.Group=function(){i.Object3D.call(this),this.type="Group"},i.Group.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.Group}),i.Points=function(t,e){i.Object3D.call(this),this.type="Points",this.geometry=void 0!==t?t:new i.BufferGeometry,this.material=void 0!==e?e:new i.PointsMaterial({color:16777215*Math.random()})},i.Points.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.Points,raycast:function(){var t=new i.Matrix4,e=new i.Ray,n=new i.Sphere;return function(r,a){function o(t,n){var i=e.distanceSqToPoint(t);if(i<f){var o=e.closestPointToPoint(t);o.applyMatrix4(l);var c=r.ray.origin.distanceTo(o);if(c<r.near||c>r.far)return;a.push({distance:c,distanceToRay:Math.sqrt(i),point:o.clone(),index:n,face:null,object:s})}}var s=this,c=this.geometry,l=this.matrixWorld,u=r.params.Points.threshold;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){t.getInverse(l),e.copy(r.ray).applyMatrix4(t);var h=u/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,p=new i.Vector3;if(c instanceof i.BufferGeometry){
var d=c.index,m=c.attributes,g=m.position.array;if(null!==d)for(var v=d.array,y=0,b=v.length;y<b;y++){var x=v[y];p.fromArray(g,3*x),o(p,x)}else for(var y=0,w=g.length/3;y<w;y++)p.fromArray(g,3*y),o(p,y)}else for(var _=c.vertices,y=0,w=_.length;y<w;y++)o(_[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),i.Line=function(t,e,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new i.LineSegments(t,e)):(i.Object3D.call(this),this.type="Line",this.geometry=void 0!==t?t:new i.BufferGeometry,void(this.material=void 0!==e?e:new i.LineBasicMaterial({color:16777215*Math.random()})))},i.Line.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.Line,raycast:function(){var t=new i.Matrix4,e=new i.Ray,n=new i.Sphere;return function(r,a){var o=r.linePrecision,s=o*o,c=this.geometry,l=this.matrixWorld;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){t.getInverse(l),e.copy(r.ray).applyMatrix4(t);var u=new i.Vector3,h=new i.Vector3,f=new i.Vector3,p=new i.Vector3,d=this instanceof i.LineSegments?2:1;if(c instanceof i.BufferGeometry){var m=c.index,g=c.attributes,v=g.position.array;if(null!==m)for(var y=m.array,b=0,x=y.length-1;b<x;b+=d){var w=y[b],_=y[b+1];u.fromArray(v,3*w),h.fromArray(v,3*_);var E=e.distanceSqToSegment(u,h,p,f);if(!(E>s)){p.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(p);M<r.near||M>r.far||a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(var b=0,x=v.length/3-1;b<x;b+=d){u.fromArray(v,3*b),h.fromArray(v,3*b+3);var E=e.distanceSqToSegment(u,h,p,f);if(!(E>s)){p.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(p);M<r.near||M>r.far||a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(c instanceof i.Geometry)for(var T=c.vertices,S=T.length,b=0;b<S-1;b+=d){var E=e.distanceSqToSegment(T[b],T[b+1],p,f);if(!(E>s)){p.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(p);M<r.near||M>r.far||a.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),i.LineSegments=function(t,e){i.Line.call(this,t,e),this.type="LineSegments"},i.LineSegments.prototype=Object.assign(Object.create(i.Line.prototype),{constructor:i.LineSegments}),i.Mesh=function(t,e){i.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new i.BufferGeometry,this.material=void 0!==e?e:new i.MeshBasicMaterial({color:16777215*Math.random()}),this.drawMode=i.TrianglesDrawMode,this.updateMorphTargets()},i.Mesh.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.Mesh,setDrawMode:function(t){this.drawMode=t},copy:function(t){return i.Object3D.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;t<e;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},getMorphTargetIndexByName:function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},raycast:function(){function t(t,e,n,r,a,o,s){return i.Triangle.barycoordFromPoint(t,e,n,r,g),a.multiplyScalar(g.x),o.multiplyScalar(g.y),s.multiplyScalar(g.z),a.add(o).add(s),a.clone()}function e(t,e,n,r,a,o,s){var c,l=t.material;if(c=l.side===i.BackSide?n.intersectTriangle(o,a,r,!0,s):n.intersectTriangle(r,a,o,l.side!==i.DoubleSide,s),null===c)return null;y.copy(s),y.applyMatrix4(t.matrixWorld);var u=e.ray.origin.distanceTo(y);return u<e.near||u>e.far?null:{distance:u,point:y.clone(),object:t}}function n(n,r,a,o,u,h,f,g){s.fromArray(o,3*h),c.fromArray(o,3*f),l.fromArray(o,3*g);var y=e(n,r,a,s,c,l,v);return y&&(u&&(p.fromArray(u,2*h),d.fromArray(u,2*f),m.fromArray(u,2*g),y.uv=t(v,s,c,l,p,d,m)),y.face=new i.Face3(h,f,g,i.Triangle.normal(s,c,l)),y.faceIndex=h),y}var r=new i.Matrix4,a=new i.Ray,o=new i.Sphere,s=new i.Vector3,c=new i.Vector3,l=new i.Vector3,u=new i.Vector3,h=new i.Vector3,f=new i.Vector3,p=new i.Vector2,d=new i.Vector2,m=new i.Vector2,g=new i.Vector3,v=new i.Vector3,y=new i.Vector3;return function(g,y){var b=this.geometry,x=this.material,w=this.matrixWorld;if(void 0!==x&&(null===b.boundingSphere&&b.computeBoundingSphere(),o.copy(b.boundingSphere),o.applyMatrix4(w),g.ray.intersectsSphere(o)!==!1&&(r.getInverse(w),a.copy(g.ray).applyMatrix4(r),null===b.boundingBox||a.intersectsBox(b.boundingBox)!==!1))){var _,E;if(b instanceof i.BufferGeometry){var M,T,S,A=b.index,C=b.attributes,k=C.position.array;if(void 0!==C.uv&&(_=C.uv.array),null!==A)for(var L=A.array,R=0,P=L.length;R<P;R+=3)M=L[R],T=L[R+1],S=L[R+2],E=n(this,g,a,k,_,M,T,S),E&&(E.faceIndex=Math.floor(R/3),y.push(E));else for(var R=0,P=k.length;R<P;R+=9)M=R/3,T=M+1,S=M+2,E=n(this,g,a,k,_,M,T,S),E&&(E.index=M,y.push(E))}else if(b instanceof i.Geometry){var D,B,N,O=x instanceof i.MultiMaterial,F=O===!0?x.materials:null,I=b.vertices,j=b.faces,U=b.faceVertexUvs[0];U.length>0&&(_=U);for(var z=0,V=j.length;z<V;z++){var G=j[z],H=O===!0?F[G.materialIndex]:x;if(void 0!==H){if(D=I[G.a],B=I[G.b],N=I[G.c],H.morphTargets===!0){var W=b.morphTargets,q=this.morphTargetInfluences;s.set(0,0,0),c.set(0,0,0),l.set(0,0,0);for(var X=0,Y=W.length;X<Y;X++){var Z=q[X];if(0!==Z){var K=W[X].vertices;s.addScaledVector(u.subVectors(K[G.a],D),Z),c.addScaledVector(h.subVectors(K[G.b],B),Z),l.addScaledVector(f.subVectors(K[G.c],N),Z)}}s.add(D),c.add(B),l.add(N),D=s,B=c,N=l}if(E=e(this,g,a,D,B,N,v)){if(_){var J=_[z];p.copy(J[0]),d.copy(J[1]),m.copy(J[2]),E.uv=t(v,D,B,N,p,d,m)}E.face=G,E.faceIndex=z,y.push(E)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),i.Bone=function(t){i.Object3D.call(this),this.type="Bone",this.skin=t},i.Bone.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.Bone,copy:function(t){return i.Object3D.prototype.copy.call(this,t),this.skin=t.skin,this}}),i.Skeleton=function(t,e,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new i.Matrix4,t=t||[],this.bones=t.slice(0),this.useVertexTexture){var r=Math.sqrt(4*this.bones.length);r=i.Math.nextPowerOfTwo(Math.ceil(r)),r=Math.max(r,4),this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new i.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,i.RGBAFormat,i.FloatType)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var a=0,o=this.bones.length;a<o;a++)this.boneInverses.push(new i.Matrix4)}},Object.assign(i.Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new i.Matrix4;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var t,e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&(t.parent instanceof i.Bone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new i.Matrix4;return function(){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(r,this.boneInverses[e]),t.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new i.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)}}),i.SkinnedMesh=function(t,e,n){i.Mesh.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new i.Matrix4,this.bindMatrixInverse=new i.Matrix4;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var a,o,s=0,c=this.geometry.bones.length;s<c;++s)o=this.geometry.bones[s],a=new i.Bone(this),r.push(a),a.name=o.name,a.position.fromArray(o.pos),a.quaternion.fromArray(o.rotq),void 0!==o.scl&&a.scale.fromArray(o.scl);for(var s=0,c=this.geometry.bones.length;s<c;++s)o=this.geometry.bones[s],o.parent!==-1&&null!==o.parent&&void 0!==r[o.parent]?r[o.parent].add(r[s]):this.add(r[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new i.Skeleton(r,void 0,n),this.matrixWorld)},i.SkinnedMesh.prototype=Object.assign(Object.create(i.Mesh.prototype),{constructor:i.SkinnedMesh,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry instanceof i.Geometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],n=1/e.lengthManhattan();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0)}else if(this.geometry instanceof i.BufferGeometry)for(var r=new i.Vector4,a=this.geometry.attributes.skinWeight,t=0;t<a.count;t++){r.x=a.getX(t),r.y=a.getY(t),r.z=a.getZ(t),r.w=a.getW(t);var n=1/r.lengthManhattan();n!==1/0?r.multiplyScalar(n):r.set(1,0,0,0),a.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(t){i.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),i.LOD=function(){i.Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})},i.LOD.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.LOD,copy:function(t){i.Object3D.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var a=e[n];this.addLevel(a.object.clone(),a.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);n.splice(r,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new i.Vector3;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(t);this.getObjectForDistance(r).raycast(e,n)}}(),update:function(){var t=new i.Vector3,e=new i.Vector3;return function(n){var r=this.levels;if(r.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);r[0].object.visible=!0;for(var a=1,o=r.length;a<o&&i>=r[a].distance;a++)r[a-1].object.visible=!1,r[a].object.visible=!0;for(;a<o;a++)r[a].object.visible=!1}}}(),toJSON:function(t){var e=i.Object3D.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,r=0,a=n.length;r<a;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),i.Sprite=function(t){i.Object3D.call(this),this.type="Sprite",this.material=void 0!==t?t:new i.SpriteMaterial},i.Sprite.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.Sprite,raycast:function(){var t=new i.Vector3;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.distanceSqToPoint(t),i=this.scale.x*this.scale.y/4;r>i||n.push({distance:Math.sqrt(r),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),i.LensFlare=function(t,e,n,r,a){i.Object3D.call(this),this.lensFlares=[],this.positionScreen=new i.Vector3,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,n,r,a)},i.LensFlare.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:i.LensFlare,copy:function(t){i.Object3D.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,n=t.lensFlares.length;e<n;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,n,r,a,o){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===a&&(a=new i.Color(16777215)),void 0===r&&(r=i.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:t,size:e,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:a,blending:r})},updateLensFlares:function(){var t,e,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(t=0;t<n;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+r*e.distance,e.y=this.positionScreen.y+i*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),i.Scene=function(){i.Object3D.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},i.Scene.prototype=Object.create(i.Object3D.prototype),i.Scene.prototype.constructor=i.Scene,i.Scene.prototype.copy=function(t,e){return i.Object3D.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},i.Fog=function(t,e,n){this.name="",this.color=new i.Color(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3},i.Fog.prototype.clone=function(){return new i.Fog(this.color.getHex(),this.near,this.far)},i.FogExp2=function(t,e){this.name="",this.color=new i.Color(t),this.density=void 0!==e?e:25e-5},i.FogExp2.prototype.clone=function(){return new i.FogExp2(this.color.getHex(),this.density)},i.ShaderChunk={},i.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",i.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",i.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",i.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",i.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",i.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n",i.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n",i.ShaderChunk.bsdfs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",i.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",i.ShaderChunk.clipping_planes_fragment="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n",i.ShaderChunk.clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",i.ShaderChunk.clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",i.ShaderChunk.clipping_planes_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",i.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",i.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",i.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",i.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",i.ShaderChunk.common="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",i.ShaderChunk.cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",i.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",i.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",i.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",i.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",i.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",i.ShaderChunk.encodings_pars_fragment="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",i.ShaderChunk.encodings_fragment="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",i.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
i.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",i.ShaderChunk.envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",i.ShaderChunk.envmap_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",i.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",i.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",i.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",i.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",i.ShaderChunk.lights_lambert_vertex="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",i.ShaderChunk.lights_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",i.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",i.ShaderChunk.lights_phong_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",i.ShaderChunk.lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",i.ShaderChunk.lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",i.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",i.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",i.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",i.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",i.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",i.ShaderChunk.map_fragment="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",i.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",i.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",i.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",i.ShaderChunk.metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",i.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",i.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",i.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",i.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",i.ShaderChunk.normal_flip="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",i.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",i.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",i.ShaderChunk.packing="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";i.ShaderChunk.premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n";i.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",i.ShaderChunk.roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",i.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",i.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
i.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",i.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",i.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",i.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",i.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",i.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",i.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",i.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",i.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",i.ShaderChunk.tonemapping_fragment="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",i.ShaderChunk.tonemapping_pars_fragment="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",i.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",i.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",i.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",i.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",i.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",i.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",i.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",i.UniformsUtils={merge:function(t){for(var e={},n=0;n<t.length;n++){var r=this.clone(t[n]);for(var i in r)e[i]=r[i]}return e},clone:function(t){var e={};for(var n in t){e[n]={};for(var r in t[n]){var a=t[n][r];a instanceof i.Color||a instanceof i.Vector2||a instanceof i.Vector3||a instanceof i.Vector4||a instanceof i.Matrix3||a instanceof i.Matrix4||a instanceof i.Texture?e[n][r]=a.clone():Array.isArray(a)?e[n][r]=a.slice():e[n][r]=a}}return e}},i.UniformsLib={common:{diffuse:{value:new i.Color(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new i.Vector4(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i.Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new i.Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}}},points:{diffuse:{value:new i.Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new i.Vector4(0,0,1,1)}}},i.ShaderChunk.cube_frag="uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\t#include <logdepthbuf_fragment>\n}\n",i.ShaderChunk.cube_vert="varying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",i.ShaderChunk.depth_frag="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",i.ShaderChunk.depth_vert="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",i.ShaderChunk.distanceRGBA_frag="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",i.ShaderChunk.distanceRGBA_vert="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",i.ShaderChunk.equirect_frag="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <logdepthbuf_fragment>\n}\n",i.ShaderChunk.equirect_vert="varying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",i.ShaderChunk.linedashed_frag="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",i.ShaderChunk.linedashed_vert="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",i.ShaderChunk.meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",i.ShaderChunk.meshbasic_vert="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",i.ShaderChunk.meshlambert_frag="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",i.ShaderChunk.meshlambert_vert="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",i.ShaderChunk.meshphong_frag="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",i.ShaderChunk.meshphong_vert="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",i.ShaderChunk.meshphysical_frag="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",i.ShaderChunk.meshphysical_vert="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",i.ShaderChunk.normal_frag="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",i.ShaderChunk.normal_vert="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",i.ShaderChunk.points_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",i.ShaderChunk.points_vert="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",i.ShaderChunk.shadow_frag="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",i.ShaderChunk.shadow_vert="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",i.ShaderLib={basic:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.aomap,i.UniformsLib.fog]),vertexShader:i.ShaderChunk.meshbasic_vert,fragmentShader:i.ShaderChunk.meshbasic_frag},lambert:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.aomap,i.UniformsLib.lightmap,i.UniformsLib.emissivemap,i.UniformsLib.fog,i.UniformsLib.lights,{emissive:{value:new i.Color(0)}}]),vertexShader:i.ShaderChunk.meshlambert_vert,fragmentShader:i.ShaderChunk.meshlambert_frag},phong:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.aomap,i.UniformsLib.lightmap,i.UniformsLib.emissivemap,i.UniformsLib.bumpmap,i.UniformsLib.normalmap,i.UniformsLib.displacementmap,i.UniformsLib.fog,i.UniformsLib.lights,{emissive:{value:new i.Color(0)},specular:{value:new i.Color(1118481)},shininess:{value:30}}]),vertexShader:i.ShaderChunk.meshphong_vert,fragmentShader:i.ShaderChunk.meshphong_frag},standard:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.aomap,i.UniformsLib.lightmap,i.UniformsLib.emissivemap,i.UniformsLib.bumpmap,i.UniformsLib.normalmap,i.UniformsLib.displacementmap,i.UniformsLib.roughnessmap,i.UniformsLib.metalnessmap,i.UniformsLib.fog,i.UniformsLib.lights,{emissive:{value:new i.Color(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:i.ShaderChunk.meshphysical_vert,fragmentShader:i.ShaderChunk.meshphysical_frag},points:{uniforms:i.UniformsUtils.merge([i.UniformsLib.points,i.UniformsLib.fog]),vertexShader:i.ShaderChunk.points_vert,fragmentShader:i.ShaderChunk.points_frag},dashed:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:i.ShaderChunk.linedashed_vert,fragmentShader:i.ShaderChunk.linedashed_frag},depth:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.displacementmap]),vertexShader:i.ShaderChunk.depth_vert,fragmentShader:i.ShaderChunk.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:i.ShaderChunk.normal_vert,fragmentShader:i.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1}},vertexShader:i.ShaderChunk.cube_vert,fragmentShader:i.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:i.ShaderChunk.equirect_vert,fragmentShader:i.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new i.Vector3}},vertexShader:i.ShaderChunk.distanceRGBA_vert,fragmentShader:i.ShaderChunk.distanceRGBA_frag}},i.ShaderLib.physical={uniforms:i.UniformsUtils.merge([i.ShaderLib.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:i.ShaderChunk.meshphysical_vert,fragmentShader:i.ShaderChunk.meshphysical_frag
},i.WebGLRenderer=function(t){function e(){return null===nt?mt:1}function n(t,e,n,r){G===!0&&(t*=r,e*=r,n*=r),Pt.clearColor(t,e,n,r)}function r(){Pt.init(),Pt.scissor(st.copy(gt).multiplyScalar(mt)),Pt.viewport(lt.copy(yt).multiplyScalar(mt)),n(ht.r,ht.g,ht.b,ft)}function a(){et=null,ot=null,at="",it=-1,Pt.reset()}function o(t){t.preventDefault(),a(),r(),Dt.clear()}function s(t){var e=t.target;e.removeEventListener("dispose",s),c(e)}function c(t){l(t),Dt.delete(t)}function l(t){var e=Dt.get(t).program;t.program=void 0,void 0!==e&&Ot.releaseProgram(e)}function u(t,e,n,r){var a;if(n instanceof i.InstancedBufferGeometry&&(a=Lt.get("ANGLE_instanced_arrays"),null===a))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),Pt.initAttributes();var o=n.attributes,s=e.getAttributes(),c=t.defaultAttributeValues;for(var l in s){var u=s[l];if(u>=0){var h=o[l];if(void 0!==h){var f=Ct.FLOAT,p=h.array,d=h.normalized;p instanceof Float32Array?f=Ct.FLOAT:p instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):p instanceof Uint16Array?f=Ct.UNSIGNED_SHORT:p instanceof Int16Array?f=Ct.SHORT:p instanceof Uint32Array?f=Ct.UNSIGNED_INT:p instanceof Int32Array?f=Ct.INT:p instanceof Int8Array?f=Ct.BYTE:p instanceof Uint8Array&&(f=Ct.UNSIGNED_BYTE);var m=h.itemSize,g=Nt.getAttributeBuffer(h);if(h instanceof i.InterleavedBufferAttribute){var v=h.data,y=v.stride,b=h.offset;v instanceof i.InstancedInterleavedBuffer?(Pt.enableAttributeAndDivisor(u,v.meshPerAttribute,a),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):Pt.enableAttribute(u),Ct.bindBuffer(Ct.ARRAY_BUFFER,g),Ct.vertexAttribPointer(u,m,f,d,y*v.array.BYTES_PER_ELEMENT,(r*y+b)*v.array.BYTES_PER_ELEMENT)}else h instanceof i.InstancedBufferAttribute?(Pt.enableAttributeAndDivisor(u,h.meshPerAttribute,a),void 0===n.maxInstancedCount&&(n.maxInstancedCount=h.meshPerAttribute*h.count)):Pt.enableAttribute(u),Ct.bindBuffer(Ct.ARRAY_BUFFER,g),Ct.vertexAttribPointer(u,m,f,d,0,r*m*h.array.BYTES_PER_ELEMENT)}else if(void 0!==c){var x=c[l];if(void 0!==x)switch(x.length){case 2:Ct.vertexAttrib2fv(u,x);break;case 3:Ct.vertexAttrib3fv(u,x);break;case 4:Ct.vertexAttrib4fv(u,x);break;default:Ct.vertexAttrib1fv(u,x)}}}}Pt.disableUnusedAttributes()}function h(t,e){return Math.abs(e[0])-Math.abs(t[0])}function f(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function p(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function d(t,e,n,r,i){var a,o;n.transparent?(a=Y,o=++Z):(a=q,o=++X);var s=a[o];void 0!==s?(s.id=t.id,s.object=t,s.geometry=e,s.material=n,s.z=Tt.z,s.group=i):(s={id:t.id,object:t,geometry:e,material:n,z:Tt.z,group:i},a.push(s))}function m(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Et.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),v(Et)}function g(t){return Et.center.set(0,0,0),Et.radius=.7071067811865476,Et.applyMatrix4(t.matrixWorld),v(Et)}function v(t){if(!bt.intersectsSphere(t))return!1;var e=xt.numPlanes;if(0===e)return!0;var n=tt.clippingPlanes,r=t.center,i=-t.radius,a=0;do if(n[a].distanceToPoint(r)<i)return!1;while(++a!==e);return!0}function y(t,e){if(t.visible!==!1){if(t.layers.test(e.layers))if(t instanceof i.Light)W.push(t);else if(t instanceof i.Sprite)t.frustumCulled!==!1&&g(t)!==!0||J.push(t);else if(t instanceof i.LensFlare)Q.push(t);else if(t instanceof i.ImmediateRenderObject)tt.sortObjects===!0&&(Tt.setFromMatrixPosition(t.matrixWorld),Tt.applyProjection(Mt)),d(t,null,t.material,Tt.z,null);else if((t instanceof i.Mesh||t instanceof i.Line||t instanceof i.Points)&&(t instanceof i.SkinnedMesh&&t.skeleton.update(),t.frustumCulled===!1||m(t)===!0)){var n=t.material;if(n.visible===!0){tt.sortObjects===!0&&(Tt.setFromMatrixPosition(t.matrixWorld),Tt.applyProjection(Mt));var r=Nt.update(t);if(n instanceof i.MultiMaterial)for(var a=r.groups,o=n.materials,s=0,c=a.length;s<c;s++){var l=a[s],u=o[l.materialIndex];u.visible===!0&&d(t,r,u,Tt.z,l)}else d(t,r,n,Tt.z,null)}}for(var h=t.children,s=0,c=h.length;s<c;s++)y(h[s],e)}}function b(t,e,n,r){for(var a=0,o=t.length;a<o;a++){var s=t[a],c=s.object,l=s.geometry,u=void 0===r?s.material:r,h=s.group;if(c.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,c.matrixWorld),c.normalMatrix.getNormalMatrix(c.modelViewMatrix),c instanceof i.ImmediateRenderObject){w(u);var f=_(e,n,u,c);at="",c.render(function(t){tt.renderBufferImmediate(t,f,u)})}else tt.renderBufferDirect(e,n,l,u,c,h)}}function x(t,e,n){var r=Dt.get(t),a=Ot.getParameters(t,St,e,xt.numPlanes,n),o=Ot.getProgramCode(t,a),c=r.program,u=!0;if(void 0===c)t.addEventListener("dispose",s);else if(c.code!==o)l(t);else{if(void 0!==a.shaderID)return;u=!1}if(u){if(a.shaderID){var h=i.ShaderLib[a.shaderID];r.__webglShader={name:t.type,uniforms:i.UniformsUtils.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else r.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=r.__webglShader,c=Ot.acquireProgram(t,a,o),r.program=c,t.program=c}var f=c.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<tt.maxMorphTargets;p++)f["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var p=0;p<tt.maxMorphNormals;p++)f["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var d=r.__webglShader.uniforms;(t instanceof i.ShaderMaterial||t instanceof i.RawShaderMaterial)&&t.clipping!==!0||(r.numClippingPlanes=xt.numPlanes,d.clippingPlanes=xt.uniform),t.lights&&(r.lightsHash=St.hash,d.ambientLightColor.value=St.ambient,d.directionalLights.value=St.directional,d.spotLights.value=St.spot,d.pointLights.value=St.point,d.hemisphereLights.value=St.hemi,d.directionalShadowMap.value=St.directionalShadowMap,d.directionalShadowMatrix.value=St.directionalShadowMatrix,d.spotShadowMap.value=St.spotShadowMap,d.spotShadowMatrix.value=St.spotShadowMatrix,d.pointShadowMap.value=St.pointShadowMap,d.pointShadowMatrix.value=St.pointShadowMatrix);var m=r.program.getUniforms(),g=i.WebGLUniforms.seqWithValue(m.seq,d);r.uniformsList=g,r.dynamicUniforms=i.WebGLUniforms.splitDynamic(g,d)}function w(t){t.side!==i.DoubleSide?Pt.enable(Ct.CULL_FACE):Pt.disable(Ct.CULL_FACE),Pt.setFlipSided(t.side===i.BackSide),t.transparent===!0?Pt.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):Pt.setBlending(i.NoBlending),Pt.setDepthFunc(t.depthFunc),Pt.setDepthTest(t.depthTest),Pt.setDepthWrite(t.depthWrite),Pt.setColorWrite(t.colorWrite),Pt.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function _(t,e,n,r){ut=0;var a=Dt.get(n);if(wt){if(_t||t!==ot){var o=t===ot&&n.id===it;xt.setState(n.clippingPlanes,n.clipShadows,t,a,o)}void 0!==a.numClippingPlanes&&a.numClippingPlanes!==xt.numPlanes&&(n.needsUpdate=!0)}void 0===a.program&&(n.needsUpdate=!0),void 0!==a.lightsHash&&a.lightsHash!==St.hash&&(n.needsUpdate=!0),n.needsUpdate&&(x(n,e,r),n.needsUpdate=!1);var s=!1,c=!1,l=!1,u=a.program,h=u.getUniforms(),f=a.__webglShader.uniforms;if(u.id!==et&&(Ct.useProgram(u.program),et=u.id,s=!0,c=!0,l=!0),n.id!==it&&(it=n.id,c=!0),s||t!==ot){if(h.set(Ct,t,"projectionMatrix"),Rt.logarithmicDepthBuffer&&h.setValue(Ct,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==ot&&(ot=t,c=!0,l=!0),n instanceof i.ShaderMaterial||n instanceof i.MeshPhongMaterial||n instanceof i.MeshStandardMaterial||n.envMap){var p=h.map.cameraPosition;void 0!==p&&p.setValue(Ct,Tt.setFromMatrixPosition(t.matrixWorld))}(n instanceof i.MeshPhongMaterial||n instanceof i.MeshLambertMaterial||n instanceof i.MeshBasicMaterial||n instanceof i.MeshStandardMaterial||n instanceof i.ShaderMaterial||n.skinning)&&h.setValue(Ct,"viewMatrix",t.matrixWorldInverse),h.set(Ct,tt,"toneMappingExposure"),h.set(Ct,tt,"toneMappingWhitePoint")}if(n.skinning){h.setOptional(Ct,r,"bindMatrix"),h.setOptional(Ct,r,"bindMatrixInverse");var d=r.skeleton;d&&(Rt.floatVertexTextures&&d.useVertexTexture?(h.set(Ct,d,"boneTexture"),h.set(Ct,d,"boneTextureWidth"),h.set(Ct,d,"boneTextureHeight")):h.setOptional(Ct,d,"boneMatrices"))}c&&(n.lights&&P(f,l),e&&n.fog&&A(f,e),(n instanceof i.MeshBasicMaterial||n instanceof i.MeshLambertMaterial||n instanceof i.MeshPhongMaterial||n instanceof i.MeshStandardMaterial||n instanceof i.MeshDepthMaterial)&&E(f,n),n instanceof i.LineBasicMaterial?M(f,n):n instanceof i.LineDashedMaterial?(M(f,n),T(f,n)):n instanceof i.PointsMaterial?S(f,n):n instanceof i.MeshLambertMaterial?C(f,n):n instanceof i.MeshPhongMaterial?k(f,n):n instanceof i.MeshPhysicalMaterial?R(f,n):n instanceof i.MeshStandardMaterial?L(f,n):n instanceof i.MeshDepthMaterial?n.displacementMap&&(f.displacementMap.value=n.displacementMap,f.displacementScale.value=n.displacementScale,f.displacementBias.value=n.displacementBias):n instanceof i.MeshNormalMaterial&&(f.opacity.value=n.opacity),i.WebGLUniforms.upload(Ct,a.uniformsList,f,tt)),h.set(Ct,r,"modelViewMatrix"),h.set(Ct,r,"normalMatrix"),h.setValue(Ct,"modelMatrix",r.matrixWorld);var m=a.dynamicUniforms;return null!==m&&(i.WebGLUniforms.evalDynamic(m,f,r,t),i.WebGLUniforms.upload(Ct,m,f,tt)),u}function E(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;if(e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n){n instanceof i.WebGLRenderTarget&&(n=n.texture);var r=n.offset,a=n.repeat;t.offsetRepeat.value.set(r.x,r.y,a.x,a.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap instanceof i.CubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function M(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function T(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function S(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*mt,t.scale.value=.5*F.clientHeight,t.map.value=e.map,null!==e.map){var n=e.map.offset,r=e.map.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}function A(t,e){t.fogColor.value=e.color,e instanceof i.Fog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e instanceof i.FogExp2&&(t.fogDensity.value=e.density)}function C(t,e){e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function k(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function L(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function R(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,L(t,e)}function P(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function D(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];i.castShadow&&(St.shadows[e++]=i)}St.shadows.length=e}function B(t,e){var n,r,a,o,s,c,l,u=0,h=0,f=0,p=e.matrixWorldInverse,d=0,m=0,g=0,v=0;for(n=0,r=t.length;n<r;n++)if(a=t[n],o=a.color,s=a.intensity,c=a.distance,l=a.shadow&&a.shadow.map?a.shadow.map.texture:null,a instanceof i.AmbientLight)u+=o.r*s,h+=o.g*s,f+=o.b*s;else if(a instanceof i.DirectionalLight){var y=Ft.get(a);y.color.copy(a.color).multiplyScalar(a.intensity),y.direction.setFromMatrixPosition(a.matrixWorld),Tt.setFromMatrixPosition(a.target.matrixWorld),y.direction.sub(Tt),y.direction.transformDirection(p),y.shadow=a.castShadow,a.castShadow&&(y.shadowBias=a.shadow.bias,y.shadowRadius=a.shadow.radius,y.shadowMapSize=a.shadow.mapSize),St.directionalShadowMap[d]=l,St.directionalShadowMatrix[d]=a.shadow.matrix,St.directional[d++]=y}else if(a instanceof i.SpotLight){var y=Ft.get(a);y.position.setFromMatrixPosition(a.matrixWorld),y.position.applyMatrix4(p),y.color.copy(o).multiplyScalar(s),y.distance=c,y.direction.setFromMatrixPosition(a.matrixWorld),Tt.setFromMatrixPosition(a.target.matrixWorld),y.direction.sub(Tt),y.direction.transformDirection(p),y.coneCos=Math.cos(a.angle),y.penumbraCos=Math.cos(a.angle*(1-a.penumbra)),y.decay=0===a.distance?0:a.decay,y.shadow=a.castShadow,a.castShadow&&(y.shadowBias=a.shadow.bias,y.shadowRadius=a.shadow.radius,y.shadowMapSize=a.shadow.mapSize),St.spotShadowMap[g]=l,St.spotShadowMatrix[g]=a.shadow.matrix,St.spot[g++]=y}else if(a instanceof i.PointLight){var y=Ft.get(a);y.position.setFromMatrixPosition(a.matrixWorld),y.position.applyMatrix4(p),y.color.copy(a.color).multiplyScalar(a.intensity),y.distance=a.distance,y.decay=0===a.distance?0:a.decay,y.shadow=a.castShadow,a.castShadow&&(y.shadowBias=a.shadow.bias,y.shadowRadius=a.shadow.radius,y.shadowMapSize=a.shadow.mapSize),St.pointShadowMap[m]=l,void 0===St.pointShadowMatrix[m]&&(St.pointShadowMatrix[m]=new i.Matrix4),Tt.setFromMatrixPosition(a.matrixWorld).negate(),St.pointShadowMatrix[m].identity().setPosition(Tt),St.point[m++]=y}else if(a instanceof i.HemisphereLight){var y=Ft.get(a);y.direction.setFromMatrixPosition(a.matrixWorld),y.direction.transformDirection(p),y.direction.normalize(),y.skyColor.copy(a.color).multiplyScalar(s),y.groundColor.copy(a.groundColor).multiplyScalar(s),St.hemi[v++]=y}St.ambient[0]=u,St.ambient[1]=h,St.ambient[2]=f,St.directional.length=d,St.spot.length=g,St.point.length=m,St.hemi.length=v,St.hash=d+","+m+","+g+","+v+","+St.shadows.length}function N(){var t=ut;return t>=Rt.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Rt.maxTextures),ut+=1,t}function O(t){var e;if(t===i.RepeatWrapping)return Ct.REPEAT;if(t===i.ClampToEdgeWrapping)return Ct.CLAMP_TO_EDGE;if(t===i.MirroredRepeatWrapping)return Ct.MIRRORED_REPEAT;if(t===i.NearestFilter)return Ct.NEAREST;if(t===i.NearestMipMapNearestFilter)return Ct.NEAREST_MIPMAP_NEAREST;if(t===i.NearestMipMapLinearFilter)return Ct.NEAREST_MIPMAP_LINEAR;if(t===i.LinearFilter)return Ct.LINEAR;if(t===i.LinearMipMapNearestFilter)return Ct.LINEAR_MIPMAP_NEAREST;if(t===i.LinearMipMapLinearFilter)return Ct.LINEAR_MIPMAP_LINEAR;if(t===i.UnsignedByteType)return Ct.UNSIGNED_BYTE;if(t===i.UnsignedShort4444Type)return Ct.UNSIGNED_SHORT_4_4_4_4;if(t===i.UnsignedShort5551Type)return Ct.UNSIGNED_SHORT_5_5_5_1;if(t===i.UnsignedShort565Type)return Ct.UNSIGNED_SHORT_5_6_5;if(t===i.ByteType)return Ct.BYTE;if(t===i.ShortType)return Ct.SHORT;if(t===i.UnsignedShortType)return Ct.UNSIGNED_SHORT;if(t===i.IntType)return Ct.INT;if(t===i.UnsignedIntType)return Ct.UNSIGNED_INT;if(t===i.FloatType)return Ct.FLOAT;if(e=Lt.get("OES_texture_half_float"),null!==e&&t===i.HalfFloatType)return e.HALF_FLOAT_OES;if(t===i.AlphaFormat)return Ct.ALPHA;if(t===i.RGBFormat)return Ct.RGB;if(t===i.RGBAFormat)return Ct.RGBA;if(t===i.LuminanceFormat)return Ct.LUMINANCE;if(t===i.LuminanceAlphaFormat)return Ct.LUMINANCE_ALPHA;if(t===i.DepthFormat)return Ct.DEPTH_COMPONENT;if(t===i.AddEquation)return Ct.FUNC_ADD;if(t===i.SubtractEquation)return Ct.FUNC_SUBTRACT;if(t===i.ReverseSubtractEquation)return Ct.FUNC_REVERSE_SUBTRACT;if(t===i.ZeroFactor)return Ct.ZERO;if(t===i.OneFactor)return Ct.ONE;if(t===i.SrcColorFactor)return Ct.SRC_COLOR;if(t===i.OneMinusSrcColorFactor)return Ct.ONE_MINUS_SRC_COLOR;if(t===i.SrcAlphaFactor)return Ct.SRC_ALPHA;if(t===i.OneMinusSrcAlphaFactor)return Ct.ONE_MINUS_SRC_ALPHA;if(t===i.DstAlphaFactor)return Ct.DST_ALPHA;if(t===i.OneMinusDstAlphaFactor)return Ct.ONE_MINUS_DST_ALPHA;if(t===i.DstColorFactor)return Ct.DST_COLOR;if(t===i.OneMinusDstColorFactor)return Ct.ONE_MINUS_DST_COLOR;if(t===i.SrcAlphaSaturateFactor)return Ct.SRC_ALPHA_SATURATE;if(e=Lt.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===i.RGB_S3TC_DXT1_Format)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===i.RGBA_S3TC_DXT1_Format)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===i.RGBA_S3TC_DXT3_Format)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===i.RGBA_S3TC_DXT5_Format)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=Lt.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===i.RGB_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===i.RGB_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===i.RGBA_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===i.RGBA_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e=Lt.get("WEBGL_compressed_texture_etc1"),null!==e&&t===i.RGB_ETC1_Format)return e.COMPRESSED_RGB_ETC1_WEBGL;if(e=Lt.get("EXT_blend_minmax"),null!==e){if(t===i.MinEquation)return e.MIN_EXT;if(t===i.MaxEquation)return e.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",i.REVISION),t=t||{};var F=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),I=void 0!==t.context?t.context:null,j=void 0!==t.alpha&&t.alpha,U=void 0===t.depth||t.depth,z=void 0===t.stencil||t.stencil,V=void 0!==t.antialias&&t.antialias,G=void 0===t.premultipliedAlpha||t.premultipliedAlpha,H=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,W=[],q=[],X=-1,Y=[],Z=-1,K=new Float32Array(8),J=[],Q=[];this.domElement=F,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=i.LinearToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var tt=this,et=null,nt=null,rt=null,it=-1,at="",ot=null,st=new i.Vector4,ct=null,lt=new i.Vector4,ut=0,ht=new i.Color(0),ft=0,pt=F.width,dt=F.height,mt=1,gt=new i.Vector4(0,0,pt,dt),vt=!1,yt=new i.Vector4(0,0,pt,dt),bt=new i.Frustum,xt=new i.WebGLClipping,wt=!1,_t=!1,Et=new i.Sphere,Mt=new i.Matrix4,Tt=new i.Vector3,St={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},At={calls:0,vertices:0,faces:0,points:0};this.info={render:At,memory:{geometries:0,textures:0},programs:null};var Ct;try{var kt={alpha:j,depth:U,stencil:z,antialias:V,premultipliedAlpha:G,preserveDrawingBuffer:H};if(Ct=I||F.getContext("webgl",kt)||F.getContext("experimental-webgl",kt),null===Ct)throw null!==F.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Ct.getShaderPrecisionFormat&&(Ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),F.addEventListener("webglcontextlost",o,!1)}catch(t){console.error("THREE.WebGLRenderer: "+t)}var Lt=new i.WebGLExtensions(Ct);Lt.get("WEBGL_depth_texture"),Lt.get("OES_texture_float"),Lt.get("OES_texture_float_linear"),Lt.get("OES_texture_half_float"),Lt.get("OES_texture_half_float_linear"),Lt.get("OES_standard_derivatives"),Lt.get("ANGLE_instanced_arrays"),Lt.get("OES_element_index_uint")&&(i.BufferGeometry.MaxIndex=4294967296);var Rt=new i.WebGLCapabilities(Ct,Lt,t),Pt=new i.WebGLState(Ct,Lt,O),Dt=new i.WebGLProperties,Bt=new i.WebGLTextures(Ct,Lt,Pt,Dt,Rt,O,this.info),Nt=new i.WebGLObjects(Ct,Dt,this.info),Ot=new i.WebGLPrograms(this,Rt),Ft=new i.WebGLLights;this.info.programs=Ot.programs;var It=new i.WebGLBufferRenderer(Ct,Lt,At),jt=new i.WebGLIndexedBufferRenderer(Ct,Lt,At),Ut=new i.OrthographicCamera(-1,1,1,-1,0,1),zt=new i.PerspectiveCamera,Vt=new i.Mesh(new i.PlaneBufferGeometry(2,2),new i.MeshBasicMaterial({depthTest:!1,depthWrite:!1})),Gt=i.ShaderLib.cube,Ht=new i.Mesh(new i.BoxBufferGeometry(5,5,5),new i.ShaderMaterial({uniforms:Gt.uniforms,vertexShader:Gt.vertexShader,fragmentShader:Gt.fragmentShader,depthTest:!1,depthWrite:!1,side:i.BackSide}));Nt.update(Vt),Nt.update(Ht),r(),this.context=Ct,this.capabilities=Rt,this.extensions=Lt,this.properties=Dt,this.state=Pt;var Wt=new i.WebGLShadowMap(this,St,Nt);this.shadowMap=Wt;var qt=new i.SpritePlugin(this,J),Xt=new i.LensFlarePlugin(this,Q);this.getContext=function(){return Ct},this.getContextAttributes=function(){return Ct.getContextAttributes()},this.forceContextLoss=function(){Lt.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Rt.getMaxAnisotropy()},this.getPrecision=function(){return Rt.precision},this.getPixelRatio=function(){return mt},this.setPixelRatio=function(t){void 0!==t&&(mt=t,this.setSize(yt.z,yt.w,!1))},this.getSize=function(){return{width:pt,height:dt}},this.setSize=function(t,e,n){pt=t,dt=e,F.width=t*mt,F.height=e*mt,n!==!1&&(F.style.width=t+"px",F.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,n,r){Pt.viewport(yt.set(t,e,n,r))},this.setScissor=function(t,e,n,r){Pt.scissor(gt.set(t,e,n,r))},this.setScissorTest=function(t){Pt.setScissorTest(vt=t)},this.getClearColor=function(){return ht},this.setClearColor=function(t,e){ht.set(t),ft=void 0!==e?e:1,n(ht.r,ht.g,ht.b,ft)},this.getClearAlpha=function(){return ft},this.setClearAlpha=function(t){ft=t,n(ht.r,ht.g,ht.b,ft)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=Ct.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=Ct.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=Ct.STENCIL_BUFFER_BIT),Ct.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,r){this.setRenderTarget(t),this.clear(e,n,r)},this.resetGLState=a,this.dispose=function(){Y=[],Z=-1,q=[],X=-1,F.removeEventListener("webglcontextlost",o,!1)},this.renderBufferImmediate=function(t,e,n){Pt.initAttributes();var r=Dt.get(t);t.hasPositions&&!r.position&&(r.position=Ct.createBuffer()),t.hasNormals&&!r.normal&&(r.normal=Ct.createBuffer()),t.hasUvs&&!r.uv&&(r.uv=Ct.createBuffer()),t.hasColors&&!r.color&&(r.color=Ct.createBuffer());var a=e.getAttributes();if(t.hasPositions&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,r.position),Ct.bufferData(Ct.ARRAY_BUFFER,t.positionArray,Ct.DYNAMIC_DRAW),Pt.enableAttribute(a.position),Ct.vertexAttribPointer(a.position,3,Ct.FLOAT,!1,0,0)),t.hasNormals){if(Ct.bindBuffer(Ct.ARRAY_BUFFER,r.normal),"MeshPhongMaterial"!==n.type&&"MeshStandardMaterial"!==n.type&&"MeshPhysicalMaterial"!==n.type&&n.shading===i.FlatShading)for(var o=0,s=3*t.count;o<s;o+=9){var c=t.normalArray,l=(c[o+0]+c[o+3]+c[o+6])/3,u=(c[o+1]+c[o+4]+c[o+7])/3,h=(c[o+2]+c[o+5]+c[o+8])/3;c[o+0]=l,c[o+1]=u,c[o+2]=h,c[o+3]=l,c[o+4]=u,c[o+5]=h,c[o+6]=l,c[o+7]=u,c[o+8]=h}Ct.bufferData(Ct.ARRAY_BUFFER,t.normalArray,Ct.DYNAMIC_DRAW),Pt.enableAttribute(a.normal),Ct.vertexAttribPointer(a.normal,3,Ct.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,r.uv),Ct.bufferData(Ct.ARRAY_BUFFER,t.uvArray,Ct.DYNAMIC_DRAW),Pt.enableAttribute(a.uv),Ct.vertexAttribPointer(a.uv,2,Ct.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==i.NoColors&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,r.color),Ct.bufferData(Ct.ARRAY_BUFFER,t.colorArray,Ct.DYNAMIC_DRAW),Pt.enableAttribute(a.color),Ct.vertexAttribPointer(a.color,3,Ct.FLOAT,!1,0,0)),Pt.disableUnusedAttributes(),Ct.drawArrays(Ct.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,n,r,a,o,s){w(a);var c=_(t,n,a,o),l=!1,f=r.id+"_"+c.id+"_"+a.wireframe;f!==at&&(at=f,l=!0);var p=o.morphTargetInfluences;if(void 0!==p){for(var d=[],m=0,g=p.length;m<g;m++){var v=p[m];d.push([v,m])}d.sort(h),d.length>8&&(d.length=8);for(var y=r.morphAttributes,m=0,g=d.length;m<g;m++){var v=d[m];if(K[m]=v[0],0!==v[0]){var b=v[1];a.morphTargets===!0&&y.position&&r.addAttribute("morphTarget"+m,y.position[b]),a.morphNormals===!0&&y.normal&&r.addAttribute("morphNormal"+m,y.normal[b])}else a.morphTargets===!0&&r.removeAttribute("morphTarget"+m),a.morphNormals===!0&&r.removeAttribute("morphNormal"+m)}c.getUniforms().setValue(Ct,"morphTargetInfluences",K),l=!0}var b=r.index,x=r.attributes.position;a.wireframe===!0&&(b=Nt.getWireframeAttribute(r));var E;null!==b?(E=jt,E.setIndex(b)):E=It,l&&(u(a,c,r),null!==b&&Ct.bindBuffer(Ct.ELEMENT_ARRAY_BUFFER,Nt.getAttributeBuffer(b)));var M=0,T=1/0;null!==b?T=b.count:void 0!==x&&(T=x.count);var S=r.drawRange.start,A=r.drawRange.count,C=null!==s?s.start:0,k=null!==s?s.count:1/0,L=Math.max(M,S,C),R=Math.min(M+T,S+A,C+k)-1,P=Math.max(0,R-L+1);if(o instanceof i.Mesh)if(a.wireframe===!0)Pt.setLineWidth(a.wireframeLinewidth*e()),E.setMode(Ct.LINES);else switch(o.drawMode){case i.TrianglesDrawMode:E.setMode(Ct.TRIANGLES);break;case i.TriangleStripDrawMode:E.setMode(Ct.TRIANGLE_STRIP);break;case i.TriangleFanDrawMode:E.setMode(Ct.TRIANGLE_FAN)}else if(o instanceof i.Line){var D=a.linewidth;void 0===D&&(D=1),Pt.setLineWidth(D*e()),o instanceof i.LineSegments?E.setMode(Ct.LINES):E.setMode(Ct.LINE_STRIP)}else o instanceof i.Points&&E.setMode(Ct.POINTS);r instanceof i.InstancedBufferGeometry?r.maxInstancedCount>0&&E.renderInstances(r,L,P):E.render(L,P)},this.render=function(t,e,r,a){if(e instanceof i.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var o=t.fog;at="",it=-1,ot=null,t.autoUpdate===!0&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),Mt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),bt.setFromMatrix(Mt),W.length=0,X=-1,Z=-1,J.length=0,Q.length=0,_t=this.localClippingEnabled,wt=xt.init(this.clippingPlanes,_t,e),y(t,e),q.length=X+1,Y.length=Z+1,tt.sortObjects===!0&&(q.sort(f),Y.sort(p)),wt&&xt.beginShadows(),D(W),Wt.render(t,e),B(W,e),wt&&xt.endShadows(),At.calls=0,At.vertices=0,At.faces=0,At.points=0,void 0===r&&(r=null),this.setRenderTarget(r);var s=t.background;if(null===s?n(ht.r,ht.g,ht.b,ft):s instanceof i.Color&&n(s.r,s.g,s.b,1),(this.autoClear||a)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),s instanceof i.CubeTexture?(zt.projectionMatrix.copy(e.projectionMatrix),zt.matrixWorld.extractRotation(e.matrixWorld),zt.matrixWorldInverse.getInverse(zt.matrixWorld),Ht.material.uniforms.tCube.value=s,Ht.modelViewMatrix.multiplyMatrices(zt.matrixWorldInverse,Ht.matrixWorld),tt.renderBufferDirect(zt,null,Ht.geometry,Ht.material,Ht,null)):s instanceof i.Texture&&(Vt.material.map=s,tt.renderBufferDirect(Ut,null,Vt.geometry,Vt.material,Vt,null)),t.overrideMaterial){var c=t.overrideMaterial;b(q,e,o,c),b(Y,e,o,c)}else Pt.setBlending(i.NoBlending),b(q,e,o),b(Y,e,o);qt.render(t,e),Xt.render(t,e,lt),r&&Bt.updateRenderTargetMipmap(r),Pt.setDepthTest(!0),Pt.setDepthWrite(!0),Pt.setColorWrite(!0)},this.setFaceCulling=function(t,e){Pt.setCullFace(t),Pt.setFlipSided(e===i.FrontFaceDirectionCW)},this.allocTextureUnit=N,this.setTexture2D=function(){var t=!1;return function(e,n){e instanceof i.WebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),Bt.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),Bt.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e instanceof i.WebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e instanceof i.CubeTexture||Array.isArray(e.image)&&6===e.image.length?Bt.setTextureCube(e,n):Bt.setTextureCubeDynamic(e,n)}}(),this.getCurrentRenderTarget=function(){return nt},this.setRenderTarget=function(t){nt=t,t&&void 0===Dt.get(t).__webglFramebuffer&&Bt.setupRenderTarget(t);var e,n=t instanceof i.WebGLRenderTargetCube;if(t){var r=Dt.get(t);e=n?r.__webglFramebuffer[t.activeCubeFace]:r.__webglFramebuffer,st.copy(t.scissor),ct=t.scissorTest,lt.copy(t.viewport)}else e=null,st.copy(gt).multiplyScalar(mt),ct=vt,lt.copy(yt).multiplyScalar(mt);if(rt!==e&&(Ct.bindFramebuffer(Ct.FRAMEBUFFER,e),rt=e),Pt.scissor(st),Pt.setScissorTest(ct),Pt.viewport(lt),n){var a=Dt.get(t.texture);Ct.framebufferTexture2D(Ct.FRAMEBUFFER,Ct.COLOR_ATTACHMENT0,Ct.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,a.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,r,a,o){if(t instanceof i.WebGLRenderTarget==!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=Dt.get(t).__webglFramebuffer;if(s){var c=!1;s!==rt&&(Ct.bindFramebuffer(Ct.FRAMEBUFFER,s),c=!0);try{var l=t.texture;if(l.format!==i.RGBAFormat&&O(l.format)!==Ct.getParameter(Ct.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l.type===i.UnsignedByteType||O(l.type)===Ct.getParameter(Ct.IMPLEMENTATION_COLOR_READ_TYPE)||l.type===i.FloatType&&Lt.get("WEBGL_color_buffer_float")||l.type===i.HalfFloatType&&Lt.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ct.checkFramebufferStatus(Ct.FRAMEBUFFER)===Ct.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-a&&Ct.readPixels(e,n,r,a,O(l.format),O(l.type),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{c&&Ct.bindFramebuffer(Ct.FRAMEBUFFER,rt)}}}},i.WebGLRenderTarget=function(t,e,n){this.uuid=i.Math.generateUUID(),this.width=t,this.height=e,this.scissor=new i.Vector4(0,0,t,e),this.scissorTest=!1,this.viewport=new i.Vector4(0,0,t,e),n=n||{},void 0===n.minFilter&&(n.minFilter=i.LinearFilter),this.texture=new i.Texture(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=null},Object.assign(i.WebGLRenderTarget.prototype,i.EventDispatcher.prototype,{setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,
this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),i.WebGLRenderTargetCube=function(t,e,n){i.WebGLRenderTarget.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0},i.WebGLRenderTargetCube.prototype=Object.create(i.WebGLRenderTarget.prototype),i.WebGLRenderTargetCube.prototype.constructor=i.WebGLRenderTargetCube,i.WebGLBufferRenderer=function(t,e,n){function r(t){s=t}function a(e,r){t.drawArrays(s,e,r),n.calls++,n.vertices+=r,s===t.TRIANGLES&&(n.faces+=r/3)}function o(r){var a=e.get("ANGLE_instanced_arrays");if(null===a)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var o=r.attributes.position,c=0;o instanceof i.InterleavedBufferAttribute?(c=o.data.count,a.drawArraysInstancedANGLE(s,0,c,r.maxInstancedCount)):(c=o.count,a.drawArraysInstancedANGLE(s,0,c,r.maxInstancedCount)),n.calls++,n.vertices+=c*r.maxInstancedCount,s===t.TRIANGLES&&(n.faces+=r.maxInstancedCount*c/3)}var s;this.setMode=r,this.render=a,this.renderInstances=o},i.WebGLClipping=function(){function t(){u.value!==r&&(u.value=r,u.needsUpdate=a>0),n.numPlanes=a}function e(t,e,r,i){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=u.value,i!==!0||null===o){var s=r+4*a,h=e.matrixWorldInverse;l.getNormalMatrix(h),(null===o||o.length<s)&&(o=new Float32Array(s));for(var f=0,p=r;f!==a;++f,p+=4)c.copy(t[f]).applyMatrix4(h,l),c.normal.toArray(o,p),o[p+3]=c.constant}u.value=o,u.needsUpdate=!0}return n.numPlanes=a,o}var n=this,r=null,a=0,o=!1,s=!1,c=new i.Plane,l=new i.Matrix3,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.init=function(t,n,i){var s=0!==t.length||n||0!==a||o;return o=n,r=e(t,i,0),a=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,i,c,l,h){if(!o||null===n||0===n.length||s&&!i)s?e(null):t();else{var f=s?0:a,p=4*f,d=l.clippingState||null;u.value=d,d=e(n,c,p,h);for(var m=0;m!==p;++m)d[m]=r[m];l.clippingState=d,this.numPlanes+=f}}},i.WebGLIndexedBufferRenderer=function(t,e,n){function r(t){s=t}function i(n){n.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(c=t.UNSIGNED_INT,l=4):(c=t.UNSIGNED_SHORT,l=2)}function a(e,r){t.drawElements(s,r,c,e*l),n.calls++,n.vertices+=r,s===t.TRIANGLES&&(n.faces+=r/3)}function o(r,i,a){var o=e.get("ANGLE_instanced_arrays");return null===o?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(o.drawElementsInstancedANGLE(s,a,c,i*l,r.maxInstancedCount),n.calls++,n.vertices+=a*r.maxInstancedCount,void(s===t.TRIANGLES&&(n.faces+=r.maxInstancedCount*a/3)))}var s,c,l;this.setMode=r,this.setIndex=i,this.render=a,this.renderInstances=o},i.WebGLExtensions=function(t){var e={};this.get=function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=t.getExtension("WEBGL_compressed_texture_etc1");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}},i.WebGLCapabilities=function(t,e,n){function r(){if(void 0!==a)return a;var n=e.get("EXT_texture_filter_anisotropic");return a=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a;this.getMaxAnisotropy=r,this.getMaxPrecision=i,this.precision=void 0!==n.precision?n.precision:"highp",this.logarithmicDepthBuffer=void 0!==n.logarithmicDepthBuffer&&n.logarithmicDepthBuffer,this.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxCubemapSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=t.getParameter(t.MAX_VARYING_VECTORS),this.maxFragmentUniforms=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=this.maxVertexTextures>0,this.floatFragmentTextures=!!e.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var o=i(this.precision);o!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",o,"instead."),this.precision=o),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!e.get("EXT_frag_depth"))},i.WebGLGeometries=function(t,e,n){function r(t){var e=t.geometry;if(void 0!==u[e.id])return u[e.id];e.addEventListener("dispose",a);var r;return e instanceof i.BufferGeometry?r=e:e instanceof i.Geometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new i.BufferGeometry).setFromObject(t)),r=e._bufferGeometry),u[e.id]=r,n.memory.geometries++,r}function a(t){var r=t.target,i=u[r.id];null!==i.index&&s(i.index),c(i.attributes),r.removeEventListener("dispose",a),delete u[r.id];var o=e.get(r);o.wireframe&&s(o.wireframe),e.delete(r);var l=e.get(i);l.wireframe&&s(l.wireframe),e.delete(i),n.memory.geometries--}function o(t){return t instanceof i.InterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function s(e){var n=o(e);void 0!==n&&(t.deleteBuffer(n),l(e))}function c(t){for(var e in t)s(t[e])}function l(t){t instanceof i.InterleavedBufferAttribute?e.delete(t.data):e.delete(t)}var u={};this.get=r},i.WebGLLights=function(){var t={};this.get=function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new i.Vector3,color:new i.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i.Vector2};break;case"SpotLight":n={position:new i.Vector3,direction:new i.Vector3,color:new i.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i.Vector2};break;case"PointLight":n={position:new i.Vector3,color:new i.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i.Vector2};break;case"HemisphereLight":n={direction:new i.Vector3,skyColor:new i.Color,groundColor:new i.Color}}return t[e.id]=n,n}},i.WebGLObjects=function(t,e,n){function r(e){var n=h.get(e);e.geometry instanceof i.Geometry&&n.updateFromObject(e);var r=n.index,o=n.attributes;null!==r&&a(r,t.ELEMENT_ARRAY_BUFFER);for(var s in o)a(o[s],t.ARRAY_BUFFER);var c=n.morphAttributes;for(var s in c)for(var l=c[s],u=0,f=l.length;u<f;u++)a(l[u],t.ARRAY_BUFFER);return n}function a(t,n){var r=t instanceof i.InterleavedBufferAttribute?t.data:t,a=e.get(r);void 0===a.__webglBuffer?o(a,r,n):a.version!==r.version&&s(a,r,n)}function o(e,n,r){e.__webglBuffer=t.createBuffer(),t.bindBuffer(r,e.__webglBuffer);var i=n.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(r,n.array,i),e.version=n.version}function s(e,n,r){t.bindBuffer(r,e.__webglBuffer),n.dynamic===!1||n.updateRange.count===-1?t.bufferSubData(r,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),e.version=n.version}function c(t){return t instanceof i.InterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function l(n){var r=e.get(n);if(void 0!==r.wireframe)return r.wireframe;var o=[],s=n.index,c=n.attributes,l=c.position;if(null!==s)for(var h={},f=s.array,p=0,d=f.length;p<d;p+=3){var m=f[p+0],g=f[p+1],v=f[p+2];u(h,m,g)&&o.push(m,g),u(h,g,v)&&o.push(g,v),u(h,v,m)&&o.push(v,m)}else for(var f=c.position.array,p=0,d=f.length/3-1;p<d;p+=3){var m=p+0,g=p+1,v=p+2;o.push(m,g,g,v,v,m)}var y=l.count>65535?Uint32Array:Uint16Array,b=new i.BufferAttribute(new y(o),1);return a(b,t.ELEMENT_ARRAY_BUFFER),r.wireframe=b,b}function u(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];return void 0===i?(t[e]=[n],!0):i.indexOf(n)===-1&&(i.push(n),!0)}var h=new i.WebGLGeometries(t,e,n);this.getAttributeBuffer=c,this.getWireframeAttribute=l,this.update=r},i.WebGLProgram=function(){function t(t){switch(t){case i.LinearEncoding:return["Linear","( value )"];case i.sRGBEncoding:return["sRGB","( value )"];case i.RGBEEncoding:return["RGBE","( value )"];case i.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case i.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case i.RGBDEncoding:return["RGBD","( value, 256.0 )"];case i.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+t)}}function e(e,n){var r=t(n);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function n(e,n){var r=t(n);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function r(t,e){var n;switch(e){case i.LinearToneMapping:n="Linear";break;case i.ReinhardToneMapping:n="Reinhard";break;case i.Uncharted2ToneMapping:n="Uncharted2";break;case i.CineonToneMapping:n="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function a(t,e,n){t=t||{};var r=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(c).join("\n")}function o(t){var e=[];for(var n in t){var r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join("\n")}function s(t,e,n){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<i;a++){var o=t.getActiveAttrib(e,a),s=o.name;r[s]=t.getAttribLocation(e,s)}return r}function c(t){return""!==t}function l(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function u(t){function e(t,e){var n=i.ShaderChunk[e];if(void 0===n)throw Error("Can not resolve #include <"+e+">");return u(n)}var n=/#include +<([\w\d.]+)>/g;return t.replace(n,e)}function h(t){function e(t,e,n,r){for(var i="",a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[ i \]/g,"[ "+a+" ]");return i}var n=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(n,e)}var f=0;return function(t,p,d,m){var g=t.context,v=d.extensions,y=d.defines,b=d.__webglShader.vertexShader,x=d.__webglShader.fragmentShader,w="SHADOWMAP_TYPE_BASIC";m.shadowMapType===i.PCFShadowMap?w="SHADOWMAP_TYPE_PCF":m.shadowMapType===i.PCFSoftShadowMap&&(w="SHADOWMAP_TYPE_PCF_SOFT");var _="ENVMAP_TYPE_CUBE",E="ENVMAP_MODE_REFLECTION",M="ENVMAP_BLENDING_MULTIPLY";if(m.envMap){switch(d.envMap.mapping){case i.CubeReflectionMapping:case i.CubeRefractionMapping:_="ENVMAP_TYPE_CUBE";break;case i.CubeUVReflectionMapping:case i.CubeUVRefractionMapping:_="ENVMAP_TYPE_CUBE_UV";break;case i.EquirectangularReflectionMapping:case i.EquirectangularRefractionMapping:_="ENVMAP_TYPE_EQUIREC";break;case i.SphericalReflectionMapping:_="ENVMAP_TYPE_SPHERE"}switch(d.envMap.mapping){case i.CubeRefractionMapping:case i.EquirectangularRefractionMapping:E="ENVMAP_MODE_REFRACTION"}switch(d.combine){case i.MultiplyOperation:M="ENVMAP_BLENDING_MULTIPLY";break;case i.MixOperation:M="ENVMAP_BLENDING_MIX";break;case i.AddOperation:M="ENVMAP_BLENDING_ADD"}}var T,S,A=t.gammaFactor>0?t.gammaFactor:1,C=a(v,m,t.extensions),k=o(y),L=g.createProgram();d instanceof i.RawShaderMaterial?(T=[k].filter(c).join("\n"),S=[k].filter(c).join("\n")):(T=["precision "+m.precision+" float;","precision "+m.precision+" int;","#define SHADER_NAME "+d.__webglShader.name,k,m.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+A,"#define MAX_BONES "+m.maxBones,m.map?"#define USE_MAP":"",m.envMap?"#define USE_ENVMAP":"",m.envMap?"#define "+E:"",m.lightMap?"#define USE_LIGHTMAP":"",m.aoMap?"#define USE_AOMAP":"",m.emissiveMap?"#define USE_EMISSIVEMAP":"",m.bumpMap?"#define USE_BUMPMAP":"",m.normalMap?"#define USE_NORMALMAP":"",m.displacementMap&&m.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",m.specularMap?"#define USE_SPECULARMAP":"",m.roughnessMap?"#define USE_ROUGHNESSMAP":"",m.metalnessMap?"#define USE_METALNESSMAP":"",m.alphaMap?"#define USE_ALPHAMAP":"",m.vertexColors?"#define USE_COLOR":"",m.flatShading?"#define FLAT_SHADED":"",m.skinning?"#define USE_SKINNING":"",m.useVertexTexture?"#define BONE_TEXTURE":"",m.morphTargets?"#define USE_MORPHTARGETS":"",m.morphNormals&&m.flatShading===!1?"#define USE_MORPHNORMALS":"",m.doubleSided?"#define DOUBLE_SIDED":"",m.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+m.numClippingPlanes,m.shadowMapEnabled?"#define USE_SHADOWMAP":"",m.shadowMapEnabled?"#define "+w:"",m.sizeAttenuation?"#define USE_SIZEATTENUATION":"",m.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",m.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(c).join("\n"),S=[C,"precision "+m.precision+" float;","precision "+m.precision+" int;","#define SHADER_NAME "+d.__webglShader.name,k,m.alphaTest?"#define ALPHATEST "+m.alphaTest:"","#define GAMMA_FACTOR "+A,m.useFog&&m.fog?"#define USE_FOG":"",m.useFog&&m.fogExp?"#define FOG_EXP2":"",m.map?"#define USE_MAP":"",m.envMap?"#define USE_ENVMAP":"",m.envMap?"#define "+_:"",m.envMap?"#define "+E:"",m.envMap?"#define "+M:"",m.lightMap?"#define USE_LIGHTMAP":"",m.aoMap?"#define USE_AOMAP":"",m.emissiveMap?"#define USE_EMISSIVEMAP":"",m.bumpMap?"#define USE_BUMPMAP":"",m.normalMap?"#define USE_NORMALMAP":"",m.specularMap?"#define USE_SPECULARMAP":"",m.roughnessMap?"#define USE_ROUGHNESSMAP":"",m.metalnessMap?"#define USE_METALNESSMAP":"",m.alphaMap?"#define USE_ALPHAMAP":"",m.vertexColors?"#define USE_COLOR":"",m.flatShading?"#define FLAT_SHADED":"",m.doubleSided?"#define DOUBLE_SIDED":"",m.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+m.numClippingPlanes,m.shadowMapEnabled?"#define USE_SHADOWMAP":"",m.shadowMapEnabled?"#define "+w:"",m.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",m.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",m.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",m.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",m.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",m.toneMapping!==i.NoToneMapping?"#define TONE_MAPPING":"",m.toneMapping!==i.NoToneMapping?i.ShaderChunk.tonemapping_pars_fragment:"",m.toneMapping!==i.NoToneMapping?r("toneMapping",m.toneMapping):"",m.outputEncoding||m.mapEncoding||m.envMapEncoding||m.emissiveMapEncoding?i.ShaderChunk.encodings_pars_fragment:"",m.mapEncoding?e("mapTexelToLinear",m.mapEncoding):"",m.envMapEncoding?e("envMapTexelToLinear",m.envMapEncoding):"",m.emissiveMapEncoding?e("emissiveMapTexelToLinear",m.emissiveMapEncoding):"",m.outputEncoding?n("linearToOutputTexel",m.outputEncoding):"",m.depthPacking?"#define DEPTH_PACKING "+d.depthPacking:"","\n"].filter(c).join("\n")),b=u(b,m),b=l(b,m),x=u(x,m),x=l(x,m),d instanceof i.ShaderMaterial==!1&&(b=h(b),x=h(x));var R=T+b,P=S+x,D=i.WebGLShader(g,g.VERTEX_SHADER,R),B=i.WebGLShader(g,g.FRAGMENT_SHADER,P);g.attachShader(L,D),g.attachShader(L,B),void 0!==d.index0AttributeName?g.bindAttribLocation(L,0,d.index0AttributeName):m.morphTargets===!0&&g.bindAttribLocation(L,0,"position"),g.linkProgram(L);var N=g.getProgramInfoLog(L),O=g.getShaderInfoLog(D),F=g.getShaderInfoLog(B),I=!0,j=!0;g.getProgramParameter(L,g.LINK_STATUS)===!1?(I=!1,console.error("THREE.WebGLProgram: shader error: ",g.getError(),"gl.VALIDATE_STATUS",g.getProgramParameter(L,g.VALIDATE_STATUS),"gl.getProgramInfoLog",N,O,F)):""!==N?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",N):""!==O&&""!==F||(j=!1),j&&(this.diagnostics={runnable:I,material:d,programLog:N,vertexShader:{log:O,prefix:T},fragmentShader:{log:F,prefix:S}}),g.deleteShader(D),g.deleteShader(B);var U;this.getUniforms=function(){return void 0===U&&(U=new i.WebGLUniforms(g,L,t)),U};var z;return this.getAttributes=function(){return void 0===z&&(z=s(g,L)),z},this.destroy=function(){g.deleteProgram(L),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=f++,this.code=p,this.usedTimes=1,this.program=L,this.vertexShader=D,this.fragmentShader=B,this}}(),i.WebGLPrograms=function(t,e){function n(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var n=e.maxVertexUniforms,r=Math.floor((n-20)/4),a=r;return void 0!==t&&t instanceof i.SkinnedMesh&&(a=Math.min(t.skeleton.bones.length,a),a<t.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+t.skeleton.bones.length+", this GPU supports just "+a+" (try OpenGL instead of ANGLE)")),a}function r(t,e){var n;return t?t instanceof i.Texture?n=t.encoding:t instanceof i.WebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=i.LinearEncoding,n===i.LinearEncoding&&e&&(n=i.GammaEncoding),n}var a=[],o={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","depthPacking"];this.getParameters=function(a,s,c,l,u){var h=o[a.type],f=n(u),p=t.getPrecision();null!==a.precision&&(p=e.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));var d=t.getCurrentRenderTarget(),m={shaderID:h,precision:p,supportsVertexTextures:e.vertexTextures,outputEncoding:r(d?d.texture:null,t.gammaOutput),map:!!a.map,mapEncoding:r(a.map,t.gammaInput),envMap:!!a.envMap,envMapMode:a.envMap&&a.envMap.mapping,envMapEncoding:r(a.envMap,t.gammaInput),envMapCubeUV:!!a.envMap&&(a.envMap.mapping===i.CubeUVReflectionMapping||a.envMap.mapping===i.CubeUVRefractionMapping),lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:r(a.emissiveMap,t.gammaInput),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,combine:a.combine,vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof i.FogExp2,flatShading:a.shading===i.FlatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:a.skinning,maxBones:f,useVertexTexture:e.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numHemiLights:s.hemi.length,numClippingPlanes:l,shadowMapEnabled:t.shadowMap.enabled&&u.receiveShadow&&s.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,alphaTest:a.alphaTest,doubleSided:a.side===i.DoubleSide,flipSided:a.side===i.BackSide,depthPacking:void 0!==a.depthPacking&&a.depthPacking};return m},this.getProgramCode=function(t,e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);for(var i=0;i<s.length;i++)n.push(e[s[i]]);return n.join()},this.acquireProgram=function(e,n,r){for(var o,s=0,c=a.length;s<c;s++){var l=a[s];if(l.code===r){o=l,++o.usedTimes;break}}return void 0===o&&(o=new i.WebGLProgram(t,r,e,n),a.push(o)),o},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},this.programs=a},i.WebGLProperties=function(){var t={};this.get=function(e){var n=e.uuid,r=t[n];return void 0===r&&(r={},t[n]=r),r},this.delete=function(e){delete t[e.uuid]},this.clear=function(){t={}}},i.WebGLShader=function(){function t(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}return function(e,n,r){var i=e.createShader(n);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",n===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),t(r)),i}}(),i.WebGLShadowMap=function(t,e,n){function r(e,n,r,a){var o=e.geometry,s=null,c=y,l=e.customDepthMaterial;if(r&&(c=b,l=e.customDistanceMaterial),l)s=l;else{var u=void 0!==o.morphTargets&&o.morphTargets.length>0&&n.morphTargets,h=e instanceof i.SkinnedMesh&&n.skinning,f=0;u&&(f|=m),h&&(f|=g),s=c[f]}if(t.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var p=s.uuid,d=n.uuid,v=x[p];void 0===v&&(v={},x[p]=v);var w=v[d];void 0===w&&(w=s.clone(),v[d]=w),s=w}s.visible=n.visible,s.wireframe=n.wireframe;var _=n.side;return P.renderSingleSided&&_==i.DoubleSide&&(_=i.FrontSide),P.renderReverseSided&&(_===i.FrontSide?_=i.BackSide:_===i.BackSide&&(_=i.FrontSide)),s.side=_,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,r&&void 0!==s.uniforms.lightPos&&s.uniforms.lightPos.value.copy(a),s}function a(t,e,n){if(t.visible!==!1){if(t.layers.test(e.layers)&&(t instanceof i.Mesh||t instanceof i.Line||t instanceof i.Points)&&t.castShadow&&(t.frustumCulled===!1||c.intersectsObject(t)===!0)){var r=t.material;r.visible===!0&&(t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),d.push(t))}for(var o=t.children,s=0,l=o.length;s<l;s++)a(o[s],e,n)}}var o=t.context,s=t.state,c=new i.Frustum,l=new i.Matrix4,u=e.shadows,h=new i.Vector2,f=new i.Vector3,p=new i.Vector3,d=[],m=1,g=2,v=(m|g)+1,y=Array(v),b=Array(v),x={},w=[new i.Vector3(1,0,0),new i.Vector3(-1,0,0),new i.Vector3(0,0,1),new i.Vector3(0,0,-1),new i.Vector3(0,1,0),new i.Vector3(0,-1,0)],_=[new i.Vector3(0,1,0),new i.Vector3(0,1,0),new i.Vector3(0,1,0),new i.Vector3(0,1,0),new i.Vector3(0,0,1),new i.Vector3(0,0,-1)],E=[new i.Vector4,new i.Vector4,new i.Vector4,new i.Vector4,new i.Vector4,new i.Vector4],M=new i.MeshDepthMaterial;M.depthPacking=i.RGBADepthPacking,M.clipping=!0;for(var T=i.ShaderLib.distanceRGBA,S=i.UniformsUtils.clone(T.uniforms),A=0;A!==v;++A){var C=0!==(A&m),k=0!==(A&g),L=M.clone();L.morphTargets=C,L.skinning=k,y[A]=L;var R=new i.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:S,vertexShader:T.vertexShader,fragmentShader:T.fragmentShader,morphTargets:C,skinning:k,clipping:!0});b[A]=R}var P=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=i.PCFShadowMap,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,m){if(P.enabled!==!1&&(P.autoUpdate!==!1||P.needsUpdate!==!1)&&0!==u.length){s.clearColor(1,1,1,1),s.disable(o.BLEND),s.setDepthTest(!0),s.setScissorTest(!1);for(var g,v,y=0,b=u.length;y<b;y++){var x=u[y],M=x.shadow;if(void 0!==M){var T=M.camera;if(h.copy(M.mapSize),x instanceof i.PointLight){g=6,v=!0;var S=h.x,A=h.y;E[0].set(2*S,A,S,A),E[1].set(0,A,S,A),E[2].set(3*S,A,S,A),E[3].set(S,A,S,A),E[4].set(3*S,0,S,A),E[5].set(S,0,S,A),h.x*=4,h.y*=2}else g=1,v=!1;if(null===M.map){var C={minFilter:i.NearestFilter,magFilter:i.NearestFilter,format:i.RGBAFormat};M.map=new i.WebGLRenderTarget(h.x,h.y,C),T.updateProjectionMatrix()}M instanceof i.SpotLightShadow&&M.update(x);var k=M.map,L=M.matrix;p.setFromMatrixPosition(x.matrixWorld),T.position.copy(p),t.setRenderTarget(k),t.clear();for(var R=0;R<g;R++){if(v){f.copy(T.position),f.add(w[R]),T.up.copy(_[R]),T.lookAt(f);var D=E[R];s.viewport(D)}else f.setFromMatrixPosition(x.target.matrixWorld),T.lookAt(f);T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),L.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),L.multiply(T.projectionMatrix),L.multiply(T.matrixWorldInverse),l.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),c.setFromMatrix(l),d.length=0,a(e,m,T);for(var B=0,N=d.length;B<N;B++){var O=d[B],F=n.update(O),I=O.material;if(I instanceof i.MultiMaterial)for(var j=F.groups,U=I.materials,z=0,V=j.length;z<V;z++){var G=j[z],H=U[G.materialIndex];if(H.visible===!0){var W=r(O,H,v,p);t.renderBufferDirect(T,null,F,W,O,G)}}else{var W=r(O,I,v,p);t.renderBufferDirect(T,null,F,W,O,null)}}}}else console.warn("THREE.WebGLShadowMap:",x,"has no shadow.")}var q=t.getClearColor(),X=t.getClearAlpha();t.setClearColor(q,X),P.needsUpdate=!1}}},i.WebGLState=function(t,e,n){function r(e,n,r){var i=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var o=0;o<r;o++)t.texImage2D(n+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return a}var a=this;this.buffers={color:new i.WebGLColorBuffer(t,this),depth:new i.WebGLDepthBuffer(t,this),stencil:new i.WebGLStencilBuffer(t,this)};var o=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=new Uint8Array(o),c=new Uint8Array(o),l=new Uint8Array(o),u={},h=null,f=null,p=null,d=null,m=null,g=null,v=null,y=null,b=!1,x=null,w=null,_=null,E=null,M=null,T=null,S=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),A=null,C={},k=new i.Vector4,L=new i.Vector4,R={};R[t.TEXTURE_2D]=r(t.TEXTURE_2D,t.TEXTURE_2D,1),R[t.TEXTURE_CUBE_MAP]=r(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),this.init=function(){this.clearColor(0,0,0,1),this.clearDepth(1),this.clearStencil(0),this.enable(t.DEPTH_TEST),this.setDepthFunc(i.LessEqualDepth),this.setFlipSided(!1),this.setCullFace(i.CullFaceBack),this.enable(t.CULL_FACE),this.enable(t.BLEND),this.setBlending(i.NormalBlending)},this.initAttributes=function(){for(var t=0,e=s.length;t<e;t++)s[t]=0},this.enableAttribute=function(n){if(s[n]=1,0===c[n]&&(t.enableVertexAttribArray(n),c[n]=1),0!==l[n]){var r=e.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,0),l[n]=0}},this.enableAttributeAndDivisor=function(e,n,r){s[e]=1,0===c[e]&&(t.enableVertexAttribArray(e),c[e]=1),l[e]!==n&&(r.vertexAttribDivisorANGLE(e,n),l[e]=n)},this.disableUnusedAttributes=function(){for(var e=0,n=c.length;e!==n;++e)c[e]!==s[e]&&(t.disableVertexAttribArray(e),c[e]=0)},this.enable=function(e){u[e]!==!0&&(t.enable(e),u[e]=!0)},this.disable=function(e){u[e]!==!1&&(t.disable(e),u[e]=!1)},this.getCompressedTextureFormats=function(){if(null===h&&(h=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)h.push(n[r]);return h},this.setBlending=function(e,r,a,o,s,c,l,u){return e===i.NoBlending?(this.disable(t.BLEND),void(f=e)):(this.enable(t.BLEND),e===f&&u===b||(e===i.AdditiveBlending?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===i.SubtractiveBlending?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===i.MultiplyBlending?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),f=e,b=u),void(e===i.CustomBlending?(s=s||r,c=c||a,l=l||o,r===p&&s===g||(t.blendEquationSeparate(n(r),n(s)),p=r,g=s),a===d&&o===m&&c===v&&l===y||(t.blendFuncSeparate(n(a),n(o),n(c),n(l)),d=a,m=o,v=c,y=l)):(p=null,d=null,m=null,g=null,v=null,y=null)))},this.setColorWrite=function(t){this.buffers.color.setMask(t)},this.setDepthTest=function(t){this.buffers.depth.setTest(t)},this.setDepthWrite=function(t){this.buffers.depth.setMask(t)},this.setDepthFunc=function(t){this.buffers.depth.setFunc(t)},this.setStencilTest=function(t){this.buffers.stencil.setTest(t)},this.setStencilWrite=function(t){this.buffers.stencil.setMask(t)},this.setStencilFunc=function(t,e,n){this.buffers.stencil.setFunc(t,e,n)},this.setStencilOp=function(t,e,n){this.buffers.stencil.setOp(t,e,n)},this.setFlipSided=function(e){x!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),x=e)},this.setCullFace=function(e){e!==i.CullFaceNone?(this.enable(t.CULL_FACE),e!==w&&(e===i.CullFaceBack?t.cullFace(t.BACK):e===i.CullFaceFront?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),w=e},this.setLineWidth=function(e){e!==_&&(t.lineWidth(e),_=e);
},this.setPolygonOffset=function(e,n,r){e?(this.enable(t.POLYGON_OFFSET_FILL),E===n&&M===r||(t.polygonOffset(n,r),E=n,M=r)):this.disable(t.POLYGON_OFFSET_FILL)},this.getScissorTest=function(){return T},this.setScissorTest=function(e){T=e,e?this.enable(t.SCISSOR_TEST):this.disable(t.SCISSOR_TEST)},this.activeTexture=function(e){void 0===e&&(e=t.TEXTURE0+S-1),A!==e&&(t.activeTexture(e),A=e)},this.bindTexture=function(e,n){null===A&&a.activeTexture();var r=C[A];void 0===r&&(r={type:void 0,texture:void 0},C[A]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||R[e]),r.type=e,r.texture=n)},this.compressedTexImage2D=function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error(t)}},this.texImage2D=function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error(t)}},this.clearColor=function(t,e,n,r){this.buffers.color.setClear(t,e,n,r)},this.clearDepth=function(t){this.buffers.depth.setClear(t)},this.clearStencil=function(t){this.buffers.stencil.setClear(t)},this.scissor=function(e){k.equals(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),k.copy(e))},this.viewport=function(e){L.equals(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),L.copy(e))},this.reset=function(){for(var e=0;e<c.length;e++)1===c[e]&&(t.disableVertexAttribArray(e),c[e]=0);u={},h=null,A=null,C={},f=null,x=null,w=null,this.buffers.color.reset(),this.buffers.depth.reset(),this.buffers.stencil.reset()}},i.WebGLColorBuffer=function(t,e){var n=!1,r=new i.Vector4,a=null,o=new i.Vector4;this.setMask=function(e){a===e||n||(t.colorMask(e,e,e,e),a=e)},this.setLocked=function(t){n=t},this.setClear=function(e,n,i,a){r.set(e,n,i,a),o.equals(r)===!1&&(t.clearColor(e,n,i,a),o.copy(r))},this.reset=function(){n=!1,a=null,o=new i.Vector4}},i.WebGLDepthBuffer=function(t,e){var n=!1,r=null,a=null,o=null;this.setTest=function(n){n?e.enable(t.DEPTH_TEST):e.disable(t.DEPTH_TEST)},this.setMask=function(e){r===e||n||(t.depthMask(e),r=e)},this.setFunc=function(e){if(a!==e){if(e)switch(e){case i.NeverDepth:t.depthFunc(t.NEVER);break;case i.AlwaysDepth:t.depthFunc(t.ALWAYS);break;case i.LessDepth:t.depthFunc(t.LESS);break;case i.LessEqualDepth:t.depthFunc(t.LEQUAL);break;case i.EqualDepth:t.depthFunc(t.EQUAL);break;case i.GreaterEqualDepth:t.depthFunc(t.GEQUAL);break;case i.GreaterDepth:t.depthFunc(t.GREATER);break;case i.NotEqualDepth:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);a=e}},this.setLocked=function(t){n=t},this.setClear=function(e){o!==e&&(t.clearDepth(e),o=e)},this.reset=function(){n=!1,r=null,a=null,o=null}},i.WebGLStencilBuffer=function(t,e){var n=!1,r=null,i=null,a=null,o=null,s=null,c=null,l=null,u=null;this.setTest=function(n){n?e.enable(t.STENCIL_TEST):e.disable(t.STENCIL_TEST)},this.setMask=function(e){r===e||n||(t.stencilMask(e),r=e)},this.setFunc=function(e,n,r){i===e&&a===n&&o===r||(t.stencilFunc(e,n,r),i=e,a=n,o=r)},this.setOp=function(e,n,r){s===e&&c===n&&l===r||(t.stencilOp(e,n,r),s=e,c=n,l=r)},this.setLocked=function(t){n=t},this.setClear=function(e){u!==e&&(t.clearStencil(e),u=e)},this.reset=function(){n=!1,r=null,i=null,a=null,o=null,s=null,c=null,l=null,u=null}},i.WebGLTextures=function(t,e,n,r,a,o,s){function c(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(t.width*n),r.height=Math.floor(t.height*n);var i=r.getContext("2d");return i.drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height,t),r}return t}function l(t){return i.Math.isPowerOfTwo(t.width)&&i.Math.isPowerOfTwo(t.height)}function u(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=i.Math.nearestPowerOfTwo(t.width),e.height=i.Math.nearestPowerOfTwo(t.height);var n=e.getContext("2d");return n.drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e}return t}function h(t){return t.wrapS!==i.ClampToEdgeWrapping||t.wrapT!==i.ClampToEdgeWrapping||t.minFilter!==i.NearestFilter&&t.minFilter!==i.LinearFilter}function f(e){return e===i.NearestFilter||e===i.NearestMipMapNearestFilter||e===i.NearestMipMapLinearFilter?t.NEAREST:t.LINEAR}function p(t){var e=t.target;e.removeEventListener("dispose",p),m(e),C.textures--}function d(t){var e=t.target;e.removeEventListener("dispose",d),g(e),C.textures--}function m(e){var n=r.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture)}r.delete(e)}function g(e){var n=r.get(e),a=r.get(e.texture);if(e){if(void 0!==a.__webglTexture&&t.deleteTexture(a.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e instanceof i.WebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.delete(e.texture),r.delete(e)}}function v(e,i){var a=r.get(e);if(e.version>0&&a.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(o.complete!==!1)return void w(a,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_2D,a.__webglTexture)}function y(e,s){var u=r.get(e);if(6===e.image.length)if(e.version>0&&u.__version!==e.version){u.__image__webglTextureCube||(e.addEventListener("dispose",p),u.__image__webglTextureCube=t.createTexture(),C.textures++),n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var h=e instanceof i.CompressedTexture,f=e.image[0]instanceof i.DataTexture,d=[],m=0;m<6;m++)h||f?d[m]=f?e.image[m].image:e.image[m]:d[m]=c(e.image[m],a.maxCubemapSize);var g=d[0],v=l(g),y=o(e.format),b=o(e.type);x(t.TEXTURE_CUBE_MAP,e,v);for(var m=0;m<6;m++)if(h)for(var w,_=d[m].mipmaps,E=0,M=_.length;E<M;E++)w=_[E],e.format!==i.RGBAFormat&&e.format!==i.RGBFormat?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,E,y,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,E,y,w.width,w.height,0,y,b,w.data);else f?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,d[m].width,d[m].height,0,y,b,d[m].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,y,b,d[m]);e.generateMipmaps&&v&&t.generateMipmap(t.TEXTURE_CUBE_MAP),u.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}function b(e,i){n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_CUBE_MAP,r.get(e).__webglTexture)}function x(n,s,c){var l;if(c?(t.texParameteri(n,t.TEXTURE_WRAP_S,o(s.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,o(s.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,o(s.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,o(s.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),s.wrapS===i.ClampToEdgeWrapping&&s.wrapT===i.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s),t.texParameteri(n,t.TEXTURE_MAG_FILTER,f(s.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,f(s.minFilter)),s.minFilter!==i.NearestFilter&&s.minFilter!==i.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)),l=e.get("EXT_texture_filter_anisotropic")){if(s.type===i.FloatType&&null===e.get("OES_texture_float_linear"))return;if(s.type===i.HalfFloatType&&null===e.get("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,a.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function w(e,r,s){void 0===e.__webglInit&&(e.__webglInit=!0,r.addEventListener("dispose",p),e.__webglTexture=t.createTexture(),C.textures++),n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment);var f=c(r.image,a.maxTextureSize);h(r)&&l(f)===!1&&(f=u(f));var d=l(f),m=o(r.format),g=o(r.type);x(t.TEXTURE_2D,r,d);var v,y=r.mipmaps;if(r instanceof i.DepthTexture){var b=t.DEPTH_COMPONENT;if(r.type===i.FloatType){if(!k)throw Error("Float Depth Texture only supported in WebGL2.0");b=t.DEPTH_COMPONENT32F}else k&&(b=t.DEPTH_COMPONENT16);n.texImage2D(t.TEXTURE_2D,0,b,f.width,f.height,0,m,g,null)}else if(r instanceof i.DataTexture)if(y.length>0&&d){for(var w=0,_=y.length;w<_;w++)v=y[w],n.texImage2D(t.TEXTURE_2D,w,m,v.width,v.height,0,m,g,v.data);r.generateMipmaps=!1}else n.texImage2D(t.TEXTURE_2D,0,m,f.width,f.height,0,m,g,f.data);else if(r instanceof i.CompressedTexture)for(var w=0,_=y.length;w<_;w++)v=y[w],r.format!==i.RGBAFormat&&r.format!==i.RGBFormat?n.getCompressedTextureFormats().indexOf(m)>-1?n.compressedTexImage2D(t.TEXTURE_2D,w,m,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,w,m,v.width,v.height,0,m,g,v.data);else if(y.length>0&&d){for(var w=0,_=y.length;w<_;w++)v=y[w],n.texImage2D(t.TEXTURE_2D,w,m,m,g,v);r.generateMipmaps=!1}else n.texImage2D(t.TEXTURE_2D,0,m,m,g,f);r.generateMipmaps&&d&&t.generateMipmap(t.TEXTURE_2D),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function _(e,i,a,s){var c=o(i.texture.format),l=o(i.texture.type);n.texImage2D(s,0,c,i.width,i.height,0,c,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function E(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function M(e,n){var a=n instanceof i.WebGLRenderTargetCube;if(a)throw Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!(n.depthTexture instanceof i.DepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),v(n.depthTexture,0);var o=r.get(n.depthTexture).__webglTexture;t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0)}function T(e){var n=r.get(e),a=e instanceof i.WebGLRenderTargetCube;if(e.depthTexture){if(a)throw Error("target.depthTexture not supported in Cube render targets");M(n.__webglFramebuffer,e)}else if(a){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),E(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),E(n.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function S(e){var a=r.get(e),o=r.get(e.texture);e.addEventListener("dispose",d),o.__webglTexture=t.createTexture(),C.textures++;var s=e instanceof i.WebGLRenderTargetCube,c=l(e);if(s){a.__webglFramebuffer=[];for(var u=0;u<6;u++)a.__webglFramebuffer[u]=t.createFramebuffer()}else a.__webglFramebuffer=t.createFramebuffer();if(s){n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),x(t.TEXTURE_CUBE_MAP,e.texture,c);for(var u=0;u<6;u++)_(a.__webglFramebuffer[u],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+u);e.texture.generateMipmaps&&c&&t.generateMipmap(t.TEXTURE_CUBE_MAP),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,o.__webglTexture),x(t.TEXTURE_2D,e.texture,c),_(a.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&c&&t.generateMipmap(t.TEXTURE_2D),n.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&T(e)}function A(e){var a=e.texture;if(a.generateMipmaps&&l(e)&&a.minFilter!==i.NearestFilter&&a.minFilter!==i.LinearFilter){var o=e instanceof i.WebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,s=r.get(a).__webglTexture;n.bindTexture(o,s),t.generateMipmap(o),n.bindTexture(o,null)}}var C=s.memory,k="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=v,this.setTextureCube=y,this.setTextureCubeDynamic=b,this.setupRenderTarget=S,this.updateRenderTargetMipmap=A},i.WebGLUniforms=function(){var t=new i.Texture,e=new i.CubeTexture,n=function(){this.seq=[],this.map={}},r=[],a=[],o=function(t,e,n){var i=t[0];if(i<=0||i>0)return t;var a=e*n,o=r[a];if(void 0===o&&(o=new Float32Array(a),r[a]=o),0!==e){i.toArray(o,0);for(var s=1,c=0;s!==e;++s)c+=n,t[s].toArray(o,c)}return o},s=function(t,e){var n=a[e];void 0===n&&(n=new Int32Array(e),a[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocTextureUnit();return n},c=function(t,e){t.uniform1f(this.addr,e)},l=function(t,e){t.uniform1i(this.addr,e)},u=function(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)},h=function(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)},f=function(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)},p=function(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)},d=function(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)},m=function(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)},g=function(e,n,r){var i=r.allocTextureUnit();e.uniform1i(this.addr,i),r.setTexture2D(n||t,i)},v=function(t,n,r){var i=r.allocTextureUnit();t.uniform1i(this.addr,i),r.setTextureCube(n||e,i)},y=function(t,e){t.uniform2iv(this.addr,e)},b=function(t,e){t.uniform3iv(this.addr,e)},x=function(t,e){t.uniform4iv(this.addr,e)},w=function(t){switch(t){case 5126:return c;case 35664:return u;case 35665:return h;case 35666:return f;case 35674:return p;case 35675:return d;case 35676:return m;case 35678:return g;case 35680:return v;case 5124:case 35670:return l;case 35667:case 35671:return y;case 35668:case 35672:return b;case 35669:case 35673:return x}},_=function(t,e){t.uniform1fv(this.addr,e)},E=function(t,e){t.uniform1iv(this.addr,e)},M=function(t,e){t.uniform2fv(this.addr,o(e,this.size,2))},T=function(t,e){t.uniform3fv(this.addr,o(e,this.size,3))},S=function(t,e){t.uniform4fv(this.addr,o(e,this.size,4))},A=function(t,e){t.uniformMatrix2fv(this.addr,!1,o(e,this.size,4))},C=function(t,e){t.uniformMatrix3fv(this.addr,!1,o(e,this.size,9))},k=function(t,e){t.uniformMatrix4fv(this.addr,!1,o(e,this.size,16))},L=function(e,n,r){var i=n.length,a=s(r,i);e.uniform1iv(this.addr,a);for(var o=0;o!==i;++o)r.setTexture2D(n[o]||t,a[o])},R=function(t,n,r){var i=n.length,a=s(r,i);t.uniform1iv(this.addr,a);for(var o=0;o!==i;++o)r.setTextureCube(n[o]||e,a[o])},P=function(t){switch(t){case 5126:return _;case 35664:return M;case 35665:return T;case 35666:return S;case 35674:return A;case 35675:return C;case 35676:return k;case 35678:return L;case 35680:return R;case 5124:case 35670:return E;case 35667:case 35671:return y;case 35668:case 35672:return b;case 35669:case 35673:return x}},D=function(t,e,n){this.id=t,this.addr=n,this.setValue=w(e.type)},B=function(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=P(e.type)},N=function(t){this.id=t,n.call(this)};N.prototype.setValue=function(t,e){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var a=n[r];a.setValue(t,e[a.id])}};var O=/([\w\d_]+)(\])?(\[|\.)?/g,F=function(t,e){t.seq.push(e),t.map[e.id]=e},I=function(t,e,n){var r=t.name,i=r.length;for(O.lastIndex=0;;){var a=O.exec(r),o=O.lastIndex,s=a[1],c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===i){F(n,void 0===l?new D(s,t,e):new B(s,t,e));break}var u=n.map,h=u[s];void 0===h&&(h=new N(s),F(n,h)),n=h}},j=function(t,e,r){n.call(this),this.renderer=r;for(var i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),a=0;a!==i;++a){var o=t.getActiveUniform(e,a),s=o.name,c=t.getUniformLocation(e,s);I(o,c,this)}};return j.prototype.setValue=function(t,e,n){var r=this.map[e];void 0!==r&&r.setValue(t,n,this.renderer)},j.prototype.set=function(t,e,n){var r=this.map[n];void 0!==r&&r.setValue(t,e[n],this.renderer)},j.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},j.upload=function(t,e,n,r){for(var i=0,a=e.length;i!==a;++i){var o=e[i],s=n[o.id];s.needsUpdate!==!1&&o.setValue(t,s.value,r)}},j.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var a=t[r];a.id in e&&n.push(a)}return n},j.splitDynamic=function(t,e){for(var n=null,r=t.length,i=0,a=0;a!==r;++a){var o=t[a],s=e[o.id];s&&s.dynamic===!0?(null===n&&(n=[]),n.push(o)):(i<a&&(t[i]=o),++i)}return i<r&&(t.length=i),n},j.evalDynamic=function(t,e,n,r){for(var i=0,a=t.length;i!==a;++i){var o=e[t[i].id],s=o.onUpdateCallback;void 0!==s&&s.call(o,n,r)}},j}(),i.LensFlarePlugin=function(t,e){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);a=p.createBuffer(),o=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,a),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),h=p.createTexture(),f=p.createTexture(),d.bindTexture(p.TEXTURE_2D,h),p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),d.bindTexture(p.TEXTURE_2D,f),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),s={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},c=r(s),l={vertex:p.getAttribLocation(c,"position"),uv:p.getAttribLocation(c,"uv")},u={renderType:p.getUniformLocation(c,"renderType"),map:p.getUniformLocation(c,"map"),occlusionMap:p.getUniformLocation(c,"occlusionMap"),opacity:p.getUniformLocation(c,"opacity"),color:p.getUniformLocation(c,"color"),scale:p.getUniformLocation(c,"scale"),rotation:p.getUniformLocation(c,"rotation"),screenPosition:p.getUniformLocation(c,"screenPosition")}}function r(e){var n=p.createProgram(),r=p.createShader(p.FRAGMENT_SHADER),i=p.createShader(p.VERTEX_SHADER),a="precision "+t.getPrecision()+" float;\n";return p.shaderSource(r,a+e.fragmentShader),p.shaderSource(i,a+e.vertexShader),p.compileShader(r),p.compileShader(i),p.attachShader(n,r),p.attachShader(n,i),p.linkProgram(n),n}var a,o,s,c,l,u,h,f,p=t.context,d=t.state;this.render=function(r,s,m){if(0!==e.length){var g=new i.Vector3,v=m.w/m.z,y=.5*m.z,b=.5*m.w,x=16/m.w,w=new i.Vector2(x*v,x),_=new i.Vector3(1,1,0),E=new i.Vector2(1,1),M=new i.Box2;M.min.set(0,0),M.max.set(m.z-16,m.w-16),void 0===c&&n(),p.useProgram(c),d.initAttributes(),d.enableAttribute(l.vertex),d.enableAttribute(l.uv),d.disableUnusedAttributes(),p.uniform1i(u.occlusionMap,0),p.uniform1i(u.map,1),p.bindBuffer(p.ARRAY_BUFFER,a),p.vertexAttribPointer(l.vertex,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(l.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),d.disable(p.CULL_FACE),d.setDepthWrite(!1);for(var T=0,S=e.length;T<S;T++){x=16/m.w,w.set(x*v,x);var A=e[T];if(g.set(A.matrixWorld.elements[12],A.matrixWorld.elements[13],A.matrixWorld.elements[14]),g.applyMatrix4(s.matrixWorldInverse),g.applyProjection(s.projectionMatrix),_.copy(g),E.x=m.x+_.x*y+y-8,E.y=m.y+_.y*b+b-8,M.containsPoint(E)===!0){d.activeTexture(p.TEXTURE0),d.bindTexture(p.TEXTURE_2D,null),d.activeTexture(p.TEXTURE1),d.bindTexture(p.TEXTURE_2D,h),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,E.x,E.y,16,16,0),p.uniform1i(u.renderType,0),p.uniform2f(u.scale,w.x,w.y),p.uniform3f(u.screenPosition,_.x,_.y,_.z),d.disable(p.BLEND),d.enable(p.DEPTH_TEST),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),d.activeTexture(p.TEXTURE0),d.bindTexture(p.TEXTURE_2D,f),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,E.x,E.y,16,16,0),p.uniform1i(u.renderType,1),d.disable(p.DEPTH_TEST),d.activeTexture(p.TEXTURE1),d.bindTexture(p.TEXTURE_2D,h),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),A.positionScreen.copy(_),A.customUpdateCallback?A.customUpdateCallback(A):A.updateLensFlares(),p.uniform1i(u.renderType,2),d.enable(p.BLEND);for(var C=0,k=A.lensFlares.length;C<k;C++){var L=A.lensFlares[C];L.opacity>.001&&L.scale>.001&&(_.x=L.x,_.y=L.y,_.z=L.z,x=L.size*L.scale/m.w,w.x=x*v,w.y=x,p.uniform3f(u.screenPosition,_.x,_.y,_.z),p.uniform2f(u.scale,w.x,w.y),p.uniform1f(u.rotation,L.rotation),p.uniform1f(u.opacity,L.opacity),p.uniform3f(u.color,L.color.r,L.color.g,L.color.b),d.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst),t.setTexture2D(L.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}d.enable(p.CULL_FACE),d.enable(p.DEPTH_TEST),d.setDepthWrite(!0),t.resetGLState()}}},i.SpritePlugin=function(t,e){function n(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);o=f.createBuffer(),s=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,o),f.bufferData(f.ARRAY_BUFFER,t,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),f.bufferData(f.ELEMENT_ARRAY_BUFFER,e,f.STATIC_DRAW),c=r(),l={position:f.getAttribLocation(c,"position"),uv:f.getAttribLocation(c,"uv")},u={uvOffset:f.getUniformLocation(c,"uvOffset"),uvScale:f.getUniformLocation(c,"uvScale"),rotation:f.getUniformLocation(c,"rotation"),scale:f.getUniformLocation(c,"scale"),color:f.getUniformLocation(c,"color"),map:f.getUniformLocation(c,"map"),opacity:f.getUniformLocation(c,"opacity"),modelViewMatrix:f.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:f.getUniformLocation(c,"projectionMatrix"),fogType:f.getUniformLocation(c,"fogType"),fogDensity:f.getUniformLocation(c,"fogDensity"),fogNear:f.getUniformLocation(c,"fogNear"),fogFar:f.getUniformLocation(c,"fogFar"),fogColor:f.getUniformLocation(c,"fogColor"),alphaTest:f.getUniformLocation(c,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var a=n.getContext("2d");a.fillStyle="white",a.fillRect(0,0,8,8),h=new i.Texture(n),h.needsUpdate=!0}function r(){var e=f.createProgram(),n=f.createShader(f.VERTEX_SHADER),r=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),f.shaderSource(r,["precision "+t.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),f.compileShader(n),f.compileShader(r),f.attachShader(e,n),f.attachShader(e,r),f.linkProgram(e),e}function a(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var o,s,c,l,u,h,f=t.context,p=t.state,d=new i.Vector3,m=new i.Quaternion,g=new i.Vector3;this.render=function(r,v){if(0!==e.length){void 0===c&&n(),f.useProgram(c),p.initAttributes(),p.enableAttribute(l.position),p.enableAttribute(l.uv),p.disableUnusedAttributes(),p.disable(f.CULL_FACE),p.enable(f.BLEND),f.bindBuffer(f.ARRAY_BUFFER,o),f.vertexAttribPointer(l.position,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(l.uv,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),f.uniformMatrix4fv(u.projectionMatrix,!1,v.projectionMatrix.elements),p.activeTexture(f.TEXTURE0),f.uniform1i(u.map,0);var y=0,b=0,x=r.fog;x?(f.uniform3f(u.fogColor,x.color.r,x.color.g,x.color.b),x instanceof i.Fog?(f.uniform1f(u.fogNear,x.near),f.uniform1f(u.fogFar,x.far),f.uniform1i(u.fogType,1),y=1,b=1):x instanceof i.FogExp2&&(f.uniform1f(u.fogDensity,x.density),f.uniform1i(u.fogType,2),y=2,b=2)):(f.uniform1i(u.fogType,0),y=0,b=0);for(var w=0,_=e.length;w<_;w++){var E=e[w];E.modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}e.sort(a);for(var M=[],w=0,_=e.length;w<_;w++){var E=e[w],T=E.material;f.uniform1f(u.alphaTest,T.alphaTest),f.uniformMatrix4fv(u.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(d,m,g),M[0]=g.x,M[1]=g.y;var S=0;r.fog&&T.fog&&(S=b),y!==S&&(f.uniform1i(u.fogType,S),y=S),null!==T.map?(f.uniform2f(u.uvOffset,T.map.offset.x,T.map.offset.y),f.uniform2f(u.uvScale,T.map.repeat.x,T.map.repeat.y)):(f.uniform2f(u.uvOffset,0,0),f.uniform2f(u.uvScale,1,1)),f.uniform1f(u.opacity,T.opacity),f.uniform3f(u.color,T.color.r,T.color.g,T.color.b),f.uniform1f(u.rotation,T.rotation),f.uniform2fv(u.scale,M),p.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst),p.setDepthTest(T.depthTest),p.setDepthWrite(T.depthWrite),T.map?t.setTexture2D(T.map,0):t.setTexture2D(h,0),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0)}p.enable(f.CULL_FACE),t.resetGLState()}}},Object.assign(i,{Face4:function(t,e,n,r,a,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new i.Face3(t,e,n,a,o,s)},LineStrip:0,LinePieces:1,MeshFaceMaterial:i.MultiMaterial,PointCloud:function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new i.Points(t,e)},Particle:i.Sprite,ParticleSystem:function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new i.Points(t,e)},PointCloudMaterial:function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new i.PointsMaterial(t)},ParticleBasicMaterial:function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new i.PointsMaterial(t)},ParticleSystemMaterial:function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new i.PointsMaterial(t)},Vertex:function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new i.Vector3(t,e,n)}}),Object.assign(i.Box2.prototype,{empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)}}),Object.assign(i.Box3.prototype,{empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(i.Matrix3.prototype,{multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)}}),Object.assign(i.Matrix4.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),
this.applyToVector3Array(t)},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(t){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(t){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(t){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,e){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}),Object.assign(i.Plane.prototype,{isIntersectionLine:function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)}}),Object.assign(i.Quaternion.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)}}),Object.assign(i.Ray.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(i.Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)}}),Object.assign(i.Object3D.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(t){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(i.Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(t){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(i.LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),i.PerspectiveCamera.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(i.Light.prototype,{onlyShadow:{set:function(t){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(t){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(t){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(i.BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.assign(i.BufferGeometry.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(i.BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(i.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(t){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new i.Color}}}),Object.defineProperties(i.MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(t){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(i.ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),i.EventDispatcher.prototype=Object.assign(Object.create({constructor:i.EventDispatcher,apply:function(t){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(t,this)}}),i.EventDispatcher.prototype),Object.assign(i.WebGLRenderer.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(i.WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(i.WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?i.CullFaceFront:i.CullFaceBack},set:function(t){var e=t!==i.CullFaceBack;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.renderReverseSided=e}}}),Object.defineProperties(i.WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.assign(i.Audio.prototype,{load:function(t){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var e=this,n=new i.AudioLoader;return n.load(t,function(t){e.setBuffer(t)}),this}}),Object.assign(i.AudioAnalyser.prototype,{getData:function(t){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()}}),i.GeometryUtils={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;e instanceof i.Mesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},i.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var a=new i.TextureLoader;a.setCrossOrigin(this.crossOrigin);var o=a.load(t,n,void 0,r);return e&&(o.mapping=e),o},loadTextureCube:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var a=new i.CubeTextureLoader;a.setCrossOrigin(this.crossOrigin);var o=a.load(t,n,void 0,r);return e&&(o.mapping=e),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},i.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(t,e){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},i.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},i.CurveUtils={tangentQuadraticBezier:function(t,e,n,r){return 2*(1-t)*(n-e)+2*t*(r-n)},tangentCubicBezier:function(t,e,n,r,i){return-3*e*(1-t)*(1-t)+3*n*(1-t)*(1-t)-6*t*n*(1-t)+6*t*r*(1-t)-3*t*t*r+3*t*t*i},tangentSpline:function(t,e,n,r,i){var a=6*t*t-6*t,o=3*t*t-4*t+1,s=-6*t*t+6*t,c=3*t*t-2*t;return a+o+s+c},interpolate:function(t,e,n,r,i){var a=.5*(n-t),o=.5*(r-e),s=i*i,c=i*s;return(2*e-2*n+a+o)*c+(-3*e+3*n-2*a-o)*s+a*i+e}},i.SceneUtils={createMultiMaterialObject:function(t,e){for(var n=new i.Group,r=0,a=e.length;r<a;r++)n.add(new i.Mesh(t,e[r]));return n},detach:function(t,e,n){t.applyMatrix(e.matrixWorld),e.remove(t),n.add(t)},attach:function(t,e,n){var r=new i.Matrix4;r.getInverse(n.matrixWorld),t.applyMatrix(r),e.remove(t),n.add(t)}},i.ShapeUtils={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},triangulate:function(){function t(t,e,n,r,i,a){var o,s,c,l,u,h,f,p,d;if(s=t[a[e]].x,c=t[a[e]].y,l=t[a[n]].x,u=t[a[n]].y,h=t[a[r]].x,f=t[a[r]].y,Number.EPSILON>(l-s)*(f-c)-(u-c)*(h-s))return!1;var m,g,v,y,b,x,w,_,E,M,T,S,A,C,k;for(m=h-l,g=f-u,v=s-h,y=c-f,b=l-s,x=u-c,o=0;o<i;o++)if(p=t[a[o]].x,d=t[a[o]].y,!(p===s&&d===c||p===l&&d===u||p===h&&d===f)&&(w=p-s,_=d-c,E=p-l,M=d-u,T=p-h,S=d-f,k=m*M-g*E,A=b*_-x*w,C=v*S-y*T,k>=-Number.EPSILON&&C>=-Number.EPSILON&&A>=-Number.EPSILON))return!1;return!0}return function(e,n){var r=e.length;if(r<3)return null;var a,o,s,c=[],l=[],u=[];if(i.ShapeUtils.area(e)>0)for(o=0;o<r;o++)l[o]=o;else for(o=0;o<r;o++)l[o]=r-1-o;var h=r,f=2*h;for(o=h-1;h>2;){if(f--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?u:c;if(a=o,h<=a&&(a=0),o=a+1,h<=o&&(o=0),s=o+1,h<=s&&(s=0),t(e,a,o,s,h,l)){var p,d,m,g,v;for(p=l[a],d=l[o],m=l[s],c.push([e[p],e[d],e[m]]),u.push([l[a],l[o],l[s]]),g=o,v=o+1;v<h;g++,v++)l[g]=l[v];h--,f=2*h}}return n?u:c}}(),triangulateShape:function(t,e){function n(t,e,n){return t.x!==e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function r(t,e,r,i,a){var o=e.x-t.x,s=e.y-t.y,c=i.x-r.x,l=i.y-r.y,u=t.x-r.x,h=t.y-r.y,f=s*c-o*l,p=s*u-o*h;if(Math.abs(f)>Number.EPSILON){var d;if(f>0){if(p<0||p>f)return[];if(d=l*u-c*h,d<0||d>f)return[]}else{if(p>0||p<f)return[];if(d=l*u-c*h,d>0||d<f)return[]}if(0===d)return!a||0!==p&&p!==f?[t]:[];if(d===f)return!a||0!==p&&p!==f?[e]:[];if(0===p)return[r];if(p===f)return[i];var m=d/f;return[{x:t.x+m*o,y:t.y+m*s}]}if(0!==p||l*u!==c*h)return[];var g=0===o&&0===s,v=0===c&&0===l;if(g&&v)return t.x!==r.x||t.y!==r.y?[]:[t];if(g)return n(r,i,t)?[t]:[];if(v)return n(t,e,r)?[r]:[];var y,b,x,w,_,E,M,T;return 0!==o?(t.x<e.x?(y=t,x=t.x,b=e,w=e.x):(y=e,x=e.x,b=t,w=t.x),r.x<i.x?(_=r,M=r.x,E=i,T=i.x):(_=i,M=i.x,E=r,T=r.x)):(t.y<e.y?(y=t,x=t.y,b=e,w=e.y):(y=e,x=e.y,b=t,w=t.y),r.y<i.y?(_=r,M=r.y,E=i,T=i.y):(_=i,M=i.y,E=r,T=r.y)),x<=M?w<M?[]:w===M?a?[]:[_]:w<=T?[_,b]:[_,E]:x>T?[]:x===T?a?[]:[y]:w<=T?[y,b]:[y,E]}function a(t,e,n,r){var i=e.x-t.x,a=e.y-t.y,o=n.x-t.x,s=n.y-t.y,c=r.x-t.x,l=r.y-t.y,u=i*s-a*o,h=i*l-a*c;if(Math.abs(u)>Number.EPSILON){var f=c*s-l*o;return u>0?h>=0&&f>=0:h>=0||f>=0}return h>0}function o(t,e){function n(t,e){var n=y.length-1,r=t-1;r<0&&(r=n);var i=t+1;i>n&&(i=0);var o=a(y[t],y[r],y[i],s[e]);if(!o)return!1;var c=s.length-1,l=e-1;l<0&&(l=c);var u=e+1;return u>c&&(u=0),o=a(s[e],s[l],s[u],y[t]),!!o}function i(t,e){var n,i,a;for(n=0;n<y.length;n++)if(i=n+1,i%=y.length,a=r(t,e,y[n],y[i],!0),a.length>0)return!0;return!1}function o(t,n){var i,a,o,s,c;for(i=0;i<b.length;i++)for(a=e[b[i]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,c=r(t,n,a[o],a[s],!0),c.length>0)return!0;return!1}for(var s,c,l,u,h,f,p,d,m,g,v,y=t.concat(),b=[],x=[],w=0,_=e.length;w<_;w++)b.push(w);for(var E=0,M=2*b.length;b.length>0;){if(M--,M<0){console.log("Infinite Loop! Holes left:"+b.length+", Probably Hole outside Shape!");break}for(l=E;l<y.length;l++){u=y[l],c=-1;for(var w=0;w<b.length;w++)if(f=b[w],p=u.x+":"+u.y+":"+f,void 0===x[p]){s=e[f];for(var T=0;T<s.length;T++)if(h=s[T],n(l,T)&&!i(u,h)&&!o(u,h)){c=T,b.splice(w,1),d=y.slice(0,l+1),m=y.slice(l),g=s.slice(c),v=s.slice(0,c+1),y=d.concat(g).concat(v).concat(m),E=l;break}if(c>=0)break;x[p]=!0}if(c>=0)break}}return y}for(var s,c,l,u,h,f,p={},d=t.concat(),m=0,g=e.length;m<g;m++)Array.prototype.push.apply(d,e[m]);for(s=0,c=d.length;s<c;s++)h=d[s].x+":"+d[s].y,void 0!==p[h]&&console.warn("THREE.Shape: Duplicate point",h),p[h]=s;var v=o(t,e),y=i.ShapeUtils.triangulate(v,!1);for(s=0,c=y.length;s<c;s++)for(u=y[s],l=0;l<3;l++)h=u[l].x+":"+u[l].y,f=p[h],void 0!==f&&(u[l]=f);return y.concat()},isClockWise:function(t){return i.ShapeUtils.area(t)<0},b2:function(){function t(t,e){var n=1-t;return n*n*e}function e(t,e){return 2*(1-t)*t*e}function n(t,e){return t*t*e}return function(r,i,a,o){return t(r,i)+e(r,a)+n(r,o)}}(),b3:function(){function t(t,e){var n=1-t;return n*n*n*e}function e(t,e){var n=1-t;return 3*n*n*t*e}function n(t,e){var n=1-t;return 3*n*t*t*e}function r(t,e){return t*t*t*e}return function(i,a,o,s,c){return t(i,a)+e(i,o)+n(i,s)+r(i,c)}}()},i.Curve=function(){},i.Curve.prototype={constructor:i.Curve,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){t||(t=5);var e,n=[];for(e=0;e<=t;e++)n.push(this.getPoint(e/t));return n},getSpacedPoints:function(t){t||(t=5);var e,n=[];for(e=0;e<=t;e++)n.push(this.getPointAt(e/t));return n},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),a=0;for(r.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),a+=e.distanceTo(i),r.push(a),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,a=r.length;n=e?e:t*r[a-1];for(var o,s=0,c=a-1;s<=c;)if(i=Math.floor(s+(c-s)/2),o=r[i]-n,o<0)s=i+1;else{if(!(o>0)){c=i;break}c=i-1}if(i=c,r[i]===n){var l=i/(a-1);return l}var u=r[i],h=r[i+1],f=h-u,p=(n-u)/f,l=(i+p)/(a-1);return l},getTangent:function(t){var e=1e-4,n=t-e,r=t+e;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),a=this.getPoint(r),o=a.clone().sub(i);return o.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)}},i.Curve.create=function(t,e){return t.prototype=Object.create(i.Curve.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},i.CurvePath=function(){this.curves=[],this.autoClose=!1},i.CurvePath.prototype=Object.assign(Object.create(i.Curve.prototype),{constructor:i.CurvePath,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new i.LineCurve(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,a=this.curves[r],o=1-i/a.getLength();return a.getPointAt(o)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new i.Geometry,n=0,r=t.length;n<r;n++){var a=t[n];e.vertices.push(new i.Vector3(a.x,a.y,a.z||0))}return e}}),i.Font=function(t){this.data=t},Object.assign(i.Font.prototype,{generateShapes:function(t,e,n){function r(t){for(var n=(t+"").split(""),r=e/o.resolution,i=0,s=[],c=0;c<n.length;c++){var l=a(n[c],r,i);i+=l.offset,s.push(l.path)}return s}function a(t,e,r){var a=o.glyphs[t]||o.glyphs["?"];if(a){var s,c,l,u,h,f,p,d,m,g,v,y=new i.Path,b=[],x=i.ShapeUtils.b2,w=i.ShapeUtils.b3;if(a.o)for(var _=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),E=0,M=_.length;E<M;){var T=_[E++];switch(T){case"m":s=_[E++]*e+r,c=_[E++]*e,y.moveTo(s,c);break;case"l":s=_[E++]*e+r,c=_[E++]*e,y.lineTo(s,c);break;case"q":if(l=_[E++]*e+r,u=_[E++]*e,p=_[E++]*e+r,d=_[E++]*e,y.quadraticCurveTo(p,d,l,u),v=b[b.length-1]){h=v.x,f=v.y;for(var S=1;S<=n;S++){var A=S/n;x(A,h,p,l),x(A,f,d,u)}}break;case"b":if(l=_[E++]*e+r,u=_[E++]*e,p=_[E++]*e+r,d=_[E++]*e,m=_[E++]*e+r,g=_[E++]*e,y.bezierCurveTo(p,d,m,g,l,u),v=b[b.length-1]){h=v.x,f=v.y;for(var S=1;S<=n;S++){var A=S/n;w(A,h,p,m,l),w(A,f,d,g,u)}}}}return{offset:a.ha*e,path:y}}}void 0===e&&(e=100),void 0===n&&(n=4);for(var o=this.data,s=r(t),c=[],l=0,u=s.length;l<u;l++)Array.prototype.push.apply(c,s[l].toShapes());return c}}),i.Path=function(t){i.CurvePath.call(this),this.actions=[],t&&this.fromPoints(t)},i.Path.prototype=Object.assign(Object.create(i.CurvePath.prototype),{constructor:i.Path,fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.actions.push({action:"moveTo",args:[t,e]})},lineTo:function(t,e){var n=this.actions[this.actions.length-1].args,r=n[n.length-2],a=n[n.length-1],o=new i.LineCurve(new i.Vector2(r,a),new i.Vector2(t,e));this.curves.push(o),this.actions.push({action:"lineTo",args:[t,e]})},quadraticCurveTo:function(t,e,n,r){var a=this.actions[this.actions.length-1].args,o=a[a.length-2],s=a[a.length-1],c=new i.QuadraticBezierCurve(new i.Vector2(o,s),new i.Vector2(t,e),new i.Vector2(n,r));this.curves.push(c),this.actions.push({action:"quadraticCurveTo",args:[t,e,n,r]})},bezierCurveTo:function(t,e,n,r,a,o){var s=this.actions[this.actions.length-1].args,c=s[s.length-2],l=s[s.length-1],u=new i.CubicBezierCurve(new i.Vector2(c,l),new i.Vector2(t,e),new i.Vector2(n,r),new i.Vector2(a,o));this.curves.push(u),this.actions.push({action:"bezierCurveTo",args:[t,e,n,r,a,o]})},splineThru:function(t){var e=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,r=n[n.length-2],a=n[n.length-1],o=[new i.Vector2(r,a)];Array.prototype.push.apply(o,t);var s=new i.SplineCurve(o);this.curves.push(s);var c=t[t.length-1];e.push(c.x),e.push(c.y),this.actions.push({action:"splineThru",args:e})},arc:function(t,e,n,r,i,a){var o=this.actions[this.actions.length-1].args,s=o[o.length-2],c=o[o.length-1];this.absarc(t+s,e+c,n,r,i,a)},absarc:function(t,e,n,r,i,a){this.absellipse(t,e,n,n,r,i,a)},ellipse:function(t,e,n,r,i,a,o,s){var c=this.actions[this.actions.length-1].args,l=c[c.length-2],u=c[c.length-1];this.absellipse(t+l,e+u,n,r,i,a,o,s)},absellipse:function(t,e,n,r,a,o,s,c){var l=[t,e,n,r,a,o,s,c||0],u=new i.EllipseCurve(t,e,n,r,a,o,s,c);this.curves.push(u);var h=u.getPoint(1);l.push(h.x),l.push(h.y),this.actions.push({action:"ellipse",args:l})},getSpacedPoints:function(t){t||(t=40);for(var e=[],n=0;n<t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n,r,a,o,s,c,l,u,h,f,p=i.ShapeUtils.b2,d=i.ShapeUtils.b3,m=[],g=0,v=this.actions.length;g<v;g++){var y=this.actions[g],b=y.action,x=y.args;switch(b){case"moveTo":m.push(new i.Vector2(x[0],x[1]));break;case"lineTo":m.push(new i.Vector2(x[0],x[1]));break;case"quadraticCurveTo":e=x[2],n=x[3],o=x[0],s=x[1],m.length>0?(u=m[m.length-1],c=u.x,l=u.y):(u=this.actions[g-1].args,c=u[u.length-2],l=u[u.length-1]);for(var w=1;w<=t;w++){var _=w/t;h=p(_,c,o,e),f=p(_,l,s,n),m.push(new i.Vector2(h,f))}break;case"bezierCurveTo":e=x[4],n=x[5],o=x[0],s=x[1],r=x[2],a=x[3],m.length>0?(u=m[m.length-1],c=u.x,l=u.y):(u=this.actions[g-1].args,c=u[u.length-2],l=u[u.length-1]);for(var w=1;w<=t;w++){var _=w/t;h=d(_,c,o,r,e),f=d(_,l,s,a,n),m.push(new i.Vector2(h,f))}break;case"splineThru":u=this.actions[g-1].args;var E=new i.Vector2(u[u.length-2],u[u.length-1]),M=[E],T=t*x[0].length;M=M.concat(x[0]);for(var S=new i.SplineCurve(M),w=1;w<=T;w++)m.push(S.getPointAt(w/T));break;case"arc":for(var A,C=x[0],k=x[1],L=x[2],R=x[3],P=x[4],D=!!x[5],B=P-R,N=2*t,w=1;w<=N;w++){var _=w/N;D||(_=1-_),A=R+_*B,h=C+L*Math.cos(A),f=k+L*Math.sin(A),m.push(new i.Vector2(h,f))}break;case"ellipse":var A,O,F,C=x[0],k=x[1],I=x[2],j=x[3],R=x[4],P=x[5],D=!!x[6],U=x[7],B=P-R,N=2*t;0!==U&&(O=Math.cos(U),F=Math.sin(U));for(var w=1;w<=N;w++){var _=w/N;if(D||(_=1-_),A=R+_*B,h=C+I*Math.cos(A),f=k+j*Math.sin(A),0!==U){var z=h,V=f;h=(z-C)*O-(V-k)*F+C,f=(z-C)*F+(V-k)*O+k}m.push(new i.Vector2(h,f))}}}var G=m[m.length-1];return Math.abs(G.x-m[0].x)<Number.EPSILON&&Math.abs(G.y-m[0].y)<Number.EPSILON&&m.splice(m.length-1,1),this.autoClose&&m.push(m[0]),m},toShapes:function(t,e){function n(t){for(var e=[],n=new i.Path,r=0,a=t.length;r<a;r++){var o=t[r],s=o.args,c=o.action;"moveTo"===c&&0!==n.actions.length&&(e.push(n),n=new i.Path),n[c].apply(n,s)}return 0!==n.actions.length&&e.push(n),e}function r(t){for(var e=[],n=0,r=t.length;n<r;n++){var a=t[n],o=new i.Shape;o.actions=a.actions,o.curves=a.curves,e.push(o)}return e}function a(t,e){for(var n=e.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=e[i],s=e[a],c=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=e[a],c=-c,s=e[i],l=-l),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var u=l*(t.x-o.x)-c*(t.y-o.y);if(0===u)return!0;if(u<0)continue;r=!r}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return r}var o=i.ShapeUtils.isClockWise,s=n(this.actions);if(0===s.length)return[];if(e===!0)return r(s);var c,l,u,h=[];if(1===s.length)return l=s[0],u=new i.Shape,u.actions=l.actions,u.curves=l.curves,h.push(u),h;var f=!o(s[0].getPoints());f=t?!f:f;var p,d=[],m=[],g=[],v=0;m[v]=void 0,g[v]=[];for(var y=0,b=s.length;y<b;y++)l=s[y],p=l.getPoints(),c=o(p),c=t?!c:c,c?(!f&&m[v]&&v++,m[v]={s:new i.Shape,p:p},m[v].s.actions=l.actions,m[v].s.curves=l.curves,f&&v++,g[v]=[]):g[v].push({h:l,p:p[0]});if(!m[0])return r(s);if(m.length>1){for(var x=!1,w=[],_=0,E=m.length;_<E;_++)d[_]=[];for(var _=0,E=m.length;_<E;_++)for(var M=g[_],T=0;T<M.length;T++){for(var S=M[T],A=!0,C=0;C<m.length;C++)a(S.p,m[C].p)&&(_!==C&&w.push({froms:_,tos:C,hole:T}),A?(A=!1,d[C].push(S)):x=!0);A&&d[_].push(S)}w.length>0&&(x||(g=d))}for(var k,y=0,L=m.length;y<L;y++){u=m[y].s,h.push(u),k=g[y];for(var R=0,P=k.length;R<P;R++)u.holes.push(k[R].h)}return h}}),i.Shape=function(){i.Path.apply(this,arguments),this.holes=[]},i.Shape.prototype=Object.assign(Object.create(i.Path.prototype),{constructor:i.Shape,extrude:function(t){return new i.ExtrudeGeometry(this,t)},makeGeometry:function(t){return new i.ShapeGeometry(this,t)},getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),i.LineCurve=function(t,e){this.v1=t,this.v2=e},i.LineCurve.prototype=Object.create(i.Curve.prototype),i.LineCurve.prototype.constructor=i.LineCurve,i.LineCurve.prototype.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},i.LineCurve.prototype.getPointAt=function(t){return this.getPoint(t)},i.LineCurve.prototype.getTangent=function(t){var e=this.v2.clone().sub(this.v1);return e.normalize()},i.QuadraticBezierCurve=function(t,e,n){this.v0=t,this.v1=e,this.v2=n},i.QuadraticBezierCurve.prototype=Object.create(i.Curve.prototype),i.QuadraticBezierCurve.prototype.constructor=i.QuadraticBezierCurve,i.QuadraticBezierCurve.prototype.getPoint=function(t){
var e=i.ShapeUtils.b2;return new i.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y))},i.QuadraticBezierCurve.prototype.getTangent=function(t){var e=i.CurveUtils.tangentQuadraticBezier;return new i.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y)).normalize()},i.CubicBezierCurve=function(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r},i.CubicBezierCurve.prototype=Object.create(i.Curve.prototype),i.CubicBezierCurve.prototype.constructor=i.CubicBezierCurve,i.CubicBezierCurve.prototype.getPoint=function(t){var e=i.ShapeUtils.b3;return new i.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},i.CubicBezierCurve.prototype.getTangent=function(t){var e=i.CurveUtils.tangentCubicBezier;return new i.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},i.SplineCurve=function(t){this.points=void 0==t?[]:t},i.SplineCurve.prototype=Object.create(i.Curve.prototype),i.SplineCurve.prototype.constructor=i.SplineCurve,i.SplineCurve.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),a=n-r,o=e[0===r?r:r-1],s=e[r],c=e[r>e.length-2?e.length-1:r+1],l=e[r>e.length-3?e.length-1:r+2],u=i.CurveUtils.interpolate;return new i.Vector2(u(o.x,s.x,c.x,l.x,a),u(o.y,s.y,c.y,l.y,a))},i.EllipseCurve=function(t,e,n,r,i,a,o,s){this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0},i.EllipseCurve.prototype=Object.create(i.Curve.prototype),i.EllipseCurve.prototype.constructor=i.EllipseCurve,i.EllipseCurve.prototype.getPoint=function(t){var e=this.aEndAngle-this.aStartAngle;e<0&&(e+=2*Math.PI),e>2*Math.PI&&(e-=2*Math.PI);var n;n=this.aClockwise===!0?this.aEndAngle+(1-t)*(2*Math.PI-e):this.aStartAngle+t*e;var r=this.aX+this.xRadius*Math.cos(n),a=this.aY+this.yRadius*Math.sin(n);if(0!==this.aRotation){var o=Math.cos(this.aRotation),s=Math.sin(this.aRotation),c=r,l=a;r=(c-this.aX)*o-(l-this.aY)*s+this.aX,a=(c-this.aX)*s+(l-this.aY)*o+this.aY}return new i.Vector2(r,a)},i.ArcCurve=function(t,e,n,r,a,o){i.EllipseCurve.call(this,t,e,n,n,r,a,o)},i.ArcCurve.prototype=Object.create(i.EllipseCurve.prototype),i.ArcCurve.prototype.constructor=i.ArcCurve,i.LineCurve3=i.Curve.create(function(t,e){this.v1=t,this.v2=e},function(t){var e=new i.Vector3;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}),i.QuadraticBezierCurve3=i.Curve.create(function(t,e,n){this.v0=t,this.v1=e,this.v2=n},function(t){var e=i.ShapeUtils.b2;return new i.Vector3(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y),e(t,this.v0.z,this.v1.z,this.v2.z))}),i.CubicBezierCurve3=i.Curve.create(function(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r},function(t){var e=i.ShapeUtils.b3;return new i.Vector3(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),i.SplineCurve3=i.Curve.create(function(t){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0==t?[]:t},function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),a=n-r,o=e[0==r?r:r-1],s=e[r],c=e[r>e.length-2?e.length-1:r+1],l=e[r>e.length-3?e.length-1:r+2],u=i.CurveUtils.interpolate;return new i.Vector3(u(o.x,s.x,c.x,l.x,a),u(o.y,s.y,c.y,l.y,a),u(o.z,s.z,c.z,l.z,a))}),i.CatmullRomCurve3=function(){function t(){}var e=new i.Vector3,n=new t,r=new t,a=new t;return t.prototype.init=function(t,e,n,r){this.c0=t,this.c1=n,this.c2=-3*t+3*e-2*n-r,this.c3=2*t-2*e+n+r},t.prototype.initNonuniformCatmullRom=function(t,e,n,r,i,a,o){var s=(e-t)/i-(n-t)/(i+a)+(n-e)/a,c=(n-e)/a-(r-e)/(a+o)+(r-n)/o;s*=a,c*=a,this.init(e,n,s,c)},t.prototype.initCatmullRom=function(t,e,n,r,i){this.init(e,n,i*(n-t),i*(r-e))},t.prototype.calc=function(t){var e=t*t,n=e*t;return this.c0+this.c1*t+this.c2*e+this.c3*n},i.Curve.create(function(t){this.points=t||[],this.closed=!1},function(t){var o,s,c,l,u=this.points;l=u.length,l<2&&console.log("duh, you need at least 2 points"),o=(l-(this.closed?0:1))*t,s=Math.floor(o),c=o-s,this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/u.length)+1)*u.length:0===c&&s===l-1&&(s=l-2,c=1);var h,f,p,d;if(this.closed||s>0?h=u[(s-1)%l]:(e.subVectors(u[0],u[1]).add(u[0]),h=e),f=u[s%l],p=u[(s+1)%l],this.closed||s+2<l?d=u[(s+2)%l]:(e.subVectors(u[l-1],u[l-2]).add(u[l-1]),d=e),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,g=Math.pow(h.distanceToSquared(f),m),v=Math.pow(f.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(d),m);v<1e-4&&(v=1),g<1e-4&&(g=v),y<1e-4&&(y=v),n.initNonuniformCatmullRom(h.x,f.x,p.x,d.x,g,v,y),r.initNonuniformCatmullRom(h.y,f.y,p.y,d.y,g,v,y),a.initNonuniformCatmullRom(h.z,f.z,p.z,d.z,g,v,y)}else if("catmullrom"===this.type){var b=void 0!==this.tension?this.tension:.5;n.initCatmullRom(h.x,f.x,p.x,d.x,b),r.initCatmullRom(h.y,f.y,p.y,d.y,b),a.initCatmullRom(h.z,f.z,p.z,d.z,b)}var x=new i.Vector3(n.calc(c),r.calc(c),a.calc(c));return x})}(),i.ClosedSplineCurve3=function(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),i.CatmullRomCurve3.call(this,t),this.type="catmullrom",this.closed=!0},i.ClosedSplineCurve3.prototype=Object.create(i.CatmullRomCurve3.prototype),i.BoxGeometry=function(t,e,n,r,a,o){i.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:a,depthSegments:o},this.fromBufferGeometry(new i.BoxBufferGeometry(t,e,n,r,a,o)),this.mergeVertices()},i.BoxGeometry.prototype=Object.create(i.Geometry.prototype),i.BoxGeometry.prototype.constructor=i.BoxGeometry,i.CubeGeometry=i.BoxGeometry,i.BoxBufferGeometry=function(t,e,n,r,a,o){function s(t,e,n){var r=0;return r+=(t+1)*(e+1)*2,r+=(t+1)*(n+1)*2,r+=(n+1)*(e+1)*2}function c(t,e,n){var r=0;return r+=t*e*2,r+=t*n*2,r+=n*e*2,6*r}function l(t,e,n,r,a,o,s,c,l,h,f){for(var _=o/l,E=s/h,M=o/2,T=s/2,S=c/2,A=l+1,C=h+1,k=0,L=0,R=new i.Vector3,P=0;P<C;P++)for(var D=P*E-T,B=0;B<A;B++){var N=B*_-M;R[t]=N*r,R[e]=D*a,R[n]=S,d[v]=R.x,d[v+1]=R.y,d[v+2]=R.z,R[t]=0,R[e]=0,R[n]=c>0?1:-1,m[v]=R.x,m[v+1]=R.y,m[v+2]=R.z,g[y]=B/l,g[y+1]=1-P/h,v+=3,y+=2,k+=1}for(P=0;P<h;P++)for(B=0;B<l;B++){var O=x+B+A*P,F=x+B+A*(P+1),I=x+(B+1)+A*(P+1),j=x+(B+1)+A*P;p[b]=O,p[b+1]=F,p[b+2]=j,p[b+3]=F,p[b+4]=I,p[b+5]=j,b+=6,L+=6}u.addGroup(w,L,f),w+=L,x+=k}i.BufferGeometry.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:a,depthSegments:o};var u=this;r=Math.floor(r)||1,a=Math.floor(a)||1,o=Math.floor(o)||1;var h=s(r,a,o),f=c(r,a,o),p=new(f>65535?Uint32Array:Uint16Array)(f),d=new Float32Array(3*h),m=new Float32Array(3*h),g=new Float32Array(2*h),v=0,y=0,b=0,x=0,w=0;l("z","y","x",-1,-1,n,e,t,o,a,0),l("z","y","x",1,-1,n,e,-t,o,a,1),l("x","z","y",1,1,t,n,e,r,o,2),l("x","z","y",1,-1,t,n,-e,r,o,3),l("x","y","z",1,-1,t,e,n,r,a,4),l("x","y","z",-1,-1,t,e,-n,r,a,5),this.setIndex(new i.BufferAttribute(p,1)),this.addAttribute("position",new i.BufferAttribute(d,3)),this.addAttribute("normal",new i.BufferAttribute(m,3)),this.addAttribute("uv",new i.BufferAttribute(g,2))},i.BoxBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.BoxBufferGeometry.prototype.constructor=i.BoxBufferGeometry,i.CircleGeometry=function(t,e,n,r){i.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new i.CircleBufferGeometry(t,e,n,r))},i.CircleGeometry.prototype=Object.create(i.Geometry.prototype),i.CircleGeometry.prototype.constructor=i.CircleGeometry,i.CircleBufferGeometry=function(t,e,n,r){i.BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var a=e+2,o=new Float32Array(3*a),s=new Float32Array(3*a),c=new Float32Array(2*a);s[2]=1,c[0]=.5,c[1]=.5;for(var l=0,u=3,h=2;l<=e;l++,u+=3,h+=2){var f=n+l/e*r;o[u]=t*Math.cos(f),o[u+1]=t*Math.sin(f),s[u+2]=1,c[h]=(o[u]/t+1)/2,c[h+1]=(o[u+1]/t+1)/2}for(var p=[],u=1;u<=e;u++)p.push(u,u+1,0);this.setIndex(new i.BufferAttribute(new Uint16Array(p),1)),this.addAttribute("position",new i.BufferAttribute(o,3)),this.addAttribute("normal",new i.BufferAttribute(s,3)),this.addAttribute("uv",new i.BufferAttribute(c,2)),this.boundingSphere=new i.Sphere(new i.Vector3,t)},i.CircleBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.CircleBufferGeometry.prototype.constructor=i.CircleBufferGeometry,i.CylinderBufferGeometry=function(t,e,n,r,a,o,s,c){function l(){var t=(r+1)*(a+1);return o===!1&&(t+=(r+1)*d+r*d),t}function u(){var t=r*a*2*3;return o===!1&&(t+=r*d*3),t}function h(){var o,l,u=new i.Vector3,h=new i.Vector3,f=0,d=(e-t)/n;for(l=0;l<=a;l++){var m=[],g=l/a,S=g*(e-t)+t;for(o=0;o<=r;o++){var A=o/r;h.x=S*Math.sin(A*c+s),h.y=-g*n+M,h.z=S*Math.cos(A*c+s),y.setXYZ(w,h.x,h.y,h.z),u.copy(h),(0===t&&0===l||0===e&&l===a)&&(u.x=Math.sin(A*c+s),u.z=Math.cos(A*c+s)),u.setY(Math.sqrt(u.x*u.x+u.z*u.z)*d).normalize(),b.setXYZ(w,u.x,u.y,u.z),x.setXY(w,A,1-g),m.push(w),w++}E.push(m)}for(o=0;o<r;o++)for(l=0;l<a;l++){var C=E[l][o],k=E[l+1][o],L=E[l+1][o+1],R=E[l][o+1];v.setX(_,C),_++,v.setX(_,k),_++,v.setX(_,R),_++,v.setX(_,k),_++,v.setX(_,L),_++,v.setX(_,R),_++,f+=6}p.addGroup(T,f,0),T+=f}function f(n){var a,o,l,u=new i.Vector2,h=new i.Vector3,f=0,d=n===!0?t:e,m=n===!0?1:-1;for(o=w,a=1;a<=r;a++)y.setXYZ(w,0,M*m,0),b.setXYZ(w,0,m,0),u.x=.5,u.y=.5,x.setXY(w,u.x,u.y),w++;for(l=w,a=0;a<=r;a++){var g=a/r,E=g*c+s,S=Math.cos(E),A=Math.sin(E);h.x=d*A,h.y=M*m,h.z=d*S,y.setXYZ(w,h.x,h.y,h.z),b.setXYZ(w,0,m,0),u.x=.5*S+.5,u.y=.5*A*m+.5,x.setXY(w,u.x,u.y),w++}for(a=0;a<r;a++){var C=o+a,k=l+a;n===!0?(v.setX(_,k),_++,v.setX(_,k+1),_++,v.setX(_,C),_++):(v.setX(_,k+1),_++,v.setX(_,k),_++,v.setX(_,C),_++),f+=3}p.addGroup(T,f,n===!0?1:2),T+=f}i.BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:c};var p=this;t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,r=Math.floor(r)||8,a=Math.floor(a)||1,o=void 0!==o&&o,s=void 0!==s?s:0,c=void 0!==c?c:2*Math.PI;var d=0;o===!1&&(t>0&&d++,e>0&&d++);var m=l(),g=u(),v=new i.BufferAttribute(new(g>65535?Uint32Array:Uint16Array)(g),1),y=new i.BufferAttribute(new Float32Array(3*m),3),b=new i.BufferAttribute(new Float32Array(3*m),3),x=new i.BufferAttribute(new Float32Array(2*m),2),w=0,_=0,E=[],M=n/2,T=0;h(),o===!1&&(t>0&&f(!0),e>0&&f(!1)),this.setIndex(v),this.addAttribute("position",y),this.addAttribute("normal",b),this.addAttribute("uv",x)},i.CylinderBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.CylinderBufferGeometry.prototype.constructor=i.CylinderBufferGeometry,i.CylinderGeometry=function(t,e,n,r,a,o,s,c){i.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:c},this.fromBufferGeometry(new i.CylinderBufferGeometry(t,e,n,r,a,o,s,c)),this.mergeVertices()},i.CylinderGeometry.prototype=Object.create(i.Geometry.prototype),i.CylinderGeometry.prototype.constructor=i.CylinderGeometry,i.ConeBufferGeometry=function(t,e,n,r,a,o,s){i.CylinderBufferGeometry.call(this,0,t,e,n,r,a,o,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,thetaStart:o,thetaLength:s}},i.ConeBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.ConeBufferGeometry.prototype.constructor=i.ConeBufferGeometry,i.ConeGeometry=function(t,e,n,r,a,o,s){i.CylinderGeometry.call(this,0,t,e,n,r,a,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s}},i.ConeGeometry.prototype=Object.create(i.CylinderGeometry.prototype),i.ConeGeometry.prototype.constructor=i.ConeGeometry,i.EdgesGeometry=function(t,e){function n(t,e){return t-e}i.BufferGeometry.call(this),e=void 0!==e?e:1;var r,a=Math.cos(i.Math.DEG2RAD*e),o=[0,0],s={},c=["a","b","c"];t instanceof i.BufferGeometry?(r=new i.Geometry,r.fromBufferGeometry(t)):r=t.clone(),r.mergeVertices(),r.computeFaceNormals();for(var l=r.vertices,u=r.faces,h=0,f=u.length;h<f;h++)for(var p=u[h],d=0;d<3;d++){o[0]=p[c[d]],o[1]=p[c[(d+1)%3]],o.sort(n);var m=""+o;void 0===s[m]?s[m]={vert1:o[0],vert2:o[1],face1:h,face2:void 0}:s[m].face2=h}var g=[];for(var m in s){var v=s[m];if(void 0===v.face2||u[v.face1].normal.dot(u[v.face2].normal)<=a){var y=l[v.vert1];g.push(y.x),g.push(y.y),g.push(y.z),y=l[v.vert2],g.push(y.x),g.push(y.y),g.push(y.z)}}this.addAttribute("position",new i.BufferAttribute(new Float32Array(g),3))},i.EdgesGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.EdgesGeometry.prototype.constructor=i.EdgesGeometry,i.ExtrudeGeometry=function(t,e){return void 0===t?void(t=[]):(i.Geometry.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),void this.computeFaceNormals())},i.ExtrudeGeometry.prototype=Object.create(i.Geometry.prototype),i.ExtrudeGeometry.prototype.constructor=i.ExtrudeGeometry,i.ExtrudeGeometry.prototype.addShapeList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];this.addShape(i,e)}},i.ExtrudeGeometry.prototype.addShape=function(t,e){function n(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function r(t,e,n){var r,a,o=1,s=t.x-e.x,c=t.y-e.y,l=n.x-t.x,u=n.y-t.y,h=s*s+c*c,f=s*u-c*l;if(Math.abs(f)>Number.EPSILON){var p=Math.sqrt(h),d=Math.sqrt(l*l+u*u),m=e.x-c/p,g=e.y+s/p,v=n.x-u/d,y=n.y+l/d,b=((v-m)*u-(y-g)*l)/(s*u-c*l);r=m+s*b-t.x,a=g+c*b-t.y;var x=r*r+a*a;if(x<=2)return new i.Vector2(r,a);o=Math.sqrt(x/2)}else{var w=!1;s>Number.EPSILON?l>Number.EPSILON&&(w=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(w=!0):Math.sign(c)===Math.sign(u)&&(w=!0),w?(r=-c,a=s,o=Math.sqrt(h)):(r=s,a=c,o=Math.sqrt(h/2))}return new i.Vector2(r/o,a/o)}function a(){if(x){var t=0,e=G*t;for(q=0;q<H;q++)V=N[q],l(V[2]+e,V[1]+e,V[0]+e);for(t=_+2*b,e=G*t,q=0;q<H;q++)V=N[q],l(V[0]+e,V[1]+e,V[2]+e)}else{for(q=0;q<H;q++)V=N[q],l(V[2],V[1],V[0]);for(q=0;q<H;q++)V=N[q],l(V[0]+G*_,V[1]+G*_,V[2]+G*_)}}function o(){var t=0;for(s(O,t),t+=O.length,A=0,C=D.length;A<C;A++)S=D[A],s(S,t),t+=S.length}function s(t,e){var n,r;for(q=t.length;--q>=0;){n=q,r=q-1,r<0&&(r=t.length-1);var i=0,a=_+2*b;for(i=0;i<a;i++){var o=G*i,s=G*(i+1),c=e+n+o,l=e+r+o,h=e+r+s,f=e+n+s;u(c,l,h,f,t,i,a,n,r)}}}function c(t,e,n){k.vertices.push(new i.Vector3(t,e,n))}function l(t,e,n){t+=L,e+=L,n+=L,k.faces.push(new i.Face3(t,e,n,null,null,0));var r=T.generateTopUV(k,t,e,n);k.faceVertexUvs[0].push(r)}function u(t,e,n,r,a,o,s,c,l){t+=L,e+=L,n+=L,r+=L,k.faces.push(new i.Face3(t,e,r,null,null,1)),k.faces.push(new i.Face3(e,n,r,null,null,1));var u=T.generateSideWallUV(k,t,e,n,r);k.faceVertexUvs[0].push([u[0],u[1],u[3]]),k.faceVertexUvs[0].push([u[1],u[2],u[3]])}var h,f,p,d,m,g=void 0!==e.amount?e.amount:100,v=void 0!==e.bevelThickness?e.bevelThickness:6,y=void 0!==e.bevelSize?e.bevelSize:v-2,b=void 0!==e.bevelSegments?e.bevelSegments:3,x=void 0===e.bevelEnabled||e.bevelEnabled,w=void 0!==e.curveSegments?e.curveSegments:12,_=void 0!==e.steps?e.steps:1,E=e.extrudePath,M=!1,T=void 0!==e.UVGenerator?e.UVGenerator:i.ExtrudeGeometry.WorldUVGenerator;E&&(h=E.getSpacedPoints(_),M=!0,x=!1,f=void 0!==e.frames?e.frames:new i.TubeGeometry.FrenetFrames(E,_,!1),p=new i.Vector3,d=new i.Vector3,m=new i.Vector3),x||(b=0,v=0,y=0);var S,A,C,k=this,L=this.vertices.length,R=t.extractPoints(w),P=R.shape,D=R.holes,B=!i.ShapeUtils.isClockWise(P);if(B){for(P=P.reverse(),A=0,C=D.length;A<C;A++)S=D[A],i.ShapeUtils.isClockWise(S)&&(D[A]=S.reverse());B=!1}var N=i.ShapeUtils.triangulateShape(P,D),O=P;for(A=0,C=D.length;A<C;A++)S=D[A],P=P.concat(S);for(var F,I,j,U,z,V,G=P.length,H=N.length,W=[],q=0,X=O.length,Y=X-1,Z=q+1;q<X;q++,Y++,Z++)Y===X&&(Y=0),Z===X&&(Z=0),W[q]=r(O[q],O[Y],O[Z]);var K,J=[],Q=W.concat();for(A=0,C=D.length;A<C;A++){for(S=D[A],K=[],q=0,X=S.length,Y=X-1,Z=q+1;q<X;q++,Y++,Z++)Y===X&&(Y=0),Z===X&&(Z=0),K[q]=r(S[q],S[Y],S[Z]);J.push(K),Q=Q.concat(K)}for(F=0;F<b;F++){for(j=F/b,U=v*(1-j),I=y*Math.sin(j*Math.PI/2),q=0,X=O.length;q<X;q++)z=n(O[q],W[q],I),c(z.x,z.y,-U);for(A=0,C=D.length;A<C;A++)for(S=D[A],K=J[A],q=0,X=S.length;q<X;q++)z=n(S[q],K[q],I),c(z.x,z.y,-U)}for(I=y,q=0;q<G;q++)z=x?n(P[q],Q[q],I):P[q],M?(d.copy(f.normals[0]).multiplyScalar(z.x),p.copy(f.binormals[0]).multiplyScalar(z.y),m.copy(h[0]).add(d).add(p),c(m.x,m.y,m.z)):c(z.x,z.y,0);var tt;for(tt=1;tt<=_;tt++)for(q=0;q<G;q++)z=x?n(P[q],Q[q],I):P[q],M?(d.copy(f.normals[tt]).multiplyScalar(z.x),p.copy(f.binormals[tt]).multiplyScalar(z.y),m.copy(h[tt]).add(d).add(p),c(m.x,m.y,m.z)):c(z.x,z.y,g/_*tt);for(F=b-1;F>=0;F--){for(j=F/b,U=v*(1-j),I=y*Math.sin(j*Math.PI/2),q=0,X=O.length;q<X;q++)z=n(O[q],W[q],I),c(z.x,z.y,g+U);for(A=0,C=D.length;A<C;A++)for(S=D[A],K=J[A],q=0,X=S.length;q<X;q++)z=n(S[q],K[q],I),M?c(z.x,z.y+h[_-1].y,h[_-1].x+U):c(z.x,z.y,g+U)}a(),o()},i.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(t,e,n,r){var a=t.vertices,o=a[e],s=a[n],c=a[r];return[new i.Vector2(o.x,o.y),new i.Vector2(s.x,s.y),new i.Vector2(c.x,c.y)]},generateSideWallUV:function(t,e,n,r,a){var o=t.vertices,s=o[e],c=o[n],l=o[r],u=o[a];return Math.abs(s.y-c.y)<.01?[new i.Vector2(s.x,1-s.z),new i.Vector2(c.x,1-c.z),new i.Vector2(l.x,1-l.z),new i.Vector2(u.x,1-u.z)]:[new i.Vector2(s.y,1-s.z),new i.Vector2(c.y,1-c.z),new i.Vector2(l.y,1-l.z),new i.Vector2(u.y,1-u.z)]}},i.ShapeGeometry=function(t,e){i.Geometry.call(this),this.type="ShapeGeometry",Array.isArray(t)===!1&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()},i.ShapeGeometry.prototype=Object.create(i.Geometry.prototype),i.ShapeGeometry.prototype.constructor=i.ShapeGeometry,i.ShapeGeometry.prototype.addShapeList=function(t,e){for(var n=0,r=t.length;n<r;n++)this.addShape(t[n],e);return this},i.ShapeGeometry.prototype.addShape=function(t,e){void 0===e&&(e={});var n,r,a,o=void 0!==e.curveSegments?e.curveSegments:12,s=e.material,c=void 0===e.UVGenerator?i.ExtrudeGeometry.WorldUVGenerator:e.UVGenerator,l=this.vertices.length,u=t.extractPoints(o),h=u.shape,f=u.holes,p=!i.ShapeUtils.isClockWise(h);if(p){for(h=h.reverse(),n=0,r=f.length;n<r;n++)a=f[n],i.ShapeUtils.isClockWise(a)&&(f[n]=a.reverse());p=!1}var d=i.ShapeUtils.triangulateShape(h,f);for(n=0,r=f.length;n<r;n++)a=f[n],h=h.concat(a);var m,g,v=h.length,y=d.length;for(n=0;n<v;n++)m=h[n],this.vertices.push(new i.Vector3(m.x,m.y,0));for(n=0;n<y;n++){g=d[n];var b=g[0]+l,x=g[1]+l,w=g[2]+l;this.faces.push(new i.Face3(b,x,w,null,null,s)),this.faceVertexUvs[0].push(c.generateTopUV(this,b,x,w))}},i.LatheBufferGeometry=function(t,e,n,r){i.BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=i.Math.clamp(r,0,2*Math.PI);var a,o,s,c=(e+1)*t.length,l=e*t.length*2*3,u=new i.BufferAttribute(new(l>65535?Uint32Array:Uint16Array)(l),1),h=new i.BufferAttribute(new Float32Array(3*c),3),f=new i.BufferAttribute(new Float32Array(2*c),2),p=0,d=0,m=(1/(t.length-1),1/e),g=new i.Vector3,v=new i.Vector2;for(o=0;o<=e;o++){var y=n+o*m*r,b=Math.sin(y),x=Math.cos(y);for(s=0;s<=t.length-1;s++)g.x=t[s].x*b,g.y=t[s].y,g.z=t[s].x*x,h.setXYZ(p,g.x,g.y,g.z),v.x=o/e,v.y=s/(t.length-1),f.setXY(p,v.x,v.y),p++}for(o=0;o<e;o++)for(s=0;s<t.length-1;s++){a=s+o*t.length;var w=a,_=a+t.length,E=a+t.length+1,M=a+1;u.setX(d,w),d++,u.setX(d,_),d++,u.setX(d,M),d++,u.setX(d,_),d++,u.setX(d,E),d++,u.setX(d,M),d++}if(this.setIndex(u),this.addAttribute("position",h),this.addAttribute("uv",f),this.computeVertexNormals(),r===2*Math.PI){var T=this.attributes.normal.array,S=new i.Vector3,A=new i.Vector3,C=new i.Vector3;for(a=e*t.length*3,o=0,s=0;o<t.length;o++,s+=3)S.x=T[s+0],S.y=T[s+1],S.z=T[s+2],A.x=T[a+s+0],A.y=T[a+s+1],A.z=T[a+s+2],C.addVectors(S,A).normalize(),T[s+0]=T[a+s+0]=C.x,T[s+1]=T[a+s+1]=C.y,T[s+2]=T[a+s+2]=C.z}},i.LatheBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.LatheBufferGeometry.prototype.constructor=i.LatheBufferGeometry,i.LatheGeometry=function(t,e,n,r){i.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new i.LatheBufferGeometry(t,e,n,r)),this.mergeVertices()},i.LatheGeometry.prototype=Object.create(i.Geometry.prototype);i.LatheGeometry.prototype.constructor=i.LatheGeometry;i.PlaneGeometry=function(t,e,n,r){i.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new i.PlaneBufferGeometry(t,e,n,r))},i.PlaneGeometry.prototype=Object.create(i.Geometry.prototype),i.PlaneGeometry.prototype.constructor=i.PlaneGeometry,i.PlaneBufferGeometry=function(t,e,n,r){i.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};for(var a=t/2,o=e/2,s=Math.floor(n)||1,c=Math.floor(r)||1,l=s+1,u=c+1,h=t/s,f=e/c,p=new Float32Array(l*u*3),d=new Float32Array(l*u*3),m=new Float32Array(l*u*2),g=0,v=0,y=0;y<u;y++)for(var b=y*f-o,x=0;x<l;x++){var w=x*h-a;p[g]=w,p[g+1]=-b,d[g+2]=1,m[v]=x/s,m[v+1]=1-y/c,g+=3,v+=2}g=0;for(var _=new(p.length/3>65535?Uint32Array:Uint16Array)(s*c*6),y=0;y<c;y++)for(var x=0;x<s;x++){var E=x+l*y,M=x+l*(y+1),T=x+1+l*(y+1),S=x+1+l*y;_[g]=E,_[g+1]=M,_[g+2]=S,_[g+3]=M,_[g+4]=T,_[g+5]=S,g+=6}this.setIndex(new i.BufferAttribute(_,1)),this.addAttribute("position",new i.BufferAttribute(p,3)),this.addAttribute("normal",new i.BufferAttribute(d,3)),this.addAttribute("uv",new i.BufferAttribute(m,2))},i.PlaneBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.PlaneBufferGeometry.prototype.constructor=i.PlaneBufferGeometry,i.RingBufferGeometry=function(t,e,n,r,a,o){i.BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:a,thetaLength:o},t=t||20,e=e||50,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var s,c,l,u=(n+1)*(r+1),h=n*r*2*3,f=new i.BufferAttribute(new(h>65535?Uint32Array:Uint16Array)(h),1),p=new i.BufferAttribute(new Float32Array(3*u),3),d=new i.BufferAttribute(new Float32Array(3*u),3),m=new i.BufferAttribute(new Float32Array(2*u),2),g=0,v=0,y=t,b=(e-t)/r,x=new i.Vector3,w=new i.Vector2;for(c=0;c<=r;c++){for(l=0;l<=n;l++)s=a+l/n*o,x.x=y*Math.cos(s),x.y=y*Math.sin(s),p.setXYZ(g,x.x,x.y,x.z),d.setXYZ(g,0,0,1),w.x=(x.x/e+1)/2,w.y=(x.y/e+1)/2,m.setXY(g,w.x,w.y),g++;y+=b}for(c=0;c<r;c++){var _=c*(n+1);for(l=0;l<n;l++){s=l+_;var E=s,M=s+n+1,T=s+n+2,S=s+1;f.setX(v,E),v++,f.setX(v,M),v++,f.setX(v,T),v++,f.setX(v,E),v++,f.setX(v,T),v++,f.setX(v,S),v++}}this.setIndex(f),this.addAttribute("position",p),this.addAttribute("normal",d),this.addAttribute("uv",m)},i.RingBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.RingBufferGeometry.prototype.constructor=i.RingBufferGeometry,i.RingGeometry=function(t,e,n,r,a,o){i.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new i.RingBufferGeometry(t,e,n,r,a,o))},i.RingGeometry.prototype=Object.create(i.Geometry.prototype),i.RingGeometry.prototype.constructor=i.RingGeometry,i.SphereGeometry=function(t,e,n,r,a,o,s){i.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new i.SphereBufferGeometry(t,e,n,r,a,o,s))},i.SphereGeometry.prototype=Object.create(i.Geometry.prototype),i.SphereGeometry.prototype.constructor=i.SphereGeometry,i.SphereBufferGeometry=function(t,e,n,r,a,o,s){i.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:a,thetaStart:o,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;for(var c=o+s,l=(e+1)*(n+1),u=new i.BufferAttribute(new Float32Array(3*l),3),h=new i.BufferAttribute(new Float32Array(3*l),3),f=new i.BufferAttribute(new Float32Array(2*l),2),p=0,d=[],m=new i.Vector3,g=0;g<=n;g++){for(var v=[],y=g/n,b=0;b<=e;b++){var x=b/e,w=-t*Math.cos(r+x*a)*Math.sin(o+y*s),_=t*Math.cos(o+y*s),E=t*Math.sin(r+x*a)*Math.sin(o+y*s);m.set(w,_,E).normalize(),u.setXYZ(p,w,_,E),h.setXYZ(p,m.x,m.y,m.z),f.setXY(p,x,1-y),v.push(p),p++}d.push(v)}for(var M=[],g=0;g<n;g++)for(var b=0;b<e;b++){var T=d[g][b+1],S=d[g][b],A=d[g+1][b],C=d[g+1][b+1];(0!==g||o>0)&&M.push(T,S,C),(g!==n-1||c<Math.PI)&&M.push(S,A,C)}this.setIndex(new(u.count>65535?i.Uint32Attribute:i.Uint16Attribute)(M,1)),this.addAttribute("position",u),this.addAttribute("normal",h),this.addAttribute("uv",f),this.boundingSphere=new i.Sphere(new i.Vector3,t)},i.SphereBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.SphereBufferGeometry.prototype.constructor=i.SphereBufferGeometry,i.TextGeometry=function(t,e){e=e||{};var n=e.font;if(n instanceof i.Font==!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new i.Geometry;var r=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),i.ExtrudeGeometry.call(this,r,e),this.type="TextGeometry"},i.TextGeometry.prototype=Object.create(i.ExtrudeGeometry.prototype),i.TextGeometry.prototype.constructor=i.TextGeometry,i.TorusBufferGeometry=function(t,e,n,r,a){i.BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:a},t=t||100,e=e||40,n=Math.floor(n)||8,r=Math.floor(r)||6,a=a||2*Math.PI;var o,s,c=(n+1)*(r+1),l=n*r*2*3,u=new(l>65535?Uint32Array:Uint16Array)(l),h=new Float32Array(3*c),f=new Float32Array(3*c),p=new Float32Array(2*c),d=0,m=0,g=0,v=new i.Vector3,y=new i.Vector3,b=new i.Vector3;for(o=0;o<=n;o++)for(s=0;s<=r;s++){var x=s/r*a,w=o/n*Math.PI*2;y.x=(t+e*Math.cos(w))*Math.cos(x),y.y=(t+e*Math.cos(w))*Math.sin(x),y.z=e*Math.sin(w),h[d]=y.x,h[d+1]=y.y,h[d+2]=y.z,v.x=t*Math.cos(x),v.y=t*Math.sin(x),b.subVectors(y,v).normalize(),f[d]=b.x,f[d+1]=b.y,f[d+2]=b.z,p[m]=s/r,p[m+1]=o/n,d+=3,m+=2}for(o=1;o<=n;o++)for(s=1;s<=r;s++){var _=(r+1)*o+s-1,E=(r+1)*(o-1)+s-1,M=(r+1)*(o-1)+s,T=(r+1)*o+s;u[g]=_,u[g+1]=E,u[g+2]=T,u[g+3]=E,u[g+4]=M,u[g+5]=T,g+=6}this.setIndex(new i.BufferAttribute(u,1)),this.addAttribute("position",new i.BufferAttribute(h,3)),this.addAttribute("normal",new i.BufferAttribute(f,3)),this.addAttribute("uv",new i.BufferAttribute(p,2))},i.TorusBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.TorusBufferGeometry.prototype.constructor=i.TorusBufferGeometry,i.TorusGeometry=function(t,e,n,r,a){i.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:a},this.fromBufferGeometry(new i.TorusBufferGeometry(t,e,n,r,a))},i.TorusGeometry.prototype=Object.create(i.Geometry.prototype),i.TorusGeometry.prototype.constructor=i.TorusGeometry,i.TorusKnotBufferGeometry=function(t,e,n,r,a,o){function s(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,c=Math.cos(s);i.x=r*(2+c)*.5*a,i.y=r*(2+c)*o*.5,i.z=r*Math.sin(s)*.5}i.BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:a,q:o},t=t||100,e=e||40,n=Math.floor(n)||64,r=Math.floor(r)||8,a=a||2,o=o||3;var c,l,u=(r+1)*(n+1),h=r*n*2*3,f=new i.BufferAttribute(new(h>65535?Uint32Array:Uint16Array)(h),1),p=new i.BufferAttribute(new Float32Array(3*u),3),d=new i.BufferAttribute(new Float32Array(3*u),3),m=new i.BufferAttribute(new Float32Array(2*u),2),g=0,v=0,y=new i.Vector3,b=new i.Vector3,x=new i.Vector2,w=new i.Vector3,_=new i.Vector3,E=new i.Vector3,M=new i.Vector3,T=new i.Vector3;for(c=0;c<=n;++c){var S=c/n*a*Math.PI*2;for(s(S,a,o,t,w),s(S+.01,a,o,t,_),M.subVectors(_,w),T.addVectors(_,w),E.crossVectors(M,T),T.crossVectors(E,M),E.normalize(),T.normalize(),l=0;l<=r;++l){var A=l/r*Math.PI*2,C=-e*Math.cos(A),k=e*Math.sin(A);y.x=w.x+(C*T.x+k*E.x),y.y=w.y+(C*T.y+k*E.y),y.z=w.z+(C*T.z+k*E.z),p.setXYZ(g,y.x,y.y,y.z),b.subVectors(y,w).normalize(),d.setXYZ(g,b.x,b.y,b.z),x.x=c/n,x.y=l/r,m.setXY(g,x.x,x.y),g++}}for(l=1;l<=n;l++)for(c=1;c<=r;c++){var L=(r+1)*(l-1)+(c-1),R=(r+1)*l+(c-1),P=(r+1)*l+c,D=(r+1)*(l-1)+c;f.setX(v,L),v++,f.setX(v,R),v++,f.setX(v,D),v++,f.setX(v,R),v++,f.setX(v,P),v++,f.setX(v,D),v++}this.setIndex(f),this.addAttribute("position",p),this.addAttribute("normal",d),this.addAttribute("uv",m)},i.TorusKnotBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.TorusKnotBufferGeometry.prototype.constructor=i.TorusKnotBufferGeometry,i.TorusKnotGeometry=function(t,e,n,r,a,o,s){i.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:a,q:o},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new i.TorusKnotBufferGeometry(t,e,n,r,a,o)),this.mergeVertices()},i.TorusKnotGeometry.prototype=Object.create(i.Geometry.prototype),i.TorusKnotGeometry.prototype.constructor=i.TorusKnotGeometry,i.TubeGeometry=function(t,e,n,r,a,o){function s(t,e,n){return L.vertices.push(new i.Vector3(t,e,n))-1}i.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:t,segments:e,radius:n,radialSegments:r,closed:a,taper:o},e=e||64,n=n||1,r=r||8,a=a||!1,o=o||i.TubeGeometry.NoTaper;var c,l,u,h,f,p,d,m,g,v,y,b,x,w,_,E,M,T,S,A,C,k=[],L=this,R=e+1,P=new i.Vector3,D=new i.TubeGeometry.FrenetFrames(t,e,a),B=D.tangents,N=D.normals,O=D.binormals;for(this.tangents=B,this.normals=N,this.binormals=O,v=0;v<R;v++)for(k[v]=[],h=v/(R-1),g=t.getPointAt(h),c=B[v],l=N[v],u=O[v],p=n*o(h),y=0;y<r;y++)f=y/r*2*Math.PI,d=-p*Math.cos(f),m=p*Math.sin(f),P.copy(g),P.x+=d*l.x+m*u.x,P.y+=d*l.y+m*u.y,P.z+=d*l.z+m*u.z,k[v][y]=s(P.x,P.y,P.z);for(v=0;v<e;v++)for(y=0;y<r;y++)b=a?(v+1)%e:v+1,x=(y+1)%r,w=k[v][y],_=k[b][y],E=k[b][x],M=k[v][x],T=new i.Vector2(v/e,y/r),S=new i.Vector2((v+1)/e,y/r),A=new i.Vector2((v+1)/e,(y+1)/r),C=new i.Vector2(v/e,(y+1)/r),this.faces.push(new i.Face3(w,_,M)),this.faceVertexUvs[0].push([T,S,C]),this.faces.push(new i.Face3(_,E,M)),this.faceVertexUvs[0].push([S.clone(),A,C.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},i.TubeGeometry.prototype=Object.create(i.Geometry.prototype),i.TubeGeometry.prototype.constructor=i.TubeGeometry,i.TubeGeometry.NoTaper=function(t){return 1},i.TubeGeometry.SinusoidalTaper=function(t){return Math.sin(Math.PI*t)},i.TubeGeometry.FrenetFrames=function(t,e,n){function r(){d[0]=new i.Vector3,m[0]=new i.Vector3,o=Number.MAX_VALUE,s=Math.abs(p[0].x),c=Math.abs(p[0].y),l=Math.abs(p[0].z),s<=o&&(o=s,f.set(1,0,0)),c<=o&&(o=c,f.set(0,1,0)),l<=o&&f.set(0,0,1),g.crossVectors(p[0],f).normalize(),d[0].crossVectors(p[0],g),m[0].crossVectors(p[0],d[0])}var a,o,s,c,l,u,h,f=new i.Vector3,p=[],d=[],m=[],g=new i.Vector3,v=new i.Matrix4,y=e+1;for(this.tangents=p,this.normals=d,this.binormals=m,u=0;u<y;u++)h=u/(y-1),p[u]=t.getTangentAt(h),p[u].normalize();for(r(),u=1;u<y;u++)d[u]=d[u-1].clone(),m[u]=m[u-1].clone(),g.crossVectors(p[u-1],p[u]),g.length()>Number.EPSILON&&(g.normalize(),a=Math.acos(i.Math.clamp(p[u-1].dot(p[u]),-1,1)),d[u].applyMatrix4(v.makeRotationAxis(g,a))),m[u].crossVectors(p[u],d[u]);if(n)for(a=Math.acos(i.Math.clamp(d[0].dot(d[y-1]),-1,1)),a/=y-1,p[0].dot(g.crossVectors(d[0],d[y-1]))>0&&(a=-a),u=1;u<y;u++)d[u].applyMatrix4(v.makeRotationAxis(p[u],a*u)),m[u].crossVectors(p[u],d[u]);
},i.PolyhedronGeometry=function(t,e,n,r){function a(t){var e=t.normalize().clone();e.index=h.vertices.push(e)-1;var n=c(t)/2/Math.PI+.5,r=l(t)/Math.PI+.5;return e.uv=new i.Vector2(n,1-r),e}function o(t,e,n){var r=new i.Face3(t.index,e.index,n.index,[t.clone(),e.clone(),n.clone()]);h.faces.push(r),x.copy(t).add(e).add(n).divideScalar(3);var a=c(x);h.faceVertexUvs[0].push([u(t.uv,t,a),u(e.uv,e,a),u(n.uv,n,a)])}function s(t,e){for(var n=Math.pow(2,e),r=a(h.vertices[t.a]),i=a(h.vertices[t.b]),s=a(h.vertices[t.c]),c=[],l=0;l<=n;l++){c[l]=[];for(var u=a(r.clone().lerp(s,l/n)),f=a(i.clone().lerp(s,l/n)),p=n-l,d=0;d<=p;d++)0===d&&l===n?c[l][d]=u:c[l][d]=a(u.clone().lerp(f,d/p))}for(var l=0;l<n;l++)for(var d=0;d<2*(n-l)-1;d++){var m=Math.floor(d/2);d%2===0?o(c[l][m+1],c[l+1][m],c[l][m]):o(c[l][m+1],c[l+1][m+1],c[l+1][m])}}function c(t){return Math.atan2(t.z,-t.x)}function l(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}function u(t,e,n){return n<0&&1===t.x&&(t=new i.Vector2(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new i.Vector2(n/2/Math.PI+.5,t.y)),t.clone()}i.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1,r=r||0;for(var h=this,f=0,p=t.length;f<p;f+=3)a(new i.Vector3(t[f],t[f+1],t[f+2]));for(var d=this.vertices,m=[],f=0,g=0,p=e.length;f<p;f+=3,g++){var v=d[e[f]],y=d[e[f+1]],b=d[e[f+2]];m[g]=new i.Face3(v.index,y.index,b.index,[v.clone(),y.clone(),b.clone()])}for(var x=new i.Vector3,f=0,p=m.length;f<p;f++)s(m[f],r);for(var f=0,p=this.faceVertexUvs[0].length;f<p;f++){var w=this.faceVertexUvs[0][f],_=w[0].x,E=w[1].x,M=w[2].x,T=Math.max(_,E,M),S=Math.min(_,E,M);T>.9&&S<.1&&(_<.2&&(w[0].x+=1),E<.2&&(w[1].x+=1),M<.2&&(w[2].x+=1))}for(var f=0,p=this.vertices.length;f<p;f++)this.vertices[f].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,n)},i.PolyhedronGeometry.prototype=Object.create(i.Geometry.prototype),i.PolyhedronGeometry.prototype.constructor=i.PolyhedronGeometry,i.DodecahedronGeometry=function(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];i.PolyhedronGeometry.call(this,a,o,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}},i.DodecahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.DodecahedronGeometry.prototype.constructor=i.DodecahedronGeometry,i.IcosahedronGeometry=function(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];i.PolyhedronGeometry.call(this,r,a,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}},i.IcosahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.IcosahedronGeometry.prototype.constructor=i.IcosahedronGeometry,i.OctahedronGeometry=function(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];i.PolyhedronGeometry.call(this,n,r,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}},i.OctahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.OctahedronGeometry.prototype.constructor=i.OctahedronGeometry,i.TetrahedronGeometry=function(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];i.PolyhedronGeometry.call(this,n,r,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}},i.TetrahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.TetrahedronGeometry.prototype.constructor=i.TetrahedronGeometry,i.ParametricGeometry=function(t,e,n){i.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n};var r,a,o,s,c,l=this.vertices,u=this.faces,h=this.faceVertexUvs[0],f=e+1;for(r=0;r<=n;r++)for(c=r/n,a=0;a<=e;a++)s=a/e,o=t(s,c),l.push(o);var p,d,m,g,v,y,b,x;for(r=0;r<n;r++)for(a=0;a<e;a++)p=r*f+a,d=r*f+a+1,m=(r+1)*f+a+1,g=(r+1)*f+a,v=new i.Vector2(a/e,r/n),y=new i.Vector2((a+1)/e,r/n),b=new i.Vector2((a+1)/e,(r+1)/n),x=new i.Vector2(a/e,(r+1)/n),u.push(new i.Face3(p,d,g)),h.push([v,y,x]),u.push(new i.Face3(d,m,g)),h.push([y.clone(),b,x.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},i.ParametricGeometry.prototype=Object.create(i.Geometry.prototype),i.ParametricGeometry.prototype.constructor=i.ParametricGeometry,i.WireframeGeometry=function(t){function e(t,e){return t-e}i.BufferGeometry.call(this);var n=[0,0],r={},a=["a","b","c"];if(t instanceof i.Geometry){for(var o=t.vertices,s=t.faces,c=0,l=new Uint32Array(6*s.length),u=0,h=s.length;u<h;u++)for(var f=s[u],p=0;p<3;p++){n[0]=f[a[p]],n[1]=f[a[(p+1)%3]],n.sort(e);var d=""+n;void 0===r[d]&&(l[2*c]=n[0],l[2*c+1]=n[1],r[d]=!0,c++)}for(var m=new Float32Array(2*c*3),u=0,h=c;u<h;u++)for(var p=0;p<2;p++){var g=o[l[2*u+p]],v=6*u+3*p;m[v+0]=g.x,m[v+1]=g.y,m[v+2]=g.z}this.addAttribute("position",new i.BufferAttribute(m,3))}else if(t instanceof i.BufferGeometry)if(null!==t.index){var y=t.index.array,o=t.attributes.position,b=t.groups,c=0;0===b.length&&t.addGroup(0,y.length);for(var l=new Uint32Array(2*y.length),x=0,w=b.length;x<w;++x)for(var _=b[x],E=_.start,M=_.count,u=E,T=E+M;u<T;u+=3)for(var p=0;p<3;p++){n[0]=y[u+p],n[1]=y[u+(p+1)%3],n.sort(e);var d=""+n;void 0===r[d]&&(l[2*c]=n[0],l[2*c+1]=n[1],r[d]=!0,c++)}for(var m=new Float32Array(2*c*3),u=0,h=c;u<h;u++)for(var p=0;p<2;p++){var v=6*u+3*p,S=l[2*u+p];m[v+0]=o.getX(S),m[v+1]=o.getY(S),m[v+2]=o.getZ(S)}this.addAttribute("position",new i.BufferAttribute(m,3))}else{for(var o=t.attributes.position.array,c=o.length/3,A=c/3,m=new Float32Array(2*c*3),u=0,h=A;u<h;u++)for(var p=0;p<3;p++){var v=18*u+6*p,C=9*u+3*p;m[v+0]=o[C],m[v+1]=o[C+1],m[v+2]=o[C+2];var S=9*u+3*((p+1)%3);m[v+3]=o[S],m[v+4]=o[S+1],m[v+5]=o[S+2]}this.addAttribute("position",new i.BufferAttribute(m,3))}},i.WireframeGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.WireframeGeometry.prototype.constructor=i.WireframeGeometry,i.AxisHelper=function(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new i.BufferGeometry;r.addAttribute("position",new i.BufferAttribute(e,3)),r.addAttribute("color",new i.BufferAttribute(n,3));var a=new i.LineBasicMaterial({vertexColors:i.VertexColors});i.LineSegments.call(this,r,a)},i.AxisHelper.prototype=Object.create(i.LineSegments.prototype),i.AxisHelper.prototype.constructor=i.AxisHelper,i.ArrowHelper=function(){var t=new i.BufferGeometry;t.addAttribute("position",new i.Float32Attribute([0,0,0,0,1,0],3));var e=new i.CylinderBufferGeometry(0,.5,1,5,1);return e.translate(0,-.5,0),function(n,r,a,o,s,c){i.Object3D.call(this),void 0===o&&(o=16776960),void 0===a&&(a=1),void 0===s&&(s=.2*a),void 0===c&&(c=.2*s),this.position.copy(r),this.line=new i.Line(t,new i.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new i.Mesh(e,new i.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(a,s,c)}}(),i.ArrowHelper.prototype=Object.create(i.Object3D.prototype),i.ArrowHelper.prototype.constructor=i.ArrowHelper,i.ArrowHelper.prototype.setDirection=function(){var t,e=new i.Vector3;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),i.ArrowHelper.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},i.ArrowHelper.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},i.BoxHelper=function(t,e){void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new i.BufferGeometry;a.setIndex(new i.BufferAttribute(n,1)),a.addAttribute("position",new i.BufferAttribute(r,3)),i.LineSegments.call(this,a,new i.LineBasicMaterial({color:e})),void 0!==t&&this.update(t)},i.BoxHelper.prototype=Object.create(i.LineSegments.prototype),i.BoxHelper.prototype.constructor=i.BoxHelper,i.BoxHelper.prototype.update=function(){var t=new i.Box3;return function(e){if(e instanceof i.Box3?t.copy(e):t.setFromObject(e),!t.isEmpty()){var n=t.min,r=t.max,a=this.geometry.attributes.position,o=a.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,a.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),i.BoundingBoxHelper=function(t,e){var n=void 0!==e?e:8947848;this.object=t,this.box=new i.Box3,i.Mesh.call(this,new i.BoxGeometry(1,1,1),new i.MeshBasicMaterial({color:n,wireframe:!0}))},i.BoundingBoxHelper.prototype=Object.create(i.Mesh.prototype),i.BoundingBoxHelper.prototype.constructor=i.BoundingBoxHelper,i.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},i.CameraHelper=function(t){function e(t,e,r){n(t,r),n(e,r)}function n(t,e){r.vertices.push(new i.Vector3),r.colors.push(new i.Color(e)),void 0===o[t]&&(o[t]=[]),o[t].push(r.vertices.length-1)}var r=new i.Geometry,a=new i.LineBasicMaterial({color:16777215,vertexColors:i.FaceColors}),o={},s=16755200,c=16711680,l=43775,u=16777215,h=3355443;e("n1","n2",s),e("n2","n4",s),e("n4","n3",s),e("n3","n1",s),e("f1","f2",s),e("f2","f4",s),e("f4","f3",s),e("f3","f1",s),e("n1","f1",s),e("n2","f2",s),e("n3","f3",s),e("n4","f4",s),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",l),e("u2","u3",l),e("u3","u1",l),e("c","t",u),e("p","c",h),e("cn1","cn2",h),e("cn3","cn4",h),e("cf1","cf2",h),e("cf3","cf4",h),i.LineSegments.call(this,r,a),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()},i.CameraHelper.prototype=Object.create(i.LineSegments.prototype),i.CameraHelper.prototype.constructor=i.CameraHelper,i.CameraHelper.prototype.update=function(){function t(t,i,o,s){r.set(i,o,s).unproject(a);var c=n[t];if(void 0!==c)for(var l=0,u=c.length;l<u;l++)e.vertices[c[l]].copy(r)}var e,n,r=new i.Vector3,a=new i.Camera;return function(){e=this.geometry,n=this.pointMap;var r=1,i=1;a.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-r,-i,-1),t("n2",r,-i,-1),t("n3",-r,i,-1),t("n4",r,i,-1),t("f1",-r,-i,1),t("f2",r,-i,1),t("f3",-r,i,1),t("f4",r,i,1),t("u1",.7*r,1.1*i,-1),t("u2",.7*-r,1.1*i,-1),t("u3",0,2*i,-1),t("cf1",-r,0,1),t("cf2",r,0,1),t("cf3",0,-i,1),t("cf4",0,i,1),t("cn1",-r,0,-1),t("cn2",r,0,-1),t("cn3",0,-i,-1),t("cn4",0,i,-1),e.verticesNeedUpdate=!0}}(),i.DirectionalLightHelper=function(t,e){i.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);var n=new i.BufferGeometry;n.addAttribute("position",new i.Float32Attribute([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new i.LineBasicMaterial({fog:!1});this.add(new i.Line(n,r)),n=new i.BufferGeometry,n.addAttribute("position",new i.Float32Attribute([0,0,0,0,0,1],3)),this.add(new i.Line(n,r)),this.update()},i.DirectionalLightHelper.prototype=Object.create(i.Object3D.prototype),i.DirectionalLightHelper.prototype.constructor=i.DirectionalLightHelper,i.DirectionalLightHelper.prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},i.DirectionalLightHelper.prototype.update=function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Vector3;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t);var r=this.children[0],i=this.children[1];r.lookAt(n),r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(n),i.scale.z=n.length()}}(),i.EdgesHelper=function(t,e,n){var r=void 0!==e?e:16777215;i.LineSegments.call(this,new i.EdgesGeometry(t.geometry,n),new i.LineBasicMaterial({color:r})),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},i.EdgesHelper.prototype=Object.create(i.LineSegments.prototype),i.EdgesHelper.prototype.constructor=i.EdgesHelper,i.FaceNormalsHelper=function(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var a=void 0!==n?n:16776960,o=void 0!==r?r:1,s=0,c=this.object.geometry;c instanceof i.Geometry?s=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new i.BufferGeometry,u=new i.Float32Attribute(2*s*3,3);l.addAttribute("position",u),i.LineSegments.call(this,l,new i.LineBasicMaterial({color:a,linewidth:o})),this.matrixAutoUpdate=!1,this.update()},i.FaceNormalsHelper.prototype=Object.create(i.LineSegments.prototype),i.FaceNormalsHelper.prototype.constructor=i.FaceNormalsHelper,i.FaceNormalsHelper.prototype.update=function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Matrix3;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,c=0,l=0,u=s.length;l<u;l++){var h=s[l],f=h.normal;t.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(r),e.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),i.setXYZ(c,t.x,t.y,t.z),c+=1,i.setXYZ(c,e.x,e.y,e.z),c+=1}return i.needsUpdate=!0,this}}(),i.GridHelper=function(t,e,n,r){n=new i.Color(void 0!==n?n:4473924),r=new i.Color(void 0!==r?r:8947848);for(var a=[],o=[],s=-t,c=0;s<=t;s+=e){a.push(-t,0,s,t,0,s),a.push(s,0,-t,s,0,t);var l=0===s?n:r;l.toArray(o,c),c+=3,l.toArray(o,c),c+=3,l.toArray(o,c),c+=3,l.toArray(o,c),c+=3}var u=new i.BufferGeometry;u.addAttribute("position",new i.Float32Attribute(a,3)),u.addAttribute("color",new i.Float32Attribute(o,3));var h=new i.LineBasicMaterial({vertexColors:i.VertexColors});i.LineSegments.call(this,u,h)},i.GridHelper.prototype=Object.create(i.LineSegments.prototype),i.GridHelper.prototype.constructor=i.GridHelper,i.GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},i.HemisphereLightHelper=function(t,e){i.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new i.Color,new i.Color];var n=new i.SphereGeometry(e,4,2);n.rotateX(-Math.PI/2);for(var r=0,a=8;r<a;r++)n.faces[r].color=this.colors[r<4?0:1];var o=new i.MeshBasicMaterial({vertexColors:i.FaceColors,wireframe:!0});this.lightSphere=new i.Mesh(n,o),this.add(this.lightSphere),this.update()},i.HemisphereLightHelper.prototype=Object.create(i.Object3D.prototype),i.HemisphereLightHelper.prototype.constructor=i.HemisphereLightHelper,i.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},i.HemisphereLightHelper.prototype.update=function(){var t=new i.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),i.PointLightHelper=function(t,e){this.light=t,this.light.updateMatrixWorld();var n=new i.SphereBufferGeometry(e,4,2),r=new i.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.Mesh.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},i.PointLightHelper.prototype=Object.create(i.Mesh.prototype),i.PointLightHelper.prototype.constructor=i.PointLightHelper,i.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},i.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},i.SkeletonHelper=function(t){this.bones=this.getBoneList(t);for(var e=new i.Geometry,n=0;n<this.bones.length;n++){var r=this.bones[n];r.parent instanceof i.Bone&&(e.vertices.push(new i.Vector3),e.vertices.push(new i.Vector3),e.colors.push(new i.Color(0,0,1)),e.colors.push(new i.Color(0,1,0)))}e.dynamic=!0;var a=new i.LineBasicMaterial({vertexColors:i.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});i.LineSegments.call(this,e,a),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()},i.SkeletonHelper.prototype=Object.create(i.LineSegments.prototype),i.SkeletonHelper.prototype.constructor=i.SkeletonHelper,i.SkeletonHelper.prototype.getBoneList=function(t){var e=[];t instanceof i.Bone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,this.getBoneList(t.children[n]));return e},i.SkeletonHelper.prototype.update=function(){for(var t=this.geometry,e=(new i.Matrix4).getInverse(this.root.matrixWorld),n=new i.Matrix4,r=0,a=0;a<this.bones.length;a++){var o=this.bones[a];o.parent instanceof i.Bone&&(n.multiplyMatrices(e,o.matrixWorld),t.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(e,o.parent.matrixWorld),t.vertices[r+1].setFromMatrixPosition(n),r+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},i.SpotLightHelper=function(t){i.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;for(var e=new i.BufferGeometry,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1,o=32;r<o;r++,a++){var s=r/o*Math.PI*2,c=a/o*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(c),Math.sin(c),1)}e.addAttribute("position",new i.Float32Attribute(n,3));var l=new i.LineBasicMaterial({fog:!1});this.cone=new i.LineSegments(e,l),this.add(this.cone),this.update()},i.SpotLightHelper.prototype=Object.create(i.Object3D.prototype),i.SpotLightHelper.prototype.constructor=i.SpotLightHelper,i.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},i.SpotLightHelper.prototype.update=function(){var t=new i.Vector3,e=new i.Vector3;return function(){var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),i.VertexNormalsHelper=function(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var a=void 0!==n?n:16711680,o=void 0!==r?r:1,s=0,c=this.object.geometry;c instanceof i.Geometry?s=3*c.faces.length:c instanceof i.BufferGeometry&&(s=c.attributes.normal.count);var l=new i.BufferGeometry,u=new i.Float32Attribute(2*s*3,3);l.addAttribute("position",u),i.LineSegments.call(this,l,new i.LineBasicMaterial({color:a,linewidth:o})),this.matrixAutoUpdate=!1,this.update()},i.VertexNormalsHelper.prototype=Object.create(i.LineSegments.prototype),i.VertexNormalsHelper.prototype.constructor=i.VertexNormalsHelper,i.VertexNormalsHelper.prototype.update=function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Matrix3;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var a=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s instanceof i.Geometry)for(var c=s.vertices,l=s.faces,u=0,h=0,f=l.length;h<f;h++)for(var p=l[h],d=0,m=p.vertexNormals.length;d<m;d++){var g=c[p[r[d]]],v=p.vertexNormals[d];t.copy(g).applyMatrix4(a),e.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(u,t.x,t.y,t.z),u+=1,o.setXYZ(u,e.x,e.y,e.z),u+=1}else if(s instanceof i.BufferGeometry)for(var y=s.attributes.position,b=s.attributes.normal,u=0,d=0,m=y.count;d<m;d++)t.set(y.getX(d),y.getY(d),y.getZ(d)).applyMatrix4(a),e.set(b.getX(d),b.getY(d),b.getZ(d)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(u,t.x,t.y,t.z),u+=1,o.setXYZ(u,e.x,e.y,e.z),u+=1;return o.needsUpdate=!0,this}}(),i.WireframeHelper=function(t,e){var n=void 0!==e?e:16777215;i.LineSegments.call(this,new i.WireframeGeometry(t.geometry),new i.LineBasicMaterial({color:n})),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},i.WireframeHelper.prototype=Object.create(i.LineSegments.prototype),i.WireframeHelper.prototype.constructor=i.WireframeHelper,i.ImmediateRenderObject=function(t){i.Object3D.call(this),this.material=t,this.render=function(t){}},i.ImmediateRenderObject.prototype=Object.create(i.Object3D.prototype),i.ImmediateRenderObject.prototype.constructor=i.ImmediateRenderObject,i.MorphBlendMesh=function(t,e){i.Mesh.call(this,t,e),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r="__default",a=0,o=n-1,s=n/1;this.createAnimation(r,a,o,s),this.setAnimationWeight(r,1)},i.MorphBlendMesh.prototype=Object.create(i.Mesh.prototype),i.MorphBlendMesh.prototype.constructor=i.MorphBlendMesh,i.MorphBlendMesh.prototype.createAnimation=function(t,e,n,r){var i={start:e,end:n,length:n-e+1,fps:r,duration:(n-e)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=i,this.animationsList.push(i)},i.MorphBlendMesh.prototype.autoCreateAnimations=function(t){for(var e,n=/([a-z]+)_?(\d+)/i,r={},i=this.geometry,a=0,o=i.morphTargets.length;a<o;a++){var s=i.morphTargets[a],c=s.name.match(n);if(c&&c.length>1){var l=c[1];r[l]||(r[l]={start:1/0,end:-(1/0)});var u=r[l];a<u.start&&(u.start=a),a>u.end&&(u.end=a),e||(e=l)}}for(var l in r){var u=r[l];this.createAnimation(l,u.start,u.end,t)}this.firstAnimation=e},i.MorphBlendMesh.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},i.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},i.MorphBlendMesh.prototype.setAnimationFPS=function(t,e){var n=this.animationsMap[t];n&&(n.fps=e,n.duration=(n.end-n.start)/n.fps)},i.MorphBlendMesh.prototype.setAnimationDuration=function(t,e){var n=this.animationsMap[t];n&&(n.duration=e,n.fps=(n.end-n.start)/n.duration)},i.MorphBlendMesh.prototype.setAnimationWeight=function(t,e){var n=this.animationsMap[t];n&&(n.weight=e)},i.MorphBlendMesh.prototype.setAnimationTime=function(t,e){var n=this.animationsMap[t];n&&(n.time=e)},i.MorphBlendMesh.prototype.getAnimationTime=function(t){var e=0,n=this.animationsMap[t];return n&&(e=n.time),e},i.MorphBlendMesh.prototype.getAnimationDuration=function(t){var e=-1,n=this.animationsMap[t];return n&&(e=n.duration),e},i.MorphBlendMesh.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},i.MorphBlendMesh.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},i.MorphBlendMesh.prototype.update=function(t){for(var e=0,n=this.animationsList.length;e<n;e++){var r=this.animationsList[e];if(r.active){var a=r.duration/r.length;r.time+=r.direction*t,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var o=r.start+i.Math.clamp(Math.floor(r.time/a),0,r.length-1),s=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*s,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o);var c=r.time%a/a;r.directionBackwards&&(c=1-c),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=c*s,this.morphTargetInfluences[r.lastFrame]=(1-c)*s):this.morphTargetInfluences[r.currentFrame]=s}}}},806:function(t,exports,e){var n,r,i;i=e(9),r=e(205),n=e(31),describe("test the account store",function(){var t,e,n;return e=smc.redux.getStore("account"),n=smc.redux.getTable("account"),t=smc.redux.getActions("account"),it("verifies that account_id is a valid uuid",function(){return i.is_valid_uuid_string(e.get_account_id())})}),describe("test the account Table",function(){var t,e,n;return e=smc.redux.getStore("account"),n=smc.redux.getTable("account"),t=smc.redux.getActions("account"),it("gets the first name, changes it, verifies that it is changed, then changes it back",function(t){var i;return this.timeout(5e3),i=e.get("first_name"),n.set({first_name:"First Name"}),r(e.get("first_name")).toEqual("First Name"),n._table.save(function(a){return n.set({first_name:i}),r(e.get("first_name")).toEqual(i),t(a)})})})},807:function(t,exports,e){var n,r,i,a,o;i=e(205),a=e(9),r=e(31),n=smc.redux.getActions("page"),o=smc.redux.getStore("page"),describe("tests opening each page",function(){return it("opens the projects page",function(){return n.set_active_tab("projects"),i(document.title).toEqual("Projects - SageMathCloud"),i(a.endswith(window.location.href,"/projects")).toEqual(!0),i($(".fa-thumb-tack:visible").length).toEqual(1)}),it("opens the accounts page",function(){return n.set_active_tab("account"),i(document.title).toEqual("Account - SageMathCloud"),i(a.endswith(window.location.href,"/settings")).toEqual(!0),i($(".fa-user:visible").length).toEqual(1),i($("#account-page-tabs").length).toEqual(1)}),it("opens the about page",function(){return n.set_active_tab("about"),i(document.title).toEqual("Help - SageMathCloud"),i(a.endswith(window.location.href,"/help")).toEqual(!0),i($(".fa-support:visible").length).toEqual(1)})}),describe("tests fullscreen",function(){return it("activates fullscreen mode via action",function(){return n.set_fullscreen(!0),i($(".navbar-nav").length).toEqual(0)}),it("leaves fullscreen mode via action",function(){return n.set_fullscreen(!1),i($(".navbar-nav").length).toBeGreaterThan(0)})}),describe("test showing the connection information",function(){return it("shows the connection dialog",function(){return n.show_connection(!0),i($("h4:contains('Connection')").length).toEqual(1),i(o.get("show_connection")).toEqual(!0)}),it("hides the connection dialog",function(){return n.show_connection(!1),i($("h4:contains('Connection')").length).toEqual(0),i(o.get("show_connection")).toEqual(!1)})})},808:function(t,exports,e){var n,r,i;i=e(9),r=e(205),n=e(31),describe("create a project and make some changes using projects action",function(){var t,e,n;return e=void 0,t=smc.redux.getActions("projects"),n=smc.redux.getStore("projects"),it("creates a project and waits until created",function(r){var a;return this.timeout(5e3),a=i.uuid(),t.create_project({title:"TEST project",description:"TEST description",token:a}),n.wait_until_project_created(a,3,function(t){return function(t,n){return e=n,r(t)}}(this))}),it("opens project tab",function(){return t.open_project({project_id:e,switch_to:!0})}),it("confirms that we have info about this project",function(){return r(t.have_project(e)).toEqual(!0)}),it("confirms that we do not have info about random project",function(){return r(t.have_project(i.uuid())).toEqual(!1)}),it("confirms the title and description are as set",function(){return n=n,r(n.get_title(e)).toEqual("TEST project"),r(n.get_description(e)).toEqual("TEST description")}),it("confirms the document title at the top changes",function(){return r(document.title).toEqual("TEST project - SageMathCloud")}),it("changes the title",function(){return t.set_project_title(e,"TEST project -- Better Title"),r(n.get_title(e)).toEqual("TEST project -- Better Title")}),it("changes the description",function(){return t.set_project_description(e,"TEST project -- Better Description"),r(n.get_description(e)).toEqual("TEST project -- Better Description")}),it("hides the project from myself",function(){return t.set_project_hide(smc.client.account_id,e,!0),r(n.is_hidden_from(e,smc.client.account_id)).toEqual(!0)}),it("then shows it to myself again",function(){return t.set_project_hide(smc.client.account_id,e,!1),r(n.is_hidden_from(e,smc.client.account_id)).toEqual(!1)}),it("toggles visibility of project off",function(){return t.toggle_hide_project(e),r(n.is_hidden_from(e,smc.client.account_id)).toEqual(!0)}),it("toggles visibility of project back on",function(){return t.toggle_hide_project(e),r(n.is_hidden_from(e,smc.client.account_id)).toEqual(!1)}),it("deletes the project",function(){return smc.redux.getActions("page").close_project_tab(e),t.stop_project(e),t.delete_project(e)})}),describe("starting and stopping a project and getting directory listing",function(){var t,e,n;return e=void 0,t=smc.redux.getActions("projects"),n=smc.redux.getStore("projects"),it("creates a project and waits until created",function(r){var a;return this.timeout(5e3),a=i.uuid(),t.create_project({title:"TEST start/stop project",description:"Test starting and stopping a project",token:a}),n.wait_until_project_created(a,3,function(t){return function(t,n){return e=n,r(t)}}(this))}),it("opens project tab",function(){return t.open_project({project_id:e,switch_to:!0}),r(document.title).toEqual("TEST start/stop project - SageMathCloud"),r(i.endswith(window.location.href,"/projects/"+e+"/")).toEqual(!0)}),it("starts the NEW project running and waits until running",function(r){return this.timeout(25e3),t.start_project(e),n.wait({until:function(t){return function(){var t;return"running"===(null!=(t=n.get_project(e).state)?t.state:void 0)}}(this),cb:r})}),it("stops project running and waits until stopped",function(r){return this.timeout(1e4),t.stop_project(e),n.wait({until:function(t){return function(){var t;return"opened"===(null!=(t=n.get_project(e).state)?t.state:void 0)}}(this),cb:r})}),it("starts project running again",function(r){return this.timeout(1e4),t.start_project(e),n.wait({until:function(t){return function(){var t;return"running"===(null!=(t=n.get_project(e).state)?t.state:void 0)}}(this),cb:r})}),it("gets directory listing (and confirm is empty list)",function(t){var n;return this.timeout(5e3),smc.redux.getProjectActions(e).fetch_directory_listing(),n=smc.redux.getProjectStore(e),n.wait({until:function(t){return function(){var t,e;return 0===(null!=(t=n.getIn(["directory_listings",""]))&&null!=(e=t.toJS())?e.length:void 0)}}(this),cb:t})}),it("gets directory listing including hidden (and confirm some dirs)",function(t){var n;return this.timeout(5e3),smc.redux.getProjectActions(e).fetch_directory_listing({path:"",sort_by_time:!0,show_hidden:!0}),n=smc.redux.getProjectStore(e),n.wait({until:function(t){return function(){var t,e;return(null!=(t=n.getIn(["directory_listings",""]))&&null!=(e=t.toJS())?e.length:void 0)>0}}(this),cb:t})}),it("gets .smc directory listing",function(t){var n;return this.timeout(5e3),smc.redux.getProjectActions(e).fetch_directory_listing({path:".smc"}),n=smc.redux.getProjectStore(e),n.wait({until:function(){var t,e;return(null!=(t=n.getIn(["directory_listings",".smc"]))&&null!=(e=t.toJS())?e.length:void 0)>0},cb:function(e){var i,a,o,s,c;if(e)return void t(e);for(s=null!=(o=n.getIn(["directory_listings",".smc"]))?o.toJS():void 0,i=0,a=s.length;i<a;i++)c=s[i],delete c.mtime,delete c.size;return r(s).toEqual([{isdir:!0,name:"local_hub"},{isdir:!0,name:"root"},{name:"secret_token"},{name:"info.json"}]),t()}})}),it("deletes the project",function(){return smc.redux.getActions("page").close_project_tab(e),
t.stop_project(e),t.delete_project(e)})})},809:function(t,exports,e){var n,r;r=e(9),n=e(205),describe("test basics about projects",function(){var t;return t=void 0,it("gets a list of projects",function(){var t;return t=smc.redux.getStore("projects")})})},814:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e(420),s=n(o),c=e(1058),l=n(c),u=e(419),h=n(u),f=e(815),p=e(816),d=function(){function t(e){r(this,t),this.actual=e,(0,p.isFunction)(e)&&(this.context=null,this.args=[])}return a(t,[{key:"toExist",value:function(t){return(0,h.default)(this.actual,t||"Expected %s to exist",this.actual),this}},{key:"toNotExist",value:function(t){return(0,h.default)(!this.actual,t||"Expected %s to not exist",this.actual),this}},{key:"toBe",value:function(t,e){return(0,h.default)(this.actual===t,e||"Expected %s to be %s",this.actual,t),this}},{key:"toNotBe",value:function(t,e){return(0,h.default)(this.actual!==t,e||"Expected %s to not be %s",this.actual,t),this}},{key:"toEqual",value:function(t,e){try{(0,h.default)((0,p.isEqual)(this.actual,t),e||"Expected %s to equal %s",this.actual,t)}catch(e){throw e.actual=this.actual,e.expected=t,e.showDiff=!0,e}return this}},{key:"toNotEqual",value:function(t,e){return(0,h.default)(!(0,p.isEqual)(this.actual,t),e||"Expected %s to not equal %s",this.actual,t),this}},{key:"toThrow",value:function(t,e){return(0,h.default)((0,p.isFunction)(this.actual),'The "actual" argument in expect(actual).toThrow() must be a function, %s was given',this.actual),(0,h.default)((0,p.functionThrows)(this.actual,this.context,this.args,t),e||"Expected %s to throw %s",this.actual,t||"an error"),this}},{key:"toNotThrow",value:function(t,e){return(0,h.default)((0,p.isFunction)(this.actual),'The "actual" argument in expect(actual).toNotThrow() must be a function, %s was given',this.actual),(0,h.default)(!(0,p.functionThrows)(this.actual,this.context,this.args,t),e||"Expected %s to not throw %s",this.actual,t||"an error"),this}},{key:"toBeA",value:function(t,e){return(0,h.default)((0,p.isFunction)(t)||"string"==typeof t,'The "value" argument in toBeA(value) must be a function or a string'),(0,h.default)((0,p.isA)(this.actual,t),e||"Expected %s to be a %s",this.actual,t),this}},{key:"toNotBeA",value:function(t,e){return(0,h.default)((0,p.isFunction)(t)||"string"==typeof t,'The "value" argument in toNotBeA(value) must be a function or a string'),(0,h.default)(!(0,p.isA)(this.actual,t),e||"Expected %s to not be a %s",this.actual,t),this}},{key:"toMatch",value:function(t,e){return(0,h.default)((0,l.default)(this.actual,t),e||"Expected %s to match %s",this.actual,t),this}},{key:"toNotMatch",value:function(t,e){return(0,h.default)(!(0,l.default)(this.actual,t),e||"Expected %s to not match %s",this.actual,t),this}},{key:"toBeLessThan",value:function(t,e){return(0,h.default)("number"==typeof this.actual,'The "actual" argument in expect(actual).toBeLessThan() must be a number'),(0,h.default)("number"==typeof t,'The "value" argument in toBeLessThan(value) must be a number'),(0,h.default)(this.actual<t,e||"Expected %s to be less than %s",this.actual,t),this}},{key:"toBeLessThanOrEqualTo",value:function(t,e){return(0,h.default)("number"==typeof this.actual,'The "actual" argument in expect(actual).toBeLessThanOrEqualTo() must be a number'),(0,h.default)("number"==typeof t,'The "value" argument in toBeLessThanOrEqualTo(value) must be a number'),(0,h.default)(this.actual<=t,e||"Expected %s to be less than or equal to %s",this.actual,t),this}},{key:"toBeGreaterThan",value:function(t,e){return(0,h.default)("number"==typeof this.actual,'The "actual" argument in expect(actual).toBeGreaterThan() must be a number'),(0,h.default)("number"==typeof t,'The "value" argument in toBeGreaterThan(value) must be a number'),(0,h.default)(this.actual>t,e||"Expected %s to be greater than %s",this.actual,t),this}},{key:"toBeGreaterThanOrEqualTo",value:function(t,e){return(0,h.default)("number"==typeof this.actual,'The "actual" argument in expect(actual).toBeGreaterThanOrEqualTo() must be a number'),(0,h.default)("number"==typeof t,'The "value" argument in toBeGreaterThanOrEqualTo(value) must be a number'),(0,h.default)(this.actual>=t,e||"Expected %s to be greater than or equal to %s",this.actual,t),this}},{key:"toInclude",value:function(t,e,n){"string"==typeof e&&(n=e,e=null),null==e&&(e=p.isEqual);var r=!1;return(0,p.isArray)(this.actual)?r=(0,p.arrayContains)(this.actual,t,e):(0,p.isObject)(this.actual)?r=(0,p.objectContains)(this.actual,t,e):"string"==typeof this.actual?r=(0,p.stringContains)(this.actual,t):(0,h.default)(!1,'The "actual" argument in expect(actual).toInclude() must be an array, object, or a string'),(0,h.default)(r,n||"Expected %s to include %s",this.actual,t),this}},{key:"toExclude",value:function(t,e,n){"string"==typeof e&&(n=e,e=null),null==e&&(e=p.isEqual);var r=!1;return(0,p.isArray)(this.actual)?r=(0,p.arrayContains)(this.actual,t,e):(0,p.isObject)(this.actual)?r=(0,p.objectContains)(this.actual,t,e):"string"==typeof this.actual?r=(0,p.stringContains)(this.actual,t):(0,h.default)(!1,'The "actual" argument in expect(actual).toExclude() must be an array, object, or a string'),(0,h.default)(!r,n||"Expected %s to exclude %s",this.actual,t),this}},{key:"toIncludeKeys",value:function(t,e,n){var r=this;"string"==typeof e&&(n=e,e=null),null==e&&(e=s.default),(0,h.default)("object"===i(this.actual),'The "actual" argument in expect(actual).toIncludeKeys() must be an object, not %s',this.actual),(0,h.default)((0,p.isArray)(t),'The "keys" argument in expect(actual).toIncludeKeys(keys) must be an array, not %s',t);var a=t.every(function(t){return e(r.actual,t)});return(0,h.default)(a,n||"Expected %s to include key(s) %s",this.actual,t.join(", ")),this}},{key:"toIncludeKey",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.toIncludeKeys.apply(this,[[t]].concat(n))}},{key:"toExcludeKeys",value:function(t,e,n){var r=this;"string"==typeof e&&(n=e,e=null),null==e&&(e=s.default),(0,h.default)("object"===i(this.actual),'The "actual" argument in expect(actual).toExcludeKeys() must be an object, not %s',this.actual),(0,h.default)((0,p.isArray)(t),'The "keys" argument in expect(actual).toIncludeKeys(keys) must be an array, not %s',t);var a=t.every(function(t){return e(r.actual,t)});return(0,h.default)(!a,n||"Expected %s to exclude key(s) %s",this.actual,t.join(", ")),this}},{key:"toExcludeKey",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.toExcludeKeys.apply(this,[[t]].concat(n))}},{key:"toHaveBeenCalled",value:function(t){var e=this.actual;return(0,h.default)((0,f.isSpy)(e),'The "actual" argument in expect(actual).toHaveBeenCalled() must be a spy'),(0,h.default)(e.calls.length>0,t||"spy was not called"),this}},{key:"toHaveBeenCalledWith",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.actual;return(0,h.default)((0,f.isSpy)(r),'The "actual" argument in expect(actual).toHaveBeenCalledWith() must be a spy'),(0,h.default)(r.calls.some(function(t){return(0,p.isEqual)(t.arguments,e)}),"spy was never called with %s",e),this}},{key:"toNotHaveBeenCalled",value:function(t){var e=this.actual;return(0,h.default)((0,f.isSpy)(e),'The "actual" argument in expect(actual).toNotHaveBeenCalled() must be a spy'),(0,h.default)(0===e.calls.length,t||"spy was not supposed to be called"),this}}]),t}(),m=function(t,e){var n=!1;return function(){n||(n=!0,console.warn(e));for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,i)}};d.prototype.withContext=m(function(t){return(0,h.default)((0,p.isFunction)(this.actual),'The "actual" argument in expect(actual).withContext() must be a function'),this.context=t,this},"\nwithContext is deprecated; use a closure instead.\n\n  expect(fn).withContext(context).toThrow()\n\nbecomes\n\n  expect(() => fn.call(context)).toThrow()\n"),d.prototype.withArgs=m(function(){var t;return(0,h.default)((0,p.isFunction)(this.actual),'The "actual" argument in expect(actual).withArgs() must be a function'),arguments.length&&(this.args=(t=this.args).concat.apply(t,arguments)),this},"\nwithArgs is deprecated; use a closure instead.\n\n  expect(fn).withArgs(a, b, c).toThrow()\n\nbecomes\n\n  expect(() => fn(a, b, c)).toThrow()\n");var g={toBeAn:"toBeA",toNotBeAn:"toNotBeA",toBeTruthy:"toExist",toBeFalsy:"toNotExist",toBeFewerThan:"toBeLessThan",toBeMoreThan:"toBeGreaterThan",toContain:"toInclude",toNotContain:"toExclude",toNotInclude:"toExclude",toContainKeys:"toIncludeKeys",toNotContainKeys:"toExcludeKeys",toNotIncludeKeys:"toExcludeKeys",toContainKey:"toIncludeKey",toNotContainKey:"toExcludeKey",toNotIncludeKey:"toExcludeKey"};for(var v in g)g.hasOwnProperty(v)&&(d.prototype[v]=d.prototype[g[v]]);exports.default=d},815:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.spyOn=exports.createSpy=exports.restoreSpies=exports.isSpy=void 0;var i=e(1041),a=e(419),o=n(a),s=e(816),c=function(){},l=i.supportsDescriptors&&Object.getOwnPropertyDescriptor(function(){},"length").configurable,u=exports.isSpy=function(t){return t&&t.__isSpy===!0},h=[],f=(exports.restoreSpies=function(){for(var t=h.length-1;t>=0;t--)h[t].restore();h=[]},exports.createSpy=function(t){function e(){if(f.calls.push({context:this,arguments:Array.prototype.slice.call(arguments,0)}),i)return i.apply(this,arguments);if(a)throw a;return u}var n=arguments.length<=1||void 0===arguments[1]?c:arguments[1];null==t&&(t=c),(0,o.default)((0,s.isFunction)(t),"createSpy needs a function");var i=void 0,a=void 0,u=void 0,f=void 0;return f=l?Object.defineProperty(e,"length",{value:t.length,writable:!1,enumerable:!1,configurable:!0}):Function("spy","return function("+[].concat(r(Array(t.length))).map(function(t,e){return"_"+e}).join(",")+") {\n      return spy.apply(this, arguments)\n    }")(e),f.calls=[],f.andCall=function(t){return i=t,f},f.andCallThrough=function(){return f.andCall(t)},f.andThrow=function(t){return a=t,f},f.andReturn=function(t){return u=t,f},f.getLastCall=function(){return f.calls[f.calls.length-1]},f.reset=function(){f.calls=[]},f.restore=f.destroy=n,f.__isSpy=!0,h.push(f),f});exports.spyOn=function(t,e){var n=t[e];return u(n)||((0,o.default)((0,s.isFunction)(n),"Cannot spyOn the %s property; it is not a function",e),t[e]=f(n,function(){t[e]=n})),t[e]}},816:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringContains=exports.objectContains=exports.arrayContains=exports.functionThrows=exports.isA=exports.isObject=exports.isArray=exports.isFunction=exports.isEqual=exports.whyNotEqual=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=e(818),a=n(i),o=e(1051),s=n(o),c=e(820),l=n(c),u=exports.whyNotEqual=function(t,e){return t==e?"":(0,s.default)(t,e)},h=(exports.isEqual=function(t,e){return""===u(t,e)},exports.isFunction=function(t){return"function"==typeof t}),f=exports.isArray=function(t){return Array.isArray(t)},p=exports.isObject=function(t){return t&&!f(t)&&"object"===(void 0===t?"undefined":r(t))},d=(exports.isA=function(t,e){return h(e)?t instanceof e:"array"===e?Array.isArray(t):(void 0===t?"undefined":r(t))===e},exports.functionThrows=function(t,e,n,r){try{t.apply(e,n)}catch(t){if(null==r)return!0;if(h(r)&&t instanceof r)return!0;var i=t.message||t;if("string"==typeof i){if((0,a.default)(r)&&r.test(t.message))return!0;if("string"==typeof r&&i.indexOf(r)!==-1)return!0}}return!1},exports.arrayContains=function(t,e,n){return t.some(function(t){return n(t,e)!==!1})},function(t){return"object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):"function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}).concat((0,l.default)(t)):(0,l.default)(t)});exports.objectContains=function t(e,n,r){return d(n).every(function(i){return p(e[i])&&p(n[i])?t(e[i],n[i],r):r(e[i],n[i])})},exports.stringContains=function(t,e){return t.indexOf(e)!==-1}},817:function(t,exports){"use strict";var e=Function.prototype.toString,n=/^\s*class /,r=function(t){try{var r=e.call(t),i=r.replace(/\/\/.*\n/g,""),a=i.replace(/\/\*[.\s\S]*\*\//g,""),o=a.replace(/\n/gm," ").replace(/ {2}/g," ");return n.test(o)}catch(t){return!1}},i=function(t){try{return!r(t)&&(e.call(t),!0)}catch(t){return!1}},a=Object.prototype.toString,o="[object Function]",s="[object GeneratorFunction]",c="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(c)return i(t);if(r(t))return!1;var e=a.call(t);return e===o||e===s}},818:function(t,exports,e){"use strict";var n=e(420),r=RegExp.prototype.exec,i=Object.getOwnPropertyDescriptor,a=function(t){try{var e=t.lastIndex;return t.lastIndex=0,r.call(t),!0}catch(t){return!1}finally{t.lastIndex=e}},o=Object.prototype.toString,s="[object RegExp]",c="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!c)return o.call(t)===s;var e=i(t,"lastIndex"),r=e&&n(e,"value");return!!r&&a(t)}},819:function(t,exports){"use strict";var e=Object.prototype.toString,n="function"==typeof Symbol&&"symbol"==typeof Symbol();if(n){var r=Symbol.prototype.toString,i=/^Symbol\(.*\)$/,a=function(t){return"symbol"==typeof t.valueOf()&&i.test(r.call(t))};t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==e.call(t))return!1;try{return a(t)}catch(t){return!1}}}else t.exports=function(t){return!1}},820:function(t,exports,e){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=Array.prototype.slice,a=e(1057),o=Object.prototype.propertyIsEnumerable,s=!o.call({toString:null},"toString"),c=o.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(t){var e=t.constructor;return e&&e.prototype===t},h={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{u(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),p=function(t){if("undefined"==typeof window||!f)return u(t);try{return u(t)}catch(t){return!1}},d=function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===r.call(t),o=a(t),u=e&&"[object String]"===r.call(t),h=[];if(!e&&!i&&!o)throw new TypeError("Object.keys called on a non-object");var f=c&&i;if(u&&t.length>0&&!n.call(t,0))for(var d=0;d<t.length;++d)h.push(d+"");if(o&&t.length>0)for(var m=0;m<t.length;++m)h.push(m+"");else for(var g in t)f&&"prototype"===g||!n.call(t,g)||h.push(g+"");if(s)for(var v=p(t),y=0;y<l.length;++y)v&&"constructor"===l[y]||!n.call(t,l[y])||h.push(l[y]);return h};d.shim=function(){if(Object.keys){var t=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!t){var e=Object.keys;Object.keys=function(t){return e(a(t)?i.call(t):t)}}}else Object.keys=d;return Object.keys||d},t.exports=d},911:function(t,exports,e){var $,n,r,i,a,o,s,c,l,u,h,f,p,d,m,g,v=function(t,e){return function(){return t.apply(e,arguments)}};$=window.$,l=e(31),d=e(9),h=d.defaults,m=d.required,u=function(t){var e;return e=t.toString(16),1===e.length?"0"+e:e},g=function(t,e,n){return"#"+u(t)+u(e)+u(n)},o=[],a="73",window.THREE=e(783),e(992),e(993),e(994),e(991),c=void 0,s={webgl:void 0,canvas:void 0},f=void 0,p=function(t,e){return null!=c&&c._id!==t._id&&c.set_static_renderer(),c=t,e=!Detector.webgl||null!=e&&"webgl"!==e?"canvas":"webgl",f=e,null==s[e]&&("webgl"===e?s[e]=new THREE.WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}):s[e]=new THREE.CanvasRenderer({antialias:!0,alpha:!0}),$(s[e].domElement).addClass("salvus-3d-dynamic-renderer")),s[e]},r=n=16,i=function(){function t(t){this.rescale_objects=v(this.rescale_objects,this),this._rescale_factor=v(this._rescale_factor,this),this.render_scene=v(this.render_scene,this),this._animate=v(this._animate,this),this.animate=v(this.animate,this),this.add_3dgraphics_obj=v(this.add_3dgraphics_obj,this),this.set_frame=v(this.set_frame,this),this.add_obj=v(this.add_obj,this),this.add_point=v(this.add_point,this),this.add_line=v(this.add_line,this),this.add_text=v(this.add_text,this),this.init_light=v(this.init_light,this),this.add_camera=v(this.add_camera,this),this.init_orbit_controls=v(this.init_orbit_controls,this),this.data_url=v(this.data_url,this),this.show_canvas=v(this.show_canvas,this),this.init_aspect_ratio_functions=v(this.init_aspect_ratio_functions,this),this.init_on_mouseover=v(this.init_on_mouseover,this),this.set_static_renderer=v(this.set_static_renderer,this),this.set_dynamic_renderer=v(this.set_dynamic_renderer,this),this.init_eval_note=v(this.init_eval_note,this),this.init_done=v(this.init_done,this),this.init=v(this.init,this),this.opts=h(t,{element:m,container:m,width:void 0,height:void 0,renderer:void 0,background:"transparent",foreground:void 0,spin:!1,camera_distance:10,aspect_ratio:void 0,stop_when_gone:void 0,frame:void 0,cb:void 0}),this.init_eval_note(),"function"==typeof t.cb&&t.cb(void 0,this)}return t.prototype.init=function(){var t,e,i,a,o,s,c,l;if(!this._init&&(this._init=!0,this._id=d.uuid(),this.init_aspect_ratio_functions(),this.scene=new THREE.Scene,(null==this.opts.width||this.opts.width<r)&&(this.opts.width=.5*$(window).width()),this.opts.height=null!=this.opts.height&&this.opts.height>=n?this.opts.height:2*this.opts.width/3,this.opts.container.css({width:this.opts.width+50+"px"}),this.set_dynamic_renderer(),this.init_orbit_controls(),this.init_on_mouseover(),this.init_light(),this.opts.element.find(".salvus-3d-canvas").css({background:this.opts.background}),null==this.opts.foreground)){if("transparent"===this.opts.background)return this.opts.foreground="gray";if(i=this.opts.element.find(".salvus-3d-canvas").css("background"),null==i||i.indexOf(")")===-1)return this.opts.foreground="#000";for(a=i.indexOf(")"),l=[],c=i.slice(4,a).split(","),o=0,s=c.length;o<s;o++)t=c[o],e=parseInt(t),e<128?l.push(255):l.push(0);return this.opts.foreground=g(l[0],l[1],l[2])}},t.prototype.init_done=function(){var t;if(null!=this.opts.frame&&this.set_frame(this.opts.frame),"dynamic"!==this.renderer_type&&(t=c,this.set_dynamic_renderer(),this.set_static_renderer(),null!=t&&t.set_dynamic_renderer()),"canvas"===f)return this.opts.element.find(".salvus-3d-canvas-warning").show().tooltip()},t.prototype.init_eval_note=function(){var t;return t=function(t){return function(){if(!t._init)return t.opts.element.find(".salvus-3d-note").show()}}(this),setTimeout(t,1e3)},t.prototype.set_dynamic_renderer=function(){if("dynamic"!==this.renderer_type)return this.renderer=p(this,this.opts.renderer),this.renderer_type="dynamic",this.opts.element.find(".salvus-3d-canvas").empty().append($(this.renderer.domElement)),"transparent"===this.opts.background?this.renderer.setClearColor(0,0):this.renderer.setClearColor(this.opts.background,1),this.renderer.setSize(this.opts.width,this.opts.height),null!=this.controls&&(this.controls.enabled=!0,null!=this.last_canvas_pos&&this.controls.object.position.copy(this.last_canvas_pos),null!=this.last_canvas_target&&this.controls.target.copy(this.last_canvas_target)),this.opts.spin&&this.animate({render:!1}),this.render_scene(!0)},t.prototype.set_static_renderer=function(){var t;if("static"!==this.renderer_type)return this.static_image=this.data_url(),this.renderer_type="static",null!=this.controls&&(this.controls.enabled=!1,this.last_canvas_pos=this.controls.object.position,this.last_canvas_target=this.controls.target),t=$("<img class='salvus-3d-static-renderer'>").attr({src:this.static_image}).width(this.opts.width).height(this.opts.height),this.opts.element.find(".salvus-3d-canvas").empty().append(t)},t.prototype.init_on_mouseover=function(){return this.opts.element.mouseenter(function(t){return function(){return t.set_dynamic_renderer()}}(this)),this.opts.element.mouseleave(function(t){return function(){return t.set_static_renderer()}}(this)),this.opts.element.click(function(t){return function(){return t.set_dynamic_renderer()}}(this))},t.prototype.init_aspect_ratio_functions=function(){var t,e,n;return null!=this.opts.aspect_ratio?(t=this.opts.aspect_ratio[0],e=this.opts.aspect_ratio[1],n=this.opts.aspect_ratio[2],this.vector3=function(r){return function(r,i,a){return new THREE.Vector3(-e*i,t*r,n*a)}}(this),this.vector=function(r){return function(r){return new THREE.Vector3(-e*r[1],t*r[0],n*r[2])}}(this),this.aspect_ratio_scale=function(r){return function(r){return[-e*r[1],t*r[0],n*r[2]]}}(this)):(this.vector3=function(t){return function(t,e,n){return new THREE.Vector3(-e,t,n)}}(this),this.vector=function(t){return function(t){return new THREE.Vector3(-t[1],t[0],t[2])}}(this),this.aspect_ratio_scale=function(t){return function(t){return[-t[1],t[0],t[2]]}}(this))},t.prototype.show_canvas=function(){return this.init(),this.opts.element.find(".salvus-3d-note").hide(),this.opts.element.find(".salvus-3d-canvas").show()},t.prototype.data_url=function(t){var e;return t=h(t,{type:"png",quality:void 0}),e=this.renderer.domElement.toDataURL("image/"+t.type,t.quality)},t.prototype.init_orbit_controls=function(){return null==this.camera&&this.add_camera({distance:this.opts.camera_distance}),this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.damping=2,this.controls.enableKeys=!1,this.controls.zoomSpeed=.4,null!=this._center&&(this.controls.target=this._center),this.opts.spin&&("boolean"==typeof this.opts.spin?this.controls.autoRotateSpeed=2:this.controls.autoRotateSpeed=this.opts.spin,this.controls.autoRotate=!0),this.controls.addEventListener("change",function(t){return function(){if("dynamic"===t.renderer_type)return t.rescale_objects(),t.renderer.render(t.scene,t.camera)}}(this))},t.prototype.add_camera=function(t){var e,n,r,i;if(t=h(t,{distance:10}),null==this.camera)return i=45,e=this.opts.width/this.opts.height,r=.1,n=Math.max(2e4,2*t.distance),this.camera=new THREE.PerspectiveCamera(i,e,r,n),this.scene.add(this.camera),this.camera.position.set(t.distance,t.distance,t.distance),this.camera.lookAt(this.scene.position),this.camera.up=new THREE.Vector3(0,0,1)},t.prototype.init_light=function(t){var e,n,r,i,a,o,s,c;for(null==t&&(t=16777215),e=new THREE.AmbientLight(4210752),this.scene.add(e),t=16777215,n=1e7,i=.5,c=[[n,n,n],[n,n,-n],[n,-n,n],[n,-n,-n],[-n,n,n],[-n,n,-n],[-n,-n,n],[-n,-n,-n]],a=0,o=c.length;a<o;a++)s=c[a],r=new THREE.DirectionalLight(t,i),r.position.set(s[0],s[1],s[2]).normalize(),this.scene.add(r);return this.light=new THREE.PointLight(t),this.light.position.set(0,n,0)},t.prototype.add_text=function(t){var e,n,r,i,a,o,s,c,l;return i=h(t,{pos:[0,0,0],text:m,fontsize:12,fontface:"Arial",color:"#000000",constant_size:!0}),this.show_canvas(),l=300,r=150,e=document.createElement("canvas"),e.width=l,e.height=r,n=e.getContext("2d"),n.font="Normal "+i.fontsize+"px "+i.fontface,n.textAlign="center",n.fillStyle=i.color,n.fillText(i.text,l/2,r/2),c=new THREE.Texture(e),c.needsUpdate=!0,c.minFilter=THREE.LinearFilter,s=new THREE.SpriteMaterial({map:c}),o=new THREE.Sprite(s),a=this.aspect_ratio_scale(i.pos),o.position.set(a[0],a[1],a[2]),i.constant_size&&(null==this._text?this._text=[o]:this._text.push(o)),this.scene.add(o),o},t.prototype.add_line=function(t){var e,n,r,i,a,o,s,c,l,u,f,p,d;if(u=h(t,{points:m,thickness:1,color:"#000000",arrow_head:!1}),!(u.points.length<=1)){for(this.show_canvas(),u.arrow_head&&(l=u.points.length-1,f=this.vector(u.points[l-1]),p=this.vector(u.points[l]),n=new THREE.Vector3,n.subVectors(p,f),c=n.length(),n.normalize(),i=.2*Math.max(1,u.thickness/4)*c,a=.2*i,this.scene.add(new THREE.ArrowHelper(n,f,c,u.color,i,a))),r=new THREE.Geometry,d=u.points,o=0,s=d.length;o<s;o++)e=d[o],r.vertices.push(this.vector(e));return this.scene.add(new THREE.Line(r,new THREE.LineBasicMaterial({color:u.color,linewidth:u.thickness})))}},t.prototype.add_point=function(t){var e,n,r,i,a,o,s,c,l,u,p,d,m,g,v;switch(c=h(t,{loc:[0,0,0],size:5,color:"#000000"}),this.show_canvas(),null==this._points&&(this._points=[]),f){case"webgl":v=50,o=50,n=document.createElement("canvas"),n.width=v,n.height=o,a=n.getContext("2d"),r=v/2,i=o/2,d=25,a.beginPath(),a.arc(r,i,d,0,2*Math.PI,!1),a.fillStyle=c.color,a.fill(),g=new THREE.Texture(n),g.needsUpdate=!0,g.minFilter=THREE.LinearFilter,m=new THREE.SpriteMaterial({map:g}),u=new THREE.Sprite(m),l=this.aspect_ratio_scale(c.loc),u.position.set(l[0],l[1],l[2]),this._points.push([u,c.size/200]);break;case"canvas":e=2*Math.PI,p=function(t){return t.beginPath(),t.arc(0,0,.5,0,e,!0),t.fill()},s=new THREE.SpriteCanvasMaterial({color:new THREE.Color(c.color),program:p}),u=new THREE.Sprite(s),l=this.aspect_ratio_scale(c.loc),u.position.set(l[0],l[1],l[2]),this._points.push([u,4*c.size/this.opts.width]);break;default:throw Error("bug -- unkown dynamic_renderer_type = "+f)}return this.scene.add(u)},t.prototype.add_obj=function(t){var e,n,r,i,a,o,s,c,l,u,h,f,p,d,m,g,v,y,b,x,w,_,E,M,T,S,A,C,k,L,R,P,D,B,N,O,F,I,j,U,z,V;for(this.show_canvas(),c="index_face_set"===t.type&&0!==t.has_local_colors,z=t.vertex_geometry,F=[],E=h=0,R=t.face_geometry.length;0<=R?h<R:h>R;E=0<=R?++h:--h){if(r=t.face_geometry[E].face3,i=t.face_geometry[E].face4,a=t.face_geometry[E].face5,o=t.face_geometry[E].faces,null==o&&(o=[]),null!=r)for(p=L=0,P=r.length;L<P;p=L+=3)o.push(r.slice(p,p+3));if(null!=i)for(p=I=0,D=i.length;I<D;p=I+=4)o.push(i.slice(p,p+4));if(null!=a)for(p=j=0,B=a.length;j<B;p=j+=6)o.push(a.slice(p,p+6));for(s=new THREE.Geometry,p=V=0,N=z.length;V<N;p=V+=3)s.vertices.push(this.vector(z.slice(p,p+3)));if(M=function(t){return function(t,e,n){return s.faces.push(new THREE.Face3(t-1,e-1,n-1))}}(this),T=function(t){return function(t,e,n,r){var i;return i=new THREE.Face3(t-1,e-1,n-1),i.color.setStyle(r),s.faces.push(i)}}(this),S=function(t){return function(t,e,n,r){return M(t,e,n),M(t,n,r)}}(this),A=function(t){return function(t,e,n,r,i){return T(t,e,n,i),T(t,n,r,i)}}(this),C=function(t){return function(t,e,n,r,i){return M(t,e,n),M(t,n,r),M(t,r,i)}}(this),k=function(t){return function(t,e,n,r,i,a){return M(t,e,n),M(t,n,r),M(t,r,i),M(t,i,a)}}(this),c)for(l=0,m=o.length;l<m;l++)switch(U=o[l],U.length){case 4:T.apply(null,U);break;case 5:A.apply(null,U);break;default:console.log("WARNING: rendering colored face with "+(U.length-1)+" vertices not implemented"),A(U[0],U[1],U[2],U[3],U[-1])}else for(f=0,g=o.length;f<g;f++)switch(U=o[f],U.length){case 3:M.apply(null,U);break;case 4:S.apply(null,U);break;case 5:C.apply(null,U);break;case 6:k.apply(null,U);break;default:console.log("WARNING: rendering face with "+U.length+" vertices not implemented"),k.apply(null,U)}for(s.mergeVertices(),s.computeFaceNormals(),s.computeBoundingSphere(),_=t.face_geometry[E].material_name,w=0,u=d=0,O=t.material.length-1;0<=O?d<=O:d>=O;u=0<=O?++d:--d)if(_===t.material[u].name){w=u;break}this.opts.wireframe||t.wireframe?(t.color?n=t.color:(e=t.material[w].color,n="rgb("+255*e[0]+","+255*e[1]+","+255*e[2]+")"),v="number"==typeof t.wireframe?t.wireframe:"number"==typeof this.opts.wireframe?this.opts.wireframe:1,b=new THREE.MeshBasicMaterial({wireframe:!0,color:n,wireframeLinewidth:v,side:THREE.DoubleSide})):null==t.material[w]?(console.log("BUG -- couldn't get material for ",t),b=new THREE.MeshBasicMaterial({wireframe:!1,color:"#000000"})):(y=t.material[w],c?b=new THREE.MeshPhongMaterial({shininess:"1",wireframe:!1,transparent:y.opacity<1,vertexColors:THREE.FaceColors}):(b=new THREE.MeshPhongMaterial({shininess:"1",wireframe:!1,transparent:y.opacity<1}),b.color.setRGB(y.color[0],y.color[1],y.color[2])),b.specular.setRGB(y.specular[0],y.specular[1],y.specular[2]),b.opacity=y.opacity,b.side=THREE.DoubleSide),x=new THREE.Mesh(s,b),x.position.set(0,0,0),F.push(this.scene.add(x))}return F},t.prototype.set_frame=function(t){var e,n,r,i,a,o,s,c,l,u,f,p,d,g,v,y,b,x,w,_,E,M,T,S,A,C,k,L;if(d=h(t,{xmin:m,xmax:m,ymin:m,ymax:m,zmin:m,zmax:m,color:this.opts.foreground,thickness:.4,labels:!0,fontsize:14,draw:!0}),this.show_canvas(),this._frame_params=d,r=.1,T=d.xmin,S=d.xmax,A=d.ymin,C=d.ymax,k=d.zmin,L=d.zmax,Math.abs(S-T)<r&&(S+=1,T-=1),Math.abs(C-A)<r&&(C+=1,A-=1),Math.abs(L-k)<r&&(L+=1,k-=1),u=(T+S)/2,f=(A+C)/2,p=(k+L)/2,this._center=this.vector3(u,f,p),null!=this.camera&&(e=1.5*Math.max.apply(Math,this.aspect_ratio_scale([S-T,C-A,L-k])),this.camera.position.set(u+e,f+e,p+e/2)),d.draw){if(null!=this.frame){for(b=this.frame,i=0,o=b.length;i<o;i++)M=b[i],this.scene.remove(M);delete this.frame}for(this.frame=[],E=[[[T,A,k],[S,A,k],[S,C,k],[T,C,k],[T,A,k],[T,A,L],[S,A,L],[S,C,L],[T,C,L],[T,A,L]],[[S,A,k],[S,A,L]],[[T,C,k],[T,C,L]],[[S,C,k],[S,C,L]]],y=0,s=E.length;y<s;y++)v=E[y],l=this.add_line({points:v,color:d.color,thickness:d.thickness}),this.frame.push(l)}if(d.draw&&d.labels){if(null!=this._frame_labels)for(x=this._frame_labels,w=0,c=x.length;w<c;w++)M=x[w],this.scene.remove(M);this._frame_labels=[],a=function(t,e){var n;return n=null==e?t:(t+e)/2,n=n.toFixed(2),""+1*n},_=function(t){return function(e,n,r,i){return t._frame_labels.push(t.add_text({pos:[e,n,r],text:i,fontsize:d.fontsize,color:d.color,constant_size:!1}))}}(this),g=.15,d.draw&&(n=(S-T)*g,_(T-n,A,k,a(k)),_(T-n,A,p,"z = "+a(k,L)),_(T-n,A,L,a(L)),n=(S-T)*g,_(S+n,A,k,a(A)),_(S+n,f,k,"y = "+a(A,C)),_(S+n,C,k,a(C)),n=(C-A)*g,_(S,A-n,k,a(S)),_(u,A-n,k,"x = "+a(T,S)),_(T,A-n,k,a(T)))}return E=this.vector3(u,f,p),this.camera.lookAt(E),null!=this.controls&&(this.controls.target=this._center),this.render_scene()},t.prototype.add_3dgraphics_obj=function(t){var e,n,r,i;for(t=h(t,{obj:m,wireframe:void 0,set_frame:void 0}),this.show_canvas(),i=t.obj,e=0,n=i.length;e<n;e++)switch(r=i[e],r.type){case"text":this.add_text({pos:r.pos,text:r.text,color:r.color,fontsize:r.fontsize,fontface:r.fontface,constant_size:r.constant_size});break;case"index_face_set":null!=t.wireframe&&(r.wireframe=t.wireframe),this.add_obj(r),r.mesh&&!r.wireframe&&(r.color="#000000",r.wireframe=r.mesh,this.add_obj(r));break;case"line":delete r.type,this.add_line(r);break;case"point":delete r.type,this.add_point(r);break;default:return void console.log("ERROR: no renderer for model number = "+r.id)}return null!=t.set_frame&&this.set_frame(t.set_frame),this.render_scene(!0)},t.prototype.animate=function(t){if(null==t&&(t={}),t=h(t,{fps:void 0,stop:!1,mouseover:void 0,render:!0}),!this._animate_started||t.stop)return this._animate_started=!0,this._animate(t)},t.prototype._animate=function(t){var e;return"static"===this.renderer_type?void(this._animate_started=!1):this.opts.element.is(":visible")?t.stop?void(this._stop_animating=!0):this._stop_animating?(this._stop_animating=!1,
void(this._animate_started=!1)):(this.render_scene(t.render),delete t.render,e=function(e){return function(){return requestAnimationFrame(function(){return e._animate(t)})}}(this),null!=t.fps&&t.fps?setTimeout(e,1e3/t.fps):e()):void(null==this.opts.stop_when_gone||$.contains(document,this.opts.stop_when_gone)?$.contains(document,this.opts.element[0])?setTimeout(function(e){return function(){return e._animate(t)}}(this),1e3):setTimeout(function(e){return function(){return e._animate(t)}}(this),5e3):this._animate_started=!1)},t.prototype.render_scene=function(t){var e,n,r;return null==t&&(t=!1),"static"===this.renderer_type?void console.log("render static -- not implemented yet"):null!=this.camera&&(null!=(r=this.controls)&&r.update(),n=this.camera.position,null==this._last_pos?(e=!0,this._last_pos=n.clone()):this._last_pos.distanceToSquared(n)>.05?(e=!0,this._last_pos.copy(n)):e=!1,e||t)?(this.rescale_objects(),this.renderer.render(this.scene,this.camera)):void 0},t.prototype._rescale_factor=function(){return null==this._center?void 0:this.camera.position.distanceTo(this._center)/3},t.prototype.rescale_objects=function(t){var e,n,r,i,a,o,s,c,l,u,h,f,p,d;if(null==t&&(t=!1),h=this._rescale_factor(),!(null==h||Math.abs(this._last_scale-h)<1e-6&&!t)){if(this._last_scale=h,null!=this._text)for(s=this._text,n=0,r=s.length;n<r;n++)f=s[n],f.scale.set(h,h,h);if(null!=this._frame_labels)for(c=this._frame_labels,o=0,i=c.length;o<i;o++)f=c[o],f.scale.set(h,h,h);if(null!=this._points){for(l=this._points,u=[],p=0,a=l.length;p<a;p++)d=l[p],e=d[1],u.push(d[0].scale.set(h*e,h*e,h*e));return u}}},t}(),exports.render_3d_scene=function(t){var e,n;return t=h(t,{url:void 0,scene:void 0,element:m,cb:void 0}),null==t.scene&&null==t.url?void("function"==typeof t.cb&&t.cb("one of url or scene must be defined")):(n=void 0,e=$(".salvus-3d-templates .salvus-3d-loading").clone(),t.element.append(e),l.series([function(n){return function(n){var r;return null!=t.scene?n():(r=function(n){return $.ajax({url:t.url,timeout:3e4,success:function(r){try{return t.scene=d.from_json(r),n()}catch(t){return e=t,n(e)}}}).fail(function(){return n(!0)})},d.retry_until_success({f:r,max_tries:10,max_delay:5,cb:function(e){return e?n("error downloading "+t.url):n()}}))}}(this),function(r){return function(r){var i;return e.remove(),i=function(e,i){return e?r(e):(n=i,i.init(),i.add_3dgraphics_obj({obj:t.scene.obj}),i.init_done(),r())},t.scene.opts.cb=i,t.element.salvus_threejs(t.scene.opts)}}(this)],function(e){return"function"==typeof t.cb?t.cb(e,n):void 0}))},$.fn.salvus_threejs=function(t){return null==t&&(t={}),this.each(function(){var e,n,r;return n=$(this),e=$(".salvus-3d-templates .salvus-3d-viewer").clone(),n.empty().append(e),e.find(".salvus-3d-canvas").hide(),t.element=e,t.container=n,t.stop_when_gone=e.closest(".salvus-editor-codemirror")[0],r=function(){var e;return e=new i(t),n.data("salvus-threejs",e)},"undefined"==typeof THREE||null===THREE?load_threejs(function(e){return function(e){var n;return e?(n="Error loading THREE.js -- "+e,null==t.cb?console.log(n):"function"==typeof t.cb?t.cb(n):void 0):r()}}(this)):r()})}},917:function(t,exports,e){var $,n,r,i,a,o;$=window.$,a=e(9),i=a.defaults,o=a.required,n=e(1078),"undefined"!=typeof window&&null!==window&&(window.d3=n),$.fn.extend({d3:function(t){return null==t&&(t={}),t=i(t,{viewer:o,data:o}),this.each(function(){var e,n;switch(n=$(this),e=$("<div>"),n.replaceWith(e),t.viewer){case"graph":r(e,t.data);break;default:e.append($("<span>unknown d3 viewer '"+t.viewer+"'</span>"))}return e})}}),r=function(t,e){var r,i,o,s,c,l,u,h,f,p,d,m,g,v,y;if(i=n.scale.category20(),y=e.width,null==y&&(y=Math.min(t.width(),700)),c=e.height,null==c&&(c=.6*y),t.width(y),t.height(c),t.addClass("smc-d3-graph"),s=n.layout.force().charge(e.charge).linkDistance(e.link_distance).linkStrength(e.link_strength).gravity(e.gravity).size([y,c]).links(e.links).nodes(e.nodes),g=function(t,e,n){var r,i,a,o,s,c,l,u,h;return a=e.x-t.x,o=e.y-t.y,u=t.x,h=t.y,a=e.x,o=e.y,r=(a+u)/2,i=(o+h)/2,l=-(a-u),c=o-h,s=Math.sqrt(c*c+l*l),[r+n*c/s,i+n*l/s]},r=function(t){var e,n,r,i,a,o,l,u,h,f;return i=t.pos[0][0],n=t.pos[0][0],a=t.pos[0][1],r=t.pos[0][1],t.nodes.forEach(function(e,o){return n=Math.max(n,t.pos[o][0]),i=Math.min(i,t.pos[o][0]),r=Math.max(r,t.pos[o][1]),a=Math.min(a,t.pos[o][1])}),e=60,u=n-i,f=r-a,o=Math.min((c-e)/f,(y-e)/u),l=(y-o*u)/2,h=(c-o*f)/2,s.nodes().forEach(function(e,n){return e.x=o*(t.pos[n][0]-i)+l,e.y=o*(t.pos[n][1]-a)+h})},0!==e.pos.length&&r(e),l="a"+a.uuid(),t.attr("id",l),m=n.select("#"+l).append("svg").attr("width",y).attr("height",c),f=m.selectAll(".link").data(s.links()).enter().append("path").attr("class",function(t){return"link directed"}).attr("marker-end",function(t){return"url(#directed)"}).style("stroke",function(t){return t.color}).style("stroke-width",e.edge_thickness+"px"),p=m.selectAll(".loop").data(e.loops).enter().append("circle").attr("class","link").attr("r",function(t){return t.curve}).style("stroke",function(t){return t.color}).style("stroke-width",e.edge_thickness+"px"),d=m.selectAll(".node").data(s.nodes()).enter().append("circle").attr("class","node").attr("r",e.vertex_size).style("fill",function(t){return i(t.group)}).call(s.drag),d.append("title").text(function(t){return t.name}),e.vertex_labels&&(v=m.selectAll(".v_label").data(s.nodes()).enter().append("svg:text").attr("vertical-align","middle").text(function(t){return t.name})),e.edge_labels&&(o=m.selectAll(".e_label").data(s.links()).enter().append("svg:text").attr("text-anchor","middle").text(function(t){return t.name}),u=m.selectAll(".l_label").data(e.loops).enter().append("svg:text").attr("text-anchor","middle").text(function(t,n){return e.loops[n].name})),e.directed&&m.append("svg:defs").selectAll("marker").data(["directed"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -2 4 4").attr("refX",Math.ceil(2*Math.sqrt(e.vertex_size))).attr("refY",0).attr("markerWidth",4).attr("markerHeight",4).attr("orient","auto").append("svg:path").attr("d","M0,-2L4,0L0,2"),h=n.svg.line().interpolate("cardinal").tension(.2).x(function(t){return t.x}).y(function(t){return t.y}),s.on("tick",function(){if(d.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),f.attr("d",function(t){var e;return 0===t.curve?"M"+t.source.x+","+t.source.y+" L"+t.target.x+","+t.target.y:(e=g(t.source,t.target,t.curve),h([{x:t.source.x,y:t.source.y},{x:e[0],y:e[1]},{x:t.target.x,y:t.target.y}]))}),0!==e.loops.length&&p.attr("cx",function(t){return s.nodes()[t.source].x}).attr("cy",function(t){return s.nodes()[t.source].y-t.curve}),e.vertex_labels&&v.attr("x",function(t){return t.x+e.vertex_size}).attr("y",function(t){return t.y}),e.edge_labels)return o.attr("x",function(t){return g(t.source,t.target,t.curve+3)[0]}).attr("y",function(t){return g(t.source,t.target,t.curve+3)[1]}),u.attr("x",function(t,e){return s.nodes()[t.source].x}).attr("y",function(t,e){return s.nodes()[t.source].y-2*t.curve-1})}),s.start(),0!==e.pos.length)return s.tick(),s.stop(),e.nodes.forEach(function(t,e){return t.fixed=!0})}},939:function(t,exports,e){exports=t.exports=e(15)(),exports.push([t.id,'body{margin:0}#mocha{font:20px/1.5 Helvetica Neue,Helvetica,Arial,sans-serif;margin:60px 50px}#mocha li,#mocha ul{margin:0;padding:0}#mocha ul{list-style:none}#mocha h1,#mocha h2{margin:0}#mocha h1{margin-top:15px;font-size:1em;font-weight:200}#mocha h1 a{text-decoration:none;color:inherit}#mocha h1 a:hover{text-decoration:underline}#mocha .suite .suite h1{margin-top:0;font-size:.8em}#mocha .hidden{display:none}#mocha h2{font-size:12px;font-weight:400;cursor:pointer}#mocha .suite,#mocha .test{margin-left:15px}#mocha .test{overflow:hidden}#mocha .test.pending:hover h2:after{content:"(pending)";font-family:arial,sans-serif}#mocha .test.pass.medium .duration{background:#c09853}#mocha .test.pass.slow .duration{background:#b94a48}#mocha .test.pass:before{content:"\\2713";font-size:12px;display:block;float:left;margin-right:5px;color:#00d6b2}#mocha .test.pass .duration{font-size:9px;margin-left:5px;padding:2px 5px;color:#fff;box-shadow:inset 0 1px 1px rgba(0,0,0,.2);border-radius:5px}#mocha .test.pass.fast .duration{display:none}#mocha .test.pending{color:#0b97c4}#mocha .test.pending:before{content:"\\25E6";color:#0b97c4}#mocha .test.fail{color:#c00}#mocha .test.fail pre{color:#000}#mocha .test.fail:before{content:"\\2716";font-size:12px;display:block;float:left;margin-right:5px;color:#c00}#mocha .test pre.error{color:#c00;max-height:300px;overflow:auto}#mocha .test .html-error{overflow:auto;color:#000;line-height:1.5;display:block;float:left;clear:left;font:12px/1.5 monaco,monospace;margin:5px;padding:15px;border:1px solid #eee;max-width:85%;max-width:calc(100% - 42px);max-height:300px;word-wrap:break-word;border-bottom-color:#ddd;-webkit-border-radius:3px;-webkit-box-shadow:0 1px 3px #eee;-moz-border-radius:3px;-moz-box-shadow:0 1px 3px #eee;border-radius:3px}#mocha .test .html-error pre.error{border:none;-webkit-border-radius:none;-webkit-box-shadow:none;-moz-border-radius:none;-moz-box-shadow:none;padding:0;margin:0;margin-top:18px;max-height:none}#mocha .test pre{display:block;float:left;clear:left;font:12px/1.5 monaco,monospace;margin:5px;padding:15px;border:1px solid #eee;max-width:85%;max-width:calc(100% - 42px);word-wrap:break-word;border-bottom-color:#ddd;-webkit-border-radius:3px;-webkit-box-shadow:0 1px 3px #eee;-moz-border-radius:3px;-moz-box-shadow:0 1px 3px #eee;border-radius:3px}#mocha .test h2{position:relative}#mocha .test a.replay{position:absolute;top:3px;right:0;text-decoration:none;vertical-align:middle;display:block;width:15px;height:15px;line-height:15px;text-align:center;background:#eee;font-size:15px;border-radius:15px;transition:opacity .2s;opacity:.3;color:#888}#mocha .test:hover a.replay{opacity:1}#mocha-report.fail .test.pass,#mocha-report.pass .test.fail,#mocha-report.pending .test.fail,#mocha-report.pending .test.pass{display:none}#mocha-report.pending .test.pass.pending{display:block}#mocha-error{color:#c00;font-size:1.5em;font-weight:100;letter-spacing:1px}#mocha-stats{position:fixed;top:15px;right:10px;font-size:12px;margin:0;color:#888;z-index:1}#mocha-stats .progress{float:right;padding-top:0;height:auto;box-shadow:none;background-color:initial}#mocha-stats em{color:#000}#mocha-stats a{text-decoration:none;color:inherit}#mocha-stats a:hover{border-bottom:1px solid #eee}#mocha-stats li{display:inline-block;margin:0 5px;list-style:none;padding-top:11px}#mocha-stats canvas{width:40px;height:40px}#mocha code .comment{color:#ddd}#mocha code .init{color:#2f6fad}#mocha code .string{color:#5890ad}#mocha code .keyword{color:#8a6343}#mocha code .number{color:#2f6fad}@media screen and (max-device-width:480px){#mocha{margin:60px 0}#mocha #stats{position:absolute}}',"",{version:3,sources:["/./smc-webapp/node_modules/mocha/mocha.css"],names:[],mappings:"AAEA,KACE,QAAS,CACV,AAED,OACE,wDAA8D,AAC9D,gBAAkB,CACnB,AAED,oBAEE,SAAU,AACV,SAAW,CACZ,AAED,UACE,eAAiB,CAClB,AAED,oBAEE,QAAU,CACX,AAED,UACE,gBAAiB,AACjB,cAAe,AACf,eAAiB,CAClB,AAED,YACE,qBAAsB,AACtB,aAAe,CAChB,AAED,kBACE,yBAA2B,CAC5B,AAED,wBACE,aAAc,AACd,cAAgB,CACjB,AAED,eACE,YAAc,CACf,AAED,UACE,eAAgB,AAChB,gBAAoB,AACpB,cAAgB,CACjB,AAMD,2BAHE,gBAAkB,CAMnB,AAHD,aAEE,eAAiB,CAClB,AAED,oCACE,oBAAqB,AACrB,4BAA+B,CAChC,AAED,mCACE,kBAAoB,CACrB,AAED,iCACE,kBAAoB,CACrB,AAED,yBACE,gBAAa,AACb,eAAgB,AAChB,cAAe,AACf,WAAY,AACZ,iBAAkB,AAClB,aAAe,CAChB,AAED,4BACE,cAAe,AACf,gBAAiB,AACjB,gBAAiB,AACjB,WAAY,AAGZ,0CAA2C,AAK3C,iBAAmB,CACpB,AAED,iCACE,YAAc,CACf,AAED,qBACE,aAAe,CAChB,AAED,4BACE,gBAAa,AACb,aAAe,CAChB,AAED,kBACE,UAAY,CACb,AAED,sBACE,UAAa,CACd,AAED,yBACE,gBAAa,AACb,eAAgB,AAChB,cAAe,AACf,WAAY,AACZ,iBAAkB,AAClB,UAAY,CACb,AAED,uBACE,WAAY,AACZ,iBAAkB,AAClB,aAAe,CAChB,AAED,yBACE,cAAe,AACf,WAAa,AACb,gBAAiB,AACjB,cAAe,AACf,WAAY,AACZ,WAAY,AACZ,+BAAiC,AACjC,WAAY,AACZ,aAAc,AACd,sBAAuB,AACvB,cAAe,AACf,4BAA6B,AAC7B,iBAAkB,AAClB,qBAAsB,AACtB,yBAA0B,AAC1B,0BAA2B,AAC3B,kCAAmC,AACnC,uBAAwB,AACxB,+BAAgC,AAChC,iBAAmB,CACpB,AAED,mCACE,YAAa,AACb,2BAA4B,AAC5B,wBAAyB,AACzB,wBAAyB,AACzB,qBAAsB,AACtB,UAAW,AACX,SAAU,AACV,gBAAiB,AACjB,eAAiB,CAClB,AAOD,iBACE,cAAe,AACf,WAAY,AACZ,WAAY,AACZ,+BAAiC,AACjC,WAAY,AACZ,aAAc,AACd,sBAAuB,AACvB,cAAe,AACf,4BAA6B,AAC7B,qBAAsB,AACtB,yBAA0B,AAC1B,0BAA2B,AAC3B,kCAAmC,AACnC,uBAAwB,AACxB,+BAAgC,AAChC,iBAAmB,CACpB,AAED,gBACE,iBAAmB,CACpB,AAED,sBACE,kBAAmB,AACnB,QAAS,AACT,QAAS,AACT,qBAAsB,AACtB,sBAAuB,AACvB,cAAe,AACf,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AACnB,gBAAiB,AACjB,eAAgB,AAEhB,mBAAoB,AAGpB,uBAA0B,AAC1B,WAAa,AACb,UAAY,CACb,AAED,4BACE,SAAW,CACZ,AAUD,8HAEE,YAAc,CACf,AACD,yCACE,aAAe,CAChB,AAED,aACE,WAAY,AACZ,gBAAiB,AACjB,gBAAiB,AACjB,kBAAoB,CACrB,AAED,aACE,eAAgB,AAChB,SAAU,AACV,WAAY,AACZ,eAAgB,AAChB,SAAU,AACV,WAAY,AACZ,SAAW,CACZ,AAED,uBACE,YAAa,AACb,cAAe,AAOf,YAAa,AACb,gBAAiB,AACjB,wBAA0B,CAC3B,AAED,gBACE,UAAa,CACd,AAED,eACE,qBAAsB,AACtB,aAAe,CAChB,AAED,qBACE,4BAA8B,CAC/B,AAED,gBACE,qBAAsB,AACtB,aAAc,AACd,gBAAiB,AACjB,gBAAkB,CACnB,AAED,oBACE,WAAY,AACZ,WAAa,CACd,AAED,qBAAuB,UAAY,CAAE,AACrC,kBAAoB,aAAe,CAAE,AACrC,oBAAsB,aAAe,CAAE,AACvC,qBAAuB,aAAe,CAAE,AACxC,oBAAsB,aAAe,CAAE,AAEvC,2CACE,OACE,aAAiB,CAClB,AAED,cACE,iBAAmB,CACpB,CACF",file:"mocha.css",sourcesContent:["@charset \"utf-8\";\n\nbody {\n  margin:0;\n}\n\n#mocha {\n  font: 20px/1.5 \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  margin: 60px 50px;\n}\n\n#mocha ul,\n#mocha li {\n  margin: 0;\n  padding: 0;\n}\n\n#mocha ul {\n  list-style: none;\n}\n\n#mocha h1,\n#mocha h2 {\n  margin: 0;\n}\n\n#mocha h1 {\n  margin-top: 15px;\n  font-size: 1em;\n  font-weight: 200;\n}\n\n#mocha h1 a {\n  text-decoration: none;\n  color: inherit;\n}\n\n#mocha h1 a:hover {\n  text-decoration: underline;\n}\n\n#mocha .suite .suite h1 {\n  margin-top: 0;\n  font-size: .8em;\n}\n\n#mocha .hidden {\n  display: none;\n}\n\n#mocha h2 {\n  font-size: 12px;\n  font-weight: normal;\n  cursor: pointer;\n}\n\n#mocha .suite {\n  margin-left: 15px;\n}\n\n#mocha .test {\n  margin-left: 15px;\n  overflow: hidden;\n}\n\n#mocha .test.pending:hover h2::after {\n  content: '(pending)';\n  font-family: arial, sans-serif;\n}\n\n#mocha .test.pass.medium .duration {\n  background: #c09853;\n}\n\n#mocha .test.pass.slow .duration {\n  background: #b94a48;\n}\n\n#mocha .test.pass::before {\n  content: '';\n  font-size: 12px;\n  display: block;\n  float: left;\n  margin-right: 5px;\n  color: #00d6b2;\n}\n\n#mocha .test.pass .duration {\n  font-size: 9px;\n  margin-left: 5px;\n  padding: 2px 5px;\n  color: #fff;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.2);\n  -moz-box-shadow: inset 0 1px 1px rgba(0,0,0,.2);\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.2);\n  -webkit-border-radius: 5px;\n  -moz-border-radius: 5px;\n  -ms-border-radius: 5px;\n  -o-border-radius: 5px;\n  border-radius: 5px;\n}\n\n#mocha .test.pass.fast .duration {\n  display: none;\n}\n\n#mocha .test.pending {\n  color: #0b97c4;\n}\n\n#mocha .test.pending::before {\n  content: '';\n  color: #0b97c4;\n}\n\n#mocha .test.fail {\n  color: #c00;\n}\n\n#mocha .test.fail pre {\n  color: black;\n}\n\n#mocha .test.fail::before {\n  content: '';\n  font-size: 12px;\n  display: block;\n  float: left;\n  margin-right: 5px;\n  color: #c00;\n}\n\n#mocha .test pre.error {\n  color: #c00;\n  max-height: 300px;\n  overflow: auto;\n}\n\n#mocha .test .html-error {\n  overflow: auto;\n  color: black;\n  line-height: 1.5;\n  display: block;\n  float: left;\n  clear: left;\n  font: 12px/1.5 monaco, monospace;\n  margin: 5px;\n  padding: 15px;\n  border: 1px solid #eee;\n  max-width: 85%; /*(1)*/\n  max-width: calc(100% - 42px); /*(2)*/\n  max-height: 300px;\n  word-wrap: break-word;\n  border-bottom-color: #ddd;\n  -webkit-border-radius: 3px;\n  -webkit-box-shadow: 0 1px 3px #eee;\n  -moz-border-radius: 3px;\n  -moz-box-shadow: 0 1px 3px #eee;\n  border-radius: 3px;\n}\n\n#mocha .test .html-error pre.error {\n  border: none;\n  -webkit-border-radius: none;\n  -webkit-box-shadow: none;\n  -moz-border-radius: none;\n  -moz-box-shadow: none;\n  padding: 0;\n  margin: 0;\n  margin-top: 18px;\n  max-height: none;\n}\n\n/**\n * (1): approximate for browsers not supporting calc\n * (2): 42 = 2*15 + 2*10 + 2*1 (padding + margin + border)\n *      ^^ seriously\n */\n#mocha .test pre {\n  display: block;\n  float: left;\n  clear: left;\n  font: 12px/1.5 monaco, monospace;\n  margin: 5px;\n  padding: 15px;\n  border: 1px solid #eee;\n  max-width: 85%; /*(1)*/\n  max-width: calc(100% - 42px); /*(2)*/\n  word-wrap: break-word;\n  border-bottom-color: #ddd;\n  -webkit-border-radius: 3px;\n  -webkit-box-shadow: 0 1px 3px #eee;\n  -moz-border-radius: 3px;\n  -moz-box-shadow: 0 1px 3px #eee;\n  border-radius: 3px;\n}\n\n#mocha .test h2 {\n  position: relative;\n}\n\n#mocha .test a.replay {\n  position: absolute;\n  top: 3px;\n  right: 0;\n  text-decoration: none;\n  vertical-align: middle;\n  display: block;\n  width: 15px;\n  height: 15px;\n  line-height: 15px;\n  text-align: center;\n  background: #eee;\n  font-size: 15px;\n  -moz-border-radius: 15px;\n  border-radius: 15px;\n  -webkit-transition: opacity 200ms;\n  -moz-transition: opacity 200ms;\n  transition: opacity 200ms;\n  opacity: 0.3;\n  color: #888;\n}\n\n#mocha .test:hover a.replay {\n  opacity: 1;\n}\n\n#mocha-report.pass .test.fail {\n  display: none;\n}\n\n#mocha-report.fail .test.pass {\n  display: none;\n}\n\n#mocha-report.pending .test.pass,\n#mocha-report.pending .test.fail {\n  display: none;\n}\n#mocha-report.pending .test.pass.pending {\n  display: block;\n}\n\n#mocha-error {\n  color: #c00;\n  font-size: 1.5em;\n  font-weight: 100;\n  letter-spacing: 1px;\n}\n\n#mocha-stats {\n  position: fixed;\n  top: 15px;\n  right: 10px;\n  font-size: 12px;\n  margin: 0;\n  color: #888;\n  z-index: 1;\n}\n\n#mocha-stats .progress {\n  float: right;\n  padding-top: 0;\n  \n  /**\n   * Set safe initial values, so mochas .progress does not inherit these\n   * properties from Bootstrap .progress (which causes .progress height to\n   * equal line height set in Bootstrap).\n   */\n  height: auto;\n  box-shadow: none;\n  background-color: initial;\n}\n\n#mocha-stats em {\n  color: black;\n}\n\n#mocha-stats a {\n  text-decoration: none;\n  color: inherit;\n}\n\n#mocha-stats a:hover {\n  border-bottom: 1px solid #eee;\n}\n\n#mocha-stats li {\n  display: inline-block;\n  margin: 0 5px;\n  list-style: none;\n  padding-top: 11px;\n}\n\n#mocha-stats canvas {\n  width: 40px;\n  height: 40px;\n}\n\n#mocha code .comment { color: #ddd; }\n#mocha code .init { color: #2f6fad; }\n#mocha code .string { color: #5890ad; }\n#mocha code .keyword { color: #8a6343; }\n#mocha code .number { color: #2f6fad; }\n\n@media screen and (max-device-width: 480px) {\n  #mocha {\n    margin: 60px 0px;\n  }\n\n  #mocha #stats {\n    position: absolute;\n  }\n}\n"],sourceRoot:"webpack://"}])},967:function(t,exports){t.exports={cython:{},gap:{},python:{Language:{Tutorial:[["Hello World",['print("Hello World")','The "Hello World" program']],["Variables",["x = 1\ny = x + 1\nprint(x)\nprint(y)\n","A variable is a name for an object. It is done via this syntax:\n``` variablename = object ```\n"]],["Print Data",['x = "Hello"\ny = 2.123456789\nprint("%s World, y = %f" % (x, y))\nprint("x={x}, y={y:.3f}".format(**locals()))\n','The "Hello World" program printing some values.']],["Expressions",["print((5 + 6) * 11)\nz = 3\nprint((1 + z)**2)\nfrom math import sqrt\nprint(sqrt(z))\n","Expressions are evaluated, they can consist of operators and function calls."]],["Functions",["def function1(x, y):\n    z = 10 * x + y\n    return z\n\nprint(function1(4, 5))\nprint(function1(1,-1))\n","A function call is one of the most basic levels of abstraction. A common subroutine of evaluations is run with varying initial arguments. The `return` statement is very important: data flows back to where the functions has been called.\n"]],["Data Structure: List",['x = [42, "Hello", [1,2,3]]\nprint(x)\nx.append("World")\nprint(x)\n',"To organize the information in a program, data structures come to help. A very basic one is an ordered collection of arbitrary objects.\n"]],["Data Structure: Dict(ionary)",['d = dict()\nd[42] = "The Answer"\nd["what"] = ["this", "and", "that"]\nd[(4,2)] = 99\nprint(d[(4,2)])\nprint(d.keys())\nprint(42 in d)\n','A dictionary is an mapping of (immutable) objects to arbitrary objects. The immutable objects are called "keys" and are most commonly numbers, strings or tuples.\n']]]},"Numpy/Scipy":{Intro:[["Numpy Basics",["import numpy as np\nprint np, np.__version__\n","[Numpy](http://docs.scipy.org/) is a library for numerical mathematics.\nIt is usually imported via `import numpy as np`.\n"]]],Optimization:[["Optimization, 1D, unconstrained",["import numpy as np\n","Unconstrained one-dimensional optimization with Scipy."]]]}},r:{Statistics:{Modeling:[["Linear Model",["lm(y ~ x)\n","Linear Model Example"]],["Nonlinear Model",["lm(y ~ x)\n","Nonlinear Model Example"]],["ANOVA",["lm1 <- lm(y ~ x)\nanova(lm1)","ANOVA of a linear model\n"]]]}},sage:{Extras:{Interact:[["Introduction",['@interact\ndef func(k = slider(0, 10, .1)):\n    print("k: %s" % k)\n    s = (1 - sqrt(k))^2\n    print("s: %s" % s)\n',"The decorator `@interact` is a powerful tool.\nIt allows you to add interactive UI elements to your worksheet,\nsuch that a function is evaluate with different arguments.\n\nRef.: [@interact](http://doc.sagemath.org/html/en/reference/notebook/sagenb/notebook/interact.html#sagenb.notebook.interact.interact) --\nbut be aware, that this is **not** the same implementation as in Sage Worksheets.\nThe API is only similar, so expect some differences or missing details!\n"]],["Symbolic Function",["%var x\nf(x) = 2*x + 1\n@interact\ndef f_interact(x=(0, 100)):\n    print 'f({}) = {}'.format(x, f(x))\n","This is a very simple example,\nwhere the we first define a symbolic function $f(x)$,\nand then substitute it with the variable `x` defined by the interact.\nBoth `x` variables aren't the same,\nand therefore the evaluation of $f$ works as expected.\n"]],["Multiple Sliders",['@interact\ndef func(k = slider(0, 10, .1), j = (-10, 10), l = range_slider(-5, 5)):\n    print("k: %s" % k)\n    print("j: %s" % j)\n    print("l: [%s, %s]" % l)\n',"It's straight forward to add multiple sliders.\n\nThe `range_slider` retuns a tuple!\n"]]],Queries:[["Introduction",["","SageMath offers some built-in functions for querying online resources and databases.\n"]],["Online Encyclopedia of Integer Sequences",["oeis([1,1,2,3,5,8,13])","SageMath allows you to directly query the [OEIS](https://oeis.org/).\n"]]]},Mathematics:{Calculus:[["Introduction",['%var x k w\nf = x^3 * e^(k*x) * sin(w*x)\nshow(f)\nprint("Differentiate f w.r.t. x")\nshow(f.diff(x))\n',"Here are some examples of calculus symbolic computations using Sage.\nThe goal is to make calculus feel natural and intuitive,\nwhile still being part of a modern programming language.\n\nRead more about this here:\n* [Constructions/Calculus](http://doc.sagemath.org/html/en/constructions/calculus.html)\n* [Reference/Symbolic Calculus](http://doc.sagemath.org/html/en/reference/calculus/index.html)\n* or download the book [Gregory Bard: Sage for Undergraduates](http://www.gregorybard.com/Sage.html)\n"]],["Functions",["%var x\nf(x) = 3 * x -1\nf\ng(x) = (1 - x)^2\ng\n# h is a composition of f and g\nh = f(g)\nh\n# evaluate h\nh(x = 3)\nh.subs(x = pi)\n","SageMath's [preparser](http://doc.sagemath.org/html/en/reference/repl/sage/repl/preparse.html) makes it easy to define functions.\n"]],["Substitutions",["%var x y\nex1 = 2*x+1\nex1\nex1.subs(x = 3)\nex1.subs(x = pi)\nex2 = ex1.subs(x = (x + y - 1) / 2)\nex2\n","Evaluate symbolic expressions by substution of a variable.\n"]],["Expressions",['%var x\nex = 2 * x^2 == (1 + x) / (1 - x)\nprint("full expression:             %s " % ex)\nex2 = ex.right_hand_side()\nprint("right hand side:             %s" % ex2)\nprint("operands of right hand side: %s" % ex2.operands())\nex3 = ex2.op[0] # nominator\nprint("the x inside the nominator:  %s" % ex3.op[0])\n','Symbolic expressions are also Python objects.\nThis means, there are ways to inspect and take them apart.\n\nIn this example here, we start with an equation and "zoom in" to a small part of it.\n\nTipp: Combine this technique with substitutions to build new expressions out of existing ones.\n']],["Polynomials",['R.<x> = PolynomialRing(QQ, "x")\np = x^2 + 1\np\np.derivative()\np.integral()\ntype(p)\n',"The `x` could also be a generator of a `PolynomialRing` over $\\mathbb{Q}$\n"]],["Limits",["%var x\nlim((x+1)^(1/x), x = 0)\nlim(sqrt(x^2+1) - x, x = oo)\n","Compute $lim$ with SageMath and Maxima. Note, that `oo` stands for $\\infty$.\n\nSee [Reference/Limit](http://doc.sagemath.org/html/en/reference/calculus/sage/calculus/calculus.html#sage.calculus.calculus.limit) for more information.\n"]],["Symbolic Sums",["%var k u x\n# known limits\nsum(x^k, k, 1, 10)\n# up to infinity\nsum(1/k^4, k, 1, oo)\n# unknown limits\nsum(x^(2*k+1), k, -u, u)\n","The `sum` function is not Python's, but a special one by SageMath.\nIt allows you to compute [symbolic sums](http://doc.sagemath.org/html/en/reference/calculus/sage/calculus/calculus.html#sage.calculus.calculus.symbolic_sum)!\n"]],["Taylor Series",["%var f0 k x\ng = f0/sinh(k*x)^4\ng\nt = g.taylor(x, 0, 3)\nt\n","Use `expr.taylor(...)` to obtain a taylor polynomial.\n"]],["Formal Power Series",["%var x\nex = 1/ (2 - cos(x))\nex\nex.series(x,7)\n","`expr.series(...)` gives formal power series expansions.\n"]],["Fast Computations in Formal Power Series Ring",['R.<w> = QQ[[]]\nps = w + 17/2*w^2 + 15/4*w^4 + O(w^6)\nps\n(1+ps).log()\nprint(r"Coefficients of $ps^1000$")\n(ps^1000).coefficients()\n',"You can use the formal power series rings for fast computation.\n"]],["Symbolic Integrals",["%var x\nf = x^3\nf.integral(x)\n# or as a function\nintegral(x^3,x)\n","SageMath can do symbolic integrals.\n"]],["Definite Integrals",["%var x k w\nf = k * sin(w*x)\nf.integrate(x, 0, 1)\n# or as a function\nintegrate(1/x^2, x, 1, infinity)\n","It can also compute integrals involving limits.\n"]],["Laplace Transformations",["%var k s t\nf = 1/exp(k*t)\nf.laplace(t, s)\n","Compute laplace transformations\n"]],["Inverse Laplace Transformations",["%var k s t\ng = 1/(k + s)\ng.inverse_laplace(s, t)\n","... and the inverse laplace transformations.\n"]]],Combinatorics:[["Introduction",["","This goes through some of the basic functionalities regarding combinatorics.\nCheck out these resources for more in-depth information:\n\n* [Tutorial/Combinatorics](http://doc.sagemath.org/html/en/reference/combinat/sage/combinat/tutorial.html)\n* [Reference/Combinatorics](http://doc.sagemath.org/html/en/reference/combinat/index.html)\n* [Reference/Graph Theory](http://doc.sagemath.org/html/en/reference/graphs/index.html)\n"]],["Permutations",["p = Permutation([2,3,7,4,5,6,1])\np.left_tableau()\np.longest_increasing_subsequences()\np.complement()\np.peaks()\np.retract_okounkov_vershik(6)\np.saliances()\n# and many more: http://doc.sagemath.org/html/en/reference/combinat/sage/combinat/permutation.html\n","SageMath offers various way to construct and work with [Permutations](http://doc.sagemath.org/html/en/reference/combinat/sage/combinat/permutation.html).\n"]],["Cartesian Product",["S1 = Permutations(3)\nS2 = ['A', 'B']\ncp = cartesian_product([S1, S2])\ncp\ncp.cardinality()\ncp.list()\n","Build a [cartesian product](http://doc.sagemath.org/html/en/reference/combinat/sage/combinat/cartesian_product.html) of sets.\n"]],["Finite State Machine",["fsm = Automaton([(0, 0, 0), (0, 1, 1), (0, 0, 2), (1, 2, 2), (2, 0, 0)], initial_states=[0, 1, 2], final_states=[0, 1])\nfor transition in fsm.accessible_components().transitions():\n    print transition\nfsm.plot()\n","Transitions and a plot of a [Finite State Machine](http://doc.sagemath.org/html/en/reference/combinat/sage/combinat/finite_state_machine.html)\n"]]],"Differential Equations":[["Introduction",["desolvers?\n","Symbolically solving ODEs can be done using Sage interface with Maxima.\nFor more information, read the help of `desolvers`.\n\n(Numerically solving ODEs is also possible via GSL or Octave.)\n"]],["Function Objects",['%var x\nf = function("f")(x)\ntype(f)\n',"To tell Sage that you want to work with a general function,\nuse the command `function` to create a named function in a specific variable.\n\nThat might look a bit strange first, but it is necessary to be very explicit about each variable's and expressions meaning!\n"]],["ODE Example",["%var x\ny = function('y')(x)\ndesolve(diff(y,x,2) + 3*x == y, dvar = y, ics = [1,1,1])\ndesolve(diff(y,x,2) + 3*x == y, dvar = y)\n","An example, how to solve ODEs symbolically in Sage using the Maxima interface under the hood.\n\n`ics` are the initial conditions.\nThe second example is without them,\nand therefore free constants named $\\texttt{_K}_i$ appear.\n"]],["Slope Field",["x = var('x')\ny = function('y')(x)\nmyequation = diff(y,x) + y/x + x == 2\nh = desolve(myequation, y, [2, 4])\nh.expand()\n","The following solves the differential equation\n$$\\frac{dy}{dx} + \\frac{y}{x} + x = 2$$\nwith the initial conditions $y(2) = 4$.\n"]]],Intro:[["Introduction",["","SageMath is an advanced Python-based environment for mathematics.\nWith that fundament, it is also suited for scientific computing,\nstatistics, and data analysis.\n\nThis introduction gives a quick overview,\nwhile the individual sub-topics to into more detail.\n"]],["Pitfalls",["# TODO: fix this expression\n%var x\nsqrt [ (4 + x) (2 - x) ]\n","There is a blurry line between using SageMath and programming.\nDon't be afraid about this,\nsince it only means that this opens up unlimited ways of expanding and enhancing of what you can do!\n\nOne detail to be aware of is, that expressions need to be explicit about their computational signs.\nI.e. it is not ok to do `4 (x+1)` -- this should be `4 * (x+1)`.\nAlso, nested brackets are always round brackets like `((1+x) + y) / 2`.\n\nFunction calls are always `function_name(...)` with round brackets, too.\n"]]],"Number Theory":[["Introduction",["","This goes through some of the basic functionalities regarding number theory.\nCheck out these resources for more in-depth information:\n\n* [Tutorial/Number Theory](http://doc.sagemath.org/html/en/thematic_tutorials/index.html#number-theory)\n* [Reference/Number Theory](http://doc.sagemath.org/html/en/reference/index.html#number-theory-algebraic-geometry)\n"]]]},Plotting:{"2D":[["Basic Plot",['print "Basic plot: you need a variable, and a function of the variable here x*sin( x^2 )"\n\n# this defaults many many things you can control\n# here in 2 steps using plot() and show() (which can be combined into one line):\npt    = plot( x*sin(x^2), x )      # create plot\nshow( pt )\n',"Basic plot of a function, letting most options default."]],["Upper and lower limit",['print "Basic plot extended with upper lower, limit on x"\n\npt    = plot( x*sin(x^2), x,  0, 6*pi )      # args in order:  function, variable, lower limit, upper limit,\nshow( pt )\n',"Basic plot, but using plot arguments to control upper and lower limits on x.\n"]],["Many more options/arguments",['print "Plot with many more options/arguments, used by name that are somewhat self explanatory -- tweak values to see what they do, or google them"\n# show also offers named arguments for control.\n\npt    = plot( x*sin(x^2), x,  0, 6*pi, rgbcolor="red",  linestyle = "-",  fill=False, thickness=1, legend_label ="a legend label" )\nshow( pt,  aspect_ratio = 1, axes=true, frame=True,  gridlines=false, figsize=4,  xmin=-0, xmax=8*pi,  ymin=-6, ymax=6 )\n',"Plot showing arguments to both plot and show that allow a lot of control over various aspects of the graph.\n"]],["Multiple lines/function",['print "Plot Multiple lines/function on plots"\n# also note that functions may be computed and put into variables outside of plot() or show()\n\nfunction1    = x*sin(x^2)\n\nfunction2    = x^.5*sin(x)\n\npt1    = plot( function1, x,  0, 6*pi, rgbcolor="red",   linestyle = "-",   fill=False, thickness=1, legend_label ="functionl" )\npt2    = plot( function2, x,  0, 6*pi, rgbcolor="blue",  linestyle = "--",  fill=False, thickness=1, legend_label ="function2" )\nshow( pt1 + pt2,  aspect_ratio = 1, axes=true, frame=True,  gridlines=false, figsize=6,  xmin=-0, xmax=8*pi,  ymin=-8, ymax=8 )\n',"Multiple plots can be plotted on the same graph, optionally using different line styles.\n"]],["Custom tickmarks on the axes",['print "Plot with ticks, LaTeX formatting at specific locations"\n\nfx     = 1 * (x^2)+1\npt     = plot( fx ,x, 0,5, ticks=[[0,1,e,pi,sqrt(20)], 5 ], tick_formatter="latex")\n\nshow( pt, figsize=[3,3] )\n',"Tickmarks on the axes can be controlled both in position, spacing, special values, and using LaTeX for values such as pi.\n"]],["Using Python functions",['print "Plot using Python functions defined using \'def:\'"\n# see  http://www.sagemath.org/doc/tutorial/tour_functions.html\n\ndef f(z):       # this and next line define a Python function\n    return z^2\n\nprint "Define plot and show it in one line of code"\nshow( plot(f, 0, 2), figsize=[6,2] )\n\nprint "Alternate syntax "\nvar( "z" )\nshow( plot(f(z), z, 0, 2), figsize=[6,2], )\n',"Plot using Python functions. Python functions are defined using the keyword def.\n"]]],
"2D Advanced":[["Implicit Plot",['print "Implicit plot ( here function of x, y not solved for y )"\n\nvar (\'x y\')\nimp  = exp(x)==y^2\nimplicit_plot(imp, (x,-2,2), (y,-3,3), linestyle="--", figsize=4, axes="true", aspect_ratio=1)\n',"Implicit plots are used where the relationship is implicit in an equation rather than explicitly solved.\n"]],["Parametric Plot",['print "Parametric Plot ( here 3 functions)"\n# for graphing parametric equations ( 2 functions with a common variable implying a relation between the 2 functions )\n# 3 plots all controlled by the parameter t\n\nvar( "t" )  # our parameter\n\nll  = -1. * pi    # lower limit of graph\nul  =  1. * pi    # upper limit of graph\n\n# parametric_plot( x axis function, y axis function ) , ( parametric variable, min value, max value ), other plot args )\n\np1 = parametric_plot((cos(t),sin(t)),   (t, ll, ul),    rgbcolor=hue(0.2))\np2 = parametric_plot((cos(t),sin(t)^4), (t, ll, ul),    rgbcolor=hue(0.4))\np3 = parametric_plot((cos(t),sin(t)^8), (t, ll, ul),    rgbcolor=hue(0.6))\n\nshow( p1+p2+p3, axes=false)\n',"Parametric plots are used where the relationship between variables is implied by their relationship to a third variable, the parameter.\n"]],["Polar Plot",['print "Polar Plot"\n\n# Plot using polar coordinates: note that many of the options for plot() work here.\n\nvar( "theta" )\n\nf =  1-2*sin(2*theta); show( f )\n\npp = polar_plot( f, theta, 0, 2*pi, rgbcolor="red", linestyle = "--" )\nshow( pp )\n',"Polar plots are used where the relationship between x and y, in Cartesian coordinates, is expressed in terms of r an theta, in polar coordinates.\n"]],["Slope Field",['print "Plot Slope Field"\n\nvar( "x" )\nvar( "y" )\n\nslope  =  y ^ 2    # define the slope to be the value of the function y^2\n\npt  = plot_slope_field( slope, ( x, -1, 1 ), ( y, .001, 10 ), plot_points = 10 )    # plot_points: higher numbers plot more "slopes"\nshow( pt, aspect_ratio=\'automatic\' )     # aspect_ratio: try .1, 1, 10 \'automatic\' or leave out and let it default\n','Slope fields show the slope of 2 variables defined over a "field", that is a relationship between x, an y that extends over an area of the plane ( 2 D). The slope is indicated by the slope of a short line segment.\n']],["ODE Slope Field",["x = var('x')\ny = function('yy')(x)\neq = diff(y, x) == - y/x - x + 2\nh = desolve(eq, y, [2, 4])\nsol(x) = h.expand()\nprint \"solution:\", sol\n\n# substituting the solution for y(x) in the right hand side\nsubstituted = eq.rhs().substitute_function(yy, sol)\n\nP1 = plot_slope_field( substituted, (x, 0, 6), (y, -5, 15), headlength = 4, headaxislength=3 )\nP2 = plot( sol, (x, 0, 6), ymax=15, ymin=-5 )\nP = P1 + P2\nP.show()\n","This example shows, how the solution of the differential equation\n$$\\frac{dy}{dx} + \\frac{y}{x} + x = 2$$\nwith the initial conditions $y(2) = 4$\nlooks like.\n"]],["Vector Field",['print "Plot vector field"\n\nvar( "x" )\nvar( "y" )\n\nA =  x - sin(y)\nB = -y * cos(x)\n\nfield = (A,B)\n\nH = plot_vector_field( field, (x,0,2*pi), (y,0,2*pi), plot_points=15, color=\'green\' )   # plot_points: higher numbers plot more vectors\nshow( H )\n',"Plot of a vector field shows an arrow of variable length indicating the direction an magnitude of the vector at a large number of points over the area of the graph.\n"]],["List of points",['print "Plot of a list of points"\n\n# either type of list works\ndictionary_list =  {22: 3365, 27: 3295, 37: 3135, 42: 3020, 47: 2880, 52: 2735, 57: 2550}\ntuple_list      =  [ ( 22, 3365) , ( 27, 3295 ), ( 37, 3135 ), ( 42, 3020 ), ( 47, 2880 ), ( 52, 2735 ), (57, 2550 ) ]\n\nlistPlot  = list_plot( dictionary_list )\n\nshow( listPlot, xmin=0, xmax =50, ymin=2000, ymax=4000, figsize=[4,4] )\n',"Points, contained int Python lists, are all plotted. The lists may be dictionary lists, or lists of 2D tuples.\n"]],["Scatter Plot with Line",["print \"Scatter plot and line\"   # http://www.packtpub.com/article/plotting-data-sage\n\n# python function\ndef noisy_line(m, b, x):\n    ret  = m * x + b + 0.5 * (random() - 0.5)\n    return ret\n\nslope     = 1.0\nintercept = -0.5\n\nx_coords = [random() for t in range(50)]\ny_coords = [noisy_line(slope, intercept, x) for x in x_coords]\n\nsp = scatter_plot(zip(x_coords, y_coords))\n\nsp += line([(0.0, intercept), (1.0, slope+intercept)], color='red')\n\nsp.show( figsize=[6,2])\n","Plot points, x coords in one list, y coords in another.\n"]],["Contour Plot",['print "Contour plot"\n\n# this might be improved, some explanation\n\nf = lambda x,y: cos(x*y)\nshow ( contour_plot(f, (-4, 4), (-4, 4)) )\n',"This plot indicates the contour of a function using 50 shades of gray.\n"]]],"Basic Elements":[["Points as points (plain and fancy)",['print "Plotting points as points ( plain and fancy )"\n\nplainPoints    = point( [1, 1] ) + point( [2, 1] )\nplot1  = plot( plainPoints )\n\nshow( plot1, figsize=4  )\n\nfancyPoints = point((0.5, 0.5), rgbcolor=(1, 0, 0), size=30)\nfancyPoints = fancyPoints + point((0.7, 0.7), rgbcolor=(0, 1, 0), size=50)\n\nshow( fancyPoints , figsize=4   )\n',"The graphic object point may be plotted using plot() Plotting this way may combine various elements, both those in this category but also other 2D plots.\n"]],["Line with point at the end",['print "Plot a line with point ( dot ) at end"\n# computed in polar form, not required\n\nr        =  5\nt        = pi/4.\nx        = r*cos( t )\ny        = r*sin( t )\n\naPoint   = point( ( x, y ), rgbcolor="red", size=30 )\naLine    = line([(0.,0.), ( x, y ) ]  , rgbcolor="blue" , linestyle = "dashed"  )\n\nplot  = aPoint + aLine\nshow( plot,  xmin=-1.2, xmax=5.2,  ymin=-1.2, ymax=5.2 , figsize=[3,3] )\n',"A line is plotted with a point at the end.\n"]],["Lines and points with Python function",['Print "Plot lines and points with Python function"\n\ndef  unitRotator( theta ):\n    x          = cos( theta  )\n    y          = sin( theta  )\n    aPoint     = point2d( ( x, y ), rgbcolor="red", size=30 )  #point2d?\n    aLine      = line([(0.,0.), ( x, y ) ] )\n    myRotator  = aPoint +aLine\n\n    return myRotator\n\ngraphic = point( (0, 0 ) )\nfor theta  in srange( .0, 2*pi, 2*pi/10):\n     graphic = graphic + unitRotator( theta )\n\nshow( graphic , xmin=-1.2, xmax=1.2,  ymin=-1.2, ymax=1.2 , figsize=[3,3] )\n',"A Python function defines many lines and points all of which are plotted.\n"]],["Arc",['print "Plot an Arc"\n\ngraphic   = ( arc((.1,.2), 1, sector=(0,  1*pi /4) ) )\n\nshow( graphic , xmin=-1.2, xmax=1.2,  ymin=-1.2, ymax=1.2, figsize=[3,3] )\n',"Plot an a arc, a segment of a circle.  Center, radius and section of arc are all parameters.\n"]],["Circle",['print "Plot a Circle"\n\nanGraphic = circle((0,0), .5, rgbcolor=(1,0,0),  fill=False )    # fill controls filling of circle with color\n\nshow( anGraphic, aspect_ratio=1, figsize = 4 ,xmax = 1, ymax = 1)\n',"Plot a circle.  Center, radius, color are parameters."]],["Arrow",['print "Plot an Arrow"\n\nanGraphic = arrow((0,1), (2,3) ) # start cord, end cord as tuples\n\nshow( anGraphic,  figsize = 2  )\n',"Plot an Arrow, describe by starting and ending coordinates."]],["Text",['print "Plot Text"\n# text is followed by tuple for position\naGraphic     = text("Sample Text", (5,4), rgbcolor=(1,0,0))  \nshow( aGraphic, aspect_ratio=1, figsize = 3 )\n',"Plot Text, arguments for text, position, and color.\n"]]],Intro:[["Introduction",["plot(x * sin(x), (x, -10, 10))","This is a very simple example how to plot a function."]],["Simple 2D Plot",["plot(2*x^2 - 3*x + 1, (x, -10, 10))","Plot of $\\sin$-function."]],["Cool 2D Plot",["plot(x * sin(x), (x, -10, 10))","Plot of $f(x) = x \\sin(x)$."]],["Simple 3D Plot",["%var x, y\nplot3d(sin(x) * cos(y), (x, -10, 10), (y, -10, 10))\n","3D plot of the $\\sin(x)\\cos(y)$-function."]]]},Tutorial:{Help:[["Embedded Help",["log2?","Sage has extensive built-in documentation, accessible by typing the name of a function or a constant\n(for example), followed by a question mark:\n\n```\nlog2?\n```\n"]],["Help Function",["help(log2)","It's also possible to use the `help(...)` function.\n"]],["SageMath Documentation",["","Here are some links to the SageMath documentation:\n\n* [Main Index](http://doc.sagemath.org/)\n* [Sage Tour](http://doc.sagemath.org/html/en/a_tour_of_sage/index.html)\n* [Tutorial in English](http://doc.sagemath.org/html/en/tutorial/index.html)\n* [Thematic Tutorials](http://doc.sagemath.org/html/en/thematic_tutorials/index.html)\n* [Reference Guide](http://doc.sagemath.org/html/en/reference/index.html)\n* [Constructions](http://doc.sagemath.org/html/en/constructions/index.html)\n"]],["Community Help",["","Here are places on the internet where you can get help:\n\n* [SageMath Support Group](https://groups.google.com/group/sage-support)\n* [Ask SageMath](http://ask.sagemath.org/)\n"]],["Tab-Completion",['# press the tab key after placing the cursor right next to the "."\n%var x\nex = 2*x/sin(x)\nex.\n# for implemented graphs\ngraphs.\n# or place the cursor after "Group" and press tab\nGroup\n',"To learn more about possible operations on an object or existing functions and classes,\nfirst type in the variable, then a dot, and then press the [`TAB` key](https://www.google.at/search?q=tab+key).\n\nThe tab key can either autocomplete your current input at the position of the cursor,\nor give you a list of possible completions.\n\nIn the given example here, position the cursor after the dot and press the `[TAB]` key.\n\nAutocompletion also works for partial strings and pre-defined objects.\nIn the second and third example, you can either all implemented Graphs or tab-complete a specific function.\n"]]],Tour:[["SageMath is Python with Extras",["f(x) = 2*x + 1\nprint f(3)\n","The language of SageMath is built on top of [Python](https://docs.python.org/2/tutorial/). There are only some minor differences and hence you can apply all Python knowledge for working with Sage.\nThe only real difference is, that a few expressions are *pre-parsed*. For example, `f(x) = 2*x + 1` is valid SageMath for defining a function `f`, but that's not Python!\n"]],["Assignments",['a = 5   # giving "5" the name "a"\na\n','Assignments are one of the most basic concepts of programming. An object is born -- as a result of a creation or as an evaluation of an expression -- and assigned to (variable-) name for later use.\nThis assignment happens with the `=` sign on the left, which is exactly like giving the created object on the right hand side a "name". Do not get confused with a mathematical equation!\n']],["Expressions",["2 + 2   # sum of 2 plus 2\n2 == 2  # testing if 2 equals 2\n2 < 4   # is 2 smaller than 4?\nsqrt(4) # square root of 4\na = 5   # assigning 5 to a\na + 4   # should give 9\na == 5  # not an assignment, but a test if a is still 5\n","Expressions are where computations happen. These could be arithmetic operations, function calls, or other binary operations like comparisons.\n"]],["Mathematical Operations",["2 ** 3\n2^3\n10 % 3  # modulo\n8 / 7   # this gives a fraction\n9//2    # integer quotient\n","Sage uses standard operators to express mathematical operations. In contrast to Python, the `^` is for exponentiation!\n"]],["Mathematical Functions",["sqrt(9.81)\nsin(6.28)\ncos(pi)\ntan(pi/4)\n","Many standard functions are directly available. They produce either numerical approximations or give a symbolic expression.\n"]],["Types",["a = 5\ntype(a)\na = 9/82\ntype(a)\na = \"I am a string in quotes\"\ntype(a)\n# ... and finally a complicated type\ne11a = EllipticCurve('11a')\ntype(e11a)\n",'A great deal of programming is about organizing data and information. A "type" is a specific pattern, defining how data is structured and it a descriptive name. Use Pythons `type(...)` function any time, to learn more about what you are currently dealing with.\n']],["Classes",["class Fraction(object):\n    def __init__(self, nom, denom):\n        self.nominator = nom\n        self.denominator = denom\nf1 = Fraction(1, 2)\nf1.nominator\nf1.denominator\n","A common way to create types are classes. Understanding their construction is not necessary at this point, but mentioned for completeness.\n"]],["Functions",["def f1(x):\n    return 2*x\nf1(11)\n\n# this defines x to be a symbolic variable\n%var x\nf2(x) = 2 * x + 1\nf2(21)\n","In Sage, there are (at least) two types of functions. A Python-function is defined via the `def` keyword and maps optional arguments to a returned value. For more information, [consult the Sage Tour](http://doc.sagemath.org/html/en/a_tour_of_sage/index.html).\nSymbolic-functions are defined via `f(x) = ...`. They are special purpose in the context of symbolic computations.\nHint: always make sure to define `x` prior to constructing such a function or symbolic expression, as a symbolic variable and not accidentally as a number!\n"]],["Symbolic Expressions",["%var x, y\ntype(y)\nex1 = (x + y)^2 == 1\nex1\nex2 = x - y == 1\nex2\n","A great deal of mathematics concerns symbolic expressions. The fundamental building block is a single variable, `x`, `y`, etc. It can be defined via `var('x')` or the magic command `%var y`. Then, symbolic expressions are constructed by using them as building blocks. It is important to define the variables as being symblic. Otherwise, the constructed expression is something completely different!\n"]],["Approximate Symbolic Expressions",["exp(2)\nn(exp(2))\nsin(31.41592).n(digits=50)     # number of digits\nnumerical_approx(pi, prec=200) # number of bits\n","To approximate a symbolic expression (without a free variable), use `n(<expr>)` or `expr.n()`.\n"]],["LaTeX Formulas",["%var x, y\nex1 = (x + y)^2 == 1\nshow(ex1)\n","To see a LaTeX rendering of such a symbolic expression, use Sage's `show(...)` function."]],["Solving Symbolic Equations",["%var x, y\nsolve(2*x^2 + 1, x)\n# second example, two equations:\nex1 = (x + y)^2 - 1\nex2 = x - y == 1\nsolve([ex1, ex2], [x, y])\n","Sage's `solve(...)` function allows you to solve symbolic equations exactly. Expressons are automatically assumed to be equal to zero.\n"]],["Numerical Solutions",["%var phi\nfind_root(cos(phi)==sin(phi), 0, pi/2)\n","Sage's `find_root(...)` solves equations numerically. The optional second and third argument constrain the variable to an interval.\n"]],["Symbolic Differentiation",["%var x, y\nf = sin(x^2) + 17*y^2\ndiff(f, x)\nf.diff(y, 3)\n","Symbolic expressions can be differentiated. This works either with Sage's `diff(...)` function or the expression's `.diff(...)` method. You can also compute the n-th derivative directly.\n"]],["Symbolic Integration",["%var x\nintegral(x*sin(x^2), x)\n","If the algorithm is able to find it, the `integral(...)` function computes a symbolic integral.\n"]]]}}}},978:function(t,exports){t.exports="/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nvar Detector = {\n\n\tcanvas: !! window.CanvasRenderingContext2D,\n\twebgl: ( function () {\n\n\t\ttry {\n\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n\t\t} catch ( e ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t} )(),\n\tworkers: !! window.Worker,\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n\tgetWebGLErrorMessage: function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.id = 'webgl-error-message';\n\t\telement.style.fontFamily = 'monospace';\n\t\telement.style.fontSize = '13px';\n\t\telement.style.fontWeight = 'normal';\n\t\telement.style.textAlign = 'center';\n\t\telement.style.background = '#fff';\n\t\telement.style.color = '#000';\n\t\telement.style.padding = '1.5em';\n\t\telement.style.width = '400px';\n\t\telement.style.margin = '5em auto 0';\n\n\t\tif ( ! this.webgl ) {\n\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' ) : [\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\treturn element;\n\n\t},\n\n\taddGetWebGLMessage: function ( parameters ) {\n\n\t\tvar parent, id, element;\n\n\t\tparameters = parameters || {};\n\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\n\n\t\telement = Detector.getWebGLErrorMessage();\n\t\telement.id = id;\n\n\t\tparent.appendChild( element );\n\n\t}\n\n};\n\n// browserify support\nif ( typeof module === 'object' ) {\n\n\tmodule.exports = Detector;\n\n}\n"},979:function(t,exports){t.exports="/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\nTHREE.OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function() {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function () {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function() {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );\n\t\tscope.domElement.removeEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\tdocument.removeEventListener( 'mouseout', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function() {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function() {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function() {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( event ) {\n\n\t\t//console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\t//console.log( 'handleMouseWheel' );\n\n\t\tvar delta = 0;\n\n\t\tif ( event.wheelDelta !== undefined ) {\n\n\t\t\t// WebKit / Opera / Explorer 9\n\n\t\t\tdelta = event.wheelDelta;\n\n\t\t} else if ( event.detail !== undefined ) {\n\n\t\t\t// Firefox\n\n\t\t\tdelta = - event.detail;\n\n\t\t}\n\n\t\tif ( delta > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( delta < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t//console.log( 'handleKeyDown' );\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\t//console.log( 'handleTouchStartDolly' );\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\t//console.log( 'handleTouchStartPan' );\n\n\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\t//console.log( 'handleTouchMoveDolly' );\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\t//console.log( 'handleTouchMovePan' );\n\n\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\n\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\thandleMouseDownRotate( event );\n\n\t\t\tstate = STATE.ROTATE;\n\n\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\n\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\thandleMouseDownDolly( event );\n\n\t\t\tstate = STATE.DOLLY;\n\n\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\n\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\thandleMouseDownPan( event );\n\n\t\t\tstate = STATE.PAN;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\t\t\tdocument.addEventListener( 'mouseout', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tif ( state === STATE.ROTATE ) {\n\n\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\thandleMouseMoveRotate( event );\n\n\t\t} else if ( state === STATE.DOLLY ) {\n\n\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\thandleMouseMoveDolly( event );\n\n\t\t} else if ( state === STATE.PAN ) {\n\n\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\thandleMouseMovePan( event );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\tdocument.removeEventListener( 'mouseout', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( startEvent ); // not sure why these are here...\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleTouchStartDolly( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\n\n\t\t\t\thandleTouchMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\n\tscope.domElement.addEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\nObject.defineProperties( THREE.OrbitControls.prototype, {\n\n\tcenter: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\n\t\t\treturn this.target;\n\n\t\t}\n\n\t},\n\n\t// backward compatibility\n\n\tnoZoom: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\treturn ! this.enableZoom;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\tthis.enableZoom = ! value;\n\n\t\t}\n\n\t},\n\n\tnoRotate: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\treturn ! this.enableRotate;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\tthis.enableRotate = ! value;\n\n\t\t}\n\n\t},\n\n\tnoPan: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\treturn ! this.enablePan;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\tthis.enablePan = ! value;\n\n\t\t}\n\n\t},\n\n\tnoKeys: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\treturn ! this.enableKeys;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\tthis.enableKeys = ! value;\n\n\t\t}\n\n\t},\n\n\tstaticMoving : {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\treturn ! this.enableDamping;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\tthis.enableDamping = ! value;\n\n\t\t}\n\n\t},\n\n\tdynamicDampingFactor : {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\treturn this.dampingFactor;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\tthis.dampingFactor = value;\n\n\t\t}\n\n\t}\n\n} );\n";
},980:function(t,exports){t.exports="/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.SpriteCanvasMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'SpriteCanvasMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\tthis.program = function ( context, color ) {};\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.SpriteCanvasMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.SpriteCanvasMaterial.prototype.constructor = THREE.SpriteCanvasMaterial;\n\nTHREE.SpriteCanvasMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.SpriteCanvasMaterial();\n\n\tmaterial.copy( this );\n\tmaterial.color.copy( this.color );\n\tmaterial.program = this.program;\n\n\treturn material;\n\n};\n\n//\n\nTHREE.CanvasRenderer = function ( parameters ) {\n\n\tconsole.log( 'THREE.CanvasRenderer', THREE.REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _this = this,\n\t_renderData, _elements, _lights,\n\t_projector = new THREE.Projector(),\n\n\t_canvas = parameters.canvas !== undefined\n\t\t\t ? parameters.canvas\n\t\t\t : document.createElement( 'canvas' ),\n\n\t_canvasWidth = _canvas.width,\n\t_canvasHeight = _canvas.height,\n\t_canvasWidthHalf = Math.floor( _canvasWidth / 2 ),\n\t_canvasHeightHalf = Math.floor( _canvasHeight / 2 ),\n\n\t_viewportX = 0,\n\t_viewportY = 0,\n\t_viewportWidth = _canvasWidth,\n\t_viewportHeight = _canvasHeight,\n\n\t_pixelRatio = 1,\n\n\t_context = _canvas.getContext( '2d', {\n\t\talpha: parameters.alpha === true\n\t} ),\n\n\t_clearColor = new THREE.Color( 0x000000 ),\n\t_clearAlpha = parameters.alpha === true ? 0 : 1,\n\n\t_contextGlobalAlpha = 1,\n\t_contextGlobalCompositeOperation = 0,\n\t_contextStrokeStyle = null,\n\t_contextFillStyle = null,\n\t_contextLineWidth = null,\n\t_contextLineCap = null,\n\t_contextLineJoin = null,\n\t_contextLineDash = [],\n\n\t_camera,\n\n\t_v1, _v2, _v3, _v4,\n\t_v5 = new THREE.RenderableVertex(),\n\t_v6 = new THREE.RenderableVertex(),\n\n\t_v1x, _v1y, _v2x, _v2y, _v3x, _v3y,\n\t_v4x, _v4y, _v5x, _v5y, _v6x, _v6y,\n\n\t_color = new THREE.Color(),\n\t_color1 = new THREE.Color(),\n\t_color2 = new THREE.Color(),\n\t_color3 = new THREE.Color(),\n\t_color4 = new THREE.Color(),\n\n\t_diffuseColor = new THREE.Color(),\n\t_emissiveColor = new THREE.Color(),\n\n\t_lightColor = new THREE.Color(),\n\n\t_patterns = {},\n\n\t_image, _uvs,\n\t_uv1x, _uv1y, _uv2x, _uv2y, _uv3x, _uv3y,\n\n\t_clipBox = new THREE.Box2(),\n\t_clearBox = new THREE.Box2(),\n\t_elemBox = new THREE.Box2(),\n\n\t_ambientLight = new THREE.Color(),\n\t_directionalLights = new THREE.Color(),\n\t_pointLights = new THREE.Color(),\n\n\t_vector3 = new THREE.Vector3(), // Needed for PointLight\n\t_centroid = new THREE.Vector3(),\n\t_normal = new THREE.Vector3(),\n\t_normalViewMatrix = new THREE.Matrix3();\n\n\t/* TODO\n\t_canvas.mozImageSmoothingEnabled = false;\n\t_canvas.webkitImageSmoothingEnabled = false;\n\t_canvas.msImageSmoothingEnabled = false;\n\t_canvas.imageSmoothingEnabled = false;\n\t*/\n\n\t// dash+gap fallbacks for Firefox and everything else\n\n\tif ( _context.setLineDash === undefined ) {\n\n\t\t_context.setLineDash = function () {};\n\n\t}\n\n\tthis.domElement = _canvas;\n\n\tthis.autoClear = true;\n\tthis.sortObjects = true;\n\tthis.sortElements = true;\n\n\tthis.info = {\n\n\t\trender: {\n\n\t\t\tvertices: 0,\n\t\t\tfaces: 0\n\n\t\t}\n\n\t};\n\n\t// WebGLRenderer compatibility\n\n\tthis.supportsVertexTextures = function () {};\n\tthis.setFaceCulling = function () {};\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _context;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _context.getContextAttributes();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value !== undefined ) _pixelRatio = value;\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t_canvasWidth = width * _pixelRatio;\n\t\t_canvasHeight = height * _pixelRatio;\n\n\t\t_canvas.width = _canvasWidth;\n\t\t_canvas.height = _canvasHeight;\n\n\t\t_canvasWidthHalf = Math.floor( _canvasWidth / 2 );\n\t\t_canvasHeightHalf = Math.floor( _canvasHeight / 2 );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\t_clipBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clipBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t\t_clearBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clearBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t\t_contextGlobalAlpha = 1;\n\t\t_contextGlobalCompositeOperation = 0;\n\t\t_contextStrokeStyle = null;\n\t\t_contextFillStyle = null;\n\t\t_contextLineWidth = null;\n\t\t_contextLineCap = null;\n\t\t_contextLineJoin = null;\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t_viewportX = x * _pixelRatio;\n\t\t_viewportY = y * _pixelRatio;\n\n\t\t_viewportWidth = width * _pixelRatio;\n\t\t_viewportHeight = height * _pixelRatio;\n\n\t};\n\n\tthis.setScissor = function () {};\n\tthis.setScissorTest = function () {};\n\n\tthis.setClearColor = function ( color, alpha ) {\n\n\t\t_clearColor.set( color );\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\n\n\t\t_clearBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clearBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t};\n\n\tthis.setClearColorHex = function ( hex, alpha ) {\n\n\t\tconsole.warn( 'THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.' );\n\t\tthis.setClearColor( hex, alpha );\n\n\t};\n\n\tthis.getClearColor = function () {\n\n\t\treturn _clearColor;\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn _clearAlpha;\n\n\t};\n\n\tthis.getMaxAnisotropy = function () {\n\n\t\treturn 0;\n\n\t};\n\n\tthis.clear = function () {\n\n\t\tif ( _clearBox.isEmpty() === false ) {\n\n\t\t\t_clearBox.intersect( _clipBox );\n\t\t\t_clearBox.expandByScalar( 2 );\n\n\t\t\t_clearBox.min.x = _clearBox.min.x + _canvasWidthHalf;\n\t\t\t_clearBox.min.y =  - _clearBox.min.y + _canvasHeightHalf;\t\t// higher y value !\n\t\t\t_clearBox.max.x = _clearBox.max.x + _canvasWidthHalf;\n\t\t\t_clearBox.max.y =  - _clearBox.max.y + _canvasHeightHalf;\t\t// lower y value !\n\n\t\t\tif ( _clearAlpha < 1 ) {\n\n\t\t\t\t_context.clearRect(\n\t\t\t\t\t_clearBox.min.x | 0,\n\t\t\t\t\t_clearBox.max.y | 0,\n\t\t\t\t\t( _clearBox.max.x - _clearBox.min.x ) | 0,\n\t\t\t\t\t( _clearBox.min.y - _clearBox.max.y ) | 0\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( _clearAlpha > 0 ) {\n\n\t\t\t\tsetBlending( THREE.NormalBlending );\n\t\t\t\tsetOpacity( 1 );\n\n\t\t\t\tsetFillStyle( 'rgba(' + Math.floor( _clearColor.r * 255 ) + ',' + Math.floor( _clearColor.g * 255 ) + ',' + Math.floor( _clearColor.b * 255 ) + ',' + _clearAlpha + ')' );\n\n\t\t\t\t_context.fillRect(\n\t\t\t\t\t_clearBox.min.x | 0,\n\t\t\t\t\t_clearBox.max.y | 0,\n\t\t\t\t\t( _clearBox.max.x - _clearBox.min.x ) | 0,\n\t\t\t\t\t( _clearBox.min.y - _clearBox.max.y ) | 0\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t_clearBox.makeEmpty();\n\n\t\t}\n\n\t};\n\n\t// compatibility\n\n\tthis.clearColor = function () {};\n\tthis.clearDepth = function () {};\n\tthis.clearStencil = function () {};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( camera instanceof THREE.Camera === false ) {\n\n\t\t\tconsole.error( 'THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.autoClear === true ) this.clear();\n\n\t\t_this.info.render.vertices = 0;\n\t\t_this.info.render.faces = 0;\n\n\t\t_context.setTransform( _viewportWidth / _canvasWidth, 0, 0, - _viewportHeight / _canvasHeight, _viewportX, _canvasHeight - _viewportY );\n\t\t_context.translate( _canvasWidthHalf, _canvasHeightHalf );\n\n\t\t_renderData = _projector.projectScene( scene, camera, this.sortObjects, this.sortElements );\n\t\t_elements = _renderData.elements;\n\t\t_lights = _renderData.lights;\n\t\t_camera = camera;\n\n\t\t_normalViewMatrix.getNormalMatrix( camera.matrixWorldInverse );\n\n\t\t/* DEBUG\n\t\tsetFillStyle( 'rgba( 0, 255, 255, 0.5 )' );\n\t\t_context.fillRect( _clipBox.min.x, _clipBox.min.y, _clipBox.max.x - _clipBox.min.x, _clipBox.max.y - _clipBox.min.y );\n\t\t*/\n\n\t\tcalculateLights();\n\n\t\tfor ( var e = 0, el = _elements.length; e < el; e ++ ) {\n\n\t\t\tvar element = _elements[ e ];\n\n\t\t\tvar material = element.material;\n\n\t\t\tif ( material === undefined || material.opacity === 0 ) continue;\n\n\t\t\t_elemBox.makeEmpty();\n\n\t\t\tif ( element instanceof THREE.RenderableSprite ) {\n\n\t\t\t\t_v1 = element;\n\t\t\t\t_v1.x *= _canvasWidthHalf; _v1.y *= _canvasHeightHalf;\n\n\t\t\t\trenderSprite( _v1, element, material );\n\n\t\t\t} else if ( element instanceof THREE.RenderableLine ) {\n\n\t\t\t\t_v1 = element.v1; _v2 = element.v2;\n\n\t\t\t\t_v1.positionScreen.x *= _canvasWidthHalf; _v1.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v2.positionScreen.x *= _canvasWidthHalf; _v2.positionScreen.y *= _canvasHeightHalf;\n\n\t\t\t\t_elemBox.setFromPoints( [\n\t\t\t\t\t_v1.positionScreen,\n\t\t\t\t\t_v2.positionScreen\n\t\t\t\t] );\n\n\t\t\t\tif ( _clipBox.intersectsBox( _elemBox ) === true ) {\n\n\t\t\t\t\trenderLine( _v1, _v2, element, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( element instanceof THREE.RenderableFace ) {\n\n\t\t\t\t_v1 = element.v1; _v2 = element.v2; _v3 = element.v3;\n\n\t\t\t\tif ( _v1.positionScreen.z < - 1 || _v1.positionScreen.z > 1 ) continue;\n\t\t\t\tif ( _v2.positionScreen.z < - 1 || _v2.positionScreen.z > 1 ) continue;\n\t\t\t\tif ( _v3.positionScreen.z < - 1 || _v3.positionScreen.z > 1 ) continue;\n\n\t\t\t\t_v1.positionScreen.x *= _canvasWidthHalf; _v1.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v2.positionScreen.x *= _canvasWidthHalf; _v2.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v3.positionScreen.x *= _canvasWidthHalf; _v3.positionScreen.y *= _canvasHeightHalf;\n\n\t\t\t\tif ( material.overdraw > 0 ) {\n\n\t\t\t\t\texpand( _v1.positionScreen, _v2.positionScreen, material.overdraw );\n\t\t\t\t\texpand( _v2.positionScreen, _v3.positionScreen, material.overdraw );\n\t\t\t\t\texpand( _v3.positionScreen, _v1.positionScreen, material.overdraw );\n\n\t\t\t\t}\n\n\t\t\t\t_elemBox.setFromPoints( [\n\t\t\t\t\t_v1.positionScreen,\n\t\t\t\t\t_v2.positionScreen,\n\t\t\t\t\t_v3.positionScreen\n\t\t\t\t] );\n\n\t\t\t\tif ( _clipBox.intersectsBox( _elemBox ) === true ) {\n\n\t\t\t\t\trenderFace3( _v1, _v2, _v3, 0, 1, 2, element, material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* DEBUG\n\t\t\tsetLineWidth( 1 );\n\t\t\tsetStrokeStyle( 'rgba( 0, 255, 0, 0.5 )' );\n\t\t\t_context.strokeRect( _elemBox.min.x, _elemBox.min.y, _elemBox.max.x - _elemBox.min.x, _elemBox.max.y - _elemBox.min.y );\n\t\t\t*/\n\n\t\t\t_clearBox.union( _elemBox );\n\n\t\t}\n\n\t\t/* DEBUG\n\t\tsetLineWidth( 1 );\n\t\tsetStrokeStyle( 'rgba( 255, 0, 0, 0.5 )' );\n\t\t_context.strokeRect( _clearBox.min.x, _clearBox.min.y, _clearBox.max.x - _clearBox.min.x, _clearBox.max.y - _clearBox.min.y );\n\t\t*/\n\n\t\t_context.setTransform( 1, 0, 0, 1, 0, 0 );\n\n\t};\n\n\t//\n\n\tfunction calculateLights() {\n\n\t\t_ambientLight.setRGB( 0, 0, 0 );\n\t\t_directionalLights.setRGB( 0, 0, 0 );\n\t\t_pointLights.setRGB( 0, 0, 0 );\n\n\t\tfor ( var l = 0, ll = _lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = _lights[ l ];\n\t\t\tvar lightColor = light.color;\n\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\n\n\t\t\t\t_ambientLight.add( lightColor );\n\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\t// for sprites\n\n\t\t\t\t_directionalLights.add( lightColor );\n\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\n\n\t\t\t\t// for sprites\n\n\t\t\t\t_pointLights.add( lightColor );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction calculateLight( position, normal, color ) {\n\n\t\tfor ( var l = 0, ll = _lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = _lights[ l ];\n\n\t\t\t_lightColor.copy( light.color );\n\n\t\t\tif ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\tvar lightPosition = _vector3.setFromMatrixPosition( light.matrixWorld ).normalize();\n\n\t\t\t\tvar amount = normal.dot( lightPosition );\n\n\t\t\t\tif ( amount <= 0 ) continue;\n\n\t\t\t\tamount *= light.intensity;\n\n\t\t\t\tcolor.add( _lightColor.multiplyScalar( amount ) );\n\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\n\n\t\t\t\tvar lightPosition = _vector3.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tvar amount = normal.dot( _vector3.subVectors( lightPosition, position ).normalize() );\n\n\t\t\t\tif ( amount <= 0 ) continue;\n\n\t\t\t\tamount *= light.distance == 0 ? 1 : 1 - Math.min( position.distanceTo( lightPosition ) / light.distance, 1 );\n\n\t\t\t\tif ( amount == 0 ) continue;\n\n\t\t\t\tamount *= light.intensity;\n\n\t\t\t\tcolor.add( _lightColor.multiplyScalar( amount ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderSprite( v1, element, material ) {\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\tvar scaleX = element.scale.x * _canvasWidthHalf;\n\t\tvar scaleY = element.scale.y * _canvasHeightHalf;\n\n\t\tvar dist = 0.5 * Math.sqrt( scaleX * scaleX + scaleY * scaleY ); // allow for rotated sprite\n\t\t_elemBox.min.set( v1.x - dist, v1.y - dist );\n\t\t_elemBox.max.set( v1.x + dist, v1.y + dist );\n\n\t\tif ( material instanceof THREE.SpriteMaterial ) {\n\n\t\t\tvar texture = material.map;\n\n\t\t\tif ( texture !== null ) {\n\n\t\t\t\tvar pattern = _patterns[ texture.id ];\n\n\t\t\t\tif ( pattern === undefined || pattern.version !== texture.version ) {\n\n\t\t\t\t\tpattern = textureToPattern( texture );\n\t\t\t\t\t_patterns[ texture.id ] = pattern;\n\n\t\t\t\t}\n\n\t\t\t\tif ( pattern.canvas !== undefined ) {\n\n\t\t\t\t\tsetFillStyle( pattern.canvas );\n\n\t\t\t\t\tvar bitmap = texture.image;\n\n\t\t\t\t\tvar ox = bitmap.width * texture.offset.x;\n\t\t\t\t\tvar oy = bitmap.height * texture.offset.y;\n\n\t\t\t\t\tvar sx = bitmap.width * texture.repeat.x;\n\t\t\t\t\tvar sy = bitmap.height * texture.repeat.y;\n\n\t\t\t\t\tvar cx = scaleX / sx;\n\t\t\t\t\tvar cy = scaleY / sy;\n\n\t\t\t\t\t_context.save();\n\t\t\t\t\t_context.translate( v1.x, v1.y );\n\t\t\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t\t\t_context.translate( - scaleX / 2, - scaleY / 2 );\n\t\t\t\t\t_context.scale( cx, cy );\n\t\t\t\t\t_context.translate( - ox, - oy );\n\t\t\t\t\t_context.fillRect( ox, oy, sx, sy );\n\t\t\t\t\t_context.restore();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// no texture\n\n\t\t\t\tsetFillStyle( material.color.getStyle() );\n\n\t\t\t\t_context.save();\n\t\t\t\t_context.translate( v1.x, v1.y );\n\t\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t\t_context.scale( scaleX, - scaleY );\n\t\t\t\t_context.fillRect( - 0.5, - 0.5, 1, 1 );\n\t\t\t\t_context.restore();\n\n\t\t\t}\n\n\t\t} else if ( material instanceof THREE.SpriteCanvasMaterial ) {\n\n\t\t\tsetStrokeStyle( material.color.getStyle() );\n\t\t\tsetFillStyle( material.color.getStyle() );\n\n\t\t\t_context.save();\n\t\t\t_context.translate( v1.x, v1.y );\n\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t_context.scale( scaleX, scaleY );\n\n\t\t\tmaterial.program( _context );\n\n\t\t\t_context.restore();\n\n\t\t}\n\n\t\t/* DEBUG\n\t\tsetStrokeStyle( 'rgb(255,255,0)' );\n\t\t_context.beginPath();\n\t\t_context.moveTo( v1.x - 10, v1.y );\n\t\t_context.lineTo( v1.x + 10, v1.y );\n\t\t_context.moveTo( v1.x, v1.y - 10 );\n\t\t_context.lineTo( v1.x, v1.y + 10 );\n\t\t_context.stroke();\n\t\t*/\n\n\t}\n\n\tfunction renderLine( v1, v2, element, material ) {\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\t_context.beginPath();\n\t\t_context.moveTo( v1.positionScreen.x, v1.positionScreen.y );\n\t\t_context.lineTo( v2.positionScreen.x, v2.positionScreen.y );\n\n\t\tif ( material instanceof THREE.LineBasicMaterial ) {\n\n\t\t\tsetLineWidth( material.linewidth );\n\t\t\tsetLineCap( material.linecap );\n\t\t\tsetLineJoin( material.linejoin );\n\n\t\t\tif ( material.vertexColors !== THREE.VertexColors ) {\n\n\t\t\t\tsetStrokeStyle( material.color.getStyle() );\n\n\t\t\t} else {\n\n\t\t\t\tvar colorStyle1 = element.vertexColors[ 0 ].getStyle();\n\t\t\t\tvar colorStyle2 = element.vertexColors[ 1 ].getStyle();\n\n\t\t\t\tif ( colorStyle1 === colorStyle2 ) {\n\n\t\t\t\t\tsetStrokeStyle( colorStyle1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar grad = _context.createLinearGradient(\n\t\t\t\t\t\t\tv1.positionScreen.x,\n\t\t\t\t\t\t\tv1.positionScreen.y,\n\t\t\t\t\t\t\tv2.positionScreen.x,\n\t\t\t\t\t\t\tv2.positionScreen.y\n\t\t\t\t\t\t);\n\t\t\t\t\t\tgrad.addColorStop( 0, colorStyle1 );\n\t\t\t\t\t\tgrad.addColorStop( 1, colorStyle2 );\n\n\t\t\t\t\t} catch ( exception ) {\n\n\t\t\t\t\t\tgrad = colorStyle1;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tsetStrokeStyle( grad );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_context.stroke();\n\t\t\t_elemBox.expandByScalar( material.linewidth * 2 );\n\n\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\n\n\t\t\tsetLineWidth( material.linewidth );\n\t\t\tsetLineCap( material.linecap );\n\t\t\tsetLineJoin( material.linejoin );\n\t\t\tsetStrokeStyle( material.color.getStyle() );\n\t\t\tsetLineDash( [ material.dashSize, material.gapSize ] );\n\n\t\t\t_context.stroke();\n\n\t\t\t_elemBox.expandByScalar( material.linewidth * 2 );\n\n\t\t\tsetLineDash( [] );\n\n\t\t}\n\n\t}\n\n\tfunction renderFace3( v1, v2, v3, uv1, uv2, uv3, element, material ) {\n\n\t\t_this.info.render.vertices += 3;\n\t\t_this.info.render.faces ++;\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\t_v1x = v1.positionScreen.x; _v1y = v1.positionScreen.y;\n\t\t_v2x = v2.positionScreen.x; _v2y = v2.positionScreen.y;\n\t\t_v3x = v3.positionScreen.x; _v3y = v3.positionScreen.y;\n\n\t\tdrawTriangle( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y );\n\n\t\tif ( ( material instanceof THREE.MeshLambertMaterial || material instanceof THREE.MeshPhongMaterial ) && material.map === null ) {\n\n\t\t\t_diffuseColor.copy( material.color );\n\t\t\t_emissiveColor.copy( material.emissive );\n\n\t\t\tif ( material.vertexColors === THREE.FaceColors ) {\n\n\t\t\t\t_diffuseColor.multiply( element.color );\n\n\t\t\t}\n\n\t\t\t_color.copy( _ambientLight );\n\n\t\t\t_centroid.copy( v1.positionWorld ).add( v2.positionWorld ).add( v3.positionWorld ).divideScalar( 3 );\n\n\t\t\tcalculateLight( _centroid, element.normalModel, _color );\n\n\t\t\t_color.multiply( _diffuseColor ).add( _emissiveColor );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t} else if ( material instanceof THREE.MeshBasicMaterial ||\n\t\t\t\t    material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t    material instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tvar mapping = material.map.mapping;\n\n\t\t\t\tif ( mapping === THREE.UVMapping ) {\n\n\t\t\t\t\t_uvs = element.uvs;\n\t\t\t\t\tpatternPath( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y, _uvs[ uv1 ].x, _uvs[ uv1 ].y, _uvs[ uv2 ].x, _uvs[ uv2 ].y, _uvs[ uv3 ].x, _uvs[ uv3 ].y, material.map );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.envMap !== null ) {\n\n\t\t\t\tif ( material.envMap.mapping === THREE.SphericalReflectionMapping ) {\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv1 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv1x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv1y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv2 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv2x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv2y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv3 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv3x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv3y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\tpatternPath( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y, _uv1x, _uv1y, _uv2x, _uv2y, _uv3x, _uv3y, material.envMap );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_color.copy( material.color );\n\n\t\t\t\tif ( material.vertexColors === THREE.FaceColors ) {\n\n\t\t\t\t\t_color.multiply( element.color );\n\n\t\t\t\t}\n\n\t\t\t\tmaterial.wireframe === true\n\t\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t\t : fillPath( _color );\n\n\t\t\t}\n\n\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\n\n\t\t\t_normal.copy( element.normalModel ).applyMatrix3( _normalViewMatrix );\n\n\t\t\t_color.setRGB( _normal.x, _normal.y, _normal.z ).multiplyScalar( 0.5 ).addScalar( 0.5 );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t} else {\n\n\t\t\t_color.setRGB( 1, 1, 1 );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction drawTriangle( x0, y0, x1, y1, x2, y2 ) {\n\n\t\t_context.beginPath();\n\t\t_context.moveTo( x0, y0 );\n\t\t_context.lineTo( x1, y1 );\n\t\t_context.lineTo( x2, y2 );\n\t\t_context.closePath();\n\n\t}\n\n\tfunction strokePath( color, linewidth, linecap, linejoin ) {\n\n\t\tsetLineWidth( linewidth );\n\t\tsetLineCap( linecap );\n\t\tsetLineJoin( linejoin );\n\t\tsetStrokeStyle( color.getStyle() );\n\n\t\t_context.stroke();\n\n\t\t_elemBox.expandByScalar( linewidth * 2 );\n\n\t}\n\n\tfunction fillPath( color ) {\n\n\t\tsetFillStyle( color.getStyle() );\n\t\t_context.fill();\n\n\t}\n\n\tfunction textureToPattern( texture ) {\n\n\t\tif ( texture.version === 0 ||\n\t\t\ttexture instanceof THREE.CompressedTexture ||\n\t\t\ttexture instanceof THREE.DataTexture ) {\n\n\t\t\treturn {\n\t\t\t\tcanvas: undefined,\n\t\t\t\tversion: texture.version\n\t\t\t};\n\n\t\t}\n\n\t\tvar image = texture.image;\n\n\t\tif ( image.complete === false ) {\n\n\t\t\treturn {\n\t\t\t\tcanvas: undefined,\n\t\t\t\tversion: 0\n\t\t\t};\n\n\t\t}\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = image.width;\n\t\tcanvas.height = image.height;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.setTransform( 1, 0, 0, - 1, 0, image.height );\n\t\tcontext.drawImage( image, 0, 0 );\n\n\t\tvar repeatX = texture.wrapS === THREE.RepeatWrapping;\n\t\tvar repeatY = texture.wrapT === THREE.RepeatWrapping;\n\n\t\tvar repeat = 'no-repeat';\n\n\t\tif ( repeatX === true && repeatY === true ) {\n\n\t\t\trepeat = 'repeat';\n\n\t\t} else if ( repeatX === true ) {\n\n\t\t\trepeat = 'repeat-x';\n\n\t\t} else if ( repeatY === true ) {\n\n\t\t\trepeat = 'repeat-y';\n\n\t\t}\n\n\t\tvar pattern = _context.createPattern( canvas, repeat );\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\treturn {\n\t\t\tcanvas: pattern,\n\t\t\tversion: texture.version\n\t\t};\n\n\t}\n\n\tfunction patternPath( x0, y0, x1, y1, x2, y2, u0, v0, u1, v1, u2, v2, texture ) {\n\n\t\tvar pattern = _patterns[ texture.id ];\n\n\t\tif ( pattern === undefined || pattern.version !== texture.version ) {\n\n\t\t\tpattern = textureToPattern( texture );\n\t\t\t_patterns[ texture.id ] = pattern;\n\n\t\t}\n\n\t\tif ( pattern.canvas !== undefined ) {\n\n\t\t\tsetFillStyle( pattern.canvas );\n\n\t\t} else {\n\n\t\t\tsetFillStyle( 'rgba( 0, 0, 0, 1)' );\n\t\t\t_context.fill();\n\t\t\treturn;\n\n\t\t}\n\n\t\t// http://extremelysatisfactorytotalitarianism.com/blog/?p=2120\n\n\t\tvar a, b, c, d, e, f, det, idet,\n\t\toffsetX = texture.offset.x / texture.repeat.x,\n\t\toffsetY = texture.offset.y / texture.repeat.y,\n\t\twidth = texture.image.width * texture.repeat.x,\n\t\theight = texture.image.height * texture.repeat.y;\n\n\t\tu0 = ( u0 + offsetX ) * width;\n\t\tv0 = ( v0 + offsetY ) * height;\n\n\t\tu1 = ( u1 + offsetX ) * width;\n\t\tv1 = ( v1 + offsetY ) * height;\n\n\t\tu2 = ( u2 + offsetX ) * width;\n\t\tv2 = ( v2 + offsetY ) * height;\n\n\t\tx1 -= x0; y1 -= y0;\n\t\tx2 -= x0; y2 -= y0;\n\n\t\tu1 -= u0; v1 -= v0;\n\t\tu2 -= u0; v2 -= v0;\n\n\t\tdet = u1 * v2 - u2 * v1;\n\n\t\tif ( det === 0 ) return;\n\n\t\tidet = 1 / det;\n\n\t\ta = ( v2 * x1 - v1 * x2 ) * idet;\n\t\tb = ( v2 * y1 - v1 * y2 ) * idet;\n\t\tc = ( u1 * x2 - u2 * x1 ) * idet;\n\t\td = ( u1 * y2 - u2 * y1 ) * idet;\n\n\t\te = x0 - a * u0 - c * v0;\n\t\tf = y0 - b * u0 - d * v0;\n\n\t\t_context.save();\n\t\t_context.transform( a, b, c, d, e, f );\n\t\t_context.fill();\n\t\t_context.restore();\n\n\t}\n\n\tfunction clipImage( x0, y0, x1, y1, x2, y2, u0, v0, u1, v1, u2, v2, image ) {\n\n\t\t// http://extremelysatisfactorytotalitarianism.com/blog/?p=2120\n\n\t\tvar a, b, c, d, e, f, det, idet,\n\t\twidth = image.width - 1,\n\t\theight = image.height - 1;\n\n\t\tu0 *= width; v0 *= height;\n\t\tu1 *= width; v1 *= height;\n\t\tu2 *= width; v2 *= height;\n\n\t\tx1 -= x0; y1 -= y0;\n\t\tx2 -= x0; y2 -= y0;\n\n\t\tu1 -= u0; v1 -= v0;\n\t\tu2 -= u0; v2 -= v0;\n\n\t\tdet = u1 * v2 - u2 * v1;\n\n\t\tidet = 1 / det;\n\n\t\ta = ( v2 * x1 - v1 * x2 ) * idet;\n\t\tb = ( v2 * y1 - v1 * y2 ) * idet;\n\t\tc = ( u1 * x2 - u2 * x1 ) * idet;\n\t\td = ( u1 * y2 - u2 * y1 ) * idet;\n\n\t\te = x0 - a * u0 - c * v0;\n\t\tf = y0 - b * u0 - d * v0;\n\n\t\t_context.save();\n\t\t_context.transform( a, b, c, d, e, f );\n\t\t_context.clip();\n\t\t_context.drawImage( image, 0, 0 );\n\t\t_context.restore();\n\n\t}\n\n\t// Hide anti-alias gaps\n\n\tfunction expand( v1, v2, pixels ) {\n\n\t\tvar x = v2.x - v1.x, y = v2.y - v1.y,\n\t\tdet = x * x + y * y, idet;\n\n\t\tif ( det === 0 ) return;\n\n\t\tidet = pixels / Math.sqrt( det );\n\n\t\tx *= idet; y *= idet;\n\n\t\tv2.x += x; v2.y += y;\n\t\tv1.x -= x; v1.y -= y;\n\n\t}\n\n\t// Context cached methods.\n\n\tfunction setOpacity( value ) {\n\n\t\tif ( _contextGlobalAlpha !== value ) {\n\n\t\t\t_context.globalAlpha = value;\n\t\t\t_contextGlobalAlpha = value;\n\n\t\t}\n\n\t}\n\n\tfunction setBlending( value ) {\n\n\t\tif ( _contextGlobalCompositeOperation !== value ) {\n\n\t\t\tif ( value === THREE.NormalBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'source-over';\n\n\t\t\t} else if ( value === THREE.AdditiveBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'lighter';\n\n\t\t\t} else if ( value === THREE.SubtractiveBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'darker';\n\n\t\t\t} else if ( value === THREE.MultiplyBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'multiply';\n\n\t\t\t}\n\n\t\t\t_contextGlobalCompositeOperation = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineWidth( value ) {\n\n\t\tif ( _contextLineWidth !== value ) {\n\n\t\t\t_context.lineWidth = value;\n\t\t\t_contextLineWidth = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineCap( value ) {\n\n\t\t// \"butt\", \"round\", \"square\"\n\n\t\tif ( _contextLineCap !== value ) {\n\n\t\t\t_context.lineCap = value;\n\t\t\t_contextLineCap = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineJoin( value ) {\n\n\t\t// \"round\", \"bevel\", \"miter\"\n\n\t\tif ( _contextLineJoin !== value ) {\n\n\t\t\t_context.lineJoin = value;\n\t\t\t_contextLineJoin = value;\n\n\t\t}\n\n\t}\n\n\tfunction setStrokeStyle( value ) {\n\n\t\tif ( _contextStrokeStyle !== value ) {\n\n\t\t\t_context.strokeStyle = value;\n\t\t\t_contextStrokeStyle = value;\n\n\t\t}\n\n\t}\n\n\tfunction setFillStyle( value ) {\n\n\t\tif ( _contextFillStyle !== value ) {\n\n\t\t\t_context.fillStyle = value;\n\t\t\t_contextFillStyle = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineDash( value ) {\n\n\t\tif ( _contextLineDash.length !== value.length ) {\n\n\t\t\t_context.setLineDash( value );\n\t\t\t_contextLineDash = value;\n\n\t\t}\n\n\t}\n\n};\n"},981:function(t,exports){t.exports="/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author julianwa / https://github.com/julianwa\n */\n\nTHREE.RenderableObject = function () {\n\n\tthis.id = 0;\n\n\tthis.object = null;\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableFace = function () {\n\n\tthis.id = 0;\n\n\tthis.v1 = new THREE.RenderableVertex();\n\tthis.v2 = new THREE.RenderableVertex();\n\tthis.v3 = new THREE.RenderableVertex();\n\n\tthis.normalModel = new THREE.Vector3();\n\n\tthis.vertexNormalsModel = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];\n\tthis.vertexNormalsLength = 0;\n\n\tthis.color = new THREE.Color();\n\tthis.material = null;\n\tthis.uvs = [ new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() ];\n\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableVertex = function () {\n\n\tthis.position = new THREE.Vector3();\n\tthis.positionWorld = new THREE.Vector3();\n\tthis.positionScreen = new THREE.Vector4();\n\n\tthis.visible = true;\n\n};\n\nTHREE.RenderableVertex.prototype.copy = function ( vertex ) {\n\n\tthis.positionWorld.copy( vertex.positionWorld );\n\tthis.positionScreen.copy( vertex.positionScreen );\n\n};\n\n//\n\nTHREE.RenderableLine = function () {\n\n\tthis.id = 0;\n\n\tthis.v1 = new THREE.RenderableVertex();\n\tthis.v2 = new THREE.RenderableVertex();\n\n\tthis.vertexColors = [ new THREE.Color(), new THREE.Color() ];\n\tthis.material = null;\n\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableSprite = function () {\n\n\tthis.id = 0;\n\n\tthis.object = null;\n\n\tthis.x = 0;\n\tthis.y = 0;\n\tthis.z = 0;\n\n\tthis.rotation = 0;\n\tthis.scale = new THREE.Vector2();\n\n\tthis.material = null;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.Projector = function () {\n\n\tvar _object, _objectCount, _objectPool = [], _objectPoolLength = 0,\n\t_vertex, _vertexCount, _vertexPool = [], _vertexPoolLength = 0,\n\t_face, _faceCount, _facePool = [], _facePoolLength = 0,\n\t_line, _lineCount, _linePool = [], _linePoolLength = 0,\n\t_sprite, _spriteCount, _spritePool = [], _spritePoolLength = 0,\n\n\t_renderData = { objects: [], lights: [], elements: [] },\n\n\t_vector3 = new THREE.Vector3(),\n\t_vector4 = new THREE.Vector4(),\n\n\t_clipBox = new THREE.Box3( new THREE.Vector3( - 1, - 1, - 1 ), new THREE.Vector3( 1, 1, 1 ) ),\n\t_boundingBox = new THREE.Box3(),\n\t_points3 = new Array( 3 ),\n\t_points4 = new Array( 4 ),\n\n\t_viewMatrix = new THREE.Matrix4(),\n\t_viewProjectionMatrix = new THREE.Matrix4(),\n\n\t_modelMatrix,\n\t_modelViewProjectionMatrix = new THREE.Matrix4(),\n\n\t_normalMatrix = new THREE.Matrix3(),\n\n\t_frustum = new THREE.Frustum(),\n\n\t_clippedVertex1PositionScreen = new THREE.Vector4(),\n\t_clippedVertex2PositionScreen = new THREE.Vector4();\n\n\t//\n\n\tthis.projectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n\t\tvector.project( camera );\n\n\t};\n\n\tthis.unprojectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n\t\tvector.unproject( camera );\n\n\t};\n\n\tthis.pickingRay = function ( vector, camera ) {\n\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\n\n\t};\n\n\t//\n\n\tvar RenderList = function () {\n\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\tvar object = null;\n\t\tvar material = null;\n\n\t\tvar normalMatrix = new THREE.Matrix3();\n\n\t\tfunction setObject( value ) {\n\n\t\t\tobject = value;\n\t\t\tmaterial = object.material;\n\n\t\t\tnormalMatrix.getNormalMatrix( object.matrixWorld );\n\n\t\t\tnormals.length = 0;\n\t\t\tuvs.length = 0;\n\n\t\t}\n\n\t\tfunction projectVertex( vertex ) {\n\n\t\t\tvar position = vertex.position;\n\t\t\tvar positionWorld = vertex.positionWorld;\n\t\t\tvar positionScreen = vertex.positionScreen;\n\n\t\t\tpositionWorld.copy( position ).applyMatrix4( _modelMatrix );\n\t\t\tpositionScreen.copy( positionWorld ).applyMatrix4( _viewProjectionMatrix );\n\n\t\t\tvar invW = 1 / positionScreen.w;\n\n\t\t\tpositionScreen.x *= invW;\n\t\t\tpositionScreen.y *= invW;\n\t\t\tpositionScreen.z *= invW;\n\n\t\t\tvertex.visible = positionScreen.x >= - 1 && positionScreen.x <= 1 &&\n\t\t\t\t\t positionScreen.y >= - 1 && positionScreen.y <= 1 &&\n\t\t\t\t\t positionScreen.z >= - 1 && positionScreen.z <= 1;\n\n\t\t}\n\n\t\tfunction pushVertex( x, y, z ) {\n\n\t\t\t_vertex = getNextVertexInPool();\n\t\t\t_vertex.position.set( x, y, z );\n\n\t\t\tprojectVertex( _vertex );\n\n\t\t}\n\n\t\tfunction pushNormal( x, y, z ) {\n\n\t\t\tnormals.push( x, y, z );\n\n\t\t}\n\n\t\tfunction pushUv( x, y ) {\n\n\t\t\tuvs.push( x, y );\n\n\t\t}\n\n\t\tfunction checkTriangleVisibility( v1, v2, v3 ) {\n\n\t\t\tif ( v1.visible === true || v2.visible === true || v3.visible === true ) return true;\n\n\t\t\t_points3[ 0 ] = v1.positionScreen;\n\t\t\t_points3[ 1 ] = v2.positionScreen;\n\t\t\t_points3[ 2 ] = v3.positionScreen;\n\n\t\t\treturn _clipBox.intersectsBox( _boundingBox.setFromPoints( _points3 ) );\n\n\t\t}\n\n\t\tfunction checkBackfaceCulling( v1, v2, v3 ) {\n\n\t\t\treturn ( ( v3.positionScreen.x - v1.positionScreen.x ) *\n\t\t\t\t    ( v2.positionScreen.y - v1.positionScreen.y ) -\n\t\t\t\t    ( v3.positionScreen.y - v1.positionScreen.y ) *\n\t\t\t\t    ( v2.positionScreen.x - v1.positionScreen.x ) ) < 0;\n\n\t\t}\n\n\t\tfunction pushLine( a, b ) {\n\n\t\t\tvar v1 = _vertexPool[ a ];\n\t\t\tvar v2 = _vertexPool[ b ];\n\n\t\t\t_line = getNextLineInPool();\n\n\t\t\t_line.id = object.id;\n\t\t\t_line.v1.copy( v1 );\n\t\t\t_line.v2.copy( v2 );\n\t\t\t_line.z = ( v1.positionScreen.z + v2.positionScreen.z ) / 2;\n\t\t\t_line.renderOrder = object.renderOrder;\n\n\t\t\t_line.material = object.material;\n\n\t\t\t_renderData.elements.push( _line );\n\n\t\t}\n\n\t\tfunction pushTriangle( a, b, c ) {\n\n\t\t\tvar v1 = _vertexPool[ a ];\n\t\t\tvar v2 = _vertexPool[ b ];\n\t\t\tvar v3 = _vertexPool[ c ];\n\n\t\t\tif ( checkTriangleVisibility( v1, v2, v3 ) === false ) return;\n\n\t\t\tif ( material.side === THREE.DoubleSide || checkBackfaceCulling( v1, v2, v3 ) === true ) {\n\n\t\t\t\t_face = getNextFaceInPool();\n\n\t\t\t\t_face.id = object.id;\n\t\t\t\t_face.v1.copy( v1 );\n\t\t\t\t_face.v2.copy( v2 );\n\t\t\t\t_face.v3.copy( v3 );\n\t\t\t\t_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\t\t\t\t_face.renderOrder = object.renderOrder;\n\n\t\t\t\t// use first vertex normal as face normal\n\n\t\t\t\t_face.normalModel.fromArray( normals, a * 3 );\n\t\t\t\t_face.normalModel.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\tfor ( var i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tvar normal = _face.vertexNormalsModel[ i ];\n\t\t\t\t\tnormal.fromArray( normals, arguments[ i ] * 3 );\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t\tvar uv = _face.uvs[ i ];\n\t\t\t\t\tuv.fromArray( uvs, arguments[ i ] * 2 );\n\n\t\t\t\t}\n\n\t\t\t\t_face.vertexNormalsLength = 3;\n\n\t\t\t\t_face.material = object.material;\n\n\t\t\t\t_renderData.elements.push( _face );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\tsetObject: setObject,\n\t\t\tprojectVertex: projectVertex,\n\t\t\tcheckTriangleVisibility: checkTriangleVisibility,\n\t\t\tcheckBackfaceCulling: checkBackfaceCulling,\n\t\t\tpushVertex: pushVertex,\n\t\t\tpushNormal: pushNormal,\n\t\t\tpushUv: pushUv,\n\t\t\tpushLine: pushLine,\n\t\t\tpushTriangle: pushTriangle\n\t\t}\n\n\t};\n\n\tvar renderList = new RenderList();\n\n\tthis.projectScene = function ( scene, camera, sortObjects, sortElements ) {\n\n\t\t_faceCount = 0;\n\t\t_lineCount = 0;\n\t\t_spriteCount = 0;\n\n\t\t_renderData.elements.length = 0;\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t_viewMatrix.copy( camera.matrixWorldInverse.getInverse( camera.matrixWorld ) );\n\t\t_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );\n\n\t\t_frustum.setFromMatrix( _viewProjectionMatrix );\n\n\t\t//\n\n\t\t_objectCount = 0;\n\n\t\t_renderData.objects.length = 0;\n\t\t_renderData.lights.length = 0;\n\n\t\tfunction addObject( object ) {\n\n\t\t\t_object = getNextObjectInPool();\n\t\t\t_object.id = object.id;\n\t\t\t_object.object = object;\n\n\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t\t_vector3.applyProjection( _viewProjectionMatrix );\n\t\t\t_object.z = _vector3.z;\n\t\t\t_object.renderOrder = object.renderOrder;\n\n\t\t\t_renderData.objects.push( _object );\n\n\t\t}\n\n\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\tif ( object instanceof THREE.Light ) {\n\n\t\t\t\t_renderData.lights.push( object );\n\n\t\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line ) {\n\n\t\t\t\tif ( object.material.visible === false ) return;\n\t\t\t\tif ( object.frustumCulled === true && _frustum.intersectsObject( object ) === false ) return;\n\n\t\t\t\taddObject( object );\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\tif ( object.material.visible === false ) return;\n\t\t\t\tif ( object.frustumCulled === true && _frustum.intersectsSprite( object ) === false ) return;\n\n\t\t\t\taddObject( object );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( sortObjects === true ) {\n\n\t\t\t_renderData.objects.sort( painterSort );\n\n\t\t}\n\n\t\t//\n\n\t\tfor ( var o = 0, ol = _renderData.objects.length; o < ol; o ++ ) {\n\n\t\t\tvar object = _renderData.objects[ o ].object;\n\t\t\tvar geometry = object.geometry;\n\n\t\t\trenderList.setObject( object );\n\n\t\t\t_modelMatrix = object.matrixWorld;\n\n\t\t\t_vertexCount = 0;\n\n\t\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tif ( attributes.position === undefined ) continue;\n\n\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\trenderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.normal !== undefined ) {\n\n\t\t\t\t\t\tvar normals = attributes.normal.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = normals.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushNormal( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.uv !== undefined ) {\n\n\t\t\t\t\t\tvar uvs = attributes.uv.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = uvs.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\t\trenderList.pushUv( uvs[ i ], uvs[ i + 1 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\t\tvar indices = geometry.index.array;\n\n\t\t\t\t\t\tif ( groups.length > 0 ) {\n\n\t\t\t\t\t\t\tfor ( var o = 0; o < groups.length; o ++ ) {\n\n\t\t\t\t\t\t\t\tvar group = groups[ o ];\n\n\t\t\t\t\t\t\t\tfor ( var i = group.start, l = group.start + group.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\t\trenderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushTriangle( i, i + 1, i + 2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\t\tvar faces = geometry.faces;\n\t\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\n\t\t\t\t\t_normalMatrix.getNormalMatrix( _modelMatrix );\n\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tvar isFaceMaterial = material instanceof THREE.MultiMaterial;\n\t\t\t\t\tvar objectMaterials = isFaceMaterial === true ? object.material : null;\n\n\t\t\t\t\tfor ( var v = 0, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertices[ v ];\n\n\t\t\t\t\t\t_vector3.copy( vertex );\n\n\t\t\t\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\t\tvar morphInfluences = object.morphTargetInfluences;\n\n\t\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\t\tvar target = morphTargets[ t ];\n\t\t\t\t\t\t\t\tvar targetVertex = target.vertices[ v ];\n\n\t\t\t\t\t\t\t\t_vector3.x += ( targetVertex.x - vertex.x ) * influence;\n\t\t\t\t\t\t\t\t_vector3.y += ( targetVertex.y - vertex.y ) * influence;\n\t\t\t\t\t\t\t\t_vector3.z += ( targetVertex.z - vertex.z ) * influence;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trenderList.pushVertex( _vector3.x, _vector3.y, _vector3.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\tvar face = faces[ f ];\n\n\t\t\t\t\t\tmaterial = isFaceMaterial === true\n\t\t\t\t\t\t\t ? objectMaterials.materials[ face.materialIndex ]\n\t\t\t\t\t\t\t : object.material;\n\n\t\t\t\t\t\tif ( material === undefined ) continue;\n\n\t\t\t\t\t\tvar side = material.side;\n\n\t\t\t\t\t\tvar v1 = _vertexPool[ face.a ];\n\t\t\t\t\t\tvar v2 = _vertexPool[ face.b ];\n\t\t\t\t\t\tvar v3 = _vertexPool[ face.c ];\n\n\t\t\t\t\t\tif ( renderList.checkTriangleVisibility( v1, v2, v3 ) === false ) continue;\n\n\t\t\t\t\t\tvar visible = renderList.checkBackfaceCulling( v1, v2, v3 );\n\n\t\t\t\t\t\tif ( side !== THREE.DoubleSide ) {\n\n\t\t\t\t\t\t\tif ( side === THREE.FrontSide && visible === false ) continue;\n\t\t\t\t\t\t\tif ( side === THREE.BackSide && visible === true ) continue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face = getNextFaceInPool();\n\n\t\t\t\t\t\t_face.id = object.id;\n\t\t\t\t\t\t_face.v1.copy( v1 );\n\t\t\t\t\t\t_face.v2.copy( v2 );\n\t\t\t\t\t\t_face.v3.copy( v3 );\n\n\t\t\t\t\t\t_face.normalModel.copy( face.normal );\n\n\t\t\t\t\t\tif ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n\t\t\t\t\t\t\t_face.normalModel.negate();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.normalModel.applyMatrix3( _normalMatrix ).normalize();\n\n\t\t\t\t\t\tvar faceVertexNormals = face.vertexNormals;\n\n\t\t\t\t\t\tfor ( var n = 0, nl = Math.min( faceVertexNormals.length, 3 ); n < nl; n ++ ) {\n\n\t\t\t\t\t\t\tvar normalModel = _face.vertexNormalsModel[ n ];\n\t\t\t\t\t\t\tnormalModel.copy( faceVertexNormals[ n ] );\n\n\t\t\t\t\t\t\tif ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n\t\t\t\t\t\t\t\tnormalModel.negate();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnormalModel.applyMatrix3( _normalMatrix ).normalize();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.vertexNormalsLength = faceVertexNormals.length;\n\n\t\t\t\t\t\tvar vertexUvs = faceVertexUvs[ f ];\n\n\t\t\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\t\t\tfor ( var u = 0; u < 3; u ++ ) {\n\n\t\t\t\t\t\t\t\t_face.uvs[ u ].copy( vertexUvs[ u ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.color = face.color;\n\t\t\t\t\t\t_face.material = material;\n\n\t\t\t\t\t\t_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\t\t\t\t\t\t_face.renderOrder = object.renderOrder;\n\n\t\t\t\t\t\t_renderData.elements.push( _face );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\n\t\t\t\t\tif ( attributes.position !== undefined ) {\n\n\t\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\t\t\tvar indices = geometry.index.array;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushLine( indices[ i ], indices[ i + 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar step = object instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = ( positions.length / 3 ) - 1; i < l; i += step ) {\n\n\t\t\t\t\t\t\t\trenderList.pushLine( i, i + 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\t_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );\n\n\t\t\t\t\tvar vertices = object.geometry.vertices;\n\n\t\t\t\t\tif ( vertices.length === 0 ) continue;\n\n\t\t\t\t\tv1 = getNextVertexInPool();\n\t\t\t\t\tv1.positionScreen.copy( vertices[ 0 ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\tvar step = object instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\t\t\tfor ( var v = 1, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tv1 = getNextVertexInPool();\n\t\t\t\t\t\tv1.positionScreen.copy( vertices[ v ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\t\tif ( ( v + 1 ) % step > 0 ) continue;\n\n\t\t\t\t\t\tv2 = _vertexPool[ _vertexCount - 2 ];\n\n\t\t\t\t\t\t_clippedVertex1PositionScreen.copy( v1.positionScreen );\n\t\t\t\t\t\t_clippedVertex2PositionScreen.copy( v2.positionScreen );\n\n\t\t\t\t\t\tif ( clipLine( _clippedVertex1PositionScreen, _clippedVertex2PositionScreen ) === true ) {\n\n\t\t\t\t\t\t\t// Perform the perspective divide\n\t\t\t\t\t\t\t_clippedVertex1PositionScreen.multiplyScalar( 1 / _clippedVertex1PositionScreen.w );\n\t\t\t\t\t\t\t_clippedVertex2PositionScreen.multiplyScalar( 1 / _clippedVertex2PositionScreen.w );\n\n\t\t\t\t\t\t\t_line = getNextLineInPool();\n\n\t\t\t\t\t\t\t_line.id = object.id;\n\t\t\t\t\t\t\t_line.v1.positionScreen.copy( _clippedVertex1PositionScreen );\n\t\t\t\t\t\t\t_line.v2.positionScreen.copy( _clippedVertex2PositionScreen );\n\n\t\t\t\t\t\t\t_line.z = Math.max( _clippedVertex1PositionScreen.z, _clippedVertex2PositionScreen.z );\n\t\t\t\t\t\t\t_line.renderOrder = object.renderOrder;\n\n\t\t\t\t\t\t\t_line.material = object.material;\n\n\t\t\t\t\t\t\tif ( object.material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\t\t\t\t_line.vertexColors[ 0 ].copy( object.geometry.colors[ v ] );\n\t\t\t\t\t\t\t\t_line.vertexColors[ 1 ].copy( object.geometry.colors[ v - 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_renderData.elements.push( _line );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\t_vector4.set( _modelMatrix.elements[ 12 ], _modelMatrix.elements[ 13 ], _modelMatrix.elements[ 14 ], 1 );\n\t\t\t\t_vector4.applyMatrix4( _viewProjectionMatrix );\n\n\t\t\t\tvar invW = 1 / _vector4.w;\n\n\t\t\t\t_vector4.z *= invW;\n\n\t\t\t\tif ( _vector4.z >= - 1 && _vector4.z <= 1 ) {\n\n\t\t\t\t\t_sprite = getNextSpriteInPool();\n\t\t\t\t\t_sprite.id = object.id;\n\t\t\t\t\t_sprite.x = _vector4.x * invW;\n\t\t\t\t\t_sprite.y = _vector4.y * invW;\n\t\t\t\t\t_sprite.z = _vector4.z;\n\t\t\t\t\t_sprite.renderOrder = object.renderOrder;\n\t\t\t\t\t_sprite.object = object;\n\n\t\t\t\t\t_sprite.rotation = object.rotation;\n\n\t\t\t\t\t_sprite.scale.x = object.scale.x * Math.abs( _sprite.x - ( _vector4.x + camera.projectionMatrix.elements[ 0 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 12 ] ) );\n\t\t\t\t\t_sprite.scale.y = object.scale.y * Math.abs( _sprite.y - ( _vector4.y + camera.projectionMatrix.elements[ 5 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 13 ] ) );\n\n\t\t\t\t\t_sprite.material = object.material;\n\n\t\t\t\t\t_renderData.elements.push( _sprite );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( sortElements === true ) {\n\n\t\t\t_renderData.elements.sort( painterSort );\n\n\t\t}\n\n\t\treturn _renderData;\n\n\t};\n\n\t// Pools\n\n\tfunction getNextObjectInPool() {\n\n\t\tif ( _objectCount === _objectPoolLength ) {\n\n\t\t\tvar object = new THREE.RenderableObject();\n\t\t\t_objectPool.push( object );\n\t\t\t_objectPoolLength ++;\n\t\t\t_objectCount ++;\n\t\t\treturn object;\n\n\t\t}\n\n\t\treturn _objectPool[ _objectCount ++ ];\n\n\t}\n\n\tfunction getNextVertexInPool() {\n\n\t\tif ( _vertexCount === _vertexPoolLength ) {\n\n\t\t\tvar vertex = new THREE.RenderableVertex();\n\t\t\t_vertexPool.push( vertex );\n\t\t\t_vertexPoolLength ++;\n\t\t\t_vertexCount ++;\n\t\t\treturn vertex;\n\n\t\t}\n\n\t\treturn _vertexPool[ _vertexCount ++ ];\n\n\t}\n\n\tfunction getNextFaceInPool() {\n\n\t\tif ( _faceCount === _facePoolLength ) {\n\n\t\t\tvar face = new THREE.RenderableFace();\n\t\t\t_facePool.push( face );\n\t\t\t_facePoolLength ++;\n\t\t\t_faceCount ++;\n\t\t\treturn face;\n\n\t\t}\n\n\t\treturn _facePool[ _faceCount ++ ];\n\n\n\t}\n\n\tfunction getNextLineInPool() {\n\n\t\tif ( _lineCount === _linePoolLength ) {\n\n\t\t\tvar line = new THREE.RenderableLine();\n\t\t\t_linePool.push( line );\n\t\t\t_linePoolLength ++;\n\t\t\t_lineCount ++;\n\t\t\treturn line;\n\n\t\t}\n\n\t\treturn _linePool[ _lineCount ++ ];\n\n\t}\n\n\tfunction getNextSpriteInPool() {\n\n\t\tif ( _spriteCount === _spritePoolLength ) {\n\n\t\t\tvar sprite = new THREE.RenderableSprite();\n\t\t\t_spritePool.push( sprite );\n\t\t\t_spritePoolLength ++;\n\t\t\t_spriteCount ++;\n\t\t\treturn sprite;\n\n\t\t}\n\n\t\treturn _spritePool[ _spriteCount ++ ];\n\n\t}\n\n\t//\n\n\tfunction painterSort( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else if ( a.id !== b.id ) {\n\n\t\t\treturn a.id - b.id;\n\n\t\t} else {\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t}\n\n\tfunction clipLine( s1, s2 ) {\n\n\t\tvar alpha1 = 0, alpha2 = 1,\n\n\t\t// Calculate the boundary coordinate of each vertex for the near and far clip planes,\n\t\t// Z = -1 and Z = +1, respectively.\n\t\tbc1near =  s1.z + s1.w,\n\t\tbc2near =  s2.z + s2.w,\n\t\tbc1far =  - s1.z + s1.w,\n\t\tbc2far =  - s2.z + s2.w;\n\n\t\tif ( bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0 ) {\n\n\t\t\t// Both vertices lie entirely within all clip planes.\n\t\t\treturn true;\n\n\t\t} else if ( ( bc1near < 0 && bc2near < 0 ) || ( bc1far < 0 && bc2far < 0 ) ) {\n\n\t\t\t// Both vertices lie entirely outside one of the clip planes.\n\t\t\treturn false;\n\n\t\t} else {\n\n\t\t\t// The line segment spans at least one clip plane.\n\n\t\t\tif ( bc1near < 0 ) {\n\n\t\t\t\t// v1 lies outside the near plane, v2 inside\n\t\t\t\talpha1 = Math.max( alpha1, bc1near / ( bc1near - bc2near ) );\n\n\t\t\t} else if ( bc2near < 0 ) {\n\n\t\t\t\t// v2 lies outside the near plane, v1 inside\n\t\t\t\talpha2 = Math.min( alpha2, bc1near / ( bc1near - bc2near ) );\n\n\t\t\t}\n\n\t\t\tif ( bc1far < 0 ) {\n\n\t\t\t\t// v1 lies outside the far plane, v2 inside\n\t\t\t\talpha1 = Math.max( alpha1, bc1far / ( bc1far - bc2far ) );\n\n\t\t\t} else if ( bc2far < 0 ) {\n\n\t\t\t\t// v2 lies outside the far plane, v2 inside\n\t\t\t\talpha2 = Math.min( alpha2, bc1far / ( bc1far - bc2far ) );\n\n\t\t\t}\n\n\t\t\tif ( alpha2 < alpha1 ) {\n\n\t\t\t\t// The line segment spans two boundaries, but is outside both of them.\n\t\t\t\t// (This can't happen when we're only clipping against just near/far but good\n\t\t\t\t//  to leave the check here for future usage if other clip planes are added.)\n\t\t\t\treturn false;\n\n\t\t\t} else {\n\n\t\t\t\t// Update the s1 and s2 vertices to match the clipped line segment.\n\t\t\t\ts1.lerp( s2, alpha1 );\n\t\t\t\ts2.lerp( s1, 1 - alpha2 );\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n";
},982:function(t,exports){t.exports="\\above\n\\abovecaptionskip\n\\abovedisplayshortskip\n\\abovedisplayskip\n\\abovewithdelims\n\\abstractname{name}\n\\accent\n\\active\n\\acute{a}\n\\addcontentsline{file}{secunit}{entry}\n\\addpenalty\n\\addto\n\\addtocontents{file}{text}\n\\addtocounter{counter}{value}\n\\addtolength{\\gnat}{length}\n\\addtoversion\n\\addvspace{length}\n\\adjdemerits\n\\advance\n\\advancepageno\n\\afterassignment\n\\aftergroup\n\\aleph\n\\allowbreak\n\\allowhyphens\n\\alpha\n\\alph{counter}\n\\Alph{counter}\n\\amalg\n\\and\n\\angle\n\\annotations\n\\appendix\n\\appendixname\n\\approx\n\\arabic{counter}\n\\arccos\n\\arcsin\n\\arctan\n\\arg\n\\arraycolsep\n\\arrayrulewidth\n\\arraystretch\n\\arrowvert\n\\Arrowvert\n\\ast\n\\asymp\n\\AtBeginDocument{code}\n\\AtEndDocument{code}\n\\AtEndOfClass{code}\n\\AtEndOfPackage{code}\n\\atop\n\\atopwithdelims\n\\author{names}\n\\backslash\n\\badness\n\\bar{a}\n\\baselineskip\n\\baselinestretch\n\\batchmode\n\\begin{}\n\\begin{abstract}\n\\begin{alltt}\n\\begin{appendix}\n\\begin{array}{cols}\n\\begin{array}[pos]{cols}\n\\begin{center}\n\\begin{description}\\item\n\\begin{displaymath}\n\\begin{document}\n\\begin{enumerate}\\item\n\\begin{eqnarray}\n\\begin{eqnarray*}\n\\begin{equation}\n\\begin{figure}\n\\begin{figure*}\n\\begin{figure}[placement]\n\\begin{figure*}[placement]\n\\begin{filecontents}\n\\begin{flushleft}\n\\begin{flushright}\n\\begin{fussypar}\n\\begingroup\n\\begin{itemize}\\item\n\\begin{list}{label}{spacing}\n\\begin{lrbox}\n\\begin{math}\n\\begin{minipage}[position]{width}\n\\begin{minipage}{width}\n\\begin{picture}(width,height)\n\\begin{picture}(width,height)(xoffset,yoffset)\n\\begin{quotation}\n\\begin{quote}\n\\begin{sageblock}\n\\begin{sagesilent}\n\\begin{sloppypar}\n\\begin{tabbing}\n\\begin{table}\n\\begin{table*}\n\\begin{table}[placement]\n\\begin{table*}[placement]\n\\begin{tabular}{cols}\n\\begin{tabular}[pos]{cols}\n\\begin{tabular*}{width}{cols}\n\\begin{tabular*}{width}[pos]{cols}\n\\begin{thebibliography}{widestlabel}\n\\begin{theindex}\n\\begin{theorem}\n\\begin{theorem}[optional]\n\\begin{titlepage}\n\\begin{trivlist}\n\\begin{verbatim}\n\\begin{verbatim*}\n\\begin{verse}\n\\belowcaptionskip\n\\belowdisplayshortskip\n\\belowdisplayskip\n\\beta\n\\bezier{n}(x1,y1)(x2,y2)(x3,y3)\n\\bfseries\n\\bgroup\n\\bibitem{citekey}\n\\bibitem[label]{citekey}\n\\bibliography{file}\n\\bibliographystyle{style}\n\\big\n\\Big\n\\bigcap\n\\bigcirc\n\\bigcup\n\\bigg\n\\Bigg\n\\biggl\n\\Biggl\n\\biggm\n\\Biggm\n\\biggr\n\\Biggr\n\\bigl\n\\Bigl\n\\bigm\n\\Bigm\n\\bigodot\n\\bigoplus\n\\bigotimes\n\\bigr\n\\Bigr\n\\bigskip\n\\bigskipamount\n\\bigsqcup\n\\bigtriangledown\n\\bigtriangleup\n\\biguplus\n\\bigvee\n\\bigwedge\n\\binoppenalty\n\\boldmath\n\\bordermatrix\n\\bot\n\\botfigrule\n\\botmark\n\\bottomfraction\n\\bottomnumber\n\\box\n\\boxmaxdepth\n\\bracevert\n\\breve{a}\n\\brokenpenalty\n\\buildrel\n\\bullet\n\\bye\n\\cal\n\\cap\n\\caption[short]{title}\n\\caption{title}\n\\cases\n\\catcode\n\\cdot\n\\cdots\n\\centering\n\\centerline{text}\n\\chaptermark{code}\n\\chaptername{name}\n\\chapter[short]{title}\n\\chapter{title}\n\\chapter*{title}\n\\char\n\\chardef\n\\check{a}\n\\CheckCommand{cmd}[args]{def}\n\\CheckCommand{cmd}[args][default]{def}\n\\CheckCommand{cmd}{def}\n\\chi\n\\choose\n\\circ\n\\circle{diameter}\n\\circle*{diameter}\n\\cite{keylist}\n\\cite[text]{keylist}\n\\cleaders\n\\cleardoublepage\n\\clearpage\n\\cleartabs\n\\cline{i-j}\n\\closein\n\\closeout\n\\closing\n\\clubpenalty\n\\clubsuit\n\\columns\n\\columnsep\n\\columnseprule\n\\columnwidth\n\\cong\n\\contentsline{type}{text}{page}\n\\contentsname{name}\n\\coprod\n\\copy\n\\copyright\n\\cos\n\\cosh\n\\cot\n\\coth\n\\count\n\\countdef\n\\crcr\n\\csc\n\\csname\n\\cup\n\\CurrentOption\n\\dagger\n\\danger\n\\dash\n\\dashbox{dashlength}(width,height)[position]{text}\n\\dashbox{dashlength}(width,height){text}\n\\dashv\n\\date{text}\n\\day\n\\dblfigrule\n\\dblfloatpagefraction\n\\dblfloatsep\n\\dbltextfloatsep\n\\dbltopfraction\n\\dbltopnumber\n\\ddagger\n\\ddot{a}\n\\ddots\n\\deadcycles\n\\DeclareOption*{code}\n\\DeclareOption{option}{code}\n\\DeclareRobustCommand\n\\def\n\\defaulthyphenchar\n\\defaultscriptratio\n\\defaultscriptscriptratio\n\\defaultskewchar\n\\deffootnote[width}{indention}{par indention}{definition}\n\\deg\n\\delcode\n\\delimiter\n\\delimiterfactor\n\\delimitershortfall\n\\delta\n\\Delta\n\\depth\n\\descriptionlabel{code}\n\\det\n\\diamond\n\\diamondsuit\n\\dim\n\\dimen\n\\dimendef\n\\discretionary\n\\displayindent\n\\displaylimits\n\\displaylines\n\\displaystyle\n\\displaywidowpenalty\n\\displaywidth\n\\div\n\\divide\n\\documentclass[options]{style}\n\\documentclass{style}\n\\documentstyle[options]{style}\n\\documentstyle{style}\n\\dot{a}\n\\doteq\n\\dotfill\n\\dots\n\\dot{x}\n\\doublehyphendemerits\n\\doublerulesep\n\\downarrow\n\\Downarrow\n\\edef\n\\egroup\n\\eject\n\\ell\n\\else\n\\emergencystretch\n\\emph{text}\n\\empty\n\\emptyset\n\\end\n\\end{}\n\\end{abstract}\n\\end{alltt}\n\\end{appendix}\n\\end{array}\n\\end{center}\n\\endcsname\n\\end{description}\n\\end{displaymath}\n\\end{document}\n\\end{enumerate}\n\\end{eqnarray}\n\\end{eqnarray*}\n\\end{equation}\n\\end{figure}\n\\end{figure*}\n\\end{filecontents}\n\\end{flushleft}\n\\end{flushright}\n\\end{fussypar}\n\\endgraf\n\\endgroup\n\\endinput\n\\end{itemize}\n\\endlinechar\n\\end{list}\n\\end{lrbox}\n\\end{math}\n\\end{minipage}\n\\end{picture}\n\\end{quotation}\n\\end{quote}\n\\end{sageblock}\n\\end{sagesilent}\n\\end{sloppypar}\n\\end{tabbing}\n\\end{table}\n\\end{table*}\n\\end{tabular}\n\\end{tabular*}\n\\end{thebibliography}\n\\end{theindex}\n\\end{theorem}\n\\end{titlepage}\n\\end{trivlist}\n\\end{verbatim}\n\\end{verbatim*}\n\\end{verse}\n\\enlargethispage{size}\n\\enlargethispage*{size}\n\\enskip\n\\enspace\n\\ensuremath{text}\n\\epsilon\n\\eqalign\n\\eqalignno\n\\eqno\n\\equiv\n\\errhelp\n\\errmessage\n\\errorstopmode\n\\escapechar\n\\eta\n\\evensidemargin\n\\everycr\n\\everydisplay\n\\everyhbox\n\\everyjob\n\\everymath\n\\everypar\n\\everyvbox\n\\ExecuteOptions{optionlist}\n\\exhyphenpenalty\n\\exists\n\\exp\n\\expandafter\n\\extracolsep\n\\fam\n\\family\n\\fboxrule\n\\fboxsep\n\\fbox{text}\n\\figurename{name}\n\\fill\n\\finalhypendemerits\n\\firstmark\n\\flat\n\\floatingpenalty\n\\floatpagefraction\n\\floatsep\n\\flq\n\\flqq\n\\flushbottom\n\\fnsymbol{counter}\n\\folio\n\\font\n\\fontdimen\n\\fontencoding{enc}\n\\fontfamily{family}\n\\fontname\n\\fontseries{series}\n\\fontshape{shape}\n\\fontsize{size}{skip}\n\\fontsubfuzz\n\\footheight\n\\footins\n\\footnote\n\\footnotemark\n\\footnotemark[number]\n\\footnote[number]{text}\n\\footnoterule\n\\footnotesep\n\\footnotesize\n\\footnote{text}\n\\footnotetext[number]{text}\n\\footnotetext{text}\n\\footskip\n\\forall\n\\frac{num}{den}\n\\framebox[width][position]{text}\n\\framebox[width]{text}\n\\framebox(xdimen,ydimen)[position]{text}\n\\framebox(xdimen,ydimen){text}\n\\frame{text}\n\\frenchspacing\n\\frown\n\\frq\n\\frqq\n\\fussy\n\\futurelet\n\\gamma\n\\Gamma\n\\gcd\n\\gdef\n\\ge\n\\geq\n\\gets\n\\gg\n\\global\n\\globaldefs\n\\glossaryentry{text}{pagenum}\n\\glossary{text}\n\\glq\n\\glqq\n\\grave{a}\n\\grq\n\\grqq\n\\halign\n\\hangafter\n\\hangindent\n\\hat{a}\n\\hbadness\n\\hbar\n\\hbox\n\\headheight\n\\headsep\n\\heartsuit\n\\height\n\\hfil\n\\hfill\n\\hfilneg\n\\hfuzz\n\\hline\n\\hlinefill\n\\hoffset\n\\hom\n\\hookleftarrow\n\\hookrightarrow\n\\hphantom\n\\hrule\n\\hrulefill\n\\hsize\n\\hskip\n\\hspace{length}\n\\hspace*{length}\n\\hss\n\\huge\n\\Huge\n\\hyphenation{words}\n\\hyphenchar\n\\hyphenpenalty\n\\if\n\\ifcase\n\\ifcat\n\\ifdim\n\\ifeof\n\\iffalse\n\\IfFileExists{file}{then}{else}\n\\ifhbox\n\\ifhmode\n\\ifinner\n\\ifmmode\n\\ifnum\n\\ifodd\n\\iftrue\n\\ifundefined\n\\ifvbox\n\\ifvmode\n\\ifvoid\n\\ifx\n\\ignorespaces\n\\Im\n\\imath\n\\immediate\n\\in\n\\include{file}\n\\includegraphics{name}\n\\includegraphics[options]{name}\n\\includeonly{filelist}\n\\indent\n\\index{entry}\n\\indexname{name}\n\\indexspace\n\\inf\n\\infty\n\\input{file}\n\\InputIfFileExists{file}{then}{else}\n\\inputlineno\n\\insert\n\\insertpenalties\n\\int\n\\interdisplaylinepenalty\n\\interfootnotelinepenalty\n\\interlinepenalty\n\\intextsep\n\\iota\n\\item\n\\itemindent\n\\item[label]\n\\itemsep\n\\iterate\n\\itshape\n\\jmath\n\\jobname\n\\joinrel\n\\kappa\n\\ker\n\\kern\n\\kill\n\\labelenumi\n\\labelitemi\n\\labelitemii\n\\labelitemiii\n\\labelitemiv\n\\label{key}\n\\labelsep\n\\labelwidth\n\\lambda\n\\Lambda\n\\langle\n\\language\n\\large\n\\Large\n\\LARGE\n\\lastbox\n\\lastkern\n\\lastpenalty\n\\lastskip\n\\LaTeX\n\\LaTeXe\n\\lbrace\n\\lbrack\n\\lccode\n\\lceil\n\\ldots\n\\le\n\\leaders\n\\leavevmode\n\\left\n\\left|\n\\left/\n\\left(\n\\left[\n\\left\\|\n\\leftarrow\n\\Leftarrow\n\\left\\backslash\n\\left\\downarrow\n\\left\\Downarrow\n\\lefteqn\n\\leftharpoondown\n\\leftharpoonup\n\\lefthyphenmin\n\\left\\langle\n\\left\\lbrace\n\\left\\lceil\n\\left\\lfloor\n\\leftmargin\n\\leftmargini\n\\leftmarginii\n\\leftmarginiii\n\\leftmarginiv\n\\leftmarginv\n\\leftmarginvi\n\\leftmark\n\\leftrightarrow\n\\Leftrightarrow\n\\leftskip\n\\left\\uparrow\n\\left\\Uparrow\n\\left\\updownarrow\n\\left\\Updownarrow\n\\leq\n\\leqno\n\\let\n\\lfloor\n\\lg\n\\lgroup\n\\lim\n\\liminf\n\\limits\n\\limsup\n\\line\n\\linebreak\n\\linebreak[number]\n\\linepenalty\n\\lineskip\n\\lineskiplimit\n\\lineskiplimits\n\\linethickness{dimension}\n\\linewidth\n\\line(xslope,yslope){length}\n\\listfigurename{name}\n\\listfiles\n\\listoffigures\n\\listoftables\n\\listparindent\n\\listtablename{name}\n\\ll\n\\llap\n\\lmoustache\n\\ln\n\\LoadClass{class}\n\\LoadClass{class}[release]\n\\LoadClass[optionlist]{class}\n\\LoadClass[optionlist]{class}[release]\n\\log\n\\long\n\\longleftarrow\n\\Longleftarrow\n\\longleftrightarrow\n\\Longleftrightarrow\n\\longmapsto\n\\longrightarrow\n\\Longrightarrow\n\\looseness\n\\lower\n\\lowercase\n\\mag\n\\magnification\n\\magstep\n\\makeatletter\n\\makeatother\n\\makebox(width,height)[position]{text}\n\\makebox(width,height){text}\n\\makebox[width][position]{text}\n\\makebox[width]{text}\n\\makeglossary\n\\makeindex\n\\makelabel\n\\makelabels{number}\n\\MakeLowercase{text}\n\\maketitle\n\\MakeUppercase{text}\n\\mapsto\n\\margin\n\\marginpar[left]{right}\n\\marginparpush\n\\marginpar{right}\n\\marginparsep\n\\marginparwidth\n\\mark\n\\markboth{lefthead}{righthead}\n\\markright{righthead}\n\\mathaccent\n\\mathbb{text}\n\\mathbf{text}\n\\mathbin\n\\mathcal{text}\n\\mathchar\n\\mathchardef\n\\mathchoice\n\\mathclose\n\\mathcode\n\\mathds{text}\n\\mathellipsis\n\\mathfrak{text}\n\\mathgroup\n\\mathinner\n\\mathit{text}\n\\mathnormal{text}\n\\mathop\n\\mathopen\n\\mathord\n\\mathpunct\n\\mathrel\n\\mathrm{text}\n\\mathscr\n\\mathsf{text}\n\\mathsterling\n\\mathstrut\n\\mathsurround\n\\mathtt{text}\n\\mathunderscore\n\\mathversion\n\\matrix\n\\max\n\\maxdeadcycles\n\\maxdepth\n\\maxdimen\n\\mbox{text}\n\\mdseries\n\\meaning\n\\medmuskip\n\\medskip\n\\medskipamount\n\\message\n\\mid\n\\min\n\\mkern\n\\models\n\\month\n\\moveleft\n\\moveright\n\\mp\n\\mskip\n\\mu\n\\multicolumn{cols}{pos}{text}\n\\multiply\n\\multiput(xcoord,ycoord)(xdelta,ydelta){copies}{object}\n\\multispan\n\\muskip\n\\muskipdef\n\\nabla\n\\natural\n\\nearrow\n\\NeedsTeXFormat{format}\n\\NeedsTeXFormat{format}[release]\n\\neg\n\\negthinspace\n\\neq\n\\newbox\n\\newcommand{cmd}[args]{def}\n\\newcommand{cmd}[args][default]{def}\n\\newcommand{cmd}{def}\n\\newcount\n\\newcounter{foo}\n\\newcounter{foo}[counter]\n\\newdimen\n\\newenvironment{nam}[args]{begdef}{enddef}\n\\newenvironment{nam}[args][default]{begdef}{enddef}\n\\newenvironment{nam}{begdef}{enddef}\n\\newfont{cmd}{fontname}\n\\newhelp\n\\newif\n\\newlabel\n\\newlength{\\length}\n\\newline\n\\newlinechar\n\\newmuskip\n\\newpage\n\\newread\n\\newsavebox{\\box}\n\\newskip\n\\newtheorem{envname}{caption}\n\\newtheorem{envname}{caption}[within]\n\\newtheorem{envname}[numberedlike]{caption}\n\\newtoks\n\\newwrite\n\\ni\n\\noalign\n\\nocite{keylist}\n\\nocorr\n\\nocorrlist{charlist}\n\\noexpand\n\\nofiles\n\\noindent\n\\nointerlineskip\n\\nolimits\n\\nolinebreak\n\\nolinebreak[number]\n\\nonfrenchspacing\n\\nonscript\n\\nonstopmode\n\\nonumber\n\\nopagebreak\n\\nopagebreak[number]\n\\nopagenumbers\n\\normalcolor\n\\normalfont\n\\normalmarginpar\n\\normalsize\n\\not\n\\notin\n\\nouppercase\n\\nu\n\\null\n\\nulldelimiterspace\n\\nullfont\n\\number\n\\nwarrow\n\\obeycr\n\\obeylines\n\\obeyspaces\n\\oddsidemargin\n\\odot\n\\offinterlineskip\n\\oint\n\\oldstylenums\n\\omega\n\\Omega\n\\ominus\n\\omit\n\\onecolumn\n\\openin\n\\openout\n\\oplus\n\\OptionNotUsed\n\\oslash\n\\otimes\n\\outer\n\\output\n\\outputpenalty\n\\oval(width,height)\n\\oval(width,height)[portion]\n\\over\n\\overbrace{text}\n\\overfullrule\n\\overleftarrow\n\\overline{text}\n\\overrightarrow\n\\overwithdelims\n\\PackageError{text}\n\\PackageInfo{text}\n\\PackageWarningNoLine{text}\n\\PackageWarning{text}\n\\pagebreak\n\\pagebreak[number]\n\\pagedepth\n\\pagefilllstretch\n\\pagefillstretch\n\\pagefilstretch\n\\pagegoal\n\\pageinsert\n\\pagename\n\\pageno\n\\pagenumbering{numstyle}\n\\pageref{key}\n\\pageshrink\n\\pagestretch\n\\pagestyle{option}\n\\pagetotal\n\\paperheight\n\\paperwidth\n\\par\n\\paragraphmark\n\\paragraph[short]{title}\n\\paragraph{title}\n\\paragraph*{title}\n\\parallel\n\\parbox[position]{width}{text}\n\\parbox{width}{text}\n\\parfillskip\n\\parindent\n\\parsep\n\\parshape\n\\parskip\n\\partial\n\\partname{name}\n\\partopsep\n\\part[short]{title}\n\\part{title}\n\\part*{title}\n\\PassOptionsToClass{optionlist}{class}\n\\PassOptionsToPackage{optionlist}{package}\n\\patterns\n\\pausing\n\\penalty\n\\perp\n\\phantom\n\\phi\n\\Phi\n\\pi\n\\Pi\n\\plus\n\\pm\n\\pmatrix\n\\poptabs\n\\postdisplaypenalty\n\\pounds\n\\Pr\n\\prec\n\\preceq\n\\predisplaypenalty\n\\predisplaysize\n\\pretolerance\n\\prevdepth\n\\prevgraf\n\\prime\n\\ProcessOptions\n\\ProcessOptions*\n\\proclaim\n\\prod\n\\propto\n\\protect\n\\providecommand{cmd}[args]{def}\n\\providecommand{cmd}[args][default]{def}\n\\providecommand{cmd}{def}\n\\ProvidesClass{name}\n\\ProvidesClass{name}[release]\n\\ProvidesFile{ma,e}\n\\ProvidesFile{name}{release}\n\\ProvidesPackage{name}\n\\ProvidesPackage{name}[release]\n\\psi\n\\Psi\n\\put(xcoord,ycoord){text}\n\\qquad\n\\quad\n\\radical\n\\raggedbottom\n\\raggedcenter\n\\raggedleft\n\\raggedright\n\\raise\n\\raisebox{distance}[extendabove][extendbelow]{text}\n\\raisebox{distance}[extendabove]{text}\n\\raisebox{distance}{text}\n\\rangle\n\\rbrace\n\\rbrack\n\\rceil\n\\Re\n\\read\n\\ref{key}\n\\refname{name}\n\\refstepcounter{counter}\n\\relax\n\\relpenalty\n\\removelastskip\n\\renewcommand{cmd}[args]{def}\n\\renewcommand{cmd}[args][default]{def}\n\\renewcommand{cmd}{def}\n\\renewenvironment{nam}[args]{begdef}{enddef}\n\\renewenvironment{nam}[args][default]{begdef}{enddef}\n\\renewenvironment{nam}{begdef}{enddef}\n\\repeat\n\\RequirePackage[optionlist]{package}\n\\RequirePackage[optionlist]{package}[release]\n\\RequirePackage{package}\n\\RequirePackage{package}[release]\n\\restorecr\n\\reversemarginpar\n\\rfloor\n\\rgroup\n\\rho\n\\right\n\\right|\n\\right/\n\\right)\n\\right]\n\\right\\|\n\\rightarrow\n\\Rightarrow\n\\right\\backslash\n\\right\\downarrow\n\\right\\Downarrow\n\\rightharpoondown\n\\rightharpoonup\n\\righthyphenmin\n\\rightleftharpoons\n\\rightmargin\n\\rightmark\n\\right\\rangle\n\\right\\rbrace\n\\right\\rceil\n\\right\\rfloor\n\\rightskip\n\\right\\uparrow\n\\right\\Uparrow\n\\right\\updownarrow\n\\right\\Updownarrow\n\\rlap\n\\rmfamily\n\\rmoustache\n\\roman{counter}\n\\Roman{counter}\n\\romannumeral\n\\rule[lift]{width}{thickness}\n\\rule{width}{thickness}\n\\sage\n\\samepage\n\\savebox{cmd}{text}\n\\savebox{cmd}[width][pos]{text}\n\\savebox{cmd}[width]{text}\n\\sbox{cmd}[text]\n\\scriptfont\n\\scriptscriptfont\n\\scriptscriptstyle\n\\scriptsize\n\\scriptspace\n\\scriptstyle\n\\scrollmode\n\\scshape\n\\searrow\n\\sec\n\\sectionmark{code}\n\\section[short]{title}\n\\section{title}\n\\section*{title}\n\\selectfont\n\\setbox\n\\setcounter{counter}{value}\n\\setlanguage{language}\n\\setlength{\\gnat}{length}\n\\setminus\n\\setpapersize{layout}\n\\settodepth{\\gnat}{text}\n\\settoheight{\\gnat}{text}\n\\settowidth{\\gnat}{text}\n\\sfcode\n\\sffamily\n\\sharp\n\\shipout\n\\shortstack[position]{text\\\\text}\n\\shortstack{text\\\\text}\n\\show\n\\showbox\n\\showboxbreadth\n\\showboxdepth\n\\showhyphens\n\\showlists\n\\showthe\n\\sigma\n\\Sigma\n\\sim\n\\simeq\n\\sin\n\\sinh\n\\skew\n\\skewchar\n\\skip\n\\skipdef\n\\slash\n\\sloppy\n\\slshape\n\\small\n\\smallskip\n\\smallskipamount\n\\smash\n\\smile\n\\space\n\\spacefactor\n\\spaceskip\n\\spadesuit\n\\span\n\\special\n\\splitbotmark\n\\splitfirstmark\n\\splitmaxdepth\n\\splittopskip\n\\sqcup\n\\sqrt{arg}\n\\sqrt[root]{arg}\n\\sqsupseteq\n\\stackrel{above}{under}\n\\star\n\\stepcounter{counter}\n\\stop\n\\stretch{number}\n\\string\n\\strut\n\\subitem\n\\subparagraphmark{code}\n\\subparagraph[short]{title}\n\\subparagraph{title}\n\\subparagraph*{title}\n\\subsectionmark{code}\n\\subsection[short]{title}\n\\subsection{title}\n\\subsection*{title}\n\\subset\n\\subseteq\n\\subsubitem\n\\subsubsectionmark{code}\n\\subsubsection[short]{title}\n\\subsubsection{title}\n\\subsubsection*{title}\n\\succ\n\\succeq\n\\sum\n\\sup\n\\suppressfloats\n\\suppressfloats[placement]\n\\supset\n\\supseteq\n\\surd\n\\swarrow\n\\symbol{n}\n\\tabbingsep\n\\tabcolsep\n\\tablename{name}\n\\tableofcontents\n\\tabskip\n\\tan\n\\tanh\n\\tau\n\\TeX\n\\textasciicircum\n\\textasciitilde\n\\textasteriskcentered\n\\textbackslash\n\\textbar\n\\textbf{text}\n\\textbraceleft\n\\textbraceright\n\\textbullet\n\\textcircled\n\\textcompwordmark\n\\textdagger\n\\textdaggerdbl\n\\textdollar\n\\textellipsis\n\\textemdash\n\\textendash\n\\textexclamdown\n\\textfloatsep\n\\textfont\n\\textfraction\n\\textgreater\n\\textheight\n\\textindent\n\\textit{text}\n\\textless\n\\textmd{text}\n\\textnormal\n\\textparagraph\n\\textperiodcentered\n\\textquestiondown\n\\textquotedblleft\n\\textquotedblright\n\\textquoteleft\n\\textquoteright\n\\textregistered\n\\textrm{text}\n\\textsc{text}\n\\textsection\n\\textsf{text}\n\\textsl{text}\n\\textsterling\n\\textstyle\n\\textsuperscript\n\\texttrademark\n\\texttt{text}\n\\textunderscore\n\\textup{text}\n\\textvisiblespace\n\\textwidth\n\\thanks{text}\n\\the\n\\thechapter\n\\theenumi\n\\theenumiv\n\\theequation\n\\thefigure\n\\thefootnote\n\\thefootnotemark\n\\thehours\n\\theminutes\n\\thempfn\n\\thempfootnote\n\\thepage\n\\theparagraph\n\\thepart\n\\thesection\n\\thesubparagraph\n\\thesubsection\n\\thesubsubsection\n\\theta\n\\Theta\n\\thetable\n\\thicklines\n\\thickmuskip\n\\thinlines\n\\thinmuskip\n\\thinspace\n\\thispagestyle{empty/plain/headings/myheadings}\n\\tilde{a}\n\\time\n\\times\n\\tiny\n\\title{text}\n\\to\n\\today\n\\toks\n\\toksdef\n\\tolerance\n\\top\n\\topfigrule\n\\topfraction\n\\topins\n\\topmargin\n\\topmark\n\\topnumber\n\\topsep\n\\topskip\n\\totalheight\n\\totalnumber\n\\tracingcommands\n\\tracingfonts\n\\tracinglostchars\n\\tracingmacros\n\\tracingonline\n\\tracingoutput\n\\tracingpages\n\\tracingparagraphs\n\\tracingrestores\n\\tracingstats\n\\triangle\n\\triangleleft\n\\triangleright\n\\ttfamily\n\\twocolumn[text]\n\\typein[cmd]{msg}\n\\typein{msg}\n\\typeout{msg}\n\\uccode\n\\uchyph\n\\unboldmath\n\\underbar\n\\underbrace{text}\n\\underline{text}\n\\unhbox\n\\unhcopy\n\\unitlength\n\\unkern\n\\unpenalty\n\\unskip\n\\unvbox\n\\unvcopy\n\\uparrow\n\\Uparrow\n\\updownarrow\n\\Updownarrow\n\\uplus\n\\uppercase\n\\upshape\n\\upsilon\n\\Upsilon\n\\usebox{\\box}\n\\usecounter{counter}\n\\usefont{enc}{family}{series}{shape}\n\\usepackage[options]{package}\n\\usepackage{package}\n\\vadjust\n\\valign\n\\value{counter}\n\\varepsilon\n\\varphi\n\\varpi\n\\varrho\n\\varsigma\n\\vartheta\n\\vbadness\n\\vbox\n\\vcenter\n\\vdash\n\\vdots\n\\vec{a}\n\\vector(xslope,yslope){length}\n\\vee\n\\verb\n\\vert\n\\Vert\n\\vfil\n\\vfill\n\\vfilll\n\\vfilneg\n\\vfuzz\n\\vline\n\\voffset\n\\vphantom\n\\vrule\n\\vsize\n\\vskip\n\\vspace{length}\n\\vspace*{length}\n\\vsplit\n\\vss\n\\vtop\n\\wedge\n\\widowpenalty\n\\width\n\\wp\n\\wr\n\\write\n\\xdef\n\\xi\n\\Xi\n\\xleaders\n\\xspaceskip\n\\year\n\\zeta\n"},983:function(t,exports){t.exports='/**\n * CoffeeScript Compiler v1.12.4\n * http://coffeescript.org\n *\n * Copyright 2011, Jeremy Ashkenas\n * Released under the MIT License\n */\nvar $jscomp={scope:{},checkStringArgs:function(u,ya,qa){if(null==u)throw new TypeError("The \'this\' value for String.prototype."+qa+" must not be null or undefined");if(ya instanceof RegExp)throw new TypeError("First argument to String.prototype."+qa+" must not be a regular expression");return u+""}};\n$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(u,ya,qa){if(qa.get||qa.set)throw new TypeError("ES3 does not support getters and setters.");u!=Array.prototype&&u!=Object.prototype&&(u[ya]=qa.value)};$jscomp.getGlobal=function(u){return"undefined"!=typeof window&&window===u?u:"undefined"!=typeof global&&null!=global?global:u};$jscomp.global=$jscomp.getGlobal(this);\n$jscomp.polyfill=function(u,ya,qa,g){if(ya){qa=$jscomp.global;u=u.split(".");for(g=0;g<u.length-1;g++){var ua=u[g];ua in qa||(qa[ua]={});qa=qa[ua]}u=u[u.length-1];g=qa[u];ya=ya(g);ya!=g&&null!=ya&&$jscomp.defineProperty(qa,u,{configurable:!0,writable:!0,value:ya})}};\n$jscomp.polyfill("String.prototype.repeat",function(u){return u?u:function(u){var qa=$jscomp.checkStringArgs(this,null,"repeat");if(0>u||1342177279<u)throw new RangeError("Invalid count value");u|=0;for(var g="";u;)if(u&1&&(g+=qa),u>>>=1)qa+=qa;return g}},"es6-impl","es3");$jscomp.findInternal=function(u,ya,qa){u instanceof String&&(u=String(u));for(var g=u.length,ua=0;ua<g;ua++){var xa=u[ua];if(ya.call(qa,xa,ua,u))return{i:ua,v:xa}}return{i:-1,v:void 0}};\n$jscomp.polyfill("Array.prototype.find",function(u){return u?u:function(u,qa){return $jscomp.findInternal(this,u,qa).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(u){return $jscomp.SYMBOL_PREFIX+(u||"")+$jscomp.symbolCounter_++};\n$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var u=$jscomp.global.Symbol.iterator;u||(u=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[u]&&$jscomp.defineProperty(Array.prototype,u,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};\n$jscomp.arrayIterator=function(u){var ya=0;return $jscomp.iteratorPrototype(function(){return ya<u.length?{done:!1,value:u[ya++]}:{done:!0}})};$jscomp.iteratorPrototype=function(u){$jscomp.initSymbolIterator();u={next:u};u[$jscomp.global.Symbol.iterator]=function(){return this};return u};$jscomp.array=$jscomp.array||{};\n$jscomp.iteratorFromArray=function(u,ya){$jscomp.initSymbolIterator();u instanceof String&&(u+="");var qa=0,g={next:function(){if(qa<u.length){var ua=qa++;return{value:ya(ua,u[ua]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};$jscomp.polyfill("Array.prototype.keys",function(u){return u?u:function(){return $jscomp.iteratorFromArray(this,function(u){return u})}},"es6-impl","es3");\n(function(u){var ya=function(){function u(g){return u[g]}u["../../package.json"]={name:"coffee-script",description:"Unfancy JavaScript",keywords:["javascript","language","coffeescript","compiler"],author:"Jeremy Ashkenas",version:"1.12.4",license:"MIT",engines:{node:"\\x3e\\x3d0.8.0"},directories:{lib:"./lib/coffee-script"},main:"./lib/coffee-script/coffee-script",bin:{coffee:"./bin/coffee",cake:"./bin/cake"},files:["bin","lib","register.js","repl.js"],preferGlobal:!0,scripts:{test:"node ./bin/cake test",\n"test-harmony":"node --harmony ./bin/cake test"},homepage:"http://coffeescript.org",bugs:"https://github.com/jashkenas/coffeescript/issues",repository:{type:"git",url:"git://github.com/jashkenas/coffeescript.git"},devDependencies:{docco:"~0.7.0","google-closure-compiler-js":"^20170124.0.0","highlight.js":"~9.9.0",jison:"\\x3e\\x3d0.4.17",marked:"^0.3.6",underscore:"~1.8.3"}};u["./helpers"]=function(){var g={};(function(){var u,xa,q,a,c,Ca;g.starts=function(a,c,l){return c===a.substr(l,c.length)};g.ends=\nfunction(a,c,l){var f;f=c.length;return c===a.substr(a.length-f-(l||0),f)};g.repeat=c=function(a,c){var f;for(f="";0<c;)c&1&&(f+=a),c>>>=1,a+=a;return f};g.compact=function(a){var f,c,g,q;q=[];f=0;for(g=a.length;f<g;f++)(c=a[f])&&q.push(c);return q};g.count=function(a,c){var f,D;f=D=0;if(!c.length)return 1/0;for(;D=1+a.indexOf(c,D);)f++;return f};g.merge=function(a,c){return xa(xa({},a),c)};xa=g.extend=function(a,c){var f,D;for(f in c)D=c[f],a[f]=D;return a};g.flatten=q=function(a){var f,c,g,G;c=\n[];g=0;for(G=a.length;g<G;g++)f=a[g],"[object Array]"===Object.prototype.toString.call(f)?c=c.concat(q(f)):c.push(f);return c};g.del=function(a,c){var f;f=a[c];delete a[c];return f};g.some=null!=(a=Array.prototype.some)?a:function(a){var f,c,g;c=0;for(g=this.length;c<g;c++)if(f=this[c],a(f))return!0;return!1};g.invertLiterate=function(a){var f;f=!0;var c,g,q,F;q=a.split("\\n");F=[];c=0;for(g=q.length;c<g;c++)a=q[c],f&&/^([ ]{4}|[ ]{0,3}\\t)/.test(a)?F.push(a):(f=/^\\s*$/.test(a))?F.push(a):F.push("# "+\na);return F.join("\\n")};u=function(a,c){return c?{first_line:a.first_line,first_column:a.first_column,last_line:c.last_line,last_column:c.last_column}:a};g.addLocationDataFn=function(a,c){return function(f){"object"===typeof f&&f.updateLocationDataIfMissing&&f.updateLocationDataIfMissing(u(a,c));return f}};g.locationDataToString=function(a){var f;"2"in a&&"first_line"in a[2]?f=a[2]:"first_line"in a&&(f=a);return f?f.first_line+1+":"+(f.first_column+1)+"-"+(f.last_line+1+":"+(f.last_column+1)):"No location data"};\ng.baseFileName=function(a,c,g){null==c&&(c=!1);null==g&&(g=!1);a=a.split(g?/\\\\|\\//:/\\//);a=a[a.length-1];if(!(c&&0<=a.indexOf(".")))return a;a=a.split(".");a.pop();"coffee"===a[a.length-1]&&1<a.length&&a.pop();return a.join(".")};g.isCoffee=function(a){return/\\.((lit)?coffee|coffee\\.md)$/.test(a)};g.isLiterate=function(a){return/\\.(litcoffee|coffee\\.md)$/.test(a)};g.throwSyntaxError=function(a,c){a=new SyntaxError(a);a.location=c;a.toString=Ca;a.stack=a.toString();throw a;};g.updateSyntaxError=function(a,\nc,g){a.toString===Ca&&(a.code||(a.code=c),a.filename||(a.filename=g),a.stack=a.toString());return a};Ca=function(){var a,g,l,q,G,F,x,v,M,u;if(!this.code||!this.location)return Error.prototype.toString.call(this);a=this.location;F=a.first_line;G=a.first_column;l=a.last_line;x=a.last_column;null==l&&(l=F);null==x&&(x=G);q=this.filename||"[stdin]";a=this.code.split("\\n")[F];l=F===l?x+1:a.length;x=a.slice(0,G).replace(/[^\\s]/g," ")+c("^",l-G);"undefined"!==typeof process&&null!==process&&(g=(null!=(v=\nprocess.stdout)?v.isTTY:void 0)&&!(null!=(M=process.env)&&M.NODE_DISABLE_COLORS));if(null!=(u=this.colorful)?u:g)g=function(a){return"\\u001b[1;31m"+a+"\\u001b[0m"},a=a.slice(0,G)+g(a.slice(G,l))+a.slice(l),x=g(x);return q+":"+(F+1)+":"+(G+1)+": error: "+this.message+"\\n"+a+"\\n"+x};g.nameWhitespaceCharacter=function(a){switch(a){case " ":return"space";case "\\n":return"newline";case "\\r":return"carriage return";case "\\t":return"tab";default:return a}}}).call(this);return g}();u["./rewriter"]=function(){var g=\n{};(function(){var u,xa,q,a,c,Ca,f,D,l,w,G,F,x,v,M,N,J,r,E=[].indexOf||function(a){for(var c=0,f=this.length;c<f;c++)if(c in this&&this[c]===a)return c;return-1},O=[].slice;v=function(a,c,f){a=[a,c];a.generated=!0;f&&(a.origin=f);return a};g.Rewriter=function(){function m(){}m.prototype.rewrite=function(a){this.tokens=a;this.removeLeadingNewlines();this.closeOpenCalls();this.closeOpenIndexes();this.normalizeLines();this.tagPostfixConditionals();this.addImplicitBracesAndParens();this.addLocationDataToGeneratedTokens();\nthis.fixOutdentLocationData();return this.tokens};m.prototype.scanTokens=function(a){var c,k,h;h=this.tokens;for(c=0;k=h[c];)c+=a.call(this,k,c,h);return!0};m.prototype.detectEnd=function(k,f,p){var h,t,m,g,H;H=this.tokens;for(h=0;g=H[k];){if(0===h&&f.call(this,g,k))return p.call(this,g,k);if(!g||0>h)return p.call(this,g,k-1);(t=g[0],0<=E.call(c,t))?h+=1:(m=g[0],0<=E.call(a,m))&&--h;k+=1}return k-1};m.prototype.removeLeadingNewlines=function(){var a,c,f,h,y;h=this.tokens;a=c=0;for(f=h.length;c<f&&\n(y=h[a][0],"TERMINATOR"===y);a=++c);if(a)return this.tokens.splice(0,a)};m.prototype.closeOpenCalls=function(){var a,c;c=function(a,c){var h;return")"===(h=a[0])||"CALL_END"===h||"OUTDENT"===a[0]&&")"===this.tag(c-1)};a=function(a,c){return this.tokens["OUTDENT"===a[0]?c-1:c][0]="CALL_END"};return this.scanTokens(function(f,h){"CALL_START"===f[0]&&this.detectEnd(h+1,c,a);return 1})};m.prototype.closeOpenIndexes=function(){var a,c;c=function(a,c){var h;return"]"===(h=a[0])||"INDEX_END"===h};a=function(a,\nc){return a[0]="INDEX_END"};return this.scanTokens(function(f,h){"INDEX_START"===f[0]&&this.detectEnd(h+1,c,a);return 1})};m.prototype.indexOfTag=function(){var a,c,f,h,g,m,A;c=arguments[0];g=2<=arguments.length?O.call(arguments,1):[];f=h=a=0;for(m=g.length;0<=m?h<m:h>m;f=0<=m?++h:--h){for(;"HERECOMMENT"===this.tag(c+f+a);)a+=2;if(null!=g[f]&&("string"===typeof g[f]&&(g[f]=[g[f]]),A=this.tag(c+f+a),0>E.call(g[f],A)))return-1}return c+f+a-1};m.prototype.looksObjectish=function(f){var k;if(-1<this.indexOfTag(f,\n"@",null,":")||-1<this.indexOfTag(f,null,":"))return!0;f=this.indexOfTag(f,c);return-1<f&&(k=null,this.detectEnd(f+1,function(c){var h;return h=c[0],0<=E.call(a,h)},function(a,c){return k=c}),":"===this.tag(k+1))?!0:!1};m.prototype.findTagsBackwards=function(f,g){var k,h,m,t,A,H,l;for(k=[];0<=f&&(k.length||(t=this.tag(f),0>E.call(g,t))&&((A=this.tag(f),0>E.call(c,A))||this.tokens[f].generated)&&(H=this.tag(f),0>E.call(G,H)));)(h=this.tag(f),0<=E.call(a,h))&&k.push(this.tag(f)),(m=this.tag(f),0<=E.call(c,\nm))&&k.length&&k.pop(),--f;return l=this.tag(f),0<=E.call(g,l)};m.prototype.addImplicitBracesAndParens=function(){var k,g;k=[];g=null;return this.scanTokens(function(m,h,t){var p,A,y,q,r,I,w,x,z,B,u,C,M,F,J,N,O,K;K=m[0];B=(u=0<h?t[h-1]:[])[0];z=(h<t.length-1?t[h+1]:[])[0];J=function(){return k[k.length-1]};N=h;y=function(a){return h-N+a};q=function(){var a,c;return null!=(a=J())?null!=(c=a[2])?c.ours:void 0:void 0};r=function(){var a;return q()&&"("===(null!=(a=J())?a[0]:void 0)};w=function(){var a;\nreturn q()&&"{"===(null!=(a=J())?a[0]:void 0)};I=function(){var a;return q&&"CONTROL"===(null!=(a=J())?a[0]:void 0)};O=function(a){var c;c=null!=a?a:h;k.push(["(",c,{ours:!0}]);t.splice(c,0,v("CALL_START","("));if(null==a)return h+=1};p=function(){k.pop();t.splice(h,0,v("CALL_END",")",["","end of input",m[2]]));return h+=1};x=function(a,c){var f;null==c&&(c=!0);f=null!=a?a:h;k.push(["{",f,{sameLine:!0,startsLine:c,ours:!0}]);c=new String("{");c.generated=!0;t.splice(f,0,v("{",c,m));if(null==a)return h+=\n1};A=function(a){a=null!=a?a:h;k.pop();t.splice(a,0,v("}","}",m));return h+=1};if(r()&&("IF"===K||"TRY"===K||"FINALLY"===K||"CATCH"===K||"CLASS"===K||"SWITCH"===K))return k.push(["CONTROL",h,{ours:!0}]),y(1);if("INDENT"===K&&q()){if("\\x3d\\x3e"!==B&&"-\\x3e"!==B&&"["!==B&&"("!==B&&","!==B&&"{"!==B&&"TRY"!==B&&"ELSE"!==B&&"\\x3d"!==B)for(;r();)p();I()&&k.pop();k.push([K,h]);return y(1)}if(0<=E.call(c,K))return k.push([K,h]),y(1);if(0<=E.call(a,K)){for(;q();)r()?p():w()?A():k.pop();g=k.pop()}if((0<=E.call(D,\nK)&&m.spaced||"?"===K&&0<h&&!t[h-1].spaced)&&(0<=E.call(Ca,z)||0<=E.call(l,z)&&(null==(C=t[h+1])||!C.spaced)&&(null==(M=t[h+1])||!M.newLine)))return"?"===K&&(K=m[0]="FUNC_EXIST"),O(h+1),y(2);if(0<=E.call(D,K)&&-1<this.indexOfTag(h+1,"INDENT")&&this.looksObjectish(h+2)&&!this.findTagsBackwards(h,"CLASS EXTENDS IF CATCH SWITCH LEADING_WHEN FOR WHILE UNTIL".split(" ")))return O(h+1),k.push(["INDENT",h+2]),y(3);if(":"===K){for(A=function(){var c;switch(!1){case c=this.tag(h-1),0>E.call(a,c):return g[1];\ncase "@"!==this.tag(h-2):return h-2;default:return h-1}}.call(this);"HERECOMMENT"===this.tag(A-2);)A-=2;this.insideForDeclaration="FOR"===z;I=0===A||(F=this.tag(A-1),0<=E.call(G,F))||t[A-1].newLine;if(J()&&(w=J(),F=w[0],u=w[1],("{"===F||"INDENT"===F&&"{"===this.tag(u-1))&&(I||","===this.tag(A-1)||"{"===this.tag(A-1))))return y(1);x(A,!!I);return y(2)}w()&&0<=E.call(G,K)&&(J()[2].sameLine=!1);x="OUTDENT"===B||u.newLine;if(0<=E.call(f,K)||0<=E.call(xa,K)&&x)for(;q();)if(x=J(),F=x[0],u=x[1],F=x[2],x=\nF.sameLine,I=F.startsLine,r()&&","!==B)p();else if(w()&&!this.insideForDeclaration&&x&&"TERMINATOR"!==K&&":"!==B)A();else if(!w()||"TERMINATOR"!==K||","===B||I&&this.looksObjectish(h+1))break;else{if("HERECOMMENT"===z)return y(1);A()}if(!(","!==K||this.looksObjectish(h+1)||!w()||this.insideForDeclaration||"TERMINATOR"===z&&this.looksObjectish(h+2)))for(z="OUTDENT"===z?1:0;w();)A(h+z);return y(1)})};m.prototype.addLocationDataToGeneratedTokens=function(){return this.scanTokens(function(a,c,f){var h,\nk,m;if(a[2]||!a.generated&&!a.explicit)return 1;"{"===a[0]&&(h=null!=(m=f[c+1])?m[2]:void 0)?(k=h.first_line,h=h.first_column):(h=null!=(k=f[c-1])?k[2]:void 0)?(k=h.last_line,h=h.last_column):k=h=0;a[2]={first_line:k,first_column:h,last_line:k,last_column:h};return 1})};m.prototype.fixOutdentLocationData=function(){return this.scanTokens(function(a,c,f){if(!("OUTDENT"===a[0]||a.generated&&"CALL_END"===a[0]||a.generated&&"}"===a[0]))return 1;c=f[c-1][2];a[2]={first_line:c.last_line,first_column:c.last_column,\nlast_line:c.last_line,last_column:c.last_column};return 1})};m.prototype.normalizeLines=function(){var a,c,f,h,m;m=f=h=null;c=function(a,c){var f,h,k,g;return";"!==a[1]&&(f=a[0],0<=E.call(F,f))&&!("TERMINATOR"===a[0]&&(h=this.tag(c+1),0<=E.call(q,h)))&&!("ELSE"===a[0]&&"THEN"!==m)&&!!("CATCH"!==(k=a[0])&&"FINALLY"!==k||"-\\x3e"!==m&&"\\x3d\\x3e"!==m)||(g=a[0],0<=E.call(xa,g))&&this.tokens[c-1].newLine};a=function(a,c){return this.tokens.splice(","===this.tag(c-1)?c-1:c,0,h)};return this.scanTokens(function(k,\ng,t){var p,y,l;k=k[0];if("TERMINATOR"===k){if("ELSE"===this.tag(g+1)&&"OUTDENT"!==this.tag(g-1))return t.splice.apply(t,[g,1].concat(O.call(this.indentation()))),1;if(p=this.tag(g+1),0<=E.call(q,p))return t.splice(g,1),0}if("CATCH"===k)for(p=y=1;2>=y;p=++y)if("OUTDENT"===(l=this.tag(g+p))||"TERMINATOR"===l||"FINALLY"===l)return t.splice.apply(t,[g+p,0].concat(O.call(this.indentation()))),2+p;0<=E.call(x,k)&&"INDENT"!==this.tag(g+1)&&("ELSE"!==k||"IF"!==this.tag(g+1))&&(m=k,l=this.indentation(t[g]),\nf=l[0],h=l[1],"THEN"===m&&(f.fromThen=!0),t.splice(g+1,0,f),this.detectEnd(g+2,c,a),"THEN"===k&&t.splice(g,1));return 1})};m.prototype.tagPostfixConditionals=function(){var a,c,f;f=null;c=function(a,c){a=a[0];c=this.tokens[c-1][0];return"TERMINATOR"===a||"INDENT"===a&&0>E.call(x,c)};a=function(a,c){if("INDENT"!==a[0]||a.generated&&!a.fromThen)return f[0]="POST_"+f[0]};return this.scanTokens(function(h,k){if("IF"!==h[0])return 1;f=h;this.detectEnd(k+1,c,a);return 1})};m.prototype.indentation=function(a){var c,\nf;c=["INDENT",2];f=["OUTDENT",2];a?(c.generated=f.generated=!0,c.origin=f.origin=a):c.explicit=f.explicit=!0;return[c,f]};m.prototype.generate=v;m.prototype.tag=function(a){var c;return null!=(c=this.tokens[a])?c[0]:void 0};return m}();u=[["(",")"],["[","]"],["{","}"],["INDENT","OUTDENT"],["CALL_START","CALL_END"],["PARAM_START","PARAM_END"],["INDEX_START","INDEX_END"],["STRING_START","STRING_END"],["REGEX_START","REGEX_END"]];g.INVERSES=w={};c=[];a=[];M=0;for(J=u.length;M<J;M++)r=u[M],N=r[0],r=r[1],\nc.push(w[r]=N),a.push(w[N]=r);q=["CATCH","THEN","ELSE","FINALLY"].concat(a);D="IDENTIFIER PROPERTY SUPER ) CALL_END ] INDEX_END @ THIS".split(" ");Ca="IDENTIFIER PROPERTY NUMBER INFINITY NAN STRING STRING_START REGEX REGEX_START JS NEW PARAM_START CLASS IF TRY SWITCH THIS UNDEFINED NULL BOOL UNARY YIELD UNARY_MATH SUPER THROW @ -\\x3e \\x3d\\x3e [ ( { -- ++".split(" ");l=["+","-"];f="POST_IF FOR WHILE UNTIL WHEN BY LOOP TERMINATOR".split(" ");x="ELSE -\\x3e \\x3d\\x3e TRY FINALLY THEN".split(" ");F="TERMINATOR CATCH FINALLY ELSE OUTDENT LEADING_WHEN".split(" ");\nG=["TERMINATOR","INDENT","OUTDENT"];xa=[".","?.","::","?::"]}).call(this);return g}();u["./lexer"]=function(){var g={};(function(){var ua,xa,q,a,c,Ca,f,D,l,w,G,F,x,v,M,N,J,r,E,O,m,k,t,p,h,y,P,A,H,U,T,I,aa,S,z,B,W,C,Q,X,Y,V,Z,K,ba,R,qa,ya,Xa,ka,ca,ea,ga,ha,la,oa,L,ja,ra,da=[].indexOf||function(a){for(var c=0,f=this.length;c<f;c++)if(c in this&&this[c]===a)return c;return-1},ma=[].slice;L=u("./rewriter");C=L.Rewriter;m=L.INVERSES;L=u("./helpers");ea=L.count;ja=L.repeat;ga=L.invertLiterate;ra=L.throwSyntaxError;\ng.Lexer=function(){function g(){}g.prototype.tokenize=function(a,c){var f,ia,h,g;null==c&&(c={});this.literate=c.literate;this.outdebt=this.indebt=this.baseIndent=this.indent=0;this.indents=[];this.ends=[];this.tokens=[];this.exportSpecifierList=this.seenExport=this.seenImport=this.seenFor=!1;this.chunkLine=c.line||0;this.chunkColumn=c.column||0;a=this.clean(a);for(h=0;this.chunk=a.slice(h);)if(f=this.identifierToken()||this.commentToken()||this.whitespaceToken()||this.lineToken()||this.stringToken()||\nthis.numberToken()||this.regexToken()||this.jsToken()||this.literalToken(),g=this.getLineAndColumnFromChunk(f),this.chunkLine=g[0],this.chunkColumn=g[1],h+=f,c.untilBalanced&&0===this.ends.length)return{tokens:this.tokens,index:h};this.closeIndentation();(ia=this.ends.pop())&&this.error("missing "+ia.tag,ia.origin[2]);return!1===c.rewrite?this.tokens:(new C).rewrite(this.tokens)};g.prototype.clean=function(a){a.charCodeAt(0)===ua&&(a=a.slice(1));a=a.replace(/\\r/g,"").replace(qa,"");ca.test(a)&&(a=\n"\\n"+a,this.chunkLine--);this.literate&&(a=ga(a));return a};g.prototype.identifierToken=function(){var f,g,k,m,p,y,l,A,q,v,r;if(!(g=J.exec(this.chunk)))return 0;p=g[0];k=g[1];g=g[2];m=k.length;y=void 0;if("own"===k&&"FOR"===this.tag())return this.token("OWN",k),k.length;if("from"===k&&"YIELD"===this.tag())return this.token("FROM",k),k.length;if("as"===k&&this.seenImport){if("*"===this.value())this.tokens[this.tokens.length-1][0]="IMPORT_ALL";else if(l=this.value(),0<=da.call(Ca,l))this.tokens[this.tokens.length-\n1][0]="IDENTIFIER";if("DEFAULT"===(A=this.tag())||"IMPORT_ALL"===A||"IDENTIFIER"===A)return this.token("AS",k),k.length}if("as"===k&&this.seenExport&&"IDENTIFIER"===this.tag())return this.token("AS",k),k.length;if("default"===k&&this.seenExport)return this.token("DEFAULT",k),k.length;l=this.tokens;l=l[l.length-1];r=g||null!=l&&("."===(q=l[0])||"?."===q||"::"===q||"?::"===q||!l.spaced&&"@"===l[0])?"PROPERTY":"IDENTIFIER";"IDENTIFIER"!==r||!(0<=da.call(t,k)||0<=da.call(Ca,k))||this.exportSpecifierList&&\n0<=da.call(Ca,k)?"IDENTIFIER"===r&&this.seenFor&&"from"===k&&ha(l)&&(r="FORFROM",this.seenFor=!1):(r=k.toUpperCase(),"WHEN"===r&&(v=this.tag(),0<=da.call(h,v))?r="LEADING_WHEN":"FOR"===r?this.seenFor=!0:"UNLESS"===r?r="IF":"IMPORT"===r?this.seenImport=!0:"EXPORT"===r?this.seenExport=!0:0<=da.call(ya,r)?r="UNARY":0<=da.call(B,r)&&("INSTANCEOF"!==r&&this.seenFor?(r="FOR"+r,this.seenFor=!1):(r="RELATION","!"===this.value()&&(y=this.tokens.pop(),k="!"+k))));"IDENTIFIER"===r&&0<=da.call(W,k)&&this.error("reserved word \'"+\nk+"\'",{length:k.length});"PROPERTY"!==r&&(0<=da.call(a,k)&&(f=k,k=c[k]),r=function(){switch(k){case "!":return"UNARY";case "\\x3d\\x3d":case "!\\x3d":return"COMPARE";case "true":case "false":return"BOOL";case "break":case "continue":case "debugger":return"STATEMENT";case "\\x26\\x26":case "||":return k;default:return r}}());q=this.token(r,k,0,m);f&&(q.origin=[r,f,q[2]]);y&&(f=[y[2].first_line,y[2].first_column],q[2].first_line=f[0],q[2].first_column=f[1]);g&&(f=p.lastIndexOf(":"),this.token(":",":",f,\ng.length));return p.length};g.prototype.numberToken=function(){var a,c,f,g;if(!(c=U.exec(this.chunk)))return 0;f=c[0];c=f.length;switch(!1){case !/^0[BOX]/.test(f):this.error("radix prefix in \'"+f+"\' must be lowercase",{offset:1});break;case !/^(?!0x).*E/.test(f):this.error("exponential notation in \'"+f+"\' must be indicated with a lowercase \'e\'",{offset:f.indexOf("E")});break;case !/^0\\d*[89]/.test(f):this.error("decimal literal \'"+f+"\' must not be prefixed with \'0\'",{length:c});break;case !/^0\\d+/.test(f):this.error("octal literal \'"+\nf+"\' must be prefixed with \'0o\'",{length:c})}a=function(){switch(f.charAt(1)){case "b":return 2;case "o":return 8;case "x":return 16;default:return null}}();a=null!=a?parseInt(f.slice(2),a):parseFloat(f);if("b"===(g=f.charAt(1))||"o"===g)f="0x"+a.toString(16);this.token(Infinity===a?"INFINITY":"NUMBER",f,0,c);return c};g.prototype.stringToken=function(){var a,c,f,g,h,k,m,t,l,r,y,q;l=(ba.exec(this.chunk)||[])[0];if(!l)return 0;this.tokens.length&&"from"===this.value()&&(this.seenImport||this.seenExport)&&\n(this.tokens[this.tokens.length-1][0]="FROM");f=function(){switch(l){case "\'":return K;case \'"\':return V;case "\'\'\'":return x;case \'"""\':return G}}();g=3===l.length;f=this.matchWithInterpolations(f,l);q=f.tokens;h=f.index;a=q.length-1;f=l.charAt(0);if(g){m=null;for(g=function(){var a,c,f;f=[];k=a=0;for(c=q.length;a<c;k=++a)y=q[k],"NEOSTRING"===y[0]&&f.push(y[1]);return f}().join("#{}");c=F.exec(g);)if(c=c[1],null===m||0<(r=c.length)&&r<m.length)m=c;m&&(t=RegExp("\\\\n"+m,"g"));this.mergeInterpolationTokens(q,\n{delimiter:f},function(c){return function(f,g){f=c.formatString(f);t&&(f=f.replace(t,"\\n"));0===g&&(f=f.replace(p,""));g===a&&(f=f.replace(R,""));return f}}(this))}else this.mergeInterpolationTokens(q,{delimiter:f},function(c){return function(f,g){f=c.formatString(f);return f=f.replace(X,function(c,h){return 0===g&&0===h||g===a&&h+c.length===f.length?"":" "})}}(this));return h};g.prototype.commentToken=function(){var a,c,g;if(!(g=this.chunk.match(f)))return 0;a=g[0];if(c=g[1])(g=w.exec(a))&&this.error("block comments cannot contain "+\ng[0],{offset:g.index,length:g[0].length}),0<=c.indexOf("\\n")&&(c=c.replace(RegExp("\\\\n"+ja(" ",this.indent),"g"),"\\n")),this.token("HERECOMMENT",c,0,a.length);return a.length};g.prototype.jsToken=function(){var a,c;if("`"!==this.chunk.charAt(0)||!(a=N.exec(this.chunk)||k.exec(this.chunk)))return 0;c=a[1].replace(/\\\\+(`|$)/g,function(a){return a.slice(-Math.ceil(a.length/2))});this.token("JS",c,0,a[0].length);return a[0].length};g.prototype.regexToken=function(){var a,c,f,g,h,k,m,t;switch(!1){case !(c=\nz.exec(this.chunk)):this.error("regular expressions cannot begin with "+c[2],{offset:c.index+c[1].length});break;case !(c=this.matchWithInterpolations(v,"///")):t=c.tokens;h=c.index;break;case !(c=aa.exec(this.chunk)):m=c[0];a=c[1];c=c[2];this.validateEscapes(a,{isRegex:!0,offsetInChunk:1});h=m.length;k=this.tokens;if(k=k[k.length-1])if(k.spaced&&(f=k[0],0<=da.call(xa,f))){if(!c||I.test(m))return 0}else if(g=k[0],0<=da.call(H,g))return 0;c||this.error("missing / (unclosed regex)");break;default:return 0}g=\nS.exec(this.chunk.slice(h))[0];f=h+g.length;c=this.makeToken("REGEX",null,0,f);switch(!1){case !!ka.test(g):this.error("invalid regular expression flags "+g,{offset:h,length:g.length});break;case !(m||1===t.length):null==a&&(a=this.formatHeregex(t[0][1]));this.token("REGEX",""+this.makeDelimitedLiteral(a,{delimiter:"/"})+g,0,f,c);break;default:this.token("REGEX_START","(",0,0,c),this.token("IDENTIFIER","RegExp",0,0),this.token("CALL_START","(",0,0),this.mergeInterpolationTokens(t,{delimiter:\'"\',double:!0},\nthis.formatHeregex),g&&(this.token(",",",",h-1,0),this.token("STRING",\'"\'+g+\'"\',h-1,g.length)),this.token(")",")",f-1,0),this.token("REGEX_END",")",f-1,0)}return f};g.prototype.lineToken=function(){var a,c,f;if(!(c=A.exec(this.chunk)))return 0;c=c[0];this.seenFor=!1;f=c.length-1-c.lastIndexOf("\\n");a=this.unfinished();if(f-this.indebt===this.indent)return a?this.suppressNewlines():this.newlineToken(0),c.length;if(f>this.indent){if(a)return this.indebt=f-this.indent,this.suppressNewlines(),c.length;\nif(!this.tokens.length)return this.baseIndent=this.indent=f,c.length;a=f-this.indent+this.outdebt;this.token("INDENT",a,c.length-f,f);this.indents.push(a);this.ends.push({tag:"OUTDENT"});this.outdebt=this.indebt=0;this.indent=f}else f<this.baseIndent?this.error("missing indentation",{offset:c.length}):(this.indebt=0,this.outdentToken(this.indent-f,a,c.length));return c.length};g.prototype.outdentToken=function(a,c,f){var g,h,k,m;for(g=this.indent-a;0<a;)(k=this.indents[this.indents.length-1])?k===\nthis.outdebt?(a-=this.outdebt,this.outdebt=0):k<this.outdebt?(this.outdebt-=k,a-=k):(h=this.indents.pop()+this.outdebt,f&&(m=this.chunk[f],0<=da.call(r,m))&&(g-=h-a,a=h),this.outdebt=0,this.pair("OUTDENT"),this.token("OUTDENT",a,0,f),a-=h):a=0;h&&(this.outdebt-=a);for(;";"===this.value();)this.tokens.pop();"TERMINATOR"===this.tag()||c||this.token("TERMINATOR","\\n",f,0);this.indent=g;return this};g.prototype.whitespaceToken=function(){var a,c;if(!(a=ca.exec(this.chunk))&&"\\n"!==this.chunk.charAt(0))return 0;\nc=this.tokens;(c=c[c.length-1])&&(c[a?"spaced":"newLine"]=!0);return a?a[0].length:0};g.prototype.newlineToken=function(a){for(;";"===this.value();)this.tokens.pop();"TERMINATOR"!==this.tag()&&this.token("TERMINATOR","\\n",a,0);return this};g.prototype.suppressNewlines=function(){"\\\\"===this.value()&&this.tokens.pop();return this};g.prototype.literalToken=function(){var a,c,f,g,h,k,t,p;(a=T.exec(this.chunk))?(a=a[0],q.test(a)&&this.tagParameters()):a=this.chunk.charAt(0);p=a;g=this.tokens;if((g=g[g.length-\n1])&&0<=da.call(["\\x3d"].concat(ma.call(l)),a)&&(t=!1,"\\x3d"!==a||"||"!==(f=g[1])&&"\\x26\\x26"!==f||g.spaced||(g[0]="COMPOUND_ASSIGN",g[1]+="\\x3d",g=this.tokens[this.tokens.length-2],t=!0),g&&"PROPERTY"!==g[0]&&(f=null!=(c=g.origin)?c:g,(c=la(g[1],f[1]))&&this.error(c,f[2])),t))return a.length;"{"===a&&"EXPORT"===(null!=g?g[0]:void 0)?this.exportSpecifierList=!0:this.exportSpecifierList&&"}"===a&&(this.exportSpecifierList=!1);if(";"===a)this.seenFor=this.seenImport=this.seenExport=!1,p="TERMINATOR";\nelse if("*"===a&&"EXPORT"===g[0])p="EXPORT_ALL";else if(0<=da.call(P,a))p="MATH";else if(0<=da.call(D,a))p="COMPARE";else if(0<=da.call(l,a))p="COMPOUND_ASSIGN";else if(0<=da.call(ya,a))p="UNARY";else if(0<=da.call(Xa,a))p="UNARY_MATH";else if(0<=da.call(Q,a))p="SHIFT";else if("?"===a&&null!=g&&g.spaced)p="BIN?";else if(g&&!g.spaced)if("("===a&&(h=g[0],0<=da.call(xa,h)))"?"===g[0]&&(g[0]="FUNC_EXIST"),p="CALL_START";else if("["===a&&(k=g[0],0<=da.call(E,k)))switch(p="INDEX_START",g[0]){case "?":g[0]=\n"INDEX_SOAK"}h=this.makeToken(p,a);switch(a){case "(":case "{":case "[":this.ends.push({tag:m[a],origin:h});break;case ")":case "}":case "]":this.pair(a)}this.tokens.push(h);return a.length};g.prototype.tagParameters=function(){var a,c,f,g;if(")"!==this.tag())return this;c=[];g=this.tokens;a=g.length;for(g[--a][0]="PARAM_END";f=g[--a];)switch(f[0]){case ")":c.push(f);break;case "(":case "CALL_START":if(c.length)c.pop();else return"("===f[0]&&(f[0]="PARAM_START"),this}return this};g.prototype.closeIndentation=\nfunction(){return this.outdentToken(this.indent)};g.prototype.matchWithInterpolations=function(a,c){var f,h,k,m,t,p,l,r;r=[];t=c.length;if(this.chunk.slice(0,t)!==c)return null;for(l=this.chunk.slice(t);;){m=a.exec(l)[0];this.validateEscapes(m,{isRegex:"/"===c.charAt(0),offsetInChunk:t});r.push(this.makeToken("NEOSTRING",m,t));l=l.slice(m.length);t+=m.length;if("#{"!==l.slice(0,2))break;f=this.getLineAndColumnFromChunk(t+1);m=f[0];f=f[1];f=(new g).tokenize(l.slice(1),{line:m,column:f,untilBalanced:!0});\nm=f.tokens;h=f.index;h+=1;p=m[0];f=m[m.length-1];p[0]=p[1]="(";f[0]=f[1]=")";f.origin=["","end of interpolation",f[2]];"TERMINATOR"===(null!=(k=m[1])?k[0]:void 0)&&m.splice(1,1);r.push(["TOKENS",m]);l=l.slice(h);t+=h}l.slice(0,c.length)!==c&&this.error("missing "+c,{length:c.length});a=r[0];k=r[r.length-1];a[2].first_column-=c.length;"\\n"===k[1].substr(-1)?(k[2].last_line+=1,k[2].last_column=c.length-1):k[2].last_column+=c.length;0===k[1].length&&--k[2].last_column;return{tokens:r,index:t+c.length}};\ng.prototype.mergeInterpolationTokens=function(a,c,f){var g,h,k,m,t,p,l,r,y,q,A,ia;1<a.length&&(r=this.token("STRING_START","(",0,0));k=this.tokens.length;m=t=0;for(p=a.length;t<p;m=++t){q=a[m];g=q[0];ia=q[1];switch(g){case "TOKENS":if(2===ia.length)continue;l=ia[0];A=ia;break;case "NEOSTRING":g=f(q[1],m);if(0===g.length)if(0===m)h=this.tokens.length;else continue;2===m&&null!=h&&this.tokens.splice(h,2);q[0]="STRING";q[1]=this.makeDelimitedLiteral(g,c);l=q;A=[q]}this.tokens.length>k&&(m=this.token("+",\n"+"),m[2]={first_line:l[2].first_line,first_column:l[2].first_column,last_line:l[2].first_line,last_column:l[2].first_column});(y=this.tokens).push.apply(y,A)}if(r)return a=a[a.length-1],r.origin=["STRING",null,{first_line:r[2].first_line,first_column:r[2].first_column,last_line:a[2].last_line,last_column:a[2].last_column}],r=this.token("STRING_END",")"),r[2]={first_line:a[2].last_line,first_column:a[2].last_column,last_line:a[2].last_line,last_column:a[2].last_column}};g.prototype.pair=function(a){var c;\nc=this.ends;c=c[c.length-1];return a!==(c=null!=c?c.tag:void 0)?("OUTDENT"!==c&&this.error("unmatched "+a),c=this.indents,c=c[c.length-1],this.outdentToken(c,!0),this.pair(a)):this.ends.pop()};g.prototype.getLineAndColumnFromChunk=function(a){var c,f;if(0===a)return[this.chunkLine,this.chunkColumn];f=a>=this.chunk.length?this.chunk:this.chunk.slice(0,+(a-1)+1||9E9);a=ea(f,"\\n");c=this.chunkColumn;0<a?(c=f.split("\\n"),c=c[c.length-1],c=c.length):c+=f.length;return[this.chunkLine+a,c]};g.prototype.makeToken=\nfunction(a,c,f,g){var h,k;null==f&&(f=0);null==g&&(g=c.length);h={};k=this.getLineAndColumnFromChunk(f);h.first_line=k[0];h.first_column=k[1];f=this.getLineAndColumnFromChunk(f+(0<g?g-1:0));h.last_line=f[0];h.last_column=f[1];return[a,c,h]};g.prototype.token=function(a,c,f,g,h){a=this.makeToken(a,c,f,g);h&&(a.origin=h);this.tokens.push(a);return a};g.prototype.tag=function(){var a;a=this.tokens;a=a[a.length-1];return null!=a?a[0]:void 0};g.prototype.value=function(){var a;a=this.tokens;a=a[a.length-\n1];return null!=a?a[1]:void 0};g.prototype.unfinished=function(){var a;return y.test(this.chunk)||"\\\\"===(a=this.tag())||"."===a||"?."===a||"?::"===a||"UNARY"===a||"MATH"===a||"UNARY_MATH"===a||"+"===a||"-"===a||"**"===a||"SHIFT"===a||"RELATION"===a||"COMPARE"===a||"\\x26"===a||"^"===a||"|"===a||"\\x26\\x26"===a||"||"===a||"BIN?"===a||"THROW"===a||"EXTENDS"===a};g.prototype.formatString=function(a){return a.replace(Z,"$1")};g.prototype.formatHeregex=function(a){return a.replace(M,"$1$2")};g.prototype.validateEscapes=\nfunction(a,c){var f,g,h,k,m;null==c&&(c={});if(g=O.exec(a))if(g[0],a=g[1],h=g[2],f=g[3],m=g[4],!c.isRegex||!h||"0"===h.charAt(0))return f="\\\\"+(h||f||m),this.error((h?"octal escape sequences are not allowed":"invalid escape sequence")+" "+f,{offset:(null!=(k=c.offsetInChunk)?k:0)+g.index+a.length,length:f.length})};g.prototype.makeDelimitedLiteral=function(a,c){null==c&&(c={});""===a&&"/"===c.delimiter&&(a="(?:)");a=a.replace(RegExp("(\\\\\\\\\\\\\\\\)|(\\\\\\\\0(?\\x3d[1-7]))|\\\\\\\\?("+c.delimiter+")|\\\\\\\\?(?:(\\\\n)|(\\\\r)|(\\\\u2028)|(\\\\u2029))|(\\\\\\\\.)",\n"g"),function(a,f,g,h,k,m,t,p,l){switch(!1){case !f:return c.double?f+f:f;case !g:return"\\\\x00";case !h:return"\\\\"+h;case !k:return"\\\\n";case !m:return"\\\\r";case !t:return"\\\\u2028";case !p:return"\\\\u2029";case !l:return c.double?"\\\\"+l:l}});return""+c.delimiter+a+c.delimiter};g.prototype.error=function(a,c){var f,g,h,k,m;null==c&&(c={});c="first_line"in c?c:(k=this.getLineAndColumnFromChunk(null!=(h=c.offset)?h:0),g=k[0],f=k[1],k,{first_line:g,first_column:f,last_column:f+(null!=(m=c.length)?m:1)-\n1});return ra(a,c)};return g}();la=function(a,c){null==c&&(c=a);switch(!1){case 0>da.call(ma.call(t).concat(ma.call(Ca)),a):return"keyword \'"+c+"\' can\'t be assigned";case 0>da.call(Y,a):return"\'"+c+"\' can\'t be assigned";case 0>da.call(W,a):return"reserved word \'"+c+"\' can\'t be assigned";default:return!1}};g.isUnassignable=la;ha=function(a){var c;return"IDENTIFIER"===a[0]?("from"===a[1]&&(a[1][0]="IDENTIFIER",!0),!0):"FOR"===a[0]?!1:"{"===(c=a[1])||"["===c||","===c||":"===c?!1:!0};t="true false null this new delete typeof in instanceof return throw break continue debugger yield if else switch for while do try catch finally class extends super import export default".split(" ");\nCa="undefined Infinity NaN then unless until loop of by when".split(" ");c={and:"\\x26\\x26",or:"||",is:"\\x3d\\x3d",isnt:"!\\x3d",not:"!",yes:"true",no:"false",on:"true",off:"false"};a=function(){var a;a=[];for(oa in c)a.push(oa);return a}();Ca=Ca.concat(a);W="case function var void with const let enum native implements interface package private protected public static".split(" ");Y=["arguments","eval"];g.JS_FORBIDDEN=t.concat(W).concat(Y);ua=65279;J=/^(?!\\d)((?:(?!\\s)[$\\w\\x7f-\\uffff])+)([^\\n\\S]*:(?!:))?/;\nU=/^0b[01]+|^0o[0-7]+|^0x[\\da-f]+|^\\d*\\.?\\d+(?:e[+-]?\\d+)?/i;T=/^(?:[-=]>|[-+*\\/%<>&|^!?=]=|>>>=?|([-+:])\\1|([&|<>*\\/%])\\2=?|\\?(\\.|::)|\\.{2,3})/;ca=/^[^\\n\\S]+/;f=/^###([^#][\\s\\S]*?)(?:###[^\\n\\S]*|###$)|^(?:\\s*#(?!##[^#]).*)+/;q=/^[-=]>/;A=/^(?:\\n[^\\n\\S]*)+/;k=/^`(?!``)((?:[^`\\\\]|\\\\[\\s\\S])*)`/;N=/^```((?:[^`\\\\]|\\\\[\\s\\S]|`(?!``))*)```/;ba=/^(?:\'\'\'|"""|\'|")/;K=/^(?:[^\\\\\']|\\\\[\\s\\S])*/;V=/^(?:[^\\\\"#]|\\\\[\\s\\S]|\\#(?!\\{))*/;x=/^(?:[^\\\\\']|\\\\[\\s\\S]|\'(?!\'\'))*/;G=/^(?:[^\\\\"#]|\\\\[\\s\\S]|"(?!"")|\\#(?!\\{))*/;Z=/((?:\\\\\\\\)+)|\\\\[^\\S\\n]*\\n\\s*/g;\nX=/\\s*\\n\\s*/g;F=/\\n+([^\\n\\S]*)(?=\\S)/g;aa=/^\\/(?!\\/)((?:[^[\\/\\n\\\\]|\\\\[^\\n]|\\[(?:\\\\[^\\n]|[^\\]\\n\\\\])*\\])*)(\\/)?/;S=/^\\w*/;ka=/^(?!.*(.).*\\1)[imgy]*$/;v=/^(?:[^\\\\\\/#]|\\\\[\\s\\S]|\\/(?!\\/\\/)|\\#(?!\\{))*/;M=/((?:\\\\\\\\)+)|\\\\(\\s)|\\s+(?:#.*)?/g;z=/^(\\/|\\/{3}\\s*)(\\*)/;I=/^\\/=?\\s/;w=/\\*\\//;y=/^\\s*(?:,|\\??\\.(?![.\\d])|::)/;O=/((?:^|[^\\\\])(?:\\\\\\\\)*)\\\\(?:(0[0-7]|[1-7])|(x(?![\\da-fA-F]{2}).{0,2})|(u(?![\\da-fA-F]{4}).{0,4}))/;p=/^[^\\n\\S]*\\n/;R=/\\n[^\\n\\S]*$/;qa=/\\s+$/;l="-\\x3d +\\x3d /\\x3d *\\x3d %\\x3d ||\\x3d \\x26\\x26\\x3d ?\\x3d \\x3c\\x3c\\x3d \\x3e\\x3e\\x3d \\x3e\\x3e\\x3e\\x3d \\x26\\x3d ^\\x3d |\\x3d **\\x3d //\\x3d %%\\x3d".split(" ");\nya=["NEW","TYPEOF","DELETE","DO"];Xa=["!","~"];Q=["\\x3c\\x3c","\\x3e\\x3e","\\x3e\\x3e\\x3e"];D="\\x3d\\x3d !\\x3d \\x3c \\x3e \\x3c\\x3d \\x3e\\x3d".split(" ");P=["*","/","%","//","%%"];B=["IN","OF","INSTANCEOF"];xa="IDENTIFIER PROPERTY ) ] ? @ THIS SUPER".split(" ");E=xa.concat("NUMBER INFINITY NAN STRING STRING_END REGEX REGEX_END BOOL NULL UNDEFINED } ::".split(" "));H=E.concat(["++","--"]);h=["INDENT","OUTDENT","TERMINATOR"];r=[")","}","]"]}).call(this);return g}();u["./parser"]=function(){var g={},ua={exports:g},\nxa=function(){function g(){this.yy={}}var a=function(a,n,pa,b){pa=pa||{};for(b=a.length;b--;pa[a[b]]=n);return pa},c=[1,22],u=[1,25],f=[1,83],D=[1,79],l=[1,84],w=[1,85],G=[1,81],F=[1,82],x=[1,56],v=[1,58],M=[1,59],N=[1,60],J=[1,61],r=[1,62],E=[1,49],O=[1,50],m=[1,32],k=[1,68],t=[1,69],p=[1,78],h=[1,47],y=[1,51],P=[1,52],A=[1,67],H=[1,65],U=[1,66],T=[1,64],I=[1,42],aa=[1,48],S=[1,63],z=[1,73],B=[1,74],W=[1,75],C=[1,76],Q=[1,46],X=[1,72],Y=[1,34],V=[1,35],Z=[1,36],K=[1,37],ba=[1,38],R=[1,39],xa=[1,\n86],ua=[1,6,32,42,131],qa=[1,101],ka=[1,89],ca=[1,88],ea=[1,87],ga=[1,90],ha=[1,91],la=[1,92],oa=[1,93],L=[1,94],ja=[1,95],ra=[1,96],da=[1,97],ma=[1,98],sa=[1,99],ia=[1,100],ya=[1,104],ta=[1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Ja=[2,165],Ta=[1,110],Ga=[1,111],Ua=[1,112],Fa=[1,113],Pa=[1,115],Qa=[1,116],Na=[1,109],za=[1,6,32,42,131,133,135,139,156],na=[2,27],fa=[1,123],Ha=[1,121],Aa=[1,6,31,32,40,41,42,65,70,73,\n82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Ia=[2,94],b=[1,6,31,32,42,46,65,70,73,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],n=[2,73],pa=[1,128],e=[1,133],d=[1,134],va=[1,136],Ka=[1,6,31,32,40,41,42,55,65,70,73,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,\n173,174],wa=[2,91],Gb=[1,6,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],ab=[2,63],Hb=[1,166],bb=[1,178],Wa=[1,180],Ib=[1,175],Oa=[1,182],ub=[1,184],La=[1,6,31,32,40,41,42,55,65,70,73,82,83,84,85,87,89,90,94,96,113,114,115,120,122,131,133,134,135,139,140,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],Jb=[2,110],Kb=[1,6,31,32,40,41,42,58,65,70,73,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,\n135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Lb=[1,6,31,32,40,41,42,46,58,65,70,73,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],Mb=[40,41,114],Nb=[1,241],vb=[1,240],Ma=[1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156],Ea=[2,71],Ob=[1,250],Va=[6,31,32,65,70],hb=[6,31,32,55,65,70,73],cb=[1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,159,160,164,166,\n167,168,169,170,171,172,173,174],Pb=[40,41,82,83,84,85,87,90,113,114],ib=[1,269],db=[2,62],jb=[1,279],Ya=[1,281],wb=[1,286],eb=[1,288],Qb=[2,186],xb=[1,6,31,32,40,41,42,55,65,70,73,82,83,84,85,87,89,90,94,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],kb=[1,297],Ra=[6,31,32,70,115,120],Rb=[1,6,31,32,40,41,42,55,58,65,70,73,82,83,84,85,87,89,90,94,96,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,161,162,163,\n164,165,166,167,168,169,170,171,172,173,174,175],Sb=[1,6,31,32,42,65,70,73,89,94,115,120,122,131,140,156],Za=[1,6,31,32,42,65,70,73,89,94,115,120,122,131,134,140,156],lb=[146,147,148],mb=[70,146,147,148],nb=[6,31,94],Tb=[1,311],Ba=[6,31,32,70,94],Ub=[6,31,32,58,70,94],yb=[6,31,32,55,58,70,94],Vb=[1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,159,160,166,167,168,169,170,171,172,173,174],Wb=[12,28,34,38,40,41,44,45,48,49,50,51,52,53,61,62,63,67,68,89,92,95,97,105,112,117,118,119,\n125,129,130,133,135,137,139,149,155,157,158,159,160,161,162],Xb=[2,175],Sa=[6,31,32],fb=[2,72],Yb=[1,323],Zb=[1,324],$b=[1,6,31,32,42,65,70,73,89,94,115,120,122,127,128,131,133,134,135,139,140,151,153,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],ob=[32,151,153],ac=[1,6,32,42,65,70,73,89,94,115,120,122,131,134,140,156],pb=[1,350],zb=[1,356],Ab=[1,6,32,42,131,156],gb=[2,86],qb=[1,366],rb=[1,367],bc=[1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,151,156,159,160,163,\n164,165,166,167,168,169,170,171,172,173,174],Bb=[1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,135,139,140,156],cc=[1,380],dc=[1,381],Cb=[6,31,32,94],ec=[6,31,32,70],Db=[1,6,31,32,42,65,70,73,89,94,115,120,122,127,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],fc=[31,70],sb=[1,407],tb=[1,408],Eb=[1,414],Fb=[1,415],gc={trace:function(){},yy:{},symbols_:{error:2,Root:3,Body:4,Line:5,TERMINATOR:6,Expression:7,Statement:8,YieldReturn:9,Return:10,Comment:11,STATEMENT:12,\nImport:13,Export:14,Value:15,Invocation:16,Code:17,Operation:18,Assign:19,If:20,Try:21,While:22,For:23,Switch:24,Class:25,Throw:26,Yield:27,YIELD:28,FROM:29,Block:30,INDENT:31,OUTDENT:32,Identifier:33,IDENTIFIER:34,Property:35,PROPERTY:36,AlphaNumeric:37,NUMBER:38,String:39,STRING:40,STRING_START:41,STRING_END:42,Regex:43,REGEX:44,REGEX_START:45,REGEX_END:46,Literal:47,JS:48,UNDEFINED:49,NULL:50,BOOL:51,INFINITY:52,NAN:53,Assignable:54,"\\x3d":55,AssignObj:56,ObjAssignable:57,":":58,SimpleObjAssignable:59,\nThisProperty:60,RETURN:61,HERECOMMENT:62,PARAM_START:63,ParamList:64,PARAM_END:65,FuncGlyph:66,"-\\x3e":67,"\\x3d\\x3e":68,OptComma:69,",":70,Param:71,ParamVar:72,"...":73,Array:74,Object:75,Splat:76,SimpleAssignable:77,Accessor:78,Parenthetical:79,Range:80,This:81,".":82,"?.":83,"::":84,"?::":85,Index:86,INDEX_START:87,IndexValue:88,INDEX_END:89,INDEX_SOAK:90,Slice:91,"{":92,AssignList:93,"}":94,CLASS:95,EXTENDS:96,IMPORT:97,ImportDefaultSpecifier:98,ImportNamespaceSpecifier:99,ImportSpecifierList:100,\nImportSpecifier:101,AS:102,DEFAULT:103,IMPORT_ALL:104,EXPORT:105,ExportSpecifierList:106,EXPORT_ALL:107,ExportSpecifier:108,OptFuncExist:109,Arguments:110,Super:111,SUPER:112,FUNC_EXIST:113,CALL_START:114,CALL_END:115,ArgList:116,THIS:117,"@":118,"[":119,"]":120,RangeDots:121,"..":122,Arg:123,SimpleArgs:124,TRY:125,Catch:126,FINALLY:127,CATCH:128,THROW:129,"(":130,")":131,WhileSource:132,WHILE:133,WHEN:134,UNTIL:135,Loop:136,LOOP:137,ForBody:138,FOR:139,BY:140,ForStart:141,ForSource:142,ForVariables:143,\nOWN:144,ForValue:145,FORIN:146,FOROF:147,FORFROM:148,SWITCH:149,Whens:150,ELSE:151,When:152,LEADING_WHEN:153,IfBlock:154,IF:155,POST_IF:156,UNARY:157,UNARY_MATH:158,"-":159,"+":160,"--":161,"++":162,"?":163,MATH:164,"**":165,SHIFT:166,COMPARE:167,"\\x26":168,"^":169,"|":170,"\\x26\\x26":171,"||":172,"BIN?":173,RELATION:174,COMPOUND_ASSIGN:175,$accept:0,$end:1},terminals_:{2:"error",6:"TERMINATOR",12:"STATEMENT",28:"YIELD",29:"FROM",31:"INDENT",32:"OUTDENT",34:"IDENTIFIER",36:"PROPERTY",38:"NUMBER",40:"STRING",\n41:"STRING_START",42:"STRING_END",44:"REGEX",45:"REGEX_START",46:"REGEX_END",48:"JS",49:"UNDEFINED",50:"NULL",51:"BOOL",52:"INFINITY",53:"NAN",55:"\\x3d",58:":",61:"RETURN",62:"HERECOMMENT",63:"PARAM_START",65:"PARAM_END",67:"-\\x3e",68:"\\x3d\\x3e",70:",",73:"...",82:".",83:"?.",84:"::",85:"?::",87:"INDEX_START",89:"INDEX_END",90:"INDEX_SOAK",92:"{",94:"}",95:"CLASS",96:"EXTENDS",97:"IMPORT",102:"AS",103:"DEFAULT",104:"IMPORT_ALL",105:"EXPORT",107:"EXPORT_ALL",112:"SUPER",113:"FUNC_EXIST",114:"CALL_START",\n115:"CALL_END",117:"THIS",118:"@",119:"[",120:"]",122:"..",125:"TRY",127:"FINALLY",128:"CATCH",129:"THROW",130:"(",131:")",133:"WHILE",134:"WHEN",135:"UNTIL",137:"LOOP",139:"FOR",140:"BY",144:"OWN",146:"FORIN",147:"FOROF",148:"FORFROM",149:"SWITCH",151:"ELSE",153:"LEADING_WHEN",155:"IF",156:"POST_IF",157:"UNARY",158:"UNARY_MATH",159:"-",160:"+",161:"--",162:"++",163:"?",164:"MATH",165:"**",166:"SHIFT",167:"COMPARE",168:"\\x26",169:"^",170:"|",171:"\\x26\\x26",172:"||",173:"BIN?",174:"RELATION",175:"COMPOUND_ASSIGN"},\nproductions_:[0,[3,0],[3,1],[4,1],[4,3],[4,2],[5,1],[5,1],[5,1],[8,1],[8,1],[8,1],[8,1],[8,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[27,1],[27,2],[27,3],[30,2],[30,3],[33,1],[35,1],[37,1],[37,1],[39,1],[39,3],[43,1],[43,3],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[19,3],[19,4],[19,5],[56,1],[56,3],[56,5],[56,3],[56,5],[56,1],[59,1],[59,1],[59,1],[57,1],[57,1],[10,2],[10,1],[9,3],[9,2],[11,1],[17,5],[17,2],[66,1],[66,1],[69,0],[69,1],[64,0],[64,\n1],[64,3],[64,4],[64,6],[71,1],[71,2],[71,3],[71,1],[72,1],[72,1],[72,1],[72,1],[76,2],[77,1],[77,2],[77,2],[77,1],[54,1],[54,1],[54,1],[15,1],[15,1],[15,1],[15,1],[15,1],[78,2],[78,2],[78,2],[78,2],[78,1],[78,1],[86,3],[86,2],[88,1],[88,1],[75,4],[93,0],[93,1],[93,3],[93,4],[93,6],[25,1],[25,2],[25,3],[25,4],[25,2],[25,3],[25,4],[25,5],[13,2],[13,4],[13,4],[13,5],[13,7],[13,6],[13,9],[100,1],[100,3],[100,4],[100,4],[100,6],[101,1],[101,3],[101,1],[101,3],[98,1],[99,3],[14,3],[14,5],[14,2],[14,4],\n[14,5],[14,6],[14,3],[14,4],[14,7],[106,1],[106,3],[106,4],[106,4],[106,6],[108,1],[108,3],[108,3],[108,1],[16,3],[16,3],[16,3],[16,1],[111,1],[111,2],[109,0],[109,1],[110,2],[110,4],[81,1],[81,1],[60,2],[74,2],[74,4],[121,1],[121,1],[80,5],[91,3],[91,2],[91,2],[91,1],[116,1],[116,3],[116,4],[116,4],[116,6],[123,1],[123,1],[123,1],[124,1],[124,3],[21,2],[21,3],[21,4],[21,5],[126,3],[126,3],[126,2],[26,2],[79,3],[79,5],[132,2],[132,4],[132,2],[132,4],[22,2],[22,2],[22,2],[22,1],[136,2],[136,2],[23,\n2],[23,2],[23,2],[138,2],[138,4],[138,2],[141,2],[141,3],[145,1],[145,1],[145,1],[145,1],[143,1],[143,3],[142,2],[142,2],[142,4],[142,4],[142,4],[142,6],[142,6],[142,2],[142,4],[24,5],[24,7],[24,4],[24,6],[150,1],[150,2],[152,3],[152,4],[154,3],[154,5],[20,1],[20,3],[20,3],[20,3],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,5],[18,4],[18,3]],performAction:function(a,n,pa,b,c,e,d){a=\ne.length-1;switch(c){case 1:return this.$=b.addLocationDataFn(d[a],d[a])(new b.Block);case 2:return this.$=e[a];case 3:this.$=b.addLocationDataFn(d[a],d[a])(b.Block.wrap([e[a]]));break;case 4:this.$=b.addLocationDataFn(d[a-2],d[a])(e[a-2].push(e[a]));break;case 5:this.$=e[a-1];break;case 6:case 7:case 8:case 9:case 10:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 35:case 40:case 42:case 56:case 57:case 58:case 59:case 60:case 61:case 71:case 72:case 82:case 83:case 84:case 85:case 90:case 91:case 94:case 98:case 104:case 162:case 186:case 187:case 189:case 219:case 220:case 238:case 244:this.$=\ne[a];break;case 11:this.$=b.addLocationDataFn(d[a],d[a])(new b.StatementLiteral(e[a]));break;case 27:this.$=b.addLocationDataFn(d[a],d[a])(new b.Op(e[a],new b.Value(new b.Literal(""))));break;case 28:case 248:case 249:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Op(e[a-1],e[a]));break;case 29:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Op(e[a-2].concat(e[a-1]),e[a]));break;case 30:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Block);break;case 31:case 105:this.$=b.addLocationDataFn(d[a-2],d[a])(e[a-\n1]);break;case 32:this.$=b.addLocationDataFn(d[a],d[a])(new b.IdentifierLiteral(e[a]));break;case 33:this.$=b.addLocationDataFn(d[a],d[a])(new b.PropertyName(e[a]));break;case 34:this.$=b.addLocationDataFn(d[a],d[a])(new b.NumberLiteral(e[a]));break;case 36:this.$=b.addLocationDataFn(d[a],d[a])(new b.StringLiteral(e[a]));break;case 37:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.StringWithInterpolations(e[a-1]));break;case 38:this.$=b.addLocationDataFn(d[a],d[a])(new b.RegexLiteral(e[a]));break;\ncase 39:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.RegexWithInterpolations(e[a-1].args));break;case 41:this.$=b.addLocationDataFn(d[a],d[a])(new b.PassthroughLiteral(e[a]));break;case 43:this.$=b.addLocationDataFn(d[a],d[a])(new b.UndefinedLiteral);break;case 44:this.$=b.addLocationDataFn(d[a],d[a])(new b.NullLiteral);break;case 45:this.$=b.addLocationDataFn(d[a],d[a])(new b.BooleanLiteral(e[a]));break;case 46:this.$=b.addLocationDataFn(d[a],d[a])(new b.InfinityLiteral(e[a]));break;case 47:this.$=\nb.addLocationDataFn(d[a],d[a])(new b.NaNLiteral);break;case 48:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Assign(e[a-2],e[a]));break;case 49:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.Assign(e[a-3],e[a]));break;case 50:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.Assign(e[a-4],e[a-1]));break;case 51:case 87:case 92:case 93:case 95:case 96:case 97:case 221:case 222:this.$=b.addLocationDataFn(d[a],d[a])(new b.Value(e[a]));break;case 52:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Assign(b.addLocationDataFn(d[a-\n2])(new b.Value(e[a-2])),e[a],"object",{operatorToken:b.addLocationDataFn(d[a-1])(new b.Literal(e[a-1]))}));break;case 53:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.Assign(b.addLocationDataFn(d[a-4])(new b.Value(e[a-4])),e[a-1],"object",{operatorToken:b.addLocationDataFn(d[a-3])(new b.Literal(e[a-3]))}));break;case 54:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Assign(b.addLocationDataFn(d[a-2])(new b.Value(e[a-2])),e[a],null,{operatorToken:b.addLocationDataFn(d[a-1])(new b.Literal(e[a-1]))}));\nbreak;case 55:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.Assign(b.addLocationDataFn(d[a-4])(new b.Value(e[a-4])),e[a-1],null,{operatorToken:b.addLocationDataFn(d[a-3])(new b.Literal(e[a-3]))}));break;case 62:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Return(e[a]));break;case 63:this.$=b.addLocationDataFn(d[a],d[a])(new b.Return);break;case 64:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.YieldReturn(e[a]));break;case 65:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.YieldReturn);break;case 66:this.$=\nb.addLocationDataFn(d[a],d[a])(new b.Comment(e[a]));break;case 67:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.Code(e[a-3],e[a],e[a-1]));break;case 68:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Code([],e[a],e[a-1]));break;case 69:this.$=b.addLocationDataFn(d[a],d[a])("func");break;case 70:this.$=b.addLocationDataFn(d[a],d[a])("boundfunc");break;case 73:case 110:this.$=b.addLocationDataFn(d[a],d[a])([]);break;case 74:case 111:case 130:case 150:case 181:case 223:this.$=b.addLocationDataFn(d[a],\nd[a])([e[a]]);break;case 75:case 112:case 131:case 151:case 182:this.$=b.addLocationDataFn(d[a-2],d[a])(e[a-2].concat(e[a]));break;case 76:case 113:case 132:case 152:case 183:this.$=b.addLocationDataFn(d[a-3],d[a])(e[a-3].concat(e[a]));break;case 77:case 114:case 134:case 154:case 185:this.$=b.addLocationDataFn(d[a-5],d[a])(e[a-5].concat(e[a-2]));break;case 78:this.$=b.addLocationDataFn(d[a],d[a])(new b.Param(e[a]));break;case 79:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Param(e[a-1],null,!0));\nbreak;case 80:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Param(e[a-2],e[a]));break;case 81:case 188:this.$=b.addLocationDataFn(d[a],d[a])(new b.Expansion);break;case 86:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Splat(e[a-1]));break;case 88:this.$=b.addLocationDataFn(d[a-1],d[a])(e[a-1].add(e[a]));break;case 89:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Value(e[a-1],[].concat(e[a])));break;case 99:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Access(e[a]));break;case 100:this.$=b.addLocationDataFn(d[a-\n1],d[a])(new b.Access(e[a],"soak"));break;case 101:this.$=b.addLocationDataFn(d[a-1],d[a])([b.addLocationDataFn(d[a-1])(new b.Access(new b.PropertyName("prototype"))),b.addLocationDataFn(d[a])(new b.Access(e[a]))]);break;case 102:this.$=b.addLocationDataFn(d[a-1],d[a])([b.addLocationDataFn(d[a-1])(new b.Access(new b.PropertyName("prototype"),"soak")),b.addLocationDataFn(d[a])(new b.Access(e[a]))]);break;case 103:this.$=b.addLocationDataFn(d[a],d[a])(new b.Access(new b.PropertyName("prototype")));\nbreak;case 106:this.$=b.addLocationDataFn(d[a-1],d[a])(b.extend(e[a],{soak:!0}));break;case 107:this.$=b.addLocationDataFn(d[a],d[a])(new b.Index(e[a]));break;case 108:this.$=b.addLocationDataFn(d[a],d[a])(new b.Slice(e[a]));break;case 109:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.Obj(e[a-2],e[a-3].generated));break;case 115:this.$=b.addLocationDataFn(d[a],d[a])(new b.Class);break;case 116:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Class(null,null,e[a]));break;case 117:this.$=b.addLocationDataFn(d[a-\n2],d[a])(new b.Class(null,e[a]));break;case 118:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.Class(null,e[a-1],e[a]));break;case 119:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Class(e[a]));break;case 120:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Class(e[a-1],null,e[a]));break;case 121:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.Class(e[a-2],e[a]));break;case 122:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.Class(e[a-3],e[a-1],e[a]));break;case 123:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.ImportDeclaration(null,\ne[a]));break;case 124:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.ImportDeclaration(new b.ImportClause(e[a-2],null),e[a]));break;case 125:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.ImportDeclaration(new b.ImportClause(null,e[a-2]),e[a]));break;case 126:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.ImportDeclaration(new b.ImportClause(null,new b.ImportSpecifierList([])),e[a]));break;case 127:this.$=b.addLocationDataFn(d[a-6],d[a])(new b.ImportDeclaration(new b.ImportClause(null,new b.ImportSpecifierList(e[a-\n4])),e[a]));break;case 128:this.$=b.addLocationDataFn(d[a-5],d[a])(new b.ImportDeclaration(new b.ImportClause(e[a-4],e[a-2]),e[a]));break;case 129:this.$=b.addLocationDataFn(d[a-8],d[a])(new b.ImportDeclaration(new b.ImportClause(e[a-7],new b.ImportSpecifierList(e[a-4])),e[a]));break;case 133:case 153:case 168:case 184:this.$=b.addLocationDataFn(d[a-3],d[a])(e[a-2]);break;case 135:this.$=b.addLocationDataFn(d[a],d[a])(new b.ImportSpecifier(e[a]));break;case 136:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.ImportSpecifier(e[a-\n2],e[a]));break;case 137:this.$=b.addLocationDataFn(d[a],d[a])(new b.ImportSpecifier(new b.Literal(e[a])));break;case 138:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.ImportSpecifier(new b.Literal(e[a-2]),e[a]));break;case 139:this.$=b.addLocationDataFn(d[a],d[a])(new b.ImportDefaultSpecifier(e[a]));break;case 140:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.ImportNamespaceSpecifier(new b.Literal(e[a-2]),e[a]));break;case 141:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.ExportNamedDeclaration(new b.ExportSpecifierList([])));\nbreak;case 142:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.ExportNamedDeclaration(new b.ExportSpecifierList(e[a-2])));break;case 143:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.ExportNamedDeclaration(e[a]));break;case 144:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.ExportNamedDeclaration(new b.Assign(e[a-2],e[a],null,{moduleDeclaration:"export"})));break;case 145:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.ExportNamedDeclaration(new b.Assign(e[a-3],e[a],null,{moduleDeclaration:"export"})));\nbreak;case 146:this.$=b.addLocationDataFn(d[a-5],d[a])(new b.ExportNamedDeclaration(new b.Assign(e[a-4],e[a-1],null,{moduleDeclaration:"export"})));break;case 147:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.ExportDefaultDeclaration(e[a]));break;case 148:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.ExportAllDeclaration(new b.Literal(e[a-2]),e[a]));break;case 149:this.$=b.addLocationDataFn(d[a-6],d[a])(new b.ExportNamedDeclaration(new b.ExportSpecifierList(e[a-4]),e[a]));break;case 155:this.$=b.addLocationDataFn(d[a],\nd[a])(new b.ExportSpecifier(e[a]));break;case 156:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.ExportSpecifier(e[a-2],e[a]));break;case 157:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.ExportSpecifier(e[a-2],new b.Literal(e[a])));break;case 158:this.$=b.addLocationDataFn(d[a],d[a])(new b.ExportSpecifier(new b.Literal(e[a])));break;case 159:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.TaggedTemplateCall(e[a-2],e[a],e[a-1]));break;case 160:case 161:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Call(e[a-\n2],e[a],e[a-1]));break;case 163:this.$=b.addLocationDataFn(d[a],d[a])(new b.SuperCall);break;case 164:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.SuperCall(e[a]));break;case 165:this.$=b.addLocationDataFn(d[a],d[a])(!1);break;case 166:this.$=b.addLocationDataFn(d[a],d[a])(!0);break;case 167:this.$=b.addLocationDataFn(d[a-1],d[a])([]);break;case 169:case 170:this.$=b.addLocationDataFn(d[a],d[a])(new b.Value(new b.ThisLiteral));break;case 171:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Value(b.addLocationDataFn(d[a-\n1])(new b.ThisLiteral),[b.addLocationDataFn(d[a])(new b.Access(e[a]))],"this"));break;case 172:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Arr([]));break;case 173:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.Arr(e[a-2]));break;case 174:this.$=b.addLocationDataFn(d[a],d[a])("inclusive");break;case 175:this.$=b.addLocationDataFn(d[a],d[a])("exclusive");break;case 176:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.Range(e[a-3],e[a-1],e[a-2]));break;case 177:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Range(e[a-\n2],e[a],e[a-1]));break;case 178:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Range(e[a-1],null,e[a]));break;case 179:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Range(null,e[a],e[a-1]));break;case 180:this.$=b.addLocationDataFn(d[a],d[a])(new b.Range(null,null,e[a]));break;case 190:this.$=b.addLocationDataFn(d[a-2],d[a])([].concat(e[a-2],e[a]));break;case 191:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Try(e[a]));break;case 192:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Try(e[a-1],e[a][0],\ne[a][1]));break;case 193:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.Try(e[a-2],null,null,e[a]));break;case 194:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.Try(e[a-3],e[a-2][0],e[a-2][1],e[a]));break;case 195:this.$=b.addLocationDataFn(d[a-2],d[a])([e[a-1],e[a]]);break;case 196:this.$=b.addLocationDataFn(d[a-2],d[a])([b.addLocationDataFn(d[a-1])(new b.Value(e[a-1])),e[a]]);break;case 197:this.$=b.addLocationDataFn(d[a-1],d[a])([null,e[a]]);break;case 198:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Throw(e[a]));\nbreak;case 199:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Parens(e[a-1]));break;case 200:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.Parens(e[a-2]));break;case 201:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.While(e[a]));break;case 202:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.While(e[a-2],{guard:e[a]}));break;case 203:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.While(e[a],{invert:!0}));break;case 204:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.While(e[a-2],{invert:!0,guard:e[a]}));\nbreak;case 205:this.$=b.addLocationDataFn(d[a-1],d[a])(e[a-1].addBody(e[a]));break;case 206:case 207:this.$=b.addLocationDataFn(d[a-1],d[a])(e[a].addBody(b.addLocationDataFn(d[a-1])(b.Block.wrap([e[a-1]]))));break;case 208:this.$=b.addLocationDataFn(d[a],d[a])(e[a]);break;case 209:this.$=b.addLocationDataFn(d[a-1],d[a])((new b.While(b.addLocationDataFn(d[a-1])(new b.BooleanLiteral("true")))).addBody(e[a]));break;case 210:this.$=b.addLocationDataFn(d[a-1],d[a])((new b.While(b.addLocationDataFn(d[a-\n1])(new b.BooleanLiteral("true")))).addBody(b.addLocationDataFn(d[a])(b.Block.wrap([e[a]]))));break;case 211:case 212:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.For(e[a-1],e[a]));break;case 213:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.For(e[a],e[a-1]));break;case 214:this.$=b.addLocationDataFn(d[a-1],d[a])({source:b.addLocationDataFn(d[a])(new b.Value(e[a]))});break;case 215:this.$=b.addLocationDataFn(d[a-3],d[a])({source:b.addLocationDataFn(d[a-2])(new b.Value(e[a-2])),step:e[a]});break;\ncase 216:b=b.addLocationDataFn(d[a-1],d[a]);e[a].own=e[a-1].own;e[a].ownTag=e[a-1].ownTag;e[a].name=e[a-1][0];e[a].index=e[a-1][1];this.$=b(e[a]);break;case 217:this.$=b.addLocationDataFn(d[a-1],d[a])(e[a]);break;case 218:c=b.addLocationDataFn(d[a-2],d[a]);e[a].own=!0;e[a].ownTag=b.addLocationDataFn(d[a-1])(new b.Literal(e[a-1]));this.$=c(e[a]);break;case 224:this.$=b.addLocationDataFn(d[a-2],d[a])([e[a-2],e[a]]);break;case 225:this.$=b.addLocationDataFn(d[a-1],d[a])({source:e[a]});break;case 226:this.$=\nb.addLocationDataFn(d[a-1],d[a])({source:e[a],object:!0});break;case 227:this.$=b.addLocationDataFn(d[a-3],d[a])({source:e[a-2],guard:e[a]});break;case 228:this.$=b.addLocationDataFn(d[a-3],d[a])({source:e[a-2],guard:e[a],object:!0});break;case 229:this.$=b.addLocationDataFn(d[a-3],d[a])({source:e[a-2],step:e[a]});break;case 230:this.$=b.addLocationDataFn(d[a-5],d[a])({source:e[a-4],guard:e[a-2],step:e[a]});break;case 231:this.$=b.addLocationDataFn(d[a-5],d[a])({source:e[a-4],step:e[a-2],guard:e[a]});\nbreak;case 232:this.$=b.addLocationDataFn(d[a-1],d[a])({source:e[a],from:!0});break;case 233:this.$=b.addLocationDataFn(d[a-3],d[a])({source:e[a-2],guard:e[a],from:!0});break;case 234:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.Switch(e[a-3],e[a-1]));break;case 235:this.$=b.addLocationDataFn(d[a-6],d[a])(new b.Switch(e[a-5],e[a-3],e[a-1]));break;case 236:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.Switch(null,e[a-1]));break;case 237:this.$=b.addLocationDataFn(d[a-5],d[a])(new b.Switch(null,e[a-\n3],e[a-1]));break;case 239:this.$=b.addLocationDataFn(d[a-1],d[a])(e[a-1].concat(e[a]));break;case 240:this.$=b.addLocationDataFn(d[a-2],d[a])([[e[a-1],e[a]]]);break;case 241:this.$=b.addLocationDataFn(d[a-3],d[a])([[e[a-2],e[a-1]]]);break;case 242:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.If(e[a-1],e[a],{type:e[a-2]}));break;case 243:this.$=b.addLocationDataFn(d[a-4],d[a])(e[a-4].addElse(b.addLocationDataFn(d[a-2],d[a])(new b.If(e[a-1],e[a],{type:e[a-2]}))));break;case 245:this.$=b.addLocationDataFn(d[a-\n2],d[a])(e[a-2].addElse(e[a]));break;case 246:case 247:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.If(e[a],b.addLocationDataFn(d[a-2])(b.Block.wrap([e[a-2]])),{type:e[a-1],statement:!0}));break;case 250:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Op("-",e[a]));break;case 251:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Op("+",e[a]));break;case 252:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Op("--",e[a]));break;case 253:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Op("++",e[a]));break;case 254:this.$=\nb.addLocationDataFn(d[a-1],d[a])(new b.Op("--",e[a-1],null,!0));break;case 255:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Op("++",e[a-1],null,!0));break;case 256:this.$=b.addLocationDataFn(d[a-1],d[a])(new b.Existence(e[a-1]));break;case 257:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Op("+",e[a-2],e[a]));break;case 258:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Op("-",e[a-2],e[a]));break;case 259:case 260:case 261:case 262:case 263:case 264:case 265:case 266:case 267:case 268:this.$=b.addLocationDataFn(d[a-\n2],d[a])(new b.Op(e[a-1],e[a-2],e[a]));break;case 269:d=b.addLocationDataFn(d[a-2],d[a]);e="!"===e[a-1].charAt(0)?(new b.Op(e[a-1].slice(1),e[a-2],e[a])).invert():new b.Op(e[a-1],e[a-2],e[a]);this.$=d(e);break;case 270:this.$=b.addLocationDataFn(d[a-2],d[a])(new b.Assign(e[a-2],e[a],e[a-1]));break;case 271:this.$=b.addLocationDataFn(d[a-4],d[a])(new b.Assign(e[a-4],e[a-1],e[a-3]));break;case 272:this.$=b.addLocationDataFn(d[a-3],d[a])(new b.Assign(e[a-3],e[a],e[a-2]));break;case 273:this.$=b.addLocationDataFn(d[a-\n2],d[a])(new b.Extends(e[a-2],e[a]))}},table:[{1:[2,1],3:1,4:2,5:3,7:4,8:5,9:6,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:u,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,\n158:V,159:Z,160:K,161:ba,162:R},{1:[3]},{1:[2,2],6:xa},a(ua,[2,3]),a(ua,[2,6],{141:77,132:102,138:103,133:z,135:B,139:C,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(ua,[2,7],{141:77,132:105,138:106,133:z,135:B,139:C,156:ya}),a(ua,[2,8]),a(ta,[2,14],{109:107,78:108,86:114,40:Ja,41:Ja,114:Ja,82:Ta,83:Ga,84:Ua,85:Fa,87:Pa,90:Qa,113:Na}),a(ta,[2,15],{86:114,109:117,78:118,82:Ta,83:Ga,84:Ua,85:Fa,87:Pa,90:Qa,113:Na,114:Ja}),a(ta,[2,16]),a(ta,\n[2,17]),a(ta,[2,18]),a(ta,[2,19]),a(ta,[2,20]),a(ta,[2,21]),a(ta,[2,22]),a(ta,[2,23]),a(ta,[2,24]),a(ta,[2,25]),a(ta,[2,26]),a(za,[2,9]),a(za,[2,10]),a(za,[2,11]),a(za,[2,12]),a(za,[2,13]),a([1,6,32,42,131,133,135,139,156,163,164,165,166,167,168,169,170,171,172,173,174],na,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,66:33,77:40,154:41,132:43,136:44,138:45,74:53,75:54,37:55,43:57,33:70,60:71,141:77,39:80,7:120,\n8:122,12:c,28:fa,29:Ha,34:f,38:D,40:l,41:w,44:G,45:F,48:x,49:v,50:M,51:N,52:J,53:r,61:[1,119],62:O,63:m,67:k,68:t,92:p,95:h,97:y,105:P,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,137:W,149:Q,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R}),a(Aa,Ia,{55:[1,124]}),a(Aa,[2,95]),a(Aa,[2,96]),a(Aa,[2,97]),a(Aa,[2,98]),a(b,[2,162]),a([6,31,65,70],n,{64:125,71:126,72:127,33:129,60:130,74:131,75:132,34:f,73:pa,92:p,118:e,119:d}),{30:135,31:va},{7:137,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,\n20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:138,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,\n25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:139,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,\n34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:140,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,\n43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{15:142,16:143,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:144,60:71,74:53,75:54,77:141,79:28,80:29,81:30,92:p,111:31,112:A,117:H,118:U,119:T,\n130:S},{15:142,16:143,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:144,60:71,74:53,75:54,77:145,79:28,80:29,81:30,92:p,111:31,112:A,117:H,118:U,119:T,130:S},a(Ka,wa,{96:[1,149],161:[1,146],162:[1,147],175:[1,148]}),a(ta,[2,244],{151:[1,150]}),{30:151,31:va},{30:152,31:va},a(ta,[2,208]),{30:153,31:va},{7:154,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,31:[1,155],33:70,34:f,37:55,\n38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Gb,[2,115],{47:27,79:28,80:29,81:30,111:31,74:53,75:54,37:55,43:57,33:70,60:71,39:80,15:142,16:143,54:144,30:156,77:158,31:va,34:f,38:D,40:l,41:w,44:G,45:F,48:x,49:v,50:M,\n51:N,52:J,53:r,92:p,96:[1,157],112:A,117:H,118:U,119:T,130:S}),{7:159,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,\n158:V,159:Z,160:K,161:ba,162:R},a(za,ab,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,66:33,77:40,154:41,132:43,136:44,138:45,74:53,75:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,7:160,12:c,28:fa,34:f,38:D,40:l,41:w,44:G,45:F,48:x,49:v,50:M,51:N,52:J,53:r,61:E,62:O,63:m,67:k,68:t,92:p,95:h,97:y,105:P,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,137:W,149:Q,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R}),a([1,6,\n31,32,42,70,94,131,133,135,139,156],[2,66]),{33:165,34:f,39:161,40:l,41:w,92:[1,164],98:162,99:163,104:Hb},{25:168,33:169,34:f,92:[1,167],95:h,103:[1,170],107:[1,171]},a(Ka,[2,92]),a(Ka,[2,93]),a(Aa,[2,40]),a(Aa,[2,41]),a(Aa,[2,42]),a(Aa,[2,43]),a(Aa,[2,44]),a(Aa,[2,45]),a(Aa,[2,46]),a(Aa,[2,47]),{4:172,5:3,7:4,8:5,9:6,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:u,31:[1,173],33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,\n48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:174,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,31:bb,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,\n53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,73:Wa,74:53,75:54,76:179,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,116:176,117:H,118:U,119:T,120:Ib,123:177,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Aa,[2,169]),a(Aa,[2,170],{35:181,36:Oa}),a([1,6,31,32,42,46,65,70,73,82,83,84,85,87,89,90,94,113,115,120,122,131,133,134,135,139,140,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],[2,163],\n{110:183,114:ub}),{31:[2,69]},{31:[2,70]},a(La,[2,87]),a(La,[2,90]),{7:185,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,\n157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:186,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,\n162:R},{7:187,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:189,8:122,10:20,11:21,\n12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,30:188,31:va,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{33:194,34:f,60:195,74:196,75:197,80:190,\n92:p,118:e,119:T,143:191,144:[1,192],145:193},{142:198,146:[1,199],147:[1,200],148:[1,201]},a([6,31,70,94],Jb,{39:80,93:202,56:203,57:204,59:205,11:206,37:207,33:208,35:209,60:210,34:f,36:Oa,38:D,40:l,41:w,62:O,118:e}),a(Kb,[2,34]),a(Kb,[2,35]),a(Aa,[2,38]),{15:142,16:211,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:144,60:71,74:53,75:54,77:212,79:28,80:29,81:30,92:p,111:31,112:A,117:H,118:U,119:T,130:S},a([1,6,29,31,32,40,41,42,55,58,65,70,73,82,83,\n84,85,87,89,90,94,96,102,113,114,115,120,122,131,133,134,135,139,140,146,147,148,156,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175],[2,32]),a(Lb,[2,36]),{4:213,5:3,7:4,8:5,9:6,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:u,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,\n112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(ua,[2,5],{7:4,8:5,9:6,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,66:33,77:40,154:41,132:43,136:44,138:45,74:53,75:54,37:55,43:57,33:70,60:71,141:77,39:80,5:214,12:c,28:u,34:f,38:D,40:l,41:w,44:G,45:F,48:x,49:v,50:M,51:N,52:J,53:r,61:E,62:O,63:m,67:k,68:t,\n92:p,95:h,97:y,105:P,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,133:z,135:B,137:W,139:C,149:Q,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R}),a(ta,[2,256]),{7:215,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,\n129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:216,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,\n136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:217,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,\n149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:218,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,\n159:Z,160:K,161:ba,162:R},{7:219,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:220,\n8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:221,8:122,10:20,11:21,12:c,13:23,\n14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:222,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,\n20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:223,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,\n25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:224,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,\n34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:225,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,\n43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:226,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,\n50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:227,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,\n61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:228,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,\n74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(ta,[2,207]),a(ta,[2,212]),{7:229,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,\n75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(ta,[2,206]),a(ta,[2,211]),{39:230,40:l,41:w,110:231,114:ub},a(La,[2,88]),a(Mb,[2,166]),{35:232,36:Oa},{35:233,36:Oa},a(La,[2,103],{35:234,36:Oa}),{35:235,36:Oa},a(La,[2,104]),{7:237,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,\n28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,73:Nb,74:53,75:54,77:40,79:28,80:29,81:30,88:236,91:238,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,121:239,122:vb,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{86:242,87:Pa,90:Qa},{110:243,114:ub},a(La,[2,89]),a(ua,[2,65],{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,\n24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,66:33,77:40,154:41,132:43,136:44,138:45,74:53,75:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,7:244,12:c,28:fa,34:f,38:D,40:l,41:w,44:G,45:F,48:x,49:v,50:M,51:N,52:J,53:r,61:E,62:O,63:m,67:k,68:t,92:p,95:h,97:y,105:P,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,133:ab,135:ab,139:ab,156:ab,137:W,149:Q,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R}),a(Ma,[2,28],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,\n166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{7:245,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,\n158:V,159:Z,160:K,161:ba,162:R},{132:105,133:z,135:B,138:106,139:C,141:77,156:ya},a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,163,164,165,166,167,168,169,170,171,172,173,174],na,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,66:33,77:40,154:41,132:43,136:44,138:45,74:53,75:54,37:55,43:57,33:70,60:71,141:77,39:80,7:120,8:122,12:c,28:fa,29:Ha,34:f,38:D,40:l,41:w,44:G,45:F,48:x,49:v,50:M,\n51:N,52:J,53:r,61:E,62:O,63:m,67:k,68:t,92:p,95:h,97:y,105:P,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,137:W,149:Q,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R}),{6:[1,247],7:246,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,31:[1,248],33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,\n112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a([6,31],Ea,{69:251,65:[1,249],70:Ob}),a(Va,[2,74]),a(Va,[2,78],{55:[1,253],73:[1,252]}),a(Va,[2,81]),a(hb,[2,82]),a(hb,[2,83]),a(hb,[2,84]),a(hb,[2,85]),{35:181,36:Oa},{7:254,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,31:bb,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,\n47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,73:Wa,74:53,75:54,76:179,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,116:176,117:H,118:U,119:T,120:Ib,123:177,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(ta,[2,68]),{4:256,5:3,7:4,8:5,9:6,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:u,32:[1,255],33:70,34:f,37:55,\n38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,159,160,164,165,166,167,168,169,170,171,172,173,174],[2,248],{141:77,132:102,138:103,163:ea}),a(cb,\n[2,249],{141:77,132:102,138:103,163:ea,165:ha}),a(cb,[2,250],{141:77,132:102,138:103,163:ea,165:ha}),a(cb,[2,251],{141:77,132:102,138:103,163:ea,165:ha}),a(ta,[2,252],{40:wa,41:wa,82:wa,83:wa,84:wa,85:wa,87:wa,90:wa,113:wa,114:wa}),a(Mb,Ja,{109:107,78:108,86:114,82:Ta,83:Ga,84:Ua,85:Fa,87:Pa,90:Qa,113:Na}),{78:118,82:Ta,83:Ga,84:Ua,85:Fa,86:114,87:Pa,90:Qa,109:117,113:Na,114:Ja},a(Pb,Ia),a(ta,[2,253],{40:wa,41:wa,82:wa,83:wa,84:wa,85:wa,87:wa,90:wa,113:wa,114:wa}),a(ta,[2,254]),a(ta,[2,255]),{6:[1,\n259],7:257,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,31:[1,258],33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:260,8:122,10:20,\n11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{30:261,31:va,155:[1,262]},a(ta,[2,191],{126:263,\n127:[1,264],128:[1,265]}),a(ta,[2,205]),a(ta,[2,213]),{31:[1,266],132:102,133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},{150:267,152:268,153:ib},a(ta,[2,116]),{7:270,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,\n68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Gb,[2,119],{30:271,31:va,40:wa,41:wa,82:wa,83:wa,84:wa,85:wa,87:wa,90:wa,113:wa,114:wa,96:[1,272]}),a(Ma,[2,198],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(za,db,{141:77,132:102,138:103,159:ka,160:ca,\n163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(za,[2,123]),{29:[1,273],70:[1,274]},{29:[1,275]},{31:jb,33:280,34:f,94:[1,276],100:277,101:278,103:Ya},a([29,70],[2,139]),{102:[1,282]},{31:wb,33:287,34:f,94:[1,283],103:eb,106:284,108:285},a(za,[2,143]),{55:[1,289]},{7:290,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,\n51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{29:[1,291]},{6:xa,131:[1,292]},{4:293,5:3,7:4,8:5,9:6,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:u,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,\n49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a([6,31,70,120],Qb,{141:77,132:102,138:103,121:294,73:[1,295],122:vb,133:z,135:B,139:C,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(xb,[2,172]),a([6,31,120],\nEa,{69:296,70:kb}),a(Ra,[2,181]),{7:254,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,31:bb,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,73:Wa,74:53,75:54,76:179,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,116:298,117:H,118:U,119:T,123:177,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,\n157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Ra,[2,187]),a(Ra,[2,188]),a(Rb,[2,171]),a(Rb,[2,33]),a(b,[2,164]),{7:254,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,31:bb,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,73:Wa,74:53,75:54,76:179,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,115:[1,299],116:300,117:H,118:U,119:T,123:177,125:I,\n129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{30:301,31:va,132:102,133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},a(Sb,[2,201],{141:77,132:102,138:103,133:z,134:[1,302],135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Sb,[2,203],{141:77,132:102,138:103,133:z,134:[1,303],\n135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(ta,[2,209]),a(Za,[2,210],{141:77,132:102,138:103,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,156,159,160,163,164,165,166,167,168,169,170,171,172,173,174],[2,214],{140:[1,304]}),a(lb,[2,217]),{33:194,34:f,60:195,74:196,75:197,92:p,118:e,119:d,143:305,145:193},\na(lb,[2,223],{70:[1,306]}),a(mb,[2,219]),a(mb,[2,220]),a(mb,[2,221]),a(mb,[2,222]),a(ta,[2,216]),{7:307,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,\n141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:308,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,\n158:V,159:Z,160:K,161:ba,162:R},{7:309,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},\na(nb,Ea,{69:310,70:Tb}),a(Ba,[2,111]),a(Ba,[2,51],{58:[1,312]}),a(Ub,[2,60],{55:[1,313]}),a(Ba,[2,56]),a(Ub,[2,61]),a(yb,[2,57]),a(yb,[2,58]),a(yb,[2,59]),{46:[1,314],78:118,82:Ta,83:Ga,84:Ua,85:Fa,86:114,87:Pa,90:Qa,109:117,113:Na,114:Ja},a(Pb,wa),{6:xa,42:[1,315]},a(ua,[2,4]),a(Vb,[2,257],{141:77,132:102,138:103,163:ea,164:ga,165:ha}),a(Vb,[2,258],{141:77,132:102,138:103,163:ea,164:ga,165:ha}),a(cb,[2,259],{141:77,132:102,138:103,163:ea,165:ha}),a(cb,[2,260],{141:77,132:102,138:103,163:ea,165:ha}),\na([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,166,167,168,169,170,171,172,173,174],[2,261],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha}),a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,167,168,169,170,171,172,173],[2,262],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,174:ia}),a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,168,169,170,171,172,173],[2,263],{141:77,132:102,138:103,159:ka,160:ca,\n163:ea,164:ga,165:ha,166:la,167:oa,174:ia}),a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,169,170,171,172,173],[2,264],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,174:ia}),a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,170,171,172,173],[2,265],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,174:ia}),a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,171,172,\n173],[2,266],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,174:ia}),a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,172,173],[2,267],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,174:ia}),a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,173],[2,268],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,\n174:ia}),a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,140,156,167,168,169,170,171,172,173,174],[2,269],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la}),a(Za,[2,247],{141:77,132:102,138:103,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Za,[2,246],{141:77,132:102,138:103,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(b,\n[2,159]),a(b,[2,160]),a(La,[2,99]),a(La,[2,100]),a(La,[2,101]),a(La,[2,102]),{89:[1,316]},{73:Nb,89:[2,107],121:317,122:vb,132:102,133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},{89:[2,108]},{7:318,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,\n60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,89:[2,180],92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Wb,[2,174]),a(Wb,Xb),a(La,[2,106]),a(b,[2,161]),a(ua,[2,64],{141:77,132:102,138:103,133:db,135:db,139:db,156:db,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Ma,[2,29],{141:77,132:102,\n138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Ma,[2,48],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{7:319,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,\n75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:320,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,\n92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{66:321,67:k,68:t},a(Sa,fb,{72:127,33:129,60:130,74:131,75:132,71:322,34:f,73:pa,92:p,118:e,119:d}),{6:Yb,31:Zb},a(Va,[2,79]),{7:325,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,\n51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Ra,Qb,{141:77,132:102,138:103,73:[1,326],133:z,135:B,139:C,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a($b,[2,30]),{6:xa,32:[1,327]},a(Ma,[2,270],{141:77,132:102,\n138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{7:328,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,\n138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:329,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,\n155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Ma,[2,273],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(ta,[2,245]),{7:330,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,\n105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(ta,[2,192],{127:[1,331]}),{30:332,31:va},{30:335,31:va,33:333,34:f,75:334,92:p},{150:336,152:268,153:ib},{32:[1,337],151:[1,338],152:339,153:ib},a(ob,[2,238]),{7:341,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,\n47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,124:340,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(ac,[2,117],{141:77,132:102,138:103,30:342,31:va,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(ta,[2,120]),{7:343,8:122,10:20,\n11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{39:344,40:l,41:w},{92:[1,346],99:345,104:Hb},{39:347,\n40:l,41:w},{29:[1,348]},a(nb,Ea,{69:349,70:pb}),a(Ba,[2,130]),{31:jb,33:280,34:f,100:351,101:278,103:Ya},a(Ba,[2,135],{102:[1,352]}),a(Ba,[2,137],{102:[1,353]}),{33:354,34:f},a(za,[2,141]),a(nb,Ea,{69:355,70:zb}),a(Ba,[2,150]),{31:wb,33:287,34:f,103:eb,106:357,108:285},a(Ba,[2,155],{102:[1,358]}),a(Ba,[2,158]),{6:[1,360],7:359,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,31:[1,361],33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,\n45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Ab,[2,147],{141:77,132:102,138:103,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{39:362,40:l,41:w},a(Aa,[2,199]),{6:xa,32:[1,363]},\n{7:364,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a([12,28,34,38,40,41,44,45,48,\n49,50,51,52,53,61,62,63,67,68,92,95,97,105,112,117,118,119,125,129,130,133,135,137,139,149,155,157,158,159,160,161,162],Xb,{6:gb,31:gb,70:gb,120:gb}),{6:qb,31:rb,120:[1,365]},a([6,31,32,115,120],fb,{15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,10:20,11:21,13:23,14:24,54:26,47:27,79:28,80:29,81:30,111:31,66:33,77:40,154:41,132:43,136:44,138:45,74:53,75:54,37:55,43:57,33:70,60:71,141:77,39:80,8:122,76:179,7:254,123:368,12:c,28:fa,34:f,38:D,40:l,41:w,44:G,45:F,48:x,49:v,\n50:M,51:N,52:J,53:r,61:E,62:O,63:m,67:k,68:t,73:Wa,92:p,95:h,97:y,105:P,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,133:z,135:B,137:W,139:C,149:Q,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R}),a(Sa,Ea,{69:369,70:kb}),a(b,[2,167]),a([6,31,115],Ea,{69:370,70:kb}),a(bc,[2,242]),{7:371,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,\n62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:372,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,\n75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:373,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,\n92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(lb,[2,218]),{33:194,34:f,60:195,74:196,75:197,92:p,118:e,119:d,145:374},a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,135,139,156],[2,225],{141:77,132:102,138:103,134:[1,375],140:[1,376],159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Bb,[2,226],{141:77,132:102,\n138:103,134:[1,377],159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Bb,[2,232],{141:77,132:102,138:103,134:[1,378],159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{6:cc,31:dc,94:[1,379]},a(Cb,fb,{39:80,57:204,59:205,11:206,37:207,33:208,35:209,60:210,56:382,34:f,36:Oa,38:D,40:l,41:w,62:O,118:e}),{7:383,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,\n26:18,27:19,28:fa,31:[1,384],33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:385,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,\n31:[1,386],33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Aa,[2,39]),a(Lb,[2,37]),a(La,[2,105]),{7:387,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,\n26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,89:[2,178],92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{89:[2,179],132:102,133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,\n171:da,172:ma,173:sa,174:ia},a(Ma,[2,49],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{32:[1,388],132:102,133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},{30:389,31:va},a(Va,[2,75]),{33:129,34:f,60:130,71:390,72:127,73:pa,74:131,75:132,92:p,118:e,119:d},a(ec,n,{71:126,72:127,33:129,60:130,74:131,75:132,64:391,34:f,73:pa,92:p,118:e,\n119:d}),a(Va,[2,80],{141:77,132:102,138:103,133:z,135:B,139:C,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Ra,gb),a($b,[2,31]),{32:[1,392],132:102,133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},a(Ma,[2,272],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{30:393,31:va,132:102,\n133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},{30:394,31:va},a(ta,[2,193]),{30:395,31:va},{30:396,31:va},a(Db,[2,197]),{32:[1,397],151:[1,398],152:339,153:ib},a(ta,[2,236]),{30:399,31:va},a(ob,[2,239]),{30:400,31:va,70:[1,401]},a(fc,[2,189],{141:77,132:102,138:103,133:z,135:B,139:C,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(ta,[2,118]),a(ac,[2,\n121],{141:77,132:102,138:103,30:402,31:va,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(za,[2,124]),{29:[1,403]},{31:jb,33:280,34:f,100:404,101:278,103:Ya},a(za,[2,125]),{39:405,40:l,41:w},{6:sb,31:tb,94:[1,406]},a(Cb,fb,{33:280,101:409,34:f,103:Ya}),a(Sa,Ea,{69:410,70:pb}),{33:411,34:f},{33:412,34:f},{29:[2,140]},{6:Eb,31:Fb,94:[1,413]},a(Cb,fb,{33:287,108:416,34:f,103:eb}),a(Sa,Ea,{69:417,70:zb}),{33:418,34:f,103:[1,419]},\na(Ab,[2,144],{141:77,132:102,138:103,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{7:420,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,\n129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:421,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,\n136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(za,[2,148]),{131:[1,422]},{120:[1,423],132:102,133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},a(xb,[2,173]),{7:254,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,\n54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,73:Wa,74:53,75:54,76:179,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,123:424,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:254,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,31:bb,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,\n60:71,61:E,62:O,63:m,66:33,67:k,68:t,73:Wa,74:53,75:54,76:179,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,116:425,117:H,118:U,119:T,123:177,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Ra,[2,182]),{6:qb,31:rb,32:[1,426]},{6:qb,31:rb,115:[1,427]},a(Za,[2,202],{141:77,132:102,138:103,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Za,\n[2,204],{141:77,132:102,138:103,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Za,[2,215],{141:77,132:102,138:103,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(lb,[2,224]),{7:428,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,\n49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:429,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,\n60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:430,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,\n68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:431,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,\n80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(xb,[2,109]),{11:206,33:208,34:f,35:209,36:Oa,37:207,38:D,39:80,40:l,41:w,56:432,57:204,59:205,60:210,62:O,118:e},a(ec,Jb,{39:80,56:203,57:204,59:205,11:206,37:207,33:208,35:209,60:210,93:433,34:f,36:Oa,38:D,40:l,41:w,62:O,118:e}),a(Ba,[2,112]),a(Ba,[2,52],{141:77,132:102,138:103,133:z,135:B,139:C,156:qa,159:ka,\n160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{7:434,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,\n149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},a(Ba,[2,54],{141:77,132:102,138:103,133:z,135:B,139:C,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{7:435,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,\n81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{89:[2,177],132:102,133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},a(ta,[2,50]),a(ta,[2,67]),a(Va,[2,76]),a(Sa,Ea,{69:436,70:Ob}),a(ta,[2,271]),a(bc,[2,243]),a(ta,[2,194]),a(Db,[2,195]),a(Db,[2,196]),a(ta,[2,234]),{30:437,31:va},\n{32:[1,438]},a(ob,[2,240],{6:[1,439]}),{7:440,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,\n162:R},a(ta,[2,122]),{39:441,40:l,41:w},a(nb,Ea,{69:442,70:pb}),a(za,[2,126]),{29:[1,443]},{33:280,34:f,101:444,103:Ya},{31:jb,33:280,34:f,100:445,101:278,103:Ya},a(Ba,[2,131]),{6:sb,31:tb,32:[1,446]},a(Ba,[2,136]),a(Ba,[2,138]),a(za,[2,142],{29:[1,447]}),{33:287,34:f,103:eb,108:448},{31:wb,33:287,34:f,103:eb,106:449,108:285},a(Ba,[2,151]),{6:Eb,31:Fb,32:[1,450]},a(Ba,[2,156]),a(Ba,[2,157]),a(Ab,[2,145],{141:77,132:102,138:103,133:z,135:B,139:C,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,\n169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),{32:[1,451],132:102,133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},a(Aa,[2,200]),a(Aa,[2,176]),a(Ra,[2,183]),a(Sa,Ea,{69:452,70:kb}),a(Ra,[2,184]),a(b,[2,168]),a([1,6,31,32,42,65,70,73,89,94,115,120,122,131,133,134,135,139,156],[2,227],{141:77,132:102,138:103,140:[1,453],159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),\na(Bb,[2,229],{141:77,132:102,138:103,134:[1,454],159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Ma,[2,228],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Ma,[2,233],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Ba,[2,113]),a(Sa,Ea,{69:455,70:Tb}),{32:[1,456],132:102,133:z,135:B,138:103,139:C,\n141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},{32:[1,457],132:102,133:z,135:B,138:103,139:C,141:77,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia},{6:Yb,31:Zb,32:[1,458]},{32:[1,459]},a(ta,[2,237]),a(ob,[2,241]),a(fc,[2,190],{141:77,132:102,138:103,133:z,135:B,139:C,156:qa,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(za,\n[2,128]),{6:sb,31:tb,94:[1,460]},{39:461,40:l,41:w},a(Ba,[2,132]),a(Sa,Ea,{69:462,70:pb}),a(Ba,[2,133]),{39:463,40:l,41:w},a(Ba,[2,152]),a(Sa,Ea,{69:464,70:zb}),a(Ba,[2,153]),a(za,[2,146]),{6:qb,31:rb,32:[1,465]},{7:466,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,\n92:p,95:h,97:y,105:P,111:31,112:A,117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{7:467,8:122,10:20,11:21,12:c,13:23,14:24,15:7,16:8,17:9,18:10,19:11,20:12,21:13,22:14,23:15,24:16,25:17,26:18,27:19,28:fa,33:70,34:f,37:55,38:D,39:80,40:l,41:w,43:57,44:G,45:F,47:27,48:x,49:v,50:M,51:N,52:J,53:r,54:26,60:71,61:E,62:O,63:m,66:33,67:k,68:t,74:53,75:54,77:40,79:28,80:29,81:30,92:p,95:h,97:y,105:P,111:31,112:A,\n117:H,118:U,119:T,125:I,129:aa,130:S,132:43,133:z,135:B,136:44,137:W,138:45,139:C,141:77,149:Q,154:41,155:X,157:Y,158:V,159:Z,160:K,161:ba,162:R},{6:cc,31:dc,32:[1,468]},a(Ba,[2,53]),a(Ba,[2,55]),a(Va,[2,77]),a(ta,[2,235]),{29:[1,469]},a(za,[2,127]),{6:sb,31:tb,32:[1,470]},a(za,[2,149]),{6:Eb,31:Fb,32:[1,471]},a(Ra,[2,185]),a(Ma,[2,230],{141:77,132:102,138:103,159:ka,160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Ma,[2,231],{141:77,132:102,138:103,159:ka,\n160:ca,163:ea,164:ga,165:ha,166:la,167:oa,168:L,169:ja,170:ra,171:da,172:ma,173:sa,174:ia}),a(Ba,[2,114]),{39:472,40:l,41:w},a(Ba,[2,134]),a(Ba,[2,154]),a(za,[2,129])],defaultActions:{68:[2,69],69:[2,70],238:[2,108],354:[2,140]},parseError:function(a,b){if(b.recoverable)this.trace(a);else{var d=function(a,b){this.message=a;this.hash=b};d.prototype=Error;throw new d(a,b);}},parse:function(a){var b=[0],d=[null],e=[],n=this.table,pa="",c=0,f=0,g=0,h=e.slice.call(arguments,1),va=Object.create(this.lexer),\nk={},Ka;for(Ka in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ka)&&(k[Ka]=this.yy[Ka]);va.setInput(a,k);k.lexer=va;k.parser=this;"undefined"==typeof va.yylloc&&(va.yylloc={});Ka=va.yylloc;e.push(Ka);var m=va.options&&va.options.ranges;this.parseError="function"===typeof k.parseError?k.parseError:Object.getPrototypeOf(this).parseError;for(var t,p,Ia,l,r={},y,q;;){Ia=b[b.length-1];if(this.defaultActions[Ia])l=this.defaultActions[Ia];else{if(null===t||"undefined"==typeof t)t=va.lex()||1,"number"!==\ntypeof t&&(t=this.symbols_[t]||t);l=n[Ia]&&n[Ia][t]}if("undefined"===typeof l||!l.length||!l[0]){var wa;q=[];for(y in n[Ia])this.terminals_[y]&&2<y&&q.push("\'"+this.terminals_[y]+"\'");wa=va.showPosition?"Parse error on line "+(c+1)+":\\n"+va.showPosition()+"\\nExpecting "+q.join(", ")+", got \'"+(this.terminals_[t]||t)+"\'":"Parse error on line "+(c+1)+": Unexpected "+(1==t?"end of input":"\'"+(this.terminals_[t]||t)+"\'");this.parseError(wa,{text:va.match,token:this.terminals_[t]||t,line:va.yylineno,loc:Ka,\nexpected:q})}if(l[0]instanceof Array&&1<l.length)throw Error("Parse Error: multiple actions possible at state: "+Ia+", token: "+t);switch(l[0]){case 1:b.push(t);d.push(va.yytext);e.push(va.yylloc);b.push(l[1]);t=null;p?(t=p,p=null):(f=va.yyleng,pa=va.yytext,c=va.yylineno,Ka=va.yylloc,0<g&&g--);break;case 2:q=this.productions_[l[1]][1];r.$=d[d.length-q];r._$={first_line:e[e.length-(q||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(q||1)].first_column,last_column:e[e.length-\n1].last_column};m&&(r._$.range=[e[e.length-(q||1)].range[0],e[e.length-1].range[1]]);Ia=this.performAction.apply(r,[pa,f,c,k,l[1],d,e].concat(h));if("undefined"!==typeof Ia)return Ia;q&&(b=b.slice(0,-2*q),d=d.slice(0,-1*q),e=e.slice(0,-1*q));b.push(this.productions_[l[1]][0]);d.push(r.$);e.push(r._$);l=n[b[b.length-2]][b[b.length-1]];b.push(l);break;case 3:return!0}}}};g.prototype=gc;gc.Parser=g;return new g}();"undefined"!==typeof u&&"undefined"!==typeof g&&(g.parser=xa,g.Parser=xa.Parser,g.parse=\nfunction(){return xa.parse.apply(xa,arguments)},g.main=function(q){q[1]||(console.log("Usage: "+q[0]+" FILE"),process.exit(1));var a="",c=u("fs");"undefined"!==typeof c&&null!==c&&(a=c.readFileSync(u("path").normalize(q[1]),"utf8"));return g.parser.parse(a)},"undefined"!==typeof ua&&u.main===ua&&g.main(process.argv.slice(1)));return ua.exports}();u["./scope"]=function(){var g={};(function(){var u=[].indexOf||function(g){for(var q=0,a=this.length;q<a;q++)if(q in this&&this[q]===g)return q;return-1};\ng.Scope=function(){function g(g,a,c,u){var f,q;this.parent=g;this.expressions=a;this.method=c;this.referencedVars=u;this.variables=[{name:"arguments",type:"arguments"}];this.positions={};this.parent||(this.utilities={});this.root=null!=(f=null!=(q=this.parent)?q.root:void 0)?f:this}g.prototype.add=function(g,a,c){return this.shared&&!c?this.parent.add(g,a,c):Object.prototype.hasOwnProperty.call(this.positions,g)?this.variables[this.positions[g]].type=a:this.positions[g]=this.variables.push({name:g,\ntype:a})-1};g.prototype.namedMethod=function(){var g;return null!=(g=this.method)&&g.name||!this.parent?this.method:this.parent.namedMethod()};g.prototype.find=function(g,a){null==a&&(a="var");if(this.check(g))return!0;this.add(g,a);return!1};g.prototype.parameter=function(g){if(!this.shared||!this.parent.check(g,!0))return this.add(g,"param")};g.prototype.check=function(g){var a;return!!(this.type(g)||null!=(a=this.parent)&&a.check(g))};g.prototype.temporary=function(g,a,c){null==c&&(c=!1);return c?\n(c=g.charCodeAt(0),g=122-c,c=String.fromCharCode(c+a%(g+1)),a=Math.floor(a/(g+1)),""+c+(a||"")):""+g+(a||"")};g.prototype.type=function(g){var a,c,q,f;q=this.variables;a=0;for(c=q.length;a<c;a++)if(f=q[a],f.name===g)return f.type;return null};g.prototype.freeVariable=function(g,a){var c,q,f;null==a&&(a={});for(c=0;;){f=this.temporary(g,c,a.single);if(!(this.check(f)||0<=u.call(this.root.referencedVars,f)))break;c++}(null!=(q=a.reserve)?q:1)&&this.add(f,"var",!0);return f};g.prototype.assign=function(g,\na){this.add(g,{value:a,assigned:!0},!0);return this.hasAssignments=!0};g.prototype.hasDeclarations=function(){return!!this.declaredVariables().length};g.prototype.declaredVariables=function(){var g,a,c,u,f;u=this.variables;f=[];a=0;for(c=u.length;a<c;a++)g=u[a],"var"===g.type&&f.push(g.name);return f.sort()};g.prototype.assignedVariables=function(){var g,a,c,u,f;c=this.variables;u=[];g=0;for(a=c.length;g<a;g++)f=c[g],f.type.assigned&&u.push(f.name+" \\x3d "+f.type.value);return u};return g}()}).call(this);\nreturn g}();u["./nodes"]=function(){var g={};(function(){var ua,qa,q,a,c,Ca,f,D,l,w,G,F,x,v,M,N,J,r,E,O,m,k,t,p,h,y,P,A,H,U,T,I,aa,S,z,B,W,C,Q,X,Y,V,Z,K,ba,R,ya,$a,Xa,ka,ca,ea,ga,ha,la,oa,L,ja,ra,da,ma,sa,ia,Da,ta,Ja,Ta,Ga,Ua,Fa,Pa,Qa,Na,za,na=function(a,b){function n(){this.constructor=a}for(var pa in b)fa.call(b,pa)&&(a[pa]=b[pa]);n.prototype=b.prototype;a.prototype=new n;a.__super__=b.prototype;return a},fa={}.hasOwnProperty,Ha=[].indexOf||function(a){for(var b=0,n=this.length;b<n;b++)if(b in this&&\nthis[b]===a)return b;return-1},Aa=[].slice;Error.stackTraceLimit=Infinity;K=u("./scope").Scope;a=u("./lexer");Ga=a.isUnassignable;k=a.JS_FORBIDDEN;v=u("./helpers");da=v.compact;ia=v.flatten;sa=v.extend;Fa=v.merge;ma=v.del;a=v.addLocationDataFn;Ua=v.locationDataToString;Qa=v.throwSyntaxError;g.extend=sa;g.addLocationDataFn=a;ja=function(){return!0};I=function(){return!1};ea=function(){return this};T=function(){this.negated=!this.negated;return this};g.CodeFragment=w=function(){function a(a,n){var b;\nthis.code=""+n;this.locationData=null!=a?a.locationData:void 0;this.type=(null!=a?null!=(b=a.constructor)?b.name:void 0:void 0)||"unknown"}a.prototype.toString=function(){return""+this.code+(this.locationData?": "+Ua(this.locationData):"")};return a}();Da=function(a){var b,n,pa,e;e=[];n=0;for(pa=a.length;n<pa;n++)b=a[n],e.push(b.code);return e.join("")};g.Base=a=function(){function a(){}a.prototype.compile=function(a,n){return Da(this.compileToFragments(a,n))};a.prototype.compileToFragments=function(a,\nn){a=sa({},a);n&&(a.level=n);n=this.unfoldSoak(a)||this;n.tab=a.indent;return a.level!==A&&n.isStatement(a)?n.compileClosure(a):n.compileNode(a)};a.prototype.compileClosure=function(a){var b,pa,e,d;(e=this.jumps())&&e.error("cannot use a pure statement in an expression");a.sharedScope=!0;e=new l([],c.wrap([this]));b=[];if((pa=this.contains(Ja))||this.contains(Ta))b=[new ga],pa?(pa="apply",b.push(new r("arguments"))):pa="call",e=new L(e,[new ua(new Q(pa))]);a=(new f(e,b)).compileNode(a);if(e.isGenerator||\nnull!=(d=e.base)&&d.isGenerator)a.unshift(this.makeCode("(yield* ")),a.push(this.makeCode(")"));return a};a.prototype.cache=function(a,n,pa){var b;if(null!=pa?pa(this):this.isComplex())return pa=new r(a.scope.freeVariable("ref")),b=new q(pa,this),n?[b.compileToFragments(a,n),[this.makeCode(pa.value)]]:[b,pa];pa=n?this.compileToFragments(a,n):this;return[pa,pa]};a.prototype.cacheToCodeFragments=function(a){return[Da(a[0]),Da(a[1])]};a.prototype.makeReturn=function(a){var b;b=this.unwrapAll();return a?\nnew f(new H(a+".push"),[b]):new V(b)};a.prototype.contains=function(a){var b;b=void 0;this.traverseChildren(!1,function(n){if(a(n))return b=n,!1});return b};a.prototype.lastNonComment=function(a){var b;for(b=a.length;b--;)if(!(a[b]instanceof G))return a[b];return null};a.prototype.toString=function(a,n){var b;null==a&&(a="");null==n&&(n=this.constructor.name);b="\\n"+a+n;this.soak&&(b+="?");this.eachChild(function(e){return b+=e.toString(a+ca)});return b};a.prototype.eachChild=function(a){var b,pa,\ne,d,c,f,g;if(!this.children)return this;f=this.children;pa=0;for(d=f.length;pa<d;pa++)if(b=f[pa],this[b])for(g=ia([this[b]]),e=0,c=g.length;e<c;e++)if(b=g[e],!1===a(b))return this;return this};a.prototype.traverseChildren=function(a,n){return this.eachChild(function(b){if(!1!==n(b))return b.traverseChildren(a,n)})};a.prototype.invert=function(){return new B("!",this)};a.prototype.unwrapAll=function(){var a;for(a=this;a!==(a=a.unwrap()););return a};a.prototype.children=[];a.prototype.isStatement=I;\na.prototype.jumps=I;a.prototype.isComplex=ja;a.prototype.isChainable=I;a.prototype.isAssignable=I;a.prototype.isNumber=I;a.prototype.unwrap=ea;a.prototype.unfoldSoak=I;a.prototype.assigns=I;a.prototype.updateLocationDataIfMissing=function(a){if(this.locationData)return this;this.locationData=a;return this.eachChild(function(b){return b.updateLocationDataIfMissing(a)})};a.prototype.error=function(a){return Qa(a,this.locationData)};a.prototype.makeCode=function(a){return new w(this,a)};a.prototype.wrapInBraces=\nfunction(a){return[].concat(this.makeCode("("),a,this.makeCode(")"))};a.prototype.joinFragmentArrays=function(a,n){var b,e,d,c,f;b=[];d=c=0;for(f=a.length;c<f;d=++c)e=a[d],d&&b.push(this.makeCode(n)),b=b.concat(e);return b};return a}();g.Block=c=function(a){function b(a){this.expressions=da(ia(a||[]))}na(b,a);b.prototype.children=["expressions"];b.prototype.push=function(a){this.expressions.push(a);return this};b.prototype.pop=function(){return this.expressions.pop()};b.prototype.unshift=function(a){this.expressions.unshift(a);\nreturn this};b.prototype.unwrap=function(){return 1===this.expressions.length?this.expressions[0]:this};b.prototype.isEmpty=function(){return!this.expressions.length};b.prototype.isStatement=function(a){var b,e,d,n;n=this.expressions;e=0;for(d=n.length;e<d;e++)if(b=n[e],b.isStatement(a))return!0;return!1};b.prototype.jumps=function(a){var b,e,d,n;n=this.expressions;e=0;for(d=n.length;e<d;e++)if(b=n[e],b=b.jumps(a))return b};b.prototype.makeReturn=function(a){var b,e;for(e=this.expressions.length;e--;)if(b=\nthis.expressions[e],!(b instanceof G)){this.expressions[e]=b.makeReturn(a);b instanceof V&&!b.expression&&this.expressions.splice(e,1);break}return this};b.prototype.compileToFragments=function(a,pa){null==a&&(a={});return a.scope?b.__super__.compileToFragments.call(this,a,pa):this.compileRoot(a)};b.prototype.compileNode=function(a){var n,e,d,c,f,g,k;this.tab=a.indent;k=a.level===A;e=[];g=this.expressions;d=n=0;for(c=g.length;n<c;d=++n)f=g[d],f=f.unwrapAll(),f=f.unfoldSoak(a)||f,f instanceof b?e.push(f.compileNode(a)):\nk?(f.front=!0,d=f.compileToFragments(a),f.isStatement(a)||(d.unshift(this.makeCode(""+this.tab)),d.push(this.makeCode(";"))),e.push(d)):e.push(f.compileToFragments(a,h));if(k)return this.spaced?[].concat(this.joinFragmentArrays(e,"\\n\\n"),this.makeCode("\\n")):this.joinFragmentArrays(e,"\\n");n=e.length?this.joinFragmentArrays(e,", "):[this.makeCode("void 0")];return 1<e.length&&a.level>=h?this.wrapInBraces(n):n};b.prototype.compileRoot=function(a){var b,e,d,n,c;a.indent=a.bare?"":ca;a.level=A;this.spaced=\n!0;a.scope=new K(null,this,null,null!=(d=a.referencedVars)?d:[]);c=a.locals||[];d=0;for(e=c.length;d<e;d++)n=c[d],a.scope.parameter(n);d=[];if(!a.bare){var f;f=this.expressions;e=[];b=n=0;for(c=f.length;n<c;b=++n){b=f[b];if(!(b.unwrap()instanceof G))break;e.push(b)}n=this.expressions.slice(e.length);this.expressions=e;e.length&&(d=this.compileNode(Fa(a,{indent:""})),d.push(this.makeCode("\\n")));this.expressions=n}e=this.compileWithDeclarations(a);return a.bare?e:[].concat(d,this.makeCode("(function() {\\n"),\ne,this.makeCode("\\n}).call(this);\\n"))};b.prototype.compileWithDeclarations=function(a){var b,e,d,n,c,f;d=[];f=this.expressions;n=c=0;for(b=f.length;c<b&&(e=f[n],e=e.unwrap(),e instanceof G||e instanceof H);n=++c);a=Fa(a,{level:A});n&&(e=this.expressions.splice(n,9E9),d=[this.spaced,!1],c=d[0],this.spaced=d[1],c=[this.compileNode(a),c],d=c[0],this.spaced=c[1],this.expressions=e);e=this.compileNode(a);c=a.scope;c.expressions===this&&(b=a.scope.hasDeclarations(),a=c.hasAssignments,b||a?(n&&d.push(this.makeCode("\\n")),\nd.push(this.makeCode(this.tab+"var ")),b&&d.push(this.makeCode(c.declaredVariables().join(", "))),a&&(b&&d.push(this.makeCode(",\\n"+(this.tab+ca))),d.push(this.makeCode(c.assignedVariables().join(",\\n"+(this.tab+ca))))),d.push(this.makeCode(";\\n"+(this.spaced?"\\n":"")))):d.length&&e.length&&d.push(this.makeCode("\\n")));return d.concat(e)};b.wrap=function(a){return 1===a.length&&a[0]instanceof b?a[0]:new b(a)};return b}(a);g.Literal=H=function(a){function b(a){this.value=a}na(b,a);b.prototype.isComplex=\nI;b.prototype.assigns=function(a){return a===this.value};b.prototype.compileNode=function(a){return[this.makeCode(this.value)]};b.prototype.toString=function(){return" "+(this.isStatement()?b.__super__.toString.apply(this,arguments):this.constructor.name)+": "+this.value};return b}(a);g.NumberLiteral=S=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);return b}(H);g.InfinityLiteral=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,\na);b.prototype.compileNode=function(){return[this.makeCode("2e308")]};return b}(S);g.NaNLiteral=function(a){function b(){b.__super__.constructor.call(this,"NaN")}na(b,a);b.prototype.compileNode=function(a){var b;b=[this.makeCode("0/0")];return a.level>=y?this.wrapInBraces(b):b};return b}(S);g.StringLiteral=$a=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);return b}(H);g.RegexLiteral=Y=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}\nna(b,a);return b}(H);g.PassthroughLiteral=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);return b}(H);g.IdentifierLiteral=r=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);b.prototype.isAssignable=ja;return b}(H);g.PropertyName=Q=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);b.prototype.isAssignable=ja;return b}(H);g.StatementLiteral=ya=function(a){function b(){return b.__super__.constructor.apply(this,\narguments)}na(b,a);b.prototype.isStatement=ja;b.prototype.makeReturn=ea;b.prototype.jumps=function(a){if("break"===this.value&&!(null!=a&&a.loop||null!=a&&a.block)||"continue"===this.value&&(null==a||!a.loop))return this};b.prototype.compileNode=function(a){return[this.makeCode(""+this.tab+this.value+";")]};return b}(H);g.ThisLiteral=ga=function(a){function b(){b.__super__.constructor.call(this,"this")}na(b,a);b.prototype.compileNode=function(a){var b;a=null!=(b=a.scope.method)&&b.bound?a.scope.method.context:\nthis.value;return[this.makeCode(a)]};return b}(H);g.UndefinedLiteral=oa=function(a){function b(){b.__super__.constructor.call(this,"undefined")}na(b,a);b.prototype.compileNode=function(a){return[this.makeCode(a.level>=t?"(void 0)":"void 0")]};return b}(H);g.NullLiteral=aa=function(a){function b(){b.__super__.constructor.call(this,"null")}na(b,a);return b}(H);g.BooleanLiteral=Ca=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);return b}(H);g.Return=V=function(a){function b(a){this.expression=\na}na(b,a);b.prototype.children=["expression"];b.prototype.isStatement=ja;b.prototype.makeReturn=ea;b.prototype.jumps=ea;b.prototype.compileToFragments=function(a,pa){var e,d;e=null!=(d=this.expression)?d.makeReturn():void 0;return!e||e instanceof b?b.__super__.compileToFragments.call(this,a,pa):e.compileToFragments(a,pa)};b.prototype.compileNode=function(a){var b;b=[];b.push(this.makeCode(this.tab+("return"+(this.expression?" ":""))));this.expression&&(b=b.concat(this.expression.compileToFragments(a,\nP)));b.push(this.makeCode(";"));return b};return b}(a);g.YieldReturn=ra=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);b.prototype.compileNode=function(a){null==a.scope.parent&&this.error("yield can only occur inside functions");return b.__super__.compileNode.apply(this,arguments)};return b}(V);g.Value=L=function(a){function b(a,pa,e){if(!pa&&a instanceof b)return a;this.base=a;this.properties=pa||[];e&&(this[e]=!0);return this}na(b,a);b.prototype.children=["base",\n"properties"];b.prototype.add=function(a){this.properties=this.properties.concat(a);return this};b.prototype.hasProperties=function(){return!!this.properties.length};b.prototype.bareLiteral=function(a){return!this.properties.length&&this.base instanceof a};b.prototype.isArray=function(){return this.bareLiteral(qa)};b.prototype.isRange=function(){return this.bareLiteral(X)};b.prototype.isComplex=function(){return this.hasProperties()||this.base.isComplex()};b.prototype.isAssignable=function(){return this.hasProperties()||\nthis.base.isAssignable()};b.prototype.isNumber=function(){return this.bareLiteral(S)};b.prototype.isString=function(){return this.bareLiteral($a)};b.prototype.isRegex=function(){return this.bareLiteral(Y)};b.prototype.isUndefined=function(){return this.bareLiteral(oa)};b.prototype.isNull=function(){return this.bareLiteral(aa)};b.prototype.isBoolean=function(){return this.bareLiteral(Ca)};b.prototype.isAtomic=function(){var a,b,e,d;d=this.properties.concat(this.base);a=0;for(b=d.length;a<b;a++)if(e=\nd[a],e.soak||e instanceof f)return!1;return!0};b.prototype.isNotCallable=function(){return this.isNumber()||this.isString()||this.isRegex()||this.isArray()||this.isRange()||this.isSplice()||this.isObject()||this.isUndefined()||this.isNull()||this.isBoolean()};b.prototype.isStatement=function(a){return!this.properties.length&&this.base.isStatement(a)};b.prototype.assigns=function(a){return!this.properties.length&&this.base.assigns(a)};b.prototype.jumps=function(a){return!this.properties.length&&this.base.jumps(a)};\nb.prototype.isObject=function(a){return this.properties.length?!1:this.base instanceof z&&(!a||this.base.generated)};b.prototype.isSplice=function(){var a;a=this.properties;return a[a.length-1]instanceof ba};b.prototype.looksStatic=function(a){var b;return this.base.value===a&&1===this.properties.length&&"prototype"!==(null!=(b=this.properties[0].name)?b.value:void 0)};b.prototype.unwrap=function(){return this.properties.length?this:this.base};b.prototype.cacheReference=function(a){var n,e,d,c;n=\nthis.properties;d=n[n.length-1];if(2>this.properties.length&&!this.base.isComplex()&&(null==d||!d.isComplex()))return[this,this];n=new b(this.base,this.properties.slice(0,-1));n.isComplex()&&(e=new r(a.scope.freeVariable("base")),n=new b(new C(new q(e,n))));if(!d)return[n,e];d.isComplex()&&(c=new r(a.scope.freeVariable("name")),d=new m(new q(c,d.index)),c=new m(c));return[n.add(d),new b(e||n.base,[c||d])]};b.prototype.compileNode=function(a){var b,e,d,n,c;this.base.front=this.front;c=this.properties;\nb=this.base.compileToFragments(a,c.length?t:null);c.length&&Z.test(Da(b))&&b.push(this.makeCode("."));e=0;for(d=c.length;e<d;e++)n=c[e],b.push.apply(b,n.compileToFragments(a));return b};b.prototype.unfoldSoak=function(a){return null!=this.unfoldedSoak?this.unfoldedSoak:this.unfoldedSoak=function(n){return function(){var e,d,c,pa,f;if(d=n.base.unfoldSoak(a))return(e=d.body.properties).push.apply(e,n.properties),d;f=n.properties;d=e=0;for(c=f.length;e<c;d=++e)if(pa=f[d],pa.soak)return pa.soak=!1,e=\nnew b(n.base,n.properties.slice(0,d)),c=new b(n.base,n.properties.slice(d)),e.isComplex()&&(d=new r(a.scope.freeVariable("ref")),e=new C(new q(d,e)),c.base=d),new E(new F(e),c,{soak:!0});return!1}}(this)()};return b}(a);g.Comment=G=function(a){function b(a){this.comment=a}na(b,a);b.prototype.isStatement=ja;b.prototype.makeReturn=ea;b.prototype.compileNode=function(a,b){var e;e=this.comment.replace(/^(\\s*)#(?=\\s)/gm,"$1 *");e="/*"+Pa(e,this.tab)+(0<=Ha.call(e,"\\n")?"\\n"+this.tab:"")+" */";(b||a.level)===\nA&&(e=a.indent+e);return[this.makeCode("\\n"),this.makeCode(e)]};return b}(a);g.Call=f=function(a){function b(a,b,e){this.variable=a;this.args=null!=b?b:[];this.soak=e;this.isNew=!1;this.variable instanceof L&&this.variable.isNotCallable()&&this.variable.error("literal is not a function")}na(b,a);b.prototype.children=["variable","args"];b.prototype.updateLocationDataIfMissing=function(a){var n,e;this.locationData&&this.needsUpdatedStartLocation&&(this.locationData.first_line=a.first_line,this.locationData.first_column=\na.first_column,n=(null!=(e=this.variable)?e.base:void 0)||this.variable,n.needsUpdatedStartLocation&&(this.variable.locationData.first_line=a.first_line,this.variable.locationData.first_column=a.first_column,n.updateLocationDataIfMissing(a)),delete this.needsUpdatedStartLocation);return b.__super__.updateLocationDataIfMissing.apply(this,arguments)};b.prototype.newInstance=function(){var a,c;a=(null!=(c=this.variable)?c.base:void 0)||this.variable;a instanceof b&&!a.isNew?a.newInstance():this.isNew=\n!0;this.needsUpdatedStartLocation=!0;return this};b.prototype.unfoldSoak=function(a){var n,e,d,c,f;if(this.soak){if(this instanceof ka)n=new H(this.superReference(a)),e=new L(n);else{if(e=Na(a,this,"variable"))return e;e=(new L(this.variable)).cacheReference(a);n=e[0];e=e[1]}e=new b(e,this.args);e.isNew=this.isNew;n=new H("typeof "+n.compile(a)+\' \\x3d\\x3d\\x3d "function"\');return new E(n,new L(e),{soak:!0})}n=this;for(d=[];;)if(n.variable instanceof b)d.push(n),n=n.variable;else{if(!(n.variable instanceof\nL))break;d.push(n);if(!((n=n.variable.base)instanceof b))break}f=d.reverse();d=0;for(c=f.length;d<c;d++)n=f[d],e&&(n.variable instanceof b?n.variable=e:n.variable.base=e),e=Na(a,n,"variable");return e};b.prototype.compileNode=function(a){var b,e,d,n,c,f;null!=(d=this.variable)&&(d.front=this.front);d=R.compileSplattedArray(a,this.args,!0);if(d.length)return this.compileSplat(a,d);d=[];f=this.args;e=n=0;for(c=f.length;n<c;e=++n)b=f[e],e&&d.push(this.makeCode(", ")),d.push.apply(d,b.compileToFragments(a,\nh));b=[];this instanceof ka?(a=this.superReference(a)+(".call("+this.superThis(a)),d.length&&(a+=", "),b.push(this.makeCode(a))):(this.isNew&&b.push(this.makeCode("new ")),b.push.apply(b,this.variable.compileToFragments(a,t)),b.push(this.makeCode("(")));b.push.apply(b,d);b.push(this.makeCode(")"));return b};b.prototype.compileSplat=function(a,b){var e,d,n,c;if(this instanceof ka)return[].concat(this.makeCode(this.superReference(a)+".apply("+this.superThis(a)+", "),b,this.makeCode(")"));if(this.isNew)return e=\nthis.tab+ca,[].concat(this.makeCode("(function(func, args, ctor) {\\n"+e+"ctor.prototype \\x3d func.prototype;\\n"+e+"var child \\x3d new ctor, result \\x3d func.apply(child, args);\\n"+e+"return Object(result) \\x3d\\x3d\\x3d result ? result : child;\\n"+this.tab+"})("),this.variable.compileToFragments(a,h),this.makeCode(", "),b,this.makeCode(", function(){})"));e=[];d=new L(this.variable);(n=d.properties.pop())&&d.isComplex()?(c=a.scope.freeVariable("ref"),e=e.concat(this.makeCode("("+c+" \\x3d "),d.compileToFragments(a,\nh),this.makeCode(")"),n.compileToFragments(a))):(d=d.compileToFragments(a,t),Z.test(Da(d))&&(d=this.wrapInBraces(d)),n?(c=Da(d),d.push.apply(d,n.compileToFragments(a))):c="null",e=e.concat(d));return e.concat(this.makeCode(".apply("+c+", "),b,this.makeCode(")"))};return b}(a);g.SuperCall=ka=function(a){function b(a){b.__super__.constructor.call(this,null,null!=a?a:[new R(new r("arguments"))]);this.isBare=null!=a}na(b,a);b.prototype.superReference=function(a){var b,e,d,c,n,f,g;c=a.scope.namedMethod();\nif(null!=c&&c.klass){d=c.klass;n=c.name;g=c.variable;d.isComplex()&&(e=new r(a.scope.parent.freeVariable("base")),b=new L(new C(new q(e,d))),g.base=b,g.properties.splice(0,d.properties.length));if(n.isComplex()||n instanceof m&&n.index.isAssignable())f=new r(a.scope.parent.freeVariable("name")),n=new m(new q(f,n.index)),g.properties.pop(),g.properties.push(n);b=[new ua(new Q("__super__"))];c["static"]&&b.push(new ua(new Q("constructor")));b.push(null!=f?new m(f):n);return(new L(null!=e?e:d,b)).compile(a)}return null!=\nc&&c.ctor?c.name+".__super__.constructor":this.error("cannot call super outside of an instance method.")};b.prototype.superThis=function(a){return(a=a.scope.method)&&!a.klass&&a.context||"this"};return b}(f);g.RegexWithInterpolations=function(a){function b(a){null==a&&(a=[]);b.__super__.constructor.call(this,new L(new r("RegExp")),a,!1)}na(b,a);return b}(f);g.TaggedTemplateCall=function(a){function b(a,pa,e){pa instanceof $a&&(pa=new Xa(c.wrap([new L(pa)])));b.__super__.constructor.call(this,a,[pa],\ne)}na(b,a);b.prototype.compileNode=function(a){a.inTaggedTemplateCall=!0;return this.variable.compileToFragments(a,t).concat(this.args[0].compileToFragments(a,h))};return b}(f);g.Extends=N=function(a){function b(a,b){this.child=a;this.parent=b}na(b,a);b.prototype.children=["child","parent"];b.prototype.compileToFragments=function(a){return(new f(new L(new H(za("extend",a))),[this.child,this.parent])).compileToFragments(a)};return b}(a);g.Access=ua=function(a){function b(a,b){this.name=a;this.soak=\n"soak"===b}na(b,a);b.prototype.children=["name"];b.prototype.compileToFragments=function(a){var b,e;a=this.name.compileToFragments(a);b=this.name.unwrap();return b instanceof Q?(e=b.value,0<=Ha.call(k,e))?[this.makeCode(\'["\')].concat(Aa.call(a),[this.makeCode(\'"]\')]):[this.makeCode(".")].concat(Aa.call(a)):[this.makeCode("[")].concat(Aa.call(a),[this.makeCode("]")])};b.prototype.isComplex=I;return b}(a);g.Index=m=function(a){function b(a){this.index=a}na(b,a);b.prototype.children=["index"];b.prototype.compileToFragments=\nfunction(a){return[].concat(this.makeCode("["),this.index.compileToFragments(a,P),this.makeCode("]"))};b.prototype.isComplex=function(){return this.index.isComplex()};return b}(a);g.Range=X=function(a){function b(a,b,e){this.from=a;this.to=b;this.equals=(this.exclusive="exclusive"===e)?"":"\\x3d"}na(b,a);b.prototype.children=["from","to"];b.prototype.compileVariables=function(a){var b,e;a=Fa(a,{top:!0});b=ma(a,"isComplex");e=this.cacheToCodeFragments(this.from.cache(a,h,b));this.fromC=e[0];this.fromVar=\ne[1];e=this.cacheToCodeFragments(this.to.cache(a,h,b));this.toC=e[0];this.toVar=e[1];if(e=ma(a,"step"))a=this.cacheToCodeFragments(e.cache(a,h,b)),this.step=a[0],this.stepVar=a[1];this.fromNum=this.from.isNumber()?Number(this.fromVar):null;this.toNum=this.to.isNumber()?Number(this.toVar):null;return this.stepNum=null!=e&&e.isNumber()?Number(this.stepVar):null};b.prototype.compileNode=function(a){var b,e,d,c,n,f,g,h,k,m;this.fromVar||this.compileVariables(a);if(!a.index)return this.compileArray(a);\nf=null!=this.fromNum&&null!=this.toNum;n=ma(a,"index");g=(a=ma(a,"name"))&&a!==n;m=n+" \\x3d "+this.fromC;this.toC!==this.toVar&&(m+=", "+this.toC);this.step!==this.stepVar&&(m+=", "+this.step);c=[n+" \\x3c"+this.equals,n+" \\x3e"+this.equals];e=c[0];c=c[1];e=null!=this.stepNum?0<this.stepNum?e+" "+this.toVar:c+" "+this.toVar:f?(h=[this.fromNum,this.toNum],d=h[0],k=h[1],h,d<=k?e+" "+k:c+" "+k):(b=this.stepVar?this.stepVar+" \\x3e 0":this.fromVar+" \\x3c\\x3d "+this.toVar,b+" ? "+e+" "+this.toVar+" : "+\nc+" "+this.toVar);b=this.stepVar?n+" +\\x3d "+this.stepVar:f?g?d<=k?"++"+n:"--"+n:d<=k?n+"++":n+"--":g?b+" ? ++"+n+" : --"+n:b+" ? "+n+"++ : "+n+"--";g&&(m=a+" \\x3d "+m);g&&(b=a+" \\x3d "+b);return[this.makeCode(m+"; "+e+"; "+b)]};b.prototype.compileArray=function(a){var b,e,d,c,n,f,g,h,k;if((e=null!=this.fromNum&&null!=this.toNum)&&20>=Math.abs(this.fromNum-this.toNum))return b=function(){h=[];for(var a=f=this.fromNum,b=this.toNum;f<=b?a<=b:a>=b;f<=b?a++:a--)h.push(a);return h}.apply(this),this.exclusive&&\nb.pop(),[this.makeCode("["+b.join(", ")+"]")];c=this.tab+ca;d=a.scope.freeVariable("i",{single:!0});g=a.scope.freeVariable("results");n="\\n"+c+g+" \\x3d [];";e?(a.index=d,e=Da(this.compileNode(a))):(k=d+" \\x3d "+this.fromC+(this.toC!==this.toVar?", "+this.toC:""),e=this.fromVar+" \\x3c\\x3d "+this.toVar,e="var "+k+"; "+e+" ? "+d+" \\x3c"+this.equals+" "+this.toVar+" : "+d+" \\x3e"+this.equals+" "+this.toVar+"; "+e+" ? "+d+"++ : "+d+"--");d="{ "+g+".push("+d+"); }\\n"+c+"return "+g+";\\n"+a.indent;a=function(a){return null!=\na?a.contains(Ja):void 0};if(a(this.from)||a(this.to))b=", arguments";return[this.makeCode("(function() {"+n+"\\n"+c+"for ("+e+")"+d+"}).apply(this"+(null!=b?b:"")+")")]};return b}(a);g.Slice=ba=function(a){function b(a){this.range=a;b.__super__.constructor.call(this)}na(b,a);b.prototype.children=["range"];b.prototype.compileNode=function(a){var b,e,d,c,n;b=this.range;c=b.to;d=(b=b.from)&&b.compileToFragments(a,P)||[this.makeCode("0")];c&&(b=c.compileToFragments(a,P),e=Da(b),this.range.exclusive||-1!==\n+e)&&(n=", "+(this.range.exclusive?e:c.isNumber()?""+(+e+1):(b=c.compileToFragments(a,t),"+"+Da(b)+" + 1 || 9e9")));return[this.makeCode(".slice("+Da(d)+(n||"")+")")]};return b}(a);g.Obj=z=function(a){function b(a,b){this.generated=null!=b?b:!1;this.objects=this.properties=a||[]}na(b,a);b.prototype.children=["properties"];b.prototype.compileNode=function(a){var b,e,d,c,n,f,g,h,k,m,t,l,p;p=this.properties;if(this.generated)for(e=0,b=p.length;e<b;e++)d=p[e],d instanceof L&&d.error("cannot have an implicit value in an implicit object");\ne=b=0;for(d=p.length;b<d&&!(l=p[e],(l.variable||l).base instanceof C);e=++b);d=e<p.length;n=a.indent+=ca;k=this.lastNonComment(this.properties);b=[];d&&(t=a.scope.freeVariable("obj"),b.push(this.makeCode("(\\n"+n+t+" \\x3d ")));b.push(this.makeCode("{"+(0===p.length||0===e?"}":"\\n")));c=h=0;for(m=p.length;h<m;c=++h)l=p[c],c===e&&(0!==c&&b.push(this.makeCode("\\n"+n+"}")),b.push(this.makeCode(",\\n"))),g=c===p.length-1||c===e-1?"":l===k||l instanceof G?"\\n":",\\n",f=l instanceof G?"":n,d&&c<e&&(f+=ca),\nl instanceof q&&("object"!==l.context&&l.operatorToken.error("unexpected "+l.operatorToken.value),l.variable instanceof L&&l.variable.hasProperties()&&l.variable.error("invalid object key")),l instanceof L&&l["this"]&&(l=new q(l.properties[0].name,l,"object")),l instanceof G||(c<e?l instanceof q||(l=new q(l,l,"object")):(l instanceof q?(c=l.variable,l=l.value):(l=l.base.cache(a),c=l[0],l=l[1],c instanceof r&&(c=new Q(c.value))),l=new q(new L(new r(t),[new ua(c)]),l))),f&&b.push(this.makeCode(f)),\nb.push.apply(b,l.compileToFragments(a,A)),g&&b.push(this.makeCode(g));d?b.push(this.makeCode(",\\n"+n+t+"\\n"+this.tab+")")):0!==p.length&&b.push(this.makeCode("\\n"+this.tab+"}"));return this.front&&!d?this.wrapInBraces(b):b};b.prototype.assigns=function(a){var b,e,d,c;c=this.properties;b=0;for(e=c.length;b<e;b++)if(d=c[b],d.assigns(a))return!0;return!1};return b}(a);g.Arr=qa=function(a){function b(a){this.objects=a||[]}na(b,a);b.prototype.children=["objects"];b.prototype.compileNode=function(a){var b,\ne,d,c,n;if(!this.objects.length)return[this.makeCode("[]")];a.indent+=ca;b=R.compileSplattedArray(a,this.objects);if(b.length)return b;b=[];var f;n=this.objects;f=[];d=0;for(c=n.length;d<c;d++)e=n[d],f.push(e.compileToFragments(a,h));d=c=0;for(n=f.length;c<n;d=++c)e=f[d],d&&b.push(this.makeCode(", ")),b.push.apply(b,e);0<=Da(b).indexOf("\\n")?(b.unshift(this.makeCode("[\\n"+a.indent)),b.push(this.makeCode("\\n"+this.tab+"]"))):(b.unshift(this.makeCode("[")),b.push(this.makeCode("]")));return b};b.prototype.assigns=\nfunction(a){var b,e,d,c;c=this.objects;b=0;for(e=c.length;b<e;b++)if(d=c[b],d.assigns(a))return!0;return!1};return b}(a);g.Class=D=function(a){function b(a,b,e){this.variable=a;this.parent=b;this.body=null!=e?e:new c;this.boundFuncs=[];this.body.classBody=!0}na(b,a);b.prototype.children=["variable","parent","body"];b.prototype.defaultClassVariableName="_Class";b.prototype.determineName=function(){var a,b;if(!this.variable)return this.defaultClassVariableName;b=this.variable.properties;b=(a=b[b.length-\n1])?a instanceof ua&&a.name:this.variable.base;if(!(b instanceof r||b instanceof Q))return this.defaultClassVariableName;b=b.value;a||(a=Ga(b))&&this.variable.error(a);return 0<=Ha.call(k,b)?"_"+b:b};b.prototype.setContext=function(a){return this.body.traverseChildren(!1,function(b){if(b.classBody)return!1;if(b instanceof ga)return b.value=a;if(b instanceof l&&b.bound)return b.context=a})};b.prototype.addBoundFunctions=function(a){var b,e,d,c;c=this.boundFuncs;e=0;for(d=c.length;e<d;e++)b=c[e],b=\n(new L(new ga,[new ua(b)])).compile(a),this.ctor.body.unshift(new H(b+" \\x3d "+za("bind",a)+"("+b+", this)"))};b.prototype.addProperties=function(a,b,e){var d,c,n,f;f=a.base.properties.slice(0);var g;for(g=[];d=f.shift();)d instanceof q&&(c=d.variable.base,delete d.context,n=d.value,"constructor"===c.value?(this.ctor&&d.error("cannot define more than one constructor in a class"),n.bound&&d.error("cannot define a constructor as a bound function"),n instanceof l?d=this.ctor=n:(this.externalCtor=e.classScope.freeVariable("ctor"),\nd=new q(new r(this.externalCtor),n))):d.variable["this"]?n["static"]=!0:(a=c.isComplex()?new m(c):new ua(c),d.variable=new L(new r(b),[new ua(new Q("prototype")),a]),n instanceof l&&n.bound&&(this.boundFuncs.push(c),n.bound=!1))),g.push(d);return da(g)};b.prototype.walkBody=function(a,f){return this.traverseChildren(!1,function(e){return function(d){var n,g,pa,h,k,m,l;n=!0;if(d instanceof b)return!1;if(d instanceof c){l=g=d.expressions;pa=h=0;for(k=l.length;h<k;pa=++h)m=l[pa],m instanceof q&&m.variable.looksStatic(a)?\nm.value["static"]=!0:m instanceof L&&m.isObject(!0)&&(n=!1,g[pa]=e.addProperties(m,a,f));d.expressions=ia(g)}return n&&!(d instanceof b)}}(this))};b.prototype.hoistDirectivePrologue=function(){var a,b,e;b=0;for(a=this.body.expressions;(e=a[b])&&e instanceof G||e instanceof L&&e.isString();)++b;return this.directives=a.splice(0,b)};b.prototype.ensureConstructor=function(a){this.ctor||(this.ctor=new l,this.externalCtor?this.ctor.body.push(new H(this.externalCtor+".apply(this, arguments)")):this.parent&&\nthis.ctor.body.push(new H(a+".__super__.constructor.apply(this, arguments)")),this.ctor.body.makeReturn(),this.body.expressions.unshift(this.ctor));this.ctor.ctor=this.ctor.name=a;this.ctor.klass=null;return this.ctor.noReturn=!0};b.prototype.compileNode=function(a){var b,e,d,n,g;(e=this.body.jumps())&&e.error("Class bodies cannot contain pure statements");(b=this.body.contains(Ja))&&b.error("Class bodies shouldn\'t reference arguments");g=this.determineName();n=new r(g);e=new l([],c.wrap([this.body]));\nb=[];a.classScope=e.makeScope(a.scope);this.hoistDirectivePrologue();this.setContext(g);this.walkBody(g,a);this.ensureConstructor(g);this.addBoundFunctions(a);this.body.spaced=!0;this.body.expressions.push(n);this.parent&&(g=new r(a.classScope.freeVariable("superClass",{reserve:!1})),this.body.expressions.unshift(new N(n,g)),e.params.push(new W(g)),b.push(this.parent));(d=this.body.expressions).unshift.apply(d,this.directives);d=new C(new f(e,b));this.variable&&(d=new q(this.variable,d,null,{moduleDeclaration:this.moduleDeclaration}));\nreturn d.compileToFragments(a)};return b}(a);g.ModuleDeclaration=v=function(a){function b(a,b){this.clause=a;this.source=b;this.checkSource()}na(b,a);b.prototype.children=["clause","source"];b.prototype.isStatement=ja;b.prototype.jumps=ea;b.prototype.makeReturn=ea;b.prototype.checkSource=function(){if(null!=this.source&&this.source instanceof Xa)return this.source.error("the name of the module to be imported from must be an uninterpolated string")};b.prototype.checkScope=function(a,b){if(0!==a.indent.length)return this.error(b+\n" statements must be at top-level scope")};return b}(a);g.ImportDeclaration=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);b.prototype.compileNode=function(a){var b,e;this.checkScope(a,"import");a.importedSymbols=[];b=[];b.push(this.makeCode(this.tab+"import "));null!=this.clause&&b.push.apply(b,this.clause.compileNode(a));null!=(null!=(e=this.source)?e.value:void 0)&&(null!==this.clause&&b.push(this.makeCode(" from ")),b.push(this.makeCode(this.source.value)));\nb.push(this.makeCode(";"));return b};return b}(v);g.ImportClause=function(a){function b(a,b){this.defaultBinding=a;this.namedImports=b}na(b,a);b.prototype.children=["defaultBinding","namedImports"];b.prototype.compileNode=function(a){var b;b=[];null!=this.defaultBinding&&(b.push.apply(b,this.defaultBinding.compileNode(a)),null!=this.namedImports&&b.push(this.makeCode(", ")));null!=this.namedImports&&b.push.apply(b,this.namedImports.compileNode(a));return b};return b}(a);g.ExportDeclaration=v=function(a){function b(){return b.__super__.constructor.apply(this,\narguments)}na(b,a);b.prototype.compileNode=function(a){var b,e;this.checkScope(a,"export");b=[];b.push(this.makeCode(this.tab+"export "));this instanceof M&&b.push(this.makeCode("default "));this instanceof M||!(this.clause instanceof q||this.clause instanceof D)||(this.clause instanceof D&&!this.clause.variable&&this.clause.error("anonymous classes cannot be exported"),b.push(this.makeCode("var ")),this.clause.moduleDeclaration="export");b=null!=this.clause.body&&this.clause.body instanceof c?b.concat(this.clause.compileToFragments(a,\nA)):b.concat(this.clause.compileNode(a));null!=(null!=(e=this.source)?e.value:void 0)&&b.push(this.makeCode(" from "+this.source.value));b.push(this.makeCode(";"));return b};return b}(v);g.ExportNamedDeclaration=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);return b}(v);g.ExportDefaultDeclaration=M=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);return b}(v);g.ExportAllDeclaration=function(a){function b(){return b.__super__.constructor.apply(this,\narguments)}na(b,a);return b}(v);g.ModuleSpecifierList=v=function(a){function b(a){this.specifiers=a}na(b,a);b.prototype.children=["specifiers"];b.prototype.compileNode=function(a){var b,e,d,c,f;b=[];a.indent+=ca;var n;f=this.specifiers;n=[];d=0;for(c=f.length;d<c;d++)e=f[d],n.push(e.compileToFragments(a,h));if(0!==this.specifiers.length){b.push(this.makeCode("{\\n"+a.indent));d=c=0;for(f=n.length;c<f;d=++c)e=n[d],d&&b.push(this.makeCode(",\\n"+a.indent)),b.push.apply(b,e);b.push(this.makeCode("\\n}"))}else b.push(this.makeCode("{}"));\nreturn b};return b}(a);g.ImportSpecifierList=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);return b}(v);g.ExportSpecifierList=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);return b}(v);g.ModuleSpecifier=U=function(a){function b(a,b,e){this.original=a;this.alias=b;this.moduleDeclarationType=e;this.identifier=null!=this.alias?this.alias.value:this.original.value}na(b,a);b.prototype.children=["original","alias"];b.prototype.compileNode=\nfunction(a){a.scope.find(this.identifier,this.moduleDeclarationType);a=[];a.push(this.makeCode(this.original.value));null!=this.alias&&a.push(this.makeCode(" as "+this.alias.value));return a};return b}(a);g.ImportSpecifier=v=function(a){function b(a,c){b.__super__.constructor.call(this,a,c,"import")}na(b,a);b.prototype.compileNode=function(a){var c;(c=this.identifier,0<=Ha.call(a.importedSymbols,c))||a.scope.check(this.identifier)?this.error("\'"+this.identifier+"\' has already been declared"):a.importedSymbols.push(this.identifier);\nreturn b.__super__.compileNode.call(this,a)};return b}(U);g.ImportDefaultSpecifier=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);return b}(v);g.ImportNamespaceSpecifier=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);return b}(v);g.ExportSpecifier=function(a){function b(a,c){b.__super__.constructor.call(this,a,c,"export")}na(b,a);return b}(U);g.Assign=q=function(a){function b(a,b,e,d){this.variable=a;this.value=b;this.context=\ne;null==d&&(d={});this.param=d.param;this.subpattern=d.subpattern;this.operatorToken=d.operatorToken;this.moduleDeclaration=d.moduleDeclaration}na(b,a);b.prototype.children=["variable","value"];b.prototype.isStatement=function(a){return(null!=a?a.level:void 0)===A&&null!=this.context&&(this.moduleDeclaration||0<=Ha.call(this.context,"?"))};b.prototype.checkAssignability=function(a,b){if(Object.prototype.hasOwnProperty.call(a.scope.positions,b.value)&&"import"===a.scope.variables[a.scope.positions[b.value]].type)return b.error("\'"+\nb.value+"\' is read-only")};b.prototype.assigns=function(a){return this["object"===this.context?"value":"variable"].assigns(a)};b.prototype.unfoldSoak=function(a){return Na(a,this,"variable")};b.prototype.compileNode=function(a){var b,e,d,c,f,g,n;if(e=this.variable instanceof L){if(this.variable.isArray()||this.variable.isObject())return this.compilePatternMatch(a);if(this.variable.isSplice())return this.compileSplice(a);if("||\\x3d"===(c=this.context)||"\\x26\\x26\\x3d"===c||"?\\x3d"===c)return this.compileConditional(a);\nif("**\\x3d"===(f=this.context)||"//\\x3d"===f||"%%\\x3d"===f)return this.compileSpecialMath(a)}this.value instanceof l&&(this.value["static"]?(this.value.klass=this.variable.base,this.value.name=this.variable.properties[0],this.value.variable=this.variable):2<=(null!=(g=this.variable.properties)?g.length:void 0)&&(g=this.variable.properties,c=3<=g.length?Aa.call(g,0,d=g.length-2):(d=0,[]),f=g[d++],d=g[d++],"prototype"===(null!=(n=f.name)?n.value:void 0)&&(this.value.klass=new L(this.variable.base,c),\nthis.value.name=d,this.value.variable=this.variable)));this.context||(n=this.variable.unwrapAll(),n.isAssignable()||this.variable.error("\'"+this.variable.compile(a)+"\' can\'t be assigned"),"function"===typeof n.hasProperties&&n.hasProperties()||(this.moduleDeclaration?(this.checkAssignability(a,n),a.scope.add(n.value,this.moduleDeclaration)):this.param?a.scope.add(n.value,"var"):(this.checkAssignability(a,n),a.scope.find(n.value))));n=this.value.compileToFragments(a,h);e&&this.variable.base instanceof\nz&&(this.variable.front=!0);e=this.variable.compileToFragments(a,h);if("object"===this.context){if(b=Da(e),0<=Ha.call(k,b))e.unshift(this.makeCode(\'"\')),e.push(this.makeCode(\'"\'));return e.concat(this.makeCode(": "),n)}b=e.concat(this.makeCode(" "+(this.context||"\\x3d")+" "),n);return a.level<=h?b:this.wrapInBraces(b)};b.prototype.compilePatternMatch=function(a){var c,e,d,f,g,n,k,l,t,p,q,v,u,w,C,z;w=a.level===A;l=this.value;v=this.variable.base.objects;if(!(u=v.length))return e=l.compileToFragments(a),\na.level>=y?this.wrapInBraces(e):e;q=v[0];1===u&&q instanceof x&&q.error("Destructuring assignment has no target");n=this.variable.isObject();if(w&&1===u&&!(q instanceof R))return d=null,q instanceof b&&"object"===q.context?(e=q,f=e.variable,g=f.base,q=e.value,q instanceof b&&(d=q.value,q=q.variable)):(q instanceof b&&(d=q.value,q=q.variable),g=n?q["this"]?q.properties[0].name:new Q(q.unwrap().value):new S(0)),c=g.unwrap()instanceof Q,l=new L(l),l.properties.push(new (c?ua:m)(g)),(p=Ga(q.unwrap().value))&&\nq.error(p),d&&(l=new B("?",l,d)),(new b(q,l,null,{param:this.param})).compileToFragments(a,A);C=l.compileToFragments(a,h);z=Da(C);e=[];f=!1;l.unwrap()instanceof r&&!this.variable.assigns(z)||(e.push([this.makeCode((d=a.scope.freeVariable("ref"))+" \\x3d ")].concat(Aa.call(C))),C=[this.makeCode(d)],z=d);d=l=0;for(t=v.length;l<t;d=++l){q=v[d];g=d;if(!f&&q instanceof R)p=q.name.unwrap().value,q=q.unwrap(),g=u+" \\x3c\\x3d "+z+".length ? "+za("slice",a)+".call("+z+", "+d,(c=u-d-1)?(k=a.scope.freeVariable("i",\n{single:!0}),g+=", "+k+" \\x3d "+z+".length - "+c+") : ("+k+" \\x3d "+d+", [])"):g+=") : []",g=new H(g),f=k+"++";else if(!f&&q instanceof x){if(c=u-d-1)1===c?f=z+".length - 1":(k=a.scope.freeVariable("i",{single:!0}),g=new H(k+" \\x3d "+z+".length - "+c),f=k+"++",e.push(g.compileToFragments(a,h)));continue}else(q instanceof R||q instanceof x)&&q.error("multiple splats/expansions are disallowed in an assignment"),d=null,q instanceof b&&"object"===q.context?(g=q.variable,g=g.base,q=q.value,q instanceof\nb&&(d=q.value,q=q.variable)):(q instanceof b&&(d=q.value,q=q.variable),g=n?q["this"]?q.properties[0].name:new Q(q.unwrap().value):new H(f||g)),p=q.unwrap().value,c=g.unwrap()instanceof Q,g=new L(new H(z),[new (c?ua:m)(g)]),d&&(g=new B("?",g,d));null!=p&&(p=Ga(p))&&q.error(p);e.push((new b(q,g,null,{param:this.param,subpattern:!0})).compileToFragments(a,h))}w||this.subpattern||e.push(C);e=this.joinFragmentArrays(e,", ");return a.level<h?e:this.wrapInBraces(e)};b.prototype.compileConditional=function(a){var c,\ne;e=this.variable.cacheReference(a);c=e[0];e=e[1];c.properties.length||!(c.base instanceof H)||c.base instanceof ga||a.scope.check(c.base.value)||this.variable.error(\'the variable "\'+c.base.value+"\\" can\'t be assigned with "+this.context+" because it has not been declared before");if(0<=Ha.call(this.context,"?"))return a.isExistentialEquals=!0,(new E(new F(c),e,{type:"if"})).addElse(new b(e,this.value,"\\x3d")).compileToFragments(a);c=(new B(this.context.slice(0,-1),c,new b(e,this.value,"\\x3d"))).compileToFragments(a);\nreturn a.level<=h?c:this.wrapInBraces(c)};b.prototype.compileSpecialMath=function(a){var c,e;e=this.variable.cacheReference(a);c=e[0];e=e[1];return(new b(c,new B(this.context.slice(0,-1),e,this.value))).compileToFragments(a)};b.prototype.compileSplice=function(a){var b,e,d,c,f,g;c=this.variable.properties.pop().range;d=c.from;b=c.to;e=c.exclusive;g=this.variable.compile(a);d?(f=this.cacheToCodeFragments(d.cache(a,y)),c=f[0],f=f[1]):c=f="0";b?null!=d&&d.isNumber()&&b.isNumber()?(b=b.compile(a)-f,e||\n(b+=1)):(b=b.compile(a,t)+" - "+f,e||(b+=" + 1")):b="9e9";e=this.value.cache(a,h);d=e[0];e=e[1];b=[].concat(this.makeCode("[].splice.apply("+g+", ["+c+", "+b+"].concat("),d,this.makeCode(")), "),e);return a.level>A?this.wrapInBraces(b):b};return b}(a);g.Code=l=function(a){function b(a,b,e){this.params=a||[];this.body=b||new c;this.bound="boundfunc"===e;this.isGenerator=!!this.body.contains(function(a){return a instanceof B&&a.isYield()||a instanceof ra})}na(b,a);b.prototype.children=["params","body"];\nb.prototype.isStatement=function(){return!!this.ctor};b.prototype.jumps=I;b.prototype.makeScope=function(a){return new K(a,this.body,this)};b.prototype.compileNode=function(a){var g,e,d,n,h,k,m,l,p,y,A,u,v;this.bound&&null!=(e=a.scope.method)&&e.bound&&(this.context=a.scope.method.context);if(this.bound&&!this.context)return this.context="_this",e=new b([new W(new r(this.context))],new c([this])),e=new f(e,[new ga]),e.updateLocationDataIfMissing(this.locationData),e.compileNode(a);a.scope=ma(a,"classScope")||\nthis.makeScope(a.scope);a.scope.shared=ma(a,"sharedScope");a.indent+=ca;delete a.bare;delete a.isExistentialEquals;e=[];g=[];l=this.params;n=0;for(k=l.length;n<k;n++)m=l[n],m instanceof x||a.scope.parameter(m.asReference(a));l=this.params;n=0;for(k=l.length;n<k;n++)if(m=l[n],m.splat||m instanceof x){n=this.params;h=0;for(m=n.length;h<m;h++)p=n[h],p instanceof x||!p.name.value||a.scope.add(p.name.value,"var",!0);h=new q(new L(new qa(function(){var b,d,e,c;e=this.params;c=[];d=0;for(b=e.length;d<b;d++)p=\ne[d],c.push(p.asReference(a));return c}.call(this))),new L(new r("arguments")));break}A=this.params;l=0;for(n=A.length;l<n;l++)m=A[l],m.isComplex()?(v=y=m.asReference(a),m.value&&(v=new B("?",y,m.value)),g.push(new q(new L(m.name),v,"\\x3d",{param:!0}))):(y=m,m.value&&(k=new H(y.name.value+" \\x3d\\x3d null"),v=new q(new L(m.name),m.value,"\\x3d"),g.push(new E(k,v)))),h||e.push(y);m=this.body.isEmpty();h&&g.unshift(h);g.length&&(d=this.body.expressions).unshift.apply(d,g);d=h=0;for(g=e.length;h<g;d=++h)p=\ne[d],e[d]=p.compileToFragments(a),a.scope.parameter(Da(e[d]));u=[];this.eachParamName(function(a,b){0<=Ha.call(u,a)&&b.error("multiple parameters named "+a);return u.push(a)});m||this.noReturn||this.body.makeReturn();d="function";this.isGenerator&&(d+="*");this.ctor&&(d+=" "+this.name);g=[this.makeCode(d+"(")];d=m=0;for(h=e.length;m<h;d=++m)p=e[d],d&&g.push(this.makeCode(", ")),g.push.apply(g,p);g.push(this.makeCode(") {"));this.body.isEmpty()||(g=g.concat(this.makeCode("\\n"),this.body.compileWithDeclarations(a),\nthis.makeCode("\\n"+this.tab)));g.push(this.makeCode("}"));return this.ctor?[this.makeCode(this.tab)].concat(Aa.call(g)):this.front||a.level>=t?this.wrapInBraces(g):g};b.prototype.eachParamName=function(a){var b,e,d,c,f;c=this.params;f=[];b=0;for(e=c.length;b<e;b++)d=c[b],f.push(d.eachName(a));return f};b.prototype.traverseChildren=function(a,c){if(a)return b.__super__.traverseChildren.call(this,a,c)};return b}(a);g.Param=W=function(a){function b(a,b,e){this.name=a;this.value=b;this.splat=e;(a=Ga(this.name.unwrapAll().value))&&\nthis.name.error(a);this.name instanceof z&&this.name.generated&&(a=this.name.objects[0].operatorToken,a.error("unexpected "+a.value))}na(b,a);b.prototype.children=["name","value"];b.prototype.compileToFragments=function(a){return this.name.compileToFragments(a,h)};b.prototype.asReference=function(a){var b;if(this.reference)return this.reference;b=this.name;b["this"]?(b=b.properties[0].name.value,0<=Ha.call(k,b)&&(b="_"+b),b=new r(a.scope.freeVariable(b))):b.isComplex()&&(b=new r(a.scope.freeVariable("arg")));\nb=new L(b);this.splat&&(b=new R(b));b.updateLocationDataIfMissing(this.locationData);return this.reference=b};b.prototype.isComplex=function(){return this.name.isComplex()};b.prototype.eachName=function(a,b){var e,d,c,f;null==b&&(b=this.name);e=function(b){return a("@"+b.properties[0].name.value,b)};if(b instanceof H)return a(b.value,b);if(b instanceof L)return e(b);b=null!=(d=b.objects)?d:[];d=0;for(c=b.length;d<c;d++)f=b[d],f instanceof q&&null==f.context&&(f=f.variable),f instanceof q?(f.value instanceof\nq&&(f=f.value),this.eachName(a,f.value.unwrap())):f instanceof R?(f=f.name.unwrap(),a(f.value,f)):f instanceof L?f.isArray()||f.isObject()?this.eachName(a,f.base):f["this"]?e(f):a(f.base.value,f.base):f instanceof x||f.error("illegal parameter "+f.compile())};return b}(a);g.Splat=R=function(a){function b(a){this.name=a.compile?a:new H(a)}na(b,a);b.prototype.children=["name"];b.prototype.isAssignable=ja;b.prototype.assigns=function(a){return this.name.assigns(a)};b.prototype.compileToFragments=function(a){return this.name.compileToFragments(a)};\nb.prototype.unwrap=function(){return this.name};b.compileSplattedArray=function(a,c,e){var d,f,g,n,k,m;for(n=-1;(d=c[++n])&&!(d instanceof b););if(n>=c.length)return[];if(1===c.length)return d=c[0],c=d.compileToFragments(a,h),e?c:[].concat(d.makeCode(za("slice",a)+".call("),c,d.makeCode(")"));e=c.slice(n);g=k=0;for(m=e.length;k<m;g=++k)d=e[g],f=d.compileToFragments(a,h),e[g]=d instanceof b?[].concat(d.makeCode(za("slice",a)+".call("),f,d.makeCode(")")):[].concat(d.makeCode("["),f,d.makeCode("]"));\nif(0===n)return d=c[0],a=d.joinFragmentArrays(e.slice(1),", "),e[0].concat(d.makeCode(".concat("),a,d.makeCode(")"));k=c.slice(0,n);m=[];f=0;for(g=k.length;f<g;f++)d=k[f],m.push(d.compileToFragments(a,h));d=c[0].joinFragmentArrays(m,", ");a=c[n].joinFragmentArrays(e,", ");e=c[c.length-1];return[].concat(c[0].makeCode("["),d,c[n].makeCode("].concat("),a,e.makeCode(")"))};return b}(a);g.Expansion=x=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);b.prototype.isComplex=\nI;b.prototype.compileNode=function(a){return this.error("Expansion must be used inside a destructuring assignment or parameter list")};b.prototype.asReference=function(a){return this};b.prototype.eachName=function(a){};return b}(a);g.While=v=function(a){function b(a,b){this.condition=null!=b&&b.invert?a.invert():a;this.guard=null!=b?b.guard:void 0}na(b,a);b.prototype.children=["condition","guard","body"];b.prototype.isStatement=ja;b.prototype.makeReturn=function(a){if(a)return b.__super__.makeReturn.apply(this,\narguments);this.returns=!this.jumps({loop:!0});return this};b.prototype.addBody=function(a){this.body=a;return this};b.prototype.jumps=function(){var a,b,e,d;a=this.body.expressions;if(!a.length)return!1;b=0;for(d=a.length;b<d;b++)if(e=a[b],e=e.jumps({loop:!0}))return e;return!1};b.prototype.compileNode=function(a){var b,e,d;a.indent+=ca;d="";b=this.body;b.isEmpty()?b=this.makeCode(""):(this.returns&&(b.makeReturn(e=a.scope.freeVariable("results")),d=""+this.tab+e+" \\x3d [];\\n"),this.guard&&(1<b.expressions.length?\nb.expressions.unshift(new E((new C(this.guard)).invert(),new ya("continue"))):this.guard&&(b=c.wrap([new E(this.guard,b)]))),b=[].concat(this.makeCode("\\n"),b.compileToFragments(a,A),this.makeCode("\\n"+this.tab)));a=[].concat(this.makeCode(d+this.tab+"while ("),this.condition.compileToFragments(a,P),this.makeCode(") {"),b,this.makeCode("}"));this.returns&&a.push(this.makeCode("\\n"+this.tab+"return "+e+";"));return a};return b}(a);g.Op=B=function(a){function b(a,b,g,n){if("in"===a)return new O(b,g);\nif("do"===a)return this.generateDo(b);if("new"===a){if(b instanceof f&&!b["do"]&&!b.isNew)return b.newInstance();if(b instanceof l&&b.bound||b["do"])b=new C(b)}this.operator=c[a]||a;this.first=b;this.second=g;this.flip=!!n;return this}var c,g;na(b,a);c={"\\x3d\\x3d":"\\x3d\\x3d\\x3d","!\\x3d":"!\\x3d\\x3d",of:"in",yieldfrom:"yield*"};g={"!\\x3d\\x3d":"\\x3d\\x3d\\x3d","\\x3d\\x3d\\x3d":"!\\x3d\\x3d"};b.prototype.children=["first","second"];b.prototype.isNumber=function(){var a;return this.isUnary()&&("+"===(a=this.operator)||\n"-"===a)&&this.first instanceof L&&this.first.isNumber()};b.prototype.isYield=function(){var a;return"yield"===(a=this.operator)||"yield*"===a};b.prototype.isUnary=function(){return!this.second};b.prototype.isComplex=function(){return!this.isNumber()};b.prototype.isChainable=function(){var a;return"\\x3c"===(a=this.operator)||"\\x3e"===a||"\\x3e\\x3d"===a||"\\x3c\\x3d"===a||"\\x3d\\x3d\\x3d"===a||"!\\x3d\\x3d"===a};b.prototype.invert=function(){var a,d,c;if(this.isChainable()&&this.first.isChainable()){a=!0;\nfor(d=this;d&&d.operator;)a&&(a=d.operator in g),d=d.first;if(!a)return(new C(this)).invert();for(d=this;d&&d.operator;)d.invert=!d.invert,d.operator=g[d.operator],d=d.first;return this}return(d=g[this.operator])?(this.operator=d,this.first.unwrap()instanceof b&&this.first.invert(),this):this.second?(new C(this)).invert():"!"===this.operator&&(a=this.first.unwrap())instanceof b&&("!"===(c=a.operator)||"in"===c||"instanceof"===c)?a:new b("!",this)};b.prototype.unfoldSoak=function(a){var b;return("++"===\n(b=this.operator)||"--"===b||"delete"===b)&&Na(a,this,"first")};b.prototype.generateDo=function(a){var b,e,c,g,n;g=[];n=(a instanceof q&&(b=a.value.unwrap())instanceof l?b:a).params||[];b=0;for(e=n.length;b<e;b++)c=n[b],c.value?(g.push(c.value),delete c.value):g.push(c);a=new f(a,g);a["do"]=!0;return a};b.prototype.compileNode=function(a){var b,e;b=this.isChainable()&&this.first.isChainable();b||(this.first.front=this.front);"delete"===this.operator&&a.scope.check(this.first.unwrapAll().value)&&this.error("delete operand may not be argument or var");\n("--"===(e=this.operator)||"++"===e)&&(e=Ga(this.first.unwrapAll().value))&&this.first.error(e);if(this.isYield())return this.compileYield(a);if(this.isUnary())return this.compileUnary(a);if(b)return this.compileChain(a);switch(this.operator){case "?":return this.compileExistence(a);case "**":return this.compilePower(a);case "//":return this.compileFloorDivision(a);case "%%":return this.compileModulo(a);default:return b=this.first.compileToFragments(a,y),e=this.second.compileToFragments(a,y),b=[].concat(b,\nthis.makeCode(" "+this.operator+" "),e),a.level<=y?b:this.wrapInBraces(b)}};b.prototype.compileChain=function(a){var b;b=this.first.second.cache(a);this.first.second=b[0];b=b[1];a=this.first.compileToFragments(a,y).concat(this.makeCode(" "+(this.invert?"\\x26\\x26":"||")+" "),b.compileToFragments(a),this.makeCode(" "+this.operator+" "),this.second.compileToFragments(a,y));return this.wrapInBraces(a)};b.prototype.compileExistence=function(a){var b,e;this.first.isComplex()?(e=new r(a.scope.freeVariable("ref")),\nb=new C(new q(e,this.first))):e=b=this.first;return(new E(new F(b),e,{type:"if"})).addElse(this.second).compileToFragments(a)};b.prototype.compileUnary=function(a){var d,e,c;e=[];d=this.operator;e.push([this.makeCode(d)]);if("!"===d&&this.first instanceof F)return this.first.negated=!this.first.negated,this.first.compileToFragments(a);if(a.level>=t)return(new C(this)).compileToFragments(a);c="+"===d||"-"===d;("new"===d||"typeof"===d||"delete"===d||c&&this.first instanceof b&&this.first.operator===\nd)&&e.push([this.makeCode(" ")]);if(c&&this.first instanceof b||"new"===d&&this.first.isStatement(a))this.first=new C(this.first);e.push(this.first.compileToFragments(a,y));this.flip&&e.reverse();return this.joinFragmentArrays(e,"")};b.prototype.compileYield=function(a){var b,e,c;e=[];b=this.operator;null==a.scope.parent&&this.error("yield can only occur inside functions");0<=Ha.call(Object.keys(this.first),"expression")&&!(this.first instanceof ha)?null!=this.first.expression&&e.push(this.first.expression.compileToFragments(a,\ny)):(a.level>=P&&e.push([this.makeCode("(")]),e.push([this.makeCode(b)]),""!==(null!=(c=this.first.base)?c.value:void 0)&&e.push([this.makeCode(" ")]),e.push(this.first.compileToFragments(a,y)),a.level>=P&&e.push([this.makeCode(")")]));return this.joinFragmentArrays(e,"")};b.prototype.compilePower=function(a){var b;b=new L(new r("Math"),[new ua(new Q("pow"))]);return(new f(b,[this.first,this.second])).compileToFragments(a)};b.prototype.compileFloorDivision=function(a){var d,e;e=new L(new r("Math"),\n[new ua(new Q("floor"))]);d=this.second.isComplex()?new C(this.second):this.second;d=new b("/",this.first,d);return(new f(e,[d])).compileToFragments(a)};b.prototype.compileModulo=function(a){var b;b=new L(new H(za("modulo",a)));return(new f(b,[this.first,this.second])).compileToFragments(a)};b.prototype.toString=function(a){return b.__super__.toString.call(this,a,this.constructor.name+" "+this.operator)};return b}(a);g.In=O=function(a){function b(a,b){this.object=a;this.array=b}na(b,a);b.prototype.children=\n["object","array"];b.prototype.invert=T;b.prototype.compileNode=function(a){var b,e,d,c,f;if(this.array instanceof L&&this.array.isArray()&&this.array.base.objects.length){f=this.array.base.objects;e=0;for(d=f.length;e<d;e++)if(c=f[e],c instanceof R){b=!0;break}if(!b)return this.compileOrTest(a)}return this.compileLoopTest(a)};b.prototype.compileOrTest=function(a){var b,e,d,c,f,g,n,h,k,m;b=this.object.cache(a,y);k=b[0];n=b[1];e=this.negated?[" !\\x3d\\x3d "," \\x26\\x26 "]:[" \\x3d\\x3d\\x3d "," || "];b=\ne[0];e=e[1];m=[];h=this.array.base.objects;d=f=0;for(g=h.length;f<g;d=++f)c=h[d],d&&m.push(this.makeCode(e)),m=m.concat(d?n:k,this.makeCode(b),c.compileToFragments(a,t));return a.level<y?m:this.wrapInBraces(m)};b.prototype.compileLoopTest=function(a){var b,e,d;b=this.object.cache(a,h);d=b[0];e=b[1];b=[].concat(this.makeCode(za("indexOf",a)+".call("),this.array.compileToFragments(a,h),this.makeCode(", "),e,this.makeCode(") "+(this.negated?"\\x3c 0":"\\x3e\\x3d 0")));if(Da(d)===Da(e))return b;b=d.concat(this.makeCode(", "),\nb);return a.level<h?b:this.wrapInBraces(b)};b.prototype.toString=function(a){return b.__super__.toString.call(this,a,this.constructor.name+(this.negated?"!":""))};return b}(a);g.Try=function(a){function b(a,b,e,d){this.attempt=a;this.errorVariable=b;this.recovery=e;this.ensure=d}na(b,a);b.prototype.children=["attempt","recovery","ensure"];b.prototype.isStatement=ja;b.prototype.jumps=function(a){var b;return this.attempt.jumps(a)||(null!=(b=this.recovery)?b.jumps(a):void 0)};b.prototype.makeReturn=\nfunction(a){this.attempt&&(this.attempt=this.attempt.makeReturn(a));this.recovery&&(this.recovery=this.recovery.makeReturn(a));return this};b.prototype.compileNode=function(a){var b,e,d,c,f;a.indent+=ca;f=this.attempt.compileToFragments(a,A);b=this.recovery?(e=a.scope.freeVariable("error",{reserve:!1}),c=new r(e),this.errorVariable?(d=Ga(this.errorVariable.unwrapAll().value),d?this.errorVariable.error(d):void 0,this.recovery.unshift(new q(this.errorVariable,c))):void 0,[].concat(this.makeCode(" catch ("),\nc.compileToFragments(a),this.makeCode(") {\\n"),this.recovery.compileToFragments(a,A),this.makeCode("\\n"+this.tab+"}"))):this.ensure||this.recovery?[]:(e=a.scope.freeVariable("error",{reserve:!1}),[this.makeCode(" catch ("+e+") {}")]);a=this.ensure?[].concat(this.makeCode(" finally {\\n"),this.ensure.compileToFragments(a,A),this.makeCode("\\n"+this.tab+"}")):[];return[].concat(this.makeCode(this.tab+"try {\\n"),f,this.makeCode("\\n"+this.tab+"}"),b,a)};return b}(a);g.Throw=ha=function(a){function b(a){this.expression=\na}na(b,a);b.prototype.children=["expression"];b.prototype.isStatement=ja;b.prototype.jumps=I;b.prototype.makeReturn=ea;b.prototype.compileNode=function(a){return[].concat(this.makeCode(this.tab+"throw "),this.expression.compileToFragments(a),this.makeCode(";"))};return b}(a);g.Existence=F=function(a){function b(a){this.expression=a}na(b,a);b.prototype.children=["expression"];b.prototype.invert=T;b.prototype.compileNode=function(a){var b,e,d;this.expression.front=this.front;d=this.expression.compile(a,\ny);this.expression.unwrap()instanceof r&&!a.scope.check(d)?(e=this.negated?["\\x3d\\x3d\\x3d","||"]:["!\\x3d\\x3d","\\x26\\x26"],b=e[0],e=e[1],d="typeof "+d+" "+b+\' "undefined" \'+e+" "+d+" "+b+" null"):d=d+" "+(this.negated?"\\x3d\\x3d":"!\\x3d")+" null";return[this.makeCode(a.level<=p?d:"("+d+")")]};return b}(a);g.Parens=C=function(a){function b(a){this.body=a}na(b,a);b.prototype.children=["body"];b.prototype.unwrap=function(){return this.body};b.prototype.isComplex=function(){return this.body.isComplex()};\nb.prototype.compileNode=function(a){var b,e;b=this.body.unwrap();if(b instanceof L&&b.isAtomic())return b.front=this.front,b.compileToFragments(a);e=b.compileToFragments(a,P);return a.level<y&&(b instanceof B||b instanceof f||b instanceof J&&b.returns)?e:this.wrapInBraces(e)};return b}(a);g.StringWithInterpolations=Xa=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}na(b,a);b.prototype.compileNode=function(a){var c,e,d,f,g;if(!a.inTaggedTemplateCall)return b.__super__.compileNode.apply(this,\narguments);d=this.body.unwrap();e=[];d.traverseChildren(!1,function(a){if(a instanceof $a)e.push(a);else if(a instanceof C)return e.push(a),!1;return!0});d=[];d.push(this.makeCode("`"));f=0;for(g=e.length;f<g;f++)c=e[f],c instanceof $a?(c=c.value.slice(1,-1),c=c.replace(/(\\\\*)(`|\\$\\{)/g,function(a,b,d){return 0===b.length%2?b+"\\\\"+d:a}),d.push(this.makeCode(c))):(d.push(this.makeCode("${")),d.push.apply(d,c.compileToFragments(a,P)),d.push(this.makeCode("}")));d.push(this.makeCode("`"));return d};\nreturn b}(C);g.For=J=function(a){function b(a,b){this.source=b.source;this.guard=b.guard;this.step=b.step;this.name=b.name;this.index=b.index;this.body=c.wrap([a]);this.own=!!b.own;this.object=!!b.object;(this.from=!!b.from)&&this.index&&this.index.error("cannot use index with for-from");this.own&&!this.object&&b.ownTag.error("cannot use own with for-"+(this.from?"from":"in"));this.object&&(a=[this.index,this.name],this.name=a[0],this.index=a[1]);this.index instanceof L&&!this.index.isAssignable()&&\nthis.index.error("index cannot be a pattern matching expression");this.range=this.source instanceof L&&this.source.base instanceof X&&!this.source.properties.length&&!this.from;this.pattern=this.name instanceof L;this.range&&this.index&&this.index.error("indexes do not apply to range loops");this.range&&this.pattern&&this.name.error("cannot pattern match over range loops");this.returns=!1}na(b,a);b.prototype.children=["body","source","guard","step"];b.prototype.compileNode=function(a){var b,e,d,f,\ng,k,n,m,l,t,p,y,v,u,w,z,B,x,D,I,P;b=c.wrap([this.body]);l=b.expressions;l=l[l.length-1];(null!=l?l.jumps():void 0)instanceof V&&(this.returns=!1);w=this.range?this.source.base:this.source;d=a.scope;this.pattern||(m=this.name&&this.name.compile(a,h));l=this.index&&this.index.compile(a,h);m&&!this.pattern&&d.find(m);!l||this.index instanceof L||d.find(l);this.returns&&(n=d.freeVariable("results"));this.from?this.pattern&&(p=d.freeVariable("x",{single:!0})):p=this.object&&l||d.freeVariable("i",{single:!0});\ny=(this.range||this.from)&&m||l||p;v=y!==p?y+" \\x3d ":"";this.step&&!this.range&&(l=this.cacheToCodeFragments(this.step.cache(a,h,ta)),g=l[0],D=l[1],this.step.isNumber()&&(x=Number(D)));this.pattern&&(m=p);k=l=P="";t=this.tab+ca;this.range?f=w.compileToFragments(Fa(a,{index:p,name:m,step:this.step,isComplex:ta})):(I=this.source.compile(a,h),!m&&!this.own||this.source.unwrap()instanceof r||(k+=""+this.tab+(w=d.freeVariable("ref"))+" \\x3d "+I+";\\n",I=w),!m||this.pattern||this.from||(u=m+" \\x3d "+I+\n"["+y+"]"),this.object||this.from||(g!==D&&(k+=""+this.tab+g+";\\n"),m=0>x,this.step&&null!=x&&m||(e=d.freeVariable("len")),f=""+v+p+" \\x3d 0, "+e+" \\x3d "+I+".length",g=""+v+p+" \\x3d "+I+".length - 1",e=p+" \\x3c "+e,d=p+" \\x3e\\x3d 0",this.step?(null!=x?m&&(e=d,f=g):(e=D+" \\x3e 0 ? "+e+" : "+d,f="("+D+" \\x3e 0 ? ("+f+") : "+g+")"),p=p+" +\\x3d "+D):p=""+(y!==p?"++"+p:p+"++"),f=[this.makeCode(f+"; "+e+"; "+v+p)]));this.returns&&(z=""+this.tab+n+" \\x3d [];\\n",B="\\n"+this.tab+"return "+n+";",b.makeReturn(n));\nthis.guard&&(1<b.expressions.length?b.expressions.unshift(new E((new C(this.guard)).invert(),new ya("continue"))):this.guard&&(b=c.wrap([new E(this.guard,b)])));this.pattern&&b.expressions.unshift(new q(this.name,this.from?new r(y):new H(I+"["+y+"]")));n=[].concat(this.makeCode(k),this.pluckDirectCall(a,b));u&&(P="\\n"+t+u+";");this.object?(f=[this.makeCode(y+" in "+I)],this.own&&(l="\\n"+t+"if (!"+za("hasProp",a)+".call("+I+", "+y+")) continue;")):this.from&&(f=[this.makeCode(y+" of "+I)]);(a=b.compileToFragments(Fa(a,\n{indent:t}),A))&&0<a.length&&(a=[].concat(this.makeCode("\\n"),a,this.makeCode("\\n")));return[].concat(n,this.makeCode(""+(z||"")+this.tab+"for ("),f,this.makeCode(") {"+l+P),a,this.makeCode(this.tab+"}"+(B||"")))};b.prototype.pluckDirectCall=function(a,b){var c,d,g,k,h,m,n,p,t,y,v,u,w,z,x;d=[];t=b.expressions;h=m=0;for(n=t.length;m<n;h=++m)if(g=t[h],g=g.unwrapAll(),g instanceof f&&(x=null!=(y=g.variable)?y.unwrapAll():void 0,x instanceof l||x instanceof L&&(null!=(v=x.base)?v.unwrapAll():void 0)instanceof\nl&&1===x.properties.length&&("call"===(u=null!=(w=x.properties[0].name)?w.value:void 0)||"apply"===u)))k=(null!=(z=x.base)?z.unwrapAll():void 0)||x,p=new r(a.scope.freeVariable("fn")),c=new L(p),x.base&&(c=[c,x],x.base=c[0],c=c[1]),b.expressions[h]=new f(c,g.args),d=d.concat(this.makeCode(this.tab),(new q(p,k)).compileToFragments(a,A),this.makeCode(";\\n"));return d};return b}(v);g.Switch=function(a){function b(a,b,c){this.subject=a;this.cases=b;this.otherwise=c}na(b,a);b.prototype.children=["subject",\n"cases","otherwise"];b.prototype.isStatement=ja;b.prototype.jumps=function(a){var b,c,d,f,g;null==a&&(a={block:!0});f=this.cases;c=0;for(d=f.length;c<d;c++)if(b=f[c],b=b[1],b=b.jumps(a))return b;return null!=(g=this.otherwise)?g.jumps(a):void 0};b.prototype.makeReturn=function(a){var b,e,d,f,g;f=this.cases;b=0;for(e=f.length;b<e;b++)d=f[b],d[1].makeReturn(a);a&&(this.otherwise||(this.otherwise=new c([new H("void 0")])));null!=(g=this.otherwise)&&g.makeReturn(a);return this};b.prototype.compileNode=\nfunction(a){var b,c,d,f,g,k,h,m,n,l,p,t,q;h=a.indent+ca;m=a.indent=h+ca;k=[].concat(this.makeCode(this.tab+"switch ("),this.subject?this.subject.compileToFragments(a,P):this.makeCode("false"),this.makeCode(") {\\n"));t=this.cases;g=n=0;for(l=t.length;n<l;g=++n){b=t[g];f=b[0];b=b[1];q=ia([f]);f=0;for(p=q.length;f<p;f++)d=q[f],this.subject||(d=d.invert()),k=k.concat(this.makeCode(h+"case "),d.compileToFragments(a,P),this.makeCode(":\\n"));0<(c=b.compileToFragments(a,A)).length&&(k=k.concat(c,this.makeCode("\\n")));\nif(g===this.cases.length-1&&!this.otherwise)break;g=this.lastNonComment(b.expressions);g instanceof V||g instanceof H&&g.jumps()&&"debugger"!==g.value||k.push(d.makeCode(m+"break;\\n"))}this.otherwise&&this.otherwise.expressions.length&&k.push.apply(k,[this.makeCode(h+"default:\\n")].concat(Aa.call(this.otherwise.compileToFragments(a,A)),[this.makeCode("\\n")]));k.push(this.makeCode(this.tab+"}"));return k};return b}(a);g.If=E=function(a){function b(a,b,c){this.body=b;null==c&&(c={});this.condition=\n"unless"===c.type?a.invert():a;this.elseBody=null;this.isChain=!1;this.soak=c.soak}na(b,a);b.prototype.children=["condition","body","elseBody"];b.prototype.bodyNode=function(){var a;return null!=(a=this.body)?a.unwrap():void 0};b.prototype.elseBodyNode=function(){var a;return null!=(a=this.elseBody)?a.unwrap():void 0};b.prototype.addElse=function(a){this.isChain?this.elseBodyNode().addElse(a):(this.isChain=a instanceof b,this.elseBody=this.ensureBlock(a),this.elseBody.updateLocationDataIfMissing(a.locationData));\nreturn this};b.prototype.isStatement=function(a){var b;return(null!=a?a.level:void 0)===A||this.bodyNode().isStatement(a)||(null!=(b=this.elseBodyNode())?b.isStatement(a):void 0)};b.prototype.jumps=function(a){var b;return this.body.jumps(a)||(null!=(b=this.elseBody)?b.jumps(a):void 0)};b.prototype.compileNode=function(a){return this.isStatement(a)?this.compileStatement(a):this.compileExpression(a)};b.prototype.makeReturn=function(a){a&&(this.elseBody||(this.elseBody=new c([new H("void 0")])));this.body&&\n(this.body=new c([this.body.makeReturn(a)]));this.elseBody&&(this.elseBody=new c([this.elseBody.makeReturn(a)]));return this};b.prototype.ensureBlock=function(a){return a instanceof c?a:new c([a])};b.prototype.compileStatement=function(a){var c,e,d,f;c=ma(a,"chainChild");if(ma(a,"isExistentialEquals"))return(new b(this.condition.invert(),this.elseBodyNode(),{type:"if"})).compileToFragments(a);f=a.indent+ca;d=this.condition.compileToFragments(a,P);e=this.ensureBlock(this.body).compileToFragments(Fa(a,\n{indent:f}));e=[].concat(this.makeCode("if ("),d,this.makeCode(") {\\n"),e,this.makeCode("\\n"+this.tab+"}"));c||e.unshift(this.makeCode(this.tab));if(!this.elseBody)return e;c=e.concat(this.makeCode(" else "));this.isChain?(a.chainChild=!0,c=c.concat(this.elseBody.unwrap().compileToFragments(a,A))):c=c.concat(this.makeCode("{\\n"),this.elseBody.compileToFragments(Fa(a,{indent:f}),A),this.makeCode("\\n"+this.tab+"}"));return c};b.prototype.compileExpression=function(a){var b,c,d;d=this.condition.compileToFragments(a,\np);c=this.bodyNode().compileToFragments(a,h);b=this.elseBodyNode()?this.elseBodyNode().compileToFragments(a,h):[this.makeCode("void 0")];b=d.concat(this.makeCode(" ? "),c,this.makeCode(" : "),b);return a.level>=p?this.wrapInBraces(b):b};b.prototype.unfoldSoak=function(){return this.soak&&this};return b}(a);la={extend:function(a){return"function(child, parent) { for (var key in parent) { if ("+za("hasProp",a)+".call(parent, key)) child[key] \\x3d parent[key]; } function ctor() { this.constructor \\x3d child; } ctor.prototype \\x3d parent.prototype; child.prototype \\x3d new ctor(); child.__super__ \\x3d parent.prototype; return child; }"},\nbind:function(){return"function(fn, me){ return function(){ return fn.apply(me, arguments); }; }"},indexOf:function(){return"[].indexOf || function(item) { for (var i \\x3d 0, l \\x3d this.length; i \\x3c l; i++) { if (i in this \\x26\\x26 this[i] \\x3d\\x3d\\x3d item) return i; } return -1; }"},modulo:function(){return"function(a, b) { return (+a % (b \\x3d +b) + b) % b; }"},hasProp:function(){return"{}.hasOwnProperty"},slice:function(){return"[].slice"}};A=1;P=2;h=3;p=4;y=5;t=6;ca="  ";Z=/^[+-]?\\d+$/;za=\nfunction(a,b){var c,f;f=b.scope.root;if(a in f.utilities)return f.utilities[a];c=f.freeVariable(a);f.assign(c,la[a](b));return f.utilities[a]=c};Pa=function(a,b){a=a.replace(/\\n/g,"$\\x26"+b);return a.replace(/\\s+$/,"")};Ja=function(a){return a instanceof r&&"arguments"===a.value};Ta=function(a){return a instanceof ga||a instanceof l&&a.bound||a instanceof ka};ta=function(a){return a.isComplex()||("function"===typeof a.isAssignable?a.isAssignable():void 0)};Na=function(a,b,c){if(a=b[c].unfoldSoak(a))return b[c]=\na.body,a.body=new L(b),a}}).call(this);return g}();u["./sourcemap"]=function(){var g={};(function(){var u;u=function(){function g(g){this.line=g;this.columns=[]}g.prototype.add=function(g,a,c){var q;q=a[0];a=a[1];null==c&&(c={});if(!this.columns[g]||!c.noReplace)return this.columns[g]={line:this.line,column:g,sourceLine:q,sourceColumn:a}};g.prototype.sourceLocation=function(g){for(var a;!((a=this.columns[g])||0>=g);)g--;return a&&[a.sourceLine,a.sourceColumn]};return g}();g=function(){function g(){this.lines=\n[]}g.prototype.add=function(g,a,c){var q,f;null==c&&(c={});f=a[0];a=a[1];return((q=this.lines)[f]||(q[f]=new u(f))).add(a,g,c)};g.prototype.sourceLocation=function(g){var a,c;a=g[0];for(g=g[1];!((c=this.lines[a])||0>=a);)a--;return c&&c.sourceLocation(g)};g.prototype.generate=function(g,a){var c,q,f,u,l,w,G,F,x,v,M,N,J;null==g&&(g={});null==a&&(a=null);l=w=u=J=0;v=!1;c="";M=this.lines;f=q=0;for(G=M.length;q<G;f=++q)if(f=M[f])for(N=f.columns,f=0,F=N.length;f<F;f++)if(x=N[f]){for(;J<x.line;)u=0,v=!1,\nc+=";",J++;v&&(c+=",");c+=this.encodeVlq(x.column-u);u=x.column;c+=this.encodeVlq(0);c+=this.encodeVlq(x.sourceLine-w);w=x.sourceLine;c+=this.encodeVlq(x.sourceColumn-l);l=x.sourceColumn;v=!0}c={version:3,file:g.generatedFile||"",sourceRoot:g.sourceRoot||"",sources:g.sourceFiles||[""],names:[],mappings:c};g.inlineMap&&(c.sourcesContent=[a]);return c};g.prototype.encodeVlq=function(g){var a,c;a="";for(c=(Math.abs(g)<<1)+(0>g?1:0);c||!a;)g=c&31,(c>>=5)&&(g|=32),a+=this.encodeBase64(g);return a};g.prototype.encodeBase64=\nfunction(g){var a;if(!(a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]))throw Error("Cannot Base64 encode value: "+g);return a};return g}()}).call(this);return g}();u["./coffee-script"]=function(){var g={};(function(){var qa,xa,q,a,c,Ca,f,D,l,w,G,F,x,v,M,N,J,r,E,O={}.hasOwnProperty;D=u("fs");E=u("vm");M=u("path");qa=u("./lexer").Lexer;v=u("./parser").parser;w=u("./helpers");xa=u("./sourcemap");c=u("../../package.json");g.VERSION=c.version;g.FILE_EXTENSIONS=[".coffee",".litcoffee",\n".coffee.md"];g.helpers=w;q=function(a){switch(!1){case "function"!==typeof Buffer:return(new Buffer(a)).toString("base64");case "function"!==typeof btoa:return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(a,c){return String.fromCharCode("0x"+c)}));default:throw Error("Unable to base64 encode inline sourcemap.");}};c=function(a){return function(c,f){null==f&&(f={});try{return a.call(this,c,f)}catch(p){if("string"!==typeof c)throw p;throw w.updateSyntaxError(p,c,f.filename);}}};r=\n{};J={};g.compile=a=c(function(a,c){var f,g,h,k,m,l,u,D,E,I,F,G,z;h=w.extend;c=h({},c);l=c.sourceMap||c.inlineMap||null==c.filename;h=c.filename||"\\x3canonymous\\x3e";r[h]=a;l&&(I=new xa);g=x.tokenize(a,c);k=c;E=[];m=0;for(u=g.length;m<u;m++)f=g[m],"IDENTIFIER"===f[0]&&E.push(f[1]);k.referencedVars=E;if(null==c.bare||!0!==c.bare)for(k=0,m=g.length;k<m;k++)if(f=g[k],"IMPORT"===(D=f[0])||"EXPORT"===D){c.bare=!0;break}m=v.parse(g).compileToFragments(c);g=0;c.header&&(g+=1);c.shiftLine&&(g+=1);f=0;D="";\nu=0;for(E=m.length;u<E;u++)k=m[u],l&&(k.locationData&&!/^[;\\s]*$/.test(k.code)&&I.add([k.locationData.first_line,k.locationData.first_column],[g,f],{noReplace:!0}),F=w.count(k.code,"\\n"),g+=F,f=F?k.code.length-(k.code.lastIndexOf("\\n")+1):f+k.code.length),D+=k.code;c.header&&(f="Generated by CoffeeScript "+this.VERSION,D="// "+f+"\\n"+D);l&&(z=I.generate(c,a),J[h]=I);c.inlineMap&&(a=q(JSON.stringify(z)),h="//# sourceURL\\x3d"+(null!=(G=c.filename)?G:"coffeescript"),D=D+"\\n"+("//# sourceMappingURL\\x3ddata:application/json;base64,"+\na)+"\\n"+h);return c.sourceMap?{js:D,sourceMap:I,v3SourceMap:JSON.stringify(z,null,2)}:D});g.tokens=c(function(a,c){return x.tokenize(a,c)});g.nodes=c(function(a,c){return"string"===typeof a?v.parse(x.tokenize(a,c)):v.parse(a)});g.run=function(c,f){var g,k,h;null==f&&(f={});k=u.main;k.filename=process.argv[1]=f.filename?D.realpathSync(f.filename):"\\x3canonymous\\x3e";k.moduleCache&&(k.moduleCache={});g=null!=f.filename?M.dirname(D.realpathSync(f.filename)):D.realpathSync(".");k.paths=u("module")._nodeModulePaths(g);\nif(!w.isCoffee(k.filename)||u.extensions)c=a(c,f),c=null!=(h=c.js)?h:c;return k._compile(c,k.filename)};g.eval=function(c,f){var g,k,h,m,l,r,q,v,x,w;null==f&&(f={});if(c=c.trim()){m=null!=(l=E.Script.createContext)?l:E.createContext;l=null!=(h=E.isContext)?h:function(a){return f.sandbox instanceof m().constructor};if(m){if(null!=f.sandbox){if(l(f.sandbox))w=f.sandbox;else for(r in w=m(),l=f.sandbox,l)O.call(l,r)&&(h=l[r],w[r]=h);w.global=w.root=w.GLOBAL=w}else w=global;w.__filename=f.filename||"eval";\nw.__dirname=M.dirname(w.__filename);if(w===global&&!w.module&&!w.require){g=u("module");w.module=k=new g(f.modulename||"eval");w.require=h=function(a){return g._load(a,k,!0)};k.filename=w.__filename;x=Object.getOwnPropertyNames(u);l=0;for(q=x.length;l<q;l++)v=x[l],"paths"!==v&&"arguments"!==v&&"caller"!==v&&(h[v]=u[v]);h.paths=k.paths=g._nodeModulePaths(process.cwd());h.resolve=function(a){return g._resolveFilename(a,k)}}}l={};for(r in f)O.call(f,r)&&(h=f[r],l[r]=h);l.bare=!0;c=a(c,l);return w===\nglobal?E.runInThisContext(c):E.runInContext(c,w)}};g.register=function(){return u("./register")};if(u.extensions)for(N=this.FILE_EXTENSIONS,Ca=function(a){var c;return null!=(c=u.extensions)[a]?c[a]:c[a]=function(){throw Error("Use CoffeeScript.register() or require the coffee-script/register module to require "+a+" files.");}},G=0,F=N.length;G<F;G++)c=N[G],Ca(c);g._compileFile=function(c,f,g){var k,h;null==f&&(f=!1);null==g&&(g=!1);h=D.readFileSync(c,"utf8");h=65279===h.charCodeAt(0)?h.substring(1):\nh;try{k=a(h,{filename:c,sourceMap:f,inlineMap:g,sourceFiles:[c],literate:w.isLiterate(c)})}catch(y){throw w.updateSyntaxError(y,h,c);}return k};x=new qa;v.lexer={lex:function(){var a,c;(c=v.tokens[this.pos++])?(a=c[0],this.yytext=c[1],this.yylloc=c[2],v.errorToken=c.origin||c,this.yylineno=this.yylloc.first_line):a="";return a},setInput:function(a){v.tokens=a;return this.pos=0},upcomingInput:function(){return""}};v.yy=u("./nodes");v.yy.parseError=function(a,c){var f,g,h,k;h=v.errorToken;k=v.tokens;\nf=h[0];g=h[1];a=h[2];g=function(){switch(!1){case h!==k[k.length-1]:return"end of input";case "INDENT"!==f&&"OUTDENT"!==f:return"indentation";case "IDENTIFIER"!==f&&"NUMBER"!==f&&"INFINITY"!==f&&"STRING"!==f&&"STRING_START"!==f&&"REGEX"!==f&&"REGEX_START"!==f:return f.replace(/_START$/,"").toLowerCase();default:return w.nameWhitespaceCharacter(g)}}();return w.throwSyntaxError("unexpected "+g,a)};f=function(a,c){var f,g,h,k;a.isNative()?f="native":(a.isEval()?(g=a.getScriptNameOrSourceURL())||a.getEvalOrigin():\ng=a.getFileName(),g||(g="\\x3canonymous\\x3e"),h=a.getLineNumber(),f=a.getColumnNumber(),f=(c=c(g,h,f))?g+":"+c[0]+":"+c[1]:g+":"+h+":"+f);g=a.getFunctionName();h=a.isConstructor();if(a.isToplevel()||h)return h?"new "+(g||"\\x3canonymous\\x3e")+" ("+f+")":g?g+" ("+f+")":f;h=a.getMethodName();k=a.getTypeName();return g?(c=a="",k&&g.indexOf(k)&&(c=k+"."),h&&g.indexOf("."+h)!==g.length-h.length-1&&(a=" [as "+h+"]"),""+c+g+a+" ("+f+")"):k+"."+(h||"\\x3canonymous\\x3e")+" ("+f+")"};l=function(c){return null!=\nJ[c]?J[c]:null!=J["\\x3canonymous\\x3e"]?J["\\x3canonymous\\x3e"]:null!=r[c]?(c=a(r[c],{filename:c,sourceMap:!0,literate:w.isLiterate(c)}),c.sourceMap):null};Error.prepareStackTrace=function(a,c){var k,m,h;h=function(a,c,f){var g;a=l(a);null!=a&&(g=a.sourceLocation([c-1,f-1]));return null!=g?[g[0]+1,g[1]+1]:null};m=function(){var a,l,m;m=[];a=0;for(l=c.length;a<l;a++){k=c[a];if(k.getFunction()===g.run)break;m.push("    at "+f(k,h))}return m}();return a.toString()+"\\n"+m.join("\\n")+"\\n"}}).call(this);\nreturn g}();u["./browser"]=function(){(function(){var g,qa,xa,q=[].indexOf||function(a){for(var c=0,g=this.length;c<g;c++)if(c in this&&this[c]===a)return c;return-1};g=u("./coffee-script");g.require=u;qa=g.compile;g.eval=function(a,c){null==c&&(c={});null==c.bare&&(c.bare=!0);return eval(qa(a,c))};g.run=function(a,c){null==c&&(c={});c.bare=!0;c.shiftLine=!0;return Function(qa(a,c))()};"undefined"!==typeof window&&null!==window&&("undefined"!==typeof btoa&&null!==btoa&&"undefined"!==typeof JSON&&\nnull!==JSON&&(qa=function(a,c){null==c&&(c={});c.inlineMap=!0;return g.compile(a,c)}),g.load=function(a,c,q,f){var u;null==q&&(q={});null==f&&(f=!1);q.sourceFiles=[a];u=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new window.XMLHttpRequest;u.open("GET",a,!0);"overrideMimeType"in u&&u.overrideMimeType("text/plain");u.onreadystatechange=function(){var l;if(4===u.readyState){if(0===(l=u.status)||200===l)l=[u.responseText,q],f||g.run.apply(g,l);else throw Error("Could not load "+\na);if(c)return c(l)}};return u.send(null)},xa=function(){var a,c,u,f,D,l,w,G,F,x,v;v=window.document.getElementsByTagName("script");c=["text/coffeescript","text/literate-coffeescript"];a=function(){var a,f,g,l;l=[];a=0;for(f=v.length;a<f;a++)F=v[a],(g=F.type,0<=q.call(c,g))&&l.push(F);return l}();l=0;u=function(){var c;c=a[l];if(c instanceof Array)return g.run.apply(g,c),l++,u()};f=function(f,l){var q,r;q={literate:f.type===c[1]};if(r=f.src||f.getAttribute("data-src"))return g.load(r,function(c){a[l]=\nc;return u()},q,!0);q.sourceFiles=["embedded"];return a[l]=[f.innerHTML,q]};D=w=0;for(G=a.length;w<G;D=++w)x=a[D],f(x,D);return u()},window.addEventListener?window.addEventListener("DOMContentLoaded",xa,!1):window.attachEvent("onload",xa))}).call(this);return{}}();return u["./coffee-script"]}();"function"===typeof define&&define.amd?define(function(){return ya}):u.CoffeeScript=ya})(this);';
},991:function(t,exports,e){e(74)(e(978))},992:function(t,exports,e){e(74)(e(979))},993:function(t,exports,e){e(74)(e(980))},994:function(t,exports,e){e(74)(e(981))},995:function(t,exports,e){e(74)(e(983))},1004:function(t,exports,e){var n=e(939);"string"==typeof n&&(n=[[t.id,n,""]]);e(16)(n,{});n.locals&&(t.exports=n.locals)},1041:function(t,exports,e){"use strict";var n=e(820),r=e(1043),i="function"==typeof Symbol&&"symbol"==typeof Symbol(),a=Object.prototype.toString,o=function(t){return"function"==typeof t&&"[object Function]"===a.call(t)},s=function(){var t={};try{Object.defineProperty(t,"x",{enumerable:!1,value:t});for(var e in t)return!1;return t.x===t}catch(t){return!1}},c=Object.defineProperty&&s(),l=function(t,e,n,r){(!(e in t)||o(r)&&r())&&(c?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},u=function(t,e){var a=arguments.length>2?arguments[2]:{},o=n(e);i&&(o=o.concat(Object.getOwnPropertySymbols(e))),r(o,function(n){l(t,n,e[n],a[n])})};u.supportsDescriptors=!!c,t.exports=u},1042:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(o.indexOf(t)===-1){o.push(t);for(var e in t)t.hasOwnProperty(e)&&(a.default.prototype[e]=t[e])}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(814),a=n(i),o=[];exports.default=r},1043:function(t,exports){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(t,r,i){if("[object Function]"!==n.call(r))throw new TypeError("iterator must be a function");var a=t.length;if(a===+a)for(var o=0;o<a;o++)r.call(i,t[o],o,t);else for(var s in t)e.call(t,s)&&r.call(i,t[s],s,t)}},1044:function(t,exports){var e="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,i="[object Function]";t.exports=function(t){var a=this;if("function"!=typeof a||r.call(a)!==i)throw new TypeError(e+a);for(var o,s=n.call(arguments,1),c=function(){if(this instanceof o){var e=a.apply(this,s.concat(n.call(arguments)));return Object(e)===e?e:this}return a.apply(t,s.concat(n.call(arguments)))},l=Math.max(0,a.length-s.length),u=[],h=0;h<l;h++)u.push("$"+h);if(o=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(c),a.prototype){var f=function(){};f.prototype=a.prototype,o.prototype=new f,f.prototype=null}return o}},1045:function(t,exports,e){var n=e(1044);t.exports=Function.prototype.bind||n},1046:function(t,exports,e){"use strict";var n=e(817),r=Function.prototype.toString,i=/^\s*function/,a=/^\([^\)]*\) *=>/,o=/^[^=]*=>/;t.exports=function(t){if(!n(t))return!1;var e=r.call(t);return e.length>0&&!i.test(e)&&(a.test(e)||o.test(e))}},1047:function(t,exports){"use strict";var e=Boolean.prototype.toString,n=function(t){try{return e.call(t),!0}catch(t){return!1}},r=Object.prototype.toString,i="[object Boolean]",a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"boolean"==typeof t||"object"==typeof t&&(a?n(t):r.call(t)===i)}},1048:function(t,exports){"use strict";var e=Date.prototype.getDay,n=function(t){try{return e.call(t),!0}catch(t){return!1}},r=Object.prototype.toString,i="[object Date]",a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(a?n(t):r.call(t)===i)}},1049:function(t,exports){"use strict";t.exports=function(){var t=function(){if("function"!=typeof Map)return null;try{Map.prototype.forEach.call({},function(){})}catch(t){return Map.prototype.forEach}return null}(),e=function(){if("function"!=typeof Set)return null;try{Set.prototype.forEach.call({},function(){})}catch(t){return Set.prototype.forEach}return null}();return{Map:t,Set:e}}},1050:function(t,exports,e){"use strict";var n=e(819);t.exports=function(){var t="function"==typeof Symbol&&n(Symbol.iterator)?Symbol.iterator:null;return"function"==typeof Object.getOwnPropertyNames&&"function"==typeof Map&&"function"==typeof Map.prototype.entries&&Object.getOwnPropertyNames(Map.prototype).forEach(function(e){"entries"!==e&&"size"!==e&&Map.prototype[e]===Map.prototype.entries&&(t=e)}),t}},1051:function(t,exports,e){"use strict";var n=Object.prototype,r=n.toString,i=Boolean.prototype.valueOf,a=e(420),o=e(1046),s=e(1047),c=e(1048),l=e(1052),u=e(1053),h=e(818),f=e(1054),p=e(819),d=e(817),m=Object.prototype.isPrototypeOf,g=function(){},v="foo"===g.name,y="function"==typeof Symbol?Symbol.prototype.valueOf:null,b=e(1050)(),x=e(1049)(),w=Object.getPrototypeOf;w||(w="object"==typeof"test".__proto__?function(t){return t.__proto__}:function(t){var e,r=t.constructor;if(a(t,"constructor")){if(e=r,!delete t.constructor)return null;r=t.constructor,t.constructor=e}return r?r.prototype:n});var _=Array.isArray||function(t){return"[object Array]"===r.call(t)},E=function(t){return t.replace(/^function ?\(/,"function (").replace("){",") {")},M=function(t){var e=[];try{x.Map.call(t,function(t,n){e.push([t,n])})}catch(n){try{x.Set.call(t,function(t){e.push([t])})}catch(t){return!1}}return e};t.exports=function t(e,n){if(e===n)return"";if(null==e||null==n)return e===n?"":e+" !== "+(n+"");var g=r.call(e),T=r.call(n);if(g!==T)return"toStringTag is not the same: "+g+" !== "+T;var S=s(e),A=s(n);if(S||A){if(!S)return"first argument is not a boolean; second argument is";if(!A)return"second argument is not a boolean; first argument is";var C=i.call(e),k=i.call(n);return C===k?"":"primitive value of boolean arguments do not match: "+C+" !== "+k}var L=u(e),R=u(e);if(L||R){if(!L)return"first argument is not a number; second argument is";if(!R)return"second argument is not a number; first argument is";var P=+e,D=+n;if(P===D)return"";var B=isNaN(e),N=isNaN(n);return B&&!N?"first argument is NaN; second is not":!B&&N?"second argument is NaN; first is not":B&&N?"":"numbers are different: "+e+" !== "+n}var O=f(e),F=f(n);if(O||F){if(!O)return"second argument is string; first is not";if(!F)return"first argument is string; second is not";var I=e+"",j=n+"";return I===j?"":'string values are different: "'+I+'" !== "'+j+'"'}var U=c(e),z=c(n);if(U||z){if(!U)return"second argument is Date, first is not";if(!z)return"first argument is Date, second is not";var V=+e,G=+n;return V===G?"":"Dates have different time values: "+V+" !== "+G}var H=h(e),W=h(n);if(H||W){if(!H)return"second argument is RegExp, first is not";if(!W)return"first argument is RegExp, second is not";var q=e+"",X=n+"";return q===X?"":"regular expressions differ: "+q+" !== "+X}var Y=_(e),Z=_(n);if(Y||Z){if(!Y)return"second argument is an Array, first is not";if(!Z)return"first argument is an Array, second is not";if(e.length!==n.length)return"arrays have different length: "+e.length+" !== "+n.length;for(var K,J,Q=e.length-1,tt="";""===tt&&Q>=0;){if(K=a(e,Q),J=a(n,Q),!K&&J)return"second argument has index "+Q+"; first does not";if(K&&!J)return"first argument has index "+Q+"; second does not";tt=t(e[Q],n[Q]),Q-=1}return tt}var et=p(e),nt=p(n);if(et!==nt)return et?"first argument is Symbol; second is not":"second argument is Symbol; first is not";if(et&&nt)return y.call(e)===y.call(n)?"":"first Symbol value !== second Symbol value";var rt=l(e),it=l(n);if(rt!==it)return rt?"first argument is a Generator; second is not":"second argument is a Generator; first is not";var at=o(e),ot=o(n);if(at!==ot)return at?"first argument is an Arrow function; second is not":"second argument is an Arrow function; first is not";if(d(e)||d(n)){if(v&&""!==t(e.name,n.name))return'Function names differ: "'+e.name+'" !== "'+n.name+'"';if(""!==t(e.length,n.length))return"Function lengths differ: "+e.length+" !== "+n.length;var st=E(e+""),ct=E(n+"");return""===t(st,ct)?"":rt||at?""===t(st,ct)?"":"Function string representations differ":""===t(st.replace(/\)\s*\{/,"){"),ct.replace(/\)\s*\{/,"){"))?"":"Function string representations differ"}if("object"==typeof e||"object"==typeof n){if(typeof e!=typeof n)return"arguments have a different typeof: "+typeof e+" !== "+typeof n;if(m.call(e,n))return"first argument is the [[Prototype]] of the second";if(m.call(n,e))return"second argument is the [[Prototype]] of the first";if(w(e)!==w(n))return"arguments have a different [[Prototype]]";if(b){var lt=e[b],ut=d(lt),ht=n[b],ft=d(ht);if(ut!==ft)return ut?"first argument is iterable; second is not":"second argument is iterable; first is not";if(ut&&ft){var pt,dt,mt,gt=lt.call(e),vt=ht.call(n);do if(pt=gt.next(),dt=vt.next(),!pt.done&&!dt.done&&(mt=t(pt,dt),""!==mt))return"iteration results are not equal: "+mt;while(!pt.done&&!dt.done);return pt.done&&!dt.done?"first argument finished iterating before second":!pt.done&&dt.done?"second argument finished iterating before first":""}}else if(x.Map||x.Set){var yt=M(e),bt=M(n),xt=_(yt),wt=_(bt);if(xt&&!wt)return"first argument has Collection entries, second does not";if(!xt&&wt)return"second argument has Collection entries, first does not";if(xt&&wt){var _t=t(yt,bt);return""===_t?"":"Collection entries differ: "+_t}}var Et,Mt,Tt,St;for(Et in e)if(a(e,Et)){if(!a(n,Et))return'first argument has key "'+Et+'"; second does not';if(Mt=!!e[Et]&&e[Et][Et]===e,Tt=!!n[Et]&&n[Et][Et]===n,Mt!==Tt)return Mt?'first argument has a circular reference at key "'+Et+'"; second does not':'second argument has a circular reference at key "'+Et+'"; first does not';if(!Mt&&!Tt&&(St=t(e[Et],n[Et]),""!==St))return'value at key "'+Et+'" differs: '+St}for(Et in n)if(a(n,Et)&&!a(e,Et))return'second argument has key "'+Et+'"; first does not';return""}return!1}},1052:function(t,exports){"use strict";var e=Object.prototype.toString,n=Function.prototype.toString,r=/^\s*(?:function)?\*/,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,a=Object.getPrototypeOf,o=function(){if(!i)return!1;try{return Function("return function*() {}")()}catch(t){}},s=o(),c=s?a(s):{};t.exports=function(t){if("function"!=typeof t)return!1;if(r.test(n.call(t)))return!0;if(!i){var o=e.call(t);return"[object GeneratorFunction]"===o}return a(t)===c}},1053:function(t,exports){"use strict";var e=Number.prototype.toString,n=function(t){try{return e.call(t),!0}catch(t){return!1}},r=Object.prototype.toString,i="[object Number]",a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"number"==typeof t||"object"==typeof t&&(a?n(t):r.call(t)===i)}},1054:function(t,exports){"use strict";var e=String.prototype.valueOf,n=function(t){try{return e.call(t),!0}catch(t){return!1}},r=Object.prototype.toString,i="[object String]",a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"string"==typeof t||"object"==typeof t&&(a?n(t):r.call(t)===i)}},1056:function(t,exports){function e(t){var e=[];for(var n in t)h(t,n)&&e.push(n);return e}function n(t){return(t+"").replace(/"/g,"&quot;")}function r(t){return"[object Array]"===f(t)}function i(t){return"[object Date]"===f(t)}function a(t){return"[object RegExp]"===f(t)}function o(t){return"[object Error]"===f(t)}function s(t){return"[object Symbol]"===f(t)}function c(t){return"[object String]"===f(t)}function l(t){return"[object Number]"===f(t)}function u(t){return"[object Boolean]"===f(t)}function h(t,e){return P.call(t,e)}function f(t){return R.call(t)}function p(t){if(t.name)return t.name;var e=(t+"").match(/^function\s*([\w$]+)/);return e?e[1]:void 0}function d(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function m(t){if(!M)return!1;try{return M.call(t),!0}catch(t){}return!1}function g(t){if(!C)return!1;try{return C.call(t),!0}catch(t){}return!1}function v(t){return!(!t||"object"!=typeof t)&&("undefined"!=typeof HTMLElement&&t instanceof HTMLElement||"string"==typeof t.nodeName&&"function"==typeof t.getAttribute)}function y(t){var e=t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,b);return"'"+e+"'"}function b(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+e.toString(16)}function x(t){return"Object("+t+")"}function w(t,e,n){return t+" ("+e+") {"+n.join(", ")+"}"}var _="function"==typeof Map&&Map.prototype,E=Object.getOwnPropertyDescriptor&&_?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,M=_&&E&&"function"==typeof E.get?E.get:null,T=_&&Map.prototype.forEach,S="function"==typeof Set&&Set.prototype,A=Object.getOwnPropertyDescriptor&&S?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,C=S&&A&&"function"==typeof A.get?A.get:null,k=S&&Set.prototype.forEach,L=Boolean.prototype.valueOf,R=Object.prototype.toString;t.exports=function t(f,b,_,E){function S(e,n){return n&&(E=E.slice(),E.push(n)),t(e,b,_+1,E)}if(void 0===f)return"undefined";if(null===f)return"null";if("boolean"==typeof f)return f?"true":"false";if("string"==typeof f)return y(f);if("number"==typeof f)return 0===f?1/0/f>0?"0":"-0":f+"";b||(b={});var A=void 0===b.depth?5:b.depth;if(void 0===_&&(_=0),_>=A&&A>0&&"object"==typeof f)return"[Object]";if(void 0===E)E=[];else if(d(E,f)>=0)return"[Circular]";if("function"==typeof f){var R=p(f);return"[Function"+(R?": "+R:"")+"]"}if(s(f)){var P=Symbol.prototype.toString.call(f);return"object"==typeof f?x(P):P}if(v(f)){for(var D="<"+(f.nodeName+"").toLowerCase(),B=f.attributes||[],N=0;N<B.length;N++)D+=" "+B[N].name+'="'+n(B[N].value)+'"';return D+=">",f.childNodes&&f.childNodes.length&&(D+="..."),D+="</"+(f.nodeName+"").toLowerCase()+">"}if(r(f)){if(0===f.length)return"[]";for(var O=Array(f.length),N=0;N<f.length;N++)O[N]=h(f,N)?S(f[N],f):"";return"[ "+O.join(", ")+" ]"}if(o(f)){var F=[];for(var I in f)h(f,I)&&(/[^\w$]/.test(I)?F.push(S(I)+": "+S(f[I])):F.push(I+": "+S(f[I])));return 0===F.length?"["+(f+"")+"]":"{ ["+(f+"")+"] "+F.join(", ")+" }"}if("object"==typeof f&&"function"==typeof f.inspect)return f.inspect();if(m(f)){var F=[];return T.call(f,function(t,e){F.push(S(e,f)+" => "+S(t,f))}),w("Map",M.call(f),F)}if(g(f)){var F=[];return k.call(f,function(t){F.push(S(t,f))}),w("Set",C.call(f),F)}if(l(f))return x(+f);if(u(f))return x(L.call(f));if(c(f))return x(S(f+""));if(!i(f)&&!a(f)){var O=[],j=e(f);j.sort();for(var N=0;N<j.length;N++){var I=j[N];/[^\w$]/.test(I)?O.push(S(I)+": "+S(f[I],f)):O.push(I+": "+S(f[I],f))}return 0===O.length?"{}":"{ "+O.join(", ")+" }"}return f+""};var P=Object.prototype.hasOwnProperty||function(t){return t in this}},1057:function(t,exports){"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},1058:function(t,exports,e){(function(e){"use strict";function n(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function r(t,e){return i(t,e,[],[])}function i(t,r,o,s){if(a("TMATCH",typeof t,r),t==r)return a("TMATCH same object or simple value, or problem"),null===t||null===r||("object"==typeof t&&"object"==typeof r||("object"!=typeof t||"object"==typeof r)&&("object"==typeof t||"object"!=typeof r));if(null===t||null===r)return a("TMATCH null test, already failed =="),!1;if("string"==typeof t&&r instanceof RegExp)return a("TMATCH string~=regexp test"),r.test(t);if("string"==typeof t&&"string"==typeof r&&r)return a("TMATCH string~=string test"),t.indexOf(r)!==-1;if(t instanceof Date&&r instanceof Date)return a("TMATCH date test"),t.getTime()===r.getTime();if(t instanceof Date&&"string"==typeof r)return a("TMATCH date~=string test"),t.getTime()===new Date(r).getTime();if(n(t)||n(r)){a("TMATCH arguments test");var c=Array.prototype.slice;return i(c.call(t),c.call(r),o,s)}if(r===e)return a("TMATCH Buffer ctor"),e.isBuffer(t);if(r===Function)return a("TMATCH Function ctor"),"function"==typeof t;if(r===Number)return a("TMATCH Number ctor (finite, not NaN)"),"number"==typeof t&&t===t&&isFinite(t);if(r!==r)return a("TMATCH NaN"),t!==t;if(r===String)return a("TMATCH String ctor"),"string"==typeof t;if(r===Boolean)return a("TMATCH Boolean ctor"),"boolean"==typeof t;if(r===Array)return a("TMATCH Array ctor",r,Array.isArray(t)),Array.isArray(t);if("function"==typeof r&&"object"==typeof t)return a("TMATCH object~=function"),t instanceof r;if("object"!=typeof t||"object"!=typeof r)return a("TMATCH obj is not object, pattern is not object, false"),!1;if(t instanceof RegExp&&r instanceof RegExp)return a("TMATCH regexp~=regexp test"),t.source===r.source&&t.global===r.global&&t.multiline===r.multiline&&t.lastIndex===r.lastIndex&&t.ignoreCase===r.ignoreCase;if(e.isBuffer(t)&&e.isBuffer(r)){if(a("TMATCH buffer test"),t.equals)return t.equals(r);if(t.length!==r.length)return!1;for(var l=0;l<t.length;l++)if(t[l]!=r[l])return!1;return!0}a("TMATCH object~=object test");var u=Object.keys(t),h=Object.keys(r);if(a("  TMATCH patternkeys=%j objkeys=%j",h,u),0===u.length&&0===h.length)return!0;a("  TMATCH check seen objects...");for(var f=o.length;f--;)if(o[f]===t&&s[f]===r)return!0;o.push(t),s.push(r),a("  TMATCH not seen previously");for(var p,d=h.length-1;d>=0;d--)if(p=h[d],a("  TMATCH test obj[%j]",p,t[p],r[p]),!i(t[p],r[p],o,s))return!1;return o.pop(),s.pop(),a("  TMATCH object pass"),!0}t.exports=r;var a=/\btmatch\b/.test({NODE_ENV:"production"}.NODE_DEBUG||"")?console.error:function(){}}).call(exports,e(195).Buffer)},1078:function(t,exports,e){var n,r;!function(){function i(t){return t&&(t.ownerDocument||t.document||t).documentElement}function a(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function o(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function s(t){return null===t?NaN:+t}function c(t){return!isNaN(t)}function l(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}function u(t){return t.length}function h(t){for(var e=1;t*e%1;)e*=10;return e}function f(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function p(){this._=Object.create(null)}function d(t){return(t+="")===Mo||t[0]===To?To+t:t}function m(t){return(t+="")[0]===To?t.slice(1):t}function g(t){return d(t)in this._}function v(t){return(t=d(t))in this._&&delete this._[t]}function y(){var t=[];for(var e in this._)t.push(m(e));return t}function b(){var t=0;for(var e in this._)++t;return t}function x(){for(var t in this._)return!1;return!0}function w(){this._=Object.create(null)}function _(t){return t}function E(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function M(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=So.length;n<r;++n){var i=So[n]+e;if(i in t)return i}}function T(){}function S(){}function A(t){function e(){for(var e,r=n,i=-1,a=r.length;++i<a;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new p;return e.on=function(e,i){var a,o=r.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function C(){fo.event.preventDefault()}function k(){for(var t,e=fo.event;t=e.sourceEvent;)e=t;return e}function L(t){for(var e=new S,n=0,r=arguments.length;++n<r;)e[arguments[n]]=A(e);return e.of=function(n,r){return function(i){try{var a=i.sourceEvent=fo.event;i.target=t,fo.event=i,e[i.type].apply(n,r)}finally{fo.event=a}}},e}function R(t){return Co(t,Po),t}function P(t){return"function"==typeof t?t:function(){return ko(t,this)}}function D(t){return"function"==typeof t?t:function(){return Lo(t,this)}}function B(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=fo.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?s:o:t.local?a:i}function N(t){return t.trim().replace(/\s+/g," ")}function O(t){return RegExp("(?:^|\\s+)"+fo.requote(t)+"(?:\\s+|$)","g")}function F(t){return(t+"").trim().split(/^|\s+/)}function I(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=F(t).map(j);var i=t.length;return"function"==typeof e?r:n}function j(t){var e=O(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",N(i+" "+t))):n.setAttribute("class",N(i.replace(e," ")))}}function U(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function a(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?a:i}function z(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function V(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n===Do&&e.documentElement.namespaceURI===Do?e.createElement(t):e.createElementNS(n,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=fo.ns.qualify(t)).local?n:e}function G(){var t=this.parentNode;t&&t.removeChild(this)}function H(t){return{__data__:t}}function W(t){return function(){return Ro(this,t)}}function q(t){return arguments.length||(t=o),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function X(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,a=t[n],o=0,s=a.length;o<s;o++)(i=a[o])&&e(i,o,n);return t}function Y(t){return Co(t,No),t}function Z(t){var e,n;return function(r,i,a){var o,s=t[a].update,c=s.length;for(a!=n&&(n=a,e=0),i>=e&&(e=i+1);!(o=s[e])&&++e<c;);return o}}function K(t,e,n){function r(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function i(){var i=c(e,mo(arguments));r.call(this),this.addEventListener(t,this[o]=i,i.$=n),i._=e}function a(){var e,n=RegExp("^__on([^.]+)"+fo.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var o="__on"+t,s=t.indexOf("."),c=J;s>0&&(t=t.slice(0,s));var l=Oo.get(t);return l&&(t=l,c=Q),s?e?i:r:e?T:a}function J(t,e){return function(n){var r=fo.event;fo.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{fo.event=r}}}function Q(t,e){var n=J(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function tt(t){var e=".dragsuppress-"+ ++Io,n="click"+e,r=fo.select(a(t)).on("touchmove"+e,C).on("dragstart"+e,C).on("selectstart"+e,C);if(null==Fo&&(Fo=!("onselectstart"in t)&&M(t.style,"userSelect")),Fo){var o=i(t).style,s=o[Fo];o[Fo]="none"}return function(t){if(r.on(e,null),Fo&&(o[Fo]=s),t){var i=function(){r.on(n,null)};r.on(n,function(){C(),i()},!0),setTimeout(i,0)}}}function et(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(jo<0){var i=a(t);if(i.scrollX||i.scrollY){n=fo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();jo=!(o.f||o.e),n.remove()}}return jo?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function nt(){return fo.event.changedTouches[0].identifier}function rt(t){return t>0?1:t<0?-1:0}function it(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function at(t){return t>1?0:t<-1?Vo:Math.acos(t)}function ot(t){return t>1?Wo:t<-1?-Wo:Math.asin(t)}function st(t){return((t=Math.exp(t))-1/t)/2}function ct(t){return((t=Math.exp(t))+1/t)/2}function lt(t){return((t=Math.exp(2*t))-1)/(t+1)}function ut(t){return(t=Math.sin(t/2))*t}function ht(){}function ft(t,e,n){return this instanceof ft?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ft?new ft(t.h,t.s,t.l):St(""+t,At,ft):new ft(t,e,n)}function pt(t,e,n){function r(t){return t>360?t-=360:t<0&&(t+=360),t<60?a+(o-a)*t/60:t<180?o:t<240?a+(o-a)*(240-t)/60:a}function i(t){return Math.round(255*r(t))}var a,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=n<0?0:n>1?1:n,o=n<=.5?n*(1+e):n+e-n*e,a=2*n-o,new _t(i(t+120),i(t),i(t-120))}function dt(t,e,n){return this instanceof dt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof dt?new dt(t.h,t.c,t.l):t instanceof gt?yt(t.l,t.a,t.b):yt((t=Ct((t=fo.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new dt(t,e,n)}function mt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new gt(n,Math.cos(t*=qo)*e,Math.sin(t)*e)}function gt(t,e,n){return this instanceof gt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof gt?new gt(t.l,t.a,t.b):t instanceof dt?mt(t.h,t.c,t.l):Ct((t=_t(t)).r,t.g,t.b):new gt(t,e,n)}function vt(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return i=bt(i)*rs,r=bt(r)*is,a=bt(a)*as,new _t(wt(3.2404542*i-1.5371385*r-.4985314*a),wt(-.969266*i+1.8760108*r+.041556*a),wt(.0556434*i-.2040259*r+1.0572252*a))}function yt(t,e,n){return t>0?new dt(Math.atan2(n,e)*Xo,Math.sqrt(e*e+n*n),t):new dt(NaN,NaN,t)}function bt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function xt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function wt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function _t(t,e,n){return this instanceof _t?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof _t?new _t(t.r,t.g,t.b):St(""+t,_t,pt):new _t(t,e,n)}function Et(t){return new _t(t>>16,t>>8&255,255&t)}function Mt(t){return Et(t)+""}function Tt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function St(t,e,n){var r,i,a,o=0,s=0,c=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Lt(i[0]),Lt(i[1]),Lt(i[2]))}return(a=cs.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,c=15&a,c|=c<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,c=255&a)),e(o,s,c))}function At(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,c=(o+a)/2;return s?(i=c<.5?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=c>0&&c<1?0:r),new ft(r,i,c)}function Ct(t,e,n){t=kt(t),e=kt(e),n=kt(n);var r=xt((.4124564*t+.3575761*e+.1804375*n)/rs),i=xt((.2126729*t+.7151522*e+.072175*n)/is),a=xt((.0193339*t+.119192*e+.9503041*n)/as);return gt(116*i-16,500*(r-i),200*(i-a))}function kt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Lt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Rt(t){return"function"==typeof t?t:function(){return t}}function Pt(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Dt(e,n,t,r)}}function Dt(t,e,n,r){function i(){var t,e=c.status;if(!e&&Nt(c)||e>=200&&e<300||304===e){try{t=n.call(a,c)}catch(t){return void o.error.call(a,t)}o.load.call(a,t)}else o.error.call(a,c)}var a={},o=fo.dispatch("beforesend","progress","load","error"),s={},c=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=i:c.onreadystatechange=function(){c.readyState>3&&i()},c.onprogress=function(t){var e=fo.event;fo.event=t;try{o.progress.call(a,c)}finally{fo.event=e}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",a):e},a.responseType=function(t){return arguments.length?(l=t,a):l},a.response=function(t){return n=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(mo(arguments)))}}),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),c.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),c.setRequestHeader)for(var u in s)c.setRequestHeader(u,s[u]);return null!=e&&c.overrideMimeType&&c.overrideMimeType(e),null!=l&&(c.responseType=l),null!=i&&a.on("error",i).on("load",function(t){i(null,t)}),o.beforesend.call(a,c),c.send(null==r?null:r),a},a.abort=function(){return c.abort(),a},fo.rebind(a,o,"on"),null==r?a:a.get(Bt(r))}function Bt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Nt(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Ot(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i=n+e,a={c:t,t:i,n:null};return us?us.n=a:ls=a,us=a,hs||(fs=clearTimeout(fs),hs=1,ps(Ft)),a}function Ft(){var t=It(),e=jt()-t;e>24?(isFinite(e)&&(clearTimeout(fs),fs=setTimeout(Ft,e)),hs=0):(hs=1,ps(Ft))}function It(){for(var t=Date.now(),e=ls;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function jt(){for(var t,e=ls,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ls=e.n;return us=t,n}function Ut(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function zt(t,e){var n=Math.pow(10,3*Eo(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Vt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,a=r&&n?function(t,e){for(var i=t.length,a=[],o=0,s=r[0],c=0;i>0&&s>0&&(c+s+1>e&&(s=Math.max(1,e-c)),a.push(t.substring(i-=s,i+s)),!((c+=s+1)>e));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:_;return function(t){var n=ms.exec(t),r=n[1]||" ",o=n[2]||">",s=n[3]||"-",c=n[4]||"",l=n[5],u=+n[6],h=n[7],f=n[8],p=n[9],d=1,m="",g="",v=!1,y=!0;switch(f&&(f=+f.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),p){case"n":h=!0,p="g";break;case"%":d=100,g="%",p="f";break;case"p":d=100,g="%",p="r";break;case"b":case"o":case"x":case"X":"#"===c&&(m="0"+p.toLowerCase());case"c":y=!1;case"d":v=!0,f=0;break;case"s":d=-1,p="r"}"$"===c&&(m=i[0],g=i[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=gs.get(p)||Gt;var b=l&&h;return function(t){var n=g;if(v&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===s?"":s;if(d<0){var c=fo.formatPrefix(t,f);t=c.scale(t),n=c.symbol+g}else t*=d;t=p(t,f);var x,w,_=t.lastIndexOf(".");if(_<0){var E=y?t.lastIndexOf("e"):-1;E<0?(x=t,w=""):(x=t.substring(0,E),w=t.substring(E))}else x=t.substring(0,_),w=e+t.substring(_+1);!l&&h&&(x=a(x,1/0));var M=m.length+x.length+w.length+(b?0:i.length),T=M<u?Array(M=u-M+1).join(r):"";return b&&(x=a(T+x,T.length?u-w.length:1/0)),i+=m,t=x+w,("<"===o?i+t+T:">"===o?T+i+t:"^"===o?T.substring(0,M>>=1)+i+t+T.substring(M):i+(b?t:T+t))+n}}}function Gt(t){return t+""}function Ht(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Wt(t,e,n){function r(e){var n=t(e),r=a(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new ys(n-1)),1),n}function a(t,n){return e(t=new ys(+t),n),t}function o(t,r,a){var o=i(t),s=[];if(a>1)for(;o<r;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;o<r;)s.push(new Date(+o)),e(o,1);return s}function s(t,e,n){try{ys=Ht;var r=new Ht;return r._=t,o(r,e,n)}finally{ys=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=a,t.range=o;var c=t.utc=qt(t);return c.floor=c,c.round=qt(r),c.ceil=qt(i),c.offset=qt(a),c.range=s,t}function qt(t){return function(e,n){try{ys=Ht;var r=new Ht;return r._=e,t(r,n)._}finally{ys=Date}}}function Xt(t){function e(t){function e(e){for(var n,i,a,o=[],s=-1,c=0;++s<r;)37===t.charCodeAt(s)&&(o.push(t.slice(c,s)),null!=(i=xs[n=t.charAt(++s)])&&(n=t.charAt(++s)),(a=C[n])&&(n=a(e,null==i?"e"===n?" ":"0":i)),o.push(n),c=s+1);return o.push(t.slice(c,s)),o.join("")}var r=t.length;return e.parse=function(e){
var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&ys!==Ht,o=new(a?Ht:ys);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?o._:o},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,a,o,s=0,c=e.length,l=n.length;s<c;){if(r>=l)return-1;if(i=e.charCodeAt(s++),37===i){if(o=e.charAt(s++),a=k[o in xs?e.charAt(s++):o],!a||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){x.lastIndex=0;var r=x.exec(e.slice(n));return r?(t.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){S.lastIndex=0;var r=S.exec(e.slice(n));return r?(t.m=A.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){M.lastIndex=0;var r=M.exec(e.slice(n));return r?(t.m=T.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,r){return n(t,""+C.c,e,r)}function c(t,e,r){return n(t,""+C.x,e,r)}function l(t,e,r){return n(t,""+C.X,e,r)}function u(t,e,n){var r=b.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var h=t.dateTime,f=t.date,p=t.time,d=t.periods,m=t.days,g=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{ys=Ht;var e=new ys;return e._=t,r(e)}finally{ys=Date}}var r=e(t);return n.parse=function(t){try{ys=Ht;var e=r.parse(t);return e&&e._}finally{ys=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=pe;var b=fo.map(),x=$t(m),w=Zt(m),_=$t(g),E=Zt(g),M=$t(v),T=Zt(v),S=$t(y),A=Zt(y);d.forEach(function(t,e){b.set(t.toLowerCase(),e)});var C={a:function(t){return g[t.getDay()]},A:function(t){return m[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(h),d:function(t,e){return Yt(t.getDate(),e,2)},e:function(t,e){return Yt(t.getDate(),e,2)},H:function(t,e){return Yt(t.getHours(),e,2)},I:function(t,e){return Yt(t.getHours()%12||12,e,2)},j:function(t,e){return Yt(1+vs.dayOfYear(t),e,3)},L:function(t,e){return Yt(t.getMilliseconds(),e,3)},m:function(t,e){return Yt(t.getMonth()+1,e,2)},M:function(t,e){return Yt(t.getMinutes(),e,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,e){return Yt(t.getSeconds(),e,2)},U:function(t,e){return Yt(vs.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Yt(vs.mondayOfYear(t),e,2)},x:e(f),X:e(p),y:function(t,e){return Yt(t.getFullYear()%100,e,2)},Y:function(t,e){return Yt(t.getFullYear()%1e4,e,4)},Z:he,"%":function(){return"%"}},k={a:r,A:i,b:a,B:o,c:s,d:ae,e:ae,H:se,I:se,j:oe,L:ue,m:ie,M:ce,p:u,S:le,U:Jt,w:Kt,W:Qt,x:c,X:l,y:ee,Y:te,Z:ne,"%":fe};return e}function Yt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?Array(n-a+1).join(e)+i:i)}function $t(t){return RegExp("^(?:"+t.map(fo.requote).join("|")+")","i")}function Zt(t){for(var e=new p,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Kt(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Jt(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Qt(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function te(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ee(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+2));return r?(t.y=re(+r[0]),n+r[0].length):-1}function ne(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function re(t){return t+(t>68?1900:2e3)}function ie(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ae(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function oe(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function se(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ce(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function le(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ue(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function he(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=Eo(e)/60|0,i=Eo(e)%60;return n+Yt(r,"0",2)+Yt(i,"0",2)}function fe(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function pe(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function de(){}function me(t,e,n){var r=n.s=t+e,i=r-t,a=r-i;n.t=t-a+(e-i)}function ge(t,e){t&&Ss.hasOwnProperty(t.type)&&Ss[t.type](t,e)}function ve(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ye(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ve(t[n],e,1);e.polygonEnd()}function be(){function t(t,e){t*=qo,e=e*qo/2+Vo/4;var n=t-r,o=n>=0?1:-1,s=o*n,c=Math.cos(e),l=Math.sin(e),u=a*l,h=i*c+u*Math.cos(s),f=u*o*Math.sin(s);Cs.add(Math.atan2(f,h)),r=t,i=c,a=l}var e,n,r,i,a;ks.point=function(o,s){ks.point=t,r=(e=o)*qo,i=Math.cos(s=(n=s)*qo/2+Vo/4),a=Math.sin(s)},ks.lineEnd=function(){t(e,n)}}function xe(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function we(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function _e(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ee(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Me(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Te(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Se(t){return[Math.atan2(t[1],t[0]),ot(t[2])]}function Ae(t,e){return Eo(t[0]-e[0])<Uo&&Eo(t[1]-e[1])<Uo}function Ce(t,e){t*=qo;var n=Math.cos(e*=qo);ke(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ke(t,e,n){++Ls,Ps+=(t-Ps)/Ls,Ds+=(e-Ds)/Ls,Bs+=(n-Bs)/Ls}function Le(){function t(t,i){t*=qo;var a=Math.cos(i*=qo),o=a*Math.cos(t),s=a*Math.sin(t),c=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*c-r*s)*l+(l=r*o-e*c)*l+(l=e*s-n*o)*l),e*o+n*s+r*c);Rs+=l,Ns+=l*(e+(e=o)),Os+=l*(n+(n=s)),Fs+=l*(r+(r=c)),ke(e,n,r)}var e,n,r;zs.point=function(i,a){i*=qo;var o=Math.cos(a*=qo);e=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),zs.point=t,ke(e,n,r)}}function Re(){zs.point=Ce}function Pe(){function t(t,e){t*=qo;var n=Math.cos(e*=qo),o=n*Math.cos(t),s=n*Math.sin(t),c=Math.sin(e),l=i*c-a*s,u=a*o-r*c,h=r*s-i*o,f=Math.sqrt(l*l+u*u+h*h),p=r*o+i*s+a*c,d=f&&-at(p)/f,m=Math.atan2(f,p);Is+=d*l,js+=d*u,Us+=d*h,Rs+=m,Ns+=m*(r+(r=o)),Os+=m*(i+(i=s)),Fs+=m*(a+(a=c)),ke(r,i,a)}var e,n,r,i,a;zs.point=function(o,s){e=o,n=s,zs.point=t,o*=qo;var c=Math.cos(s*=qo);r=c*Math.cos(o),i=c*Math.sin(o),a=Math.sin(s),ke(r,i,a)},zs.lineEnd=function(){t(e,n),zs.lineEnd=Re,zs.point=Ce}}function De(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Be(){return!0}function Ne(t,e,n,r,i){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Ae(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var c=new Fe(n,t,null,!0),l=new Fe(n,null,c,!1);c.o=l,a.push(c),o.push(l),c=new Fe(r,t,null,!1),l=new Fe(r,null,c,!0),c.o=l,a.push(c),o.push(l)}}),o.sort(e),Oe(a),Oe(o),a.length){for(var s=0,c=n,l=o.length;s<l;++s)o[s].e=c=!c;for(var u,h,f=a[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;u=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var s=0,l=u.length;s<l;++s)i.point((h=u[s])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){u=p.p.z;for(var s=u.length-1;s>=0;--s)i.point((h=u[s])[0],h[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,u=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Oe(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Fe(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ie(t,e,n,r){return function(i,a){function o(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function s(t,e){var n=i(t,e);g.point(n[0],n[1])}function c(){y.point=s,g.lineStart()}function l(){y.point=o,g.lineEnd()}function u(t,e){m.push([t,e]);var n=i(t,e);x.point(n[0],n[1])}function h(){x.lineStart(),m=[]}function f(){u(m[0][0],m[0][1]),x.lineEnd();var t,e=x.clean(),n=b.buffer(),r=n.length;if(m.pop(),d.push(m),m=null,r)if(1&e){t=n[0];var i,r=t.length-1,o=-1;if(r>0){for(w||(a.polygonStart(),w=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(je))}var p,d,m,g=e(a),v=i.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:l,polygonStart:function(){y.point=u,y.lineStart=h,y.lineEnd=f,p=[],d=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=l,p=fo.merge(p);var t=We(v,d);p.length?(w||(a.polygonStart(),w=!0),Ne(p,ze,t,n,a)):t&&(w||(a.polygonStart(),w=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),w&&(a.polygonEnd(),w=!1),p=d=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},b=Ue(),x=e(b),w=!1;return y}}function je(t){return t.length>1}function Ue(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:T,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function ze(t,e){return((t=t.x)[0]<0?t[1]-Wo-Uo:Wo-t[1])-((e=e.x)[0]<0?e[1]-Wo-Uo:Wo-e[1])}function Ve(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Vo:-Vo,c=Eo(a-n);Eo(c-Vo)<Uo?(t.point(n,r=(r+o)/2>0?Wo:-Wo),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&c>=Vo&&(Eo(n-i)<Uo&&(n-=i*Uo),Eo(a-s)<Uo&&(a-=s*Uo),r=Ge(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function Ge(t,e,n,r){var i,a,o=Math.sin(t-n);return Eo(o)>Uo?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}function He(t,e,n,r){var i;if(null==t)i=n*Wo,r.point(-Vo,i),r.point(0,i),r.point(Vo,i),r.point(Vo,0),r.point(Vo,-i),r.point(0,-i),r.point(-Vo,-i),r.point(-Vo,0),r.point(-Vo,i);else if(Eo(t[0]-e[0])>Uo){var a=t[0]<e[0]?Vo:-Vo;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function We(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Cs.reset();for(var s=0,c=e.length;s<c;++s){var l=e[s],u=l.length;if(u)for(var h=l[0],f=h[0],p=h[1]/2+Vo/4,d=Math.sin(p),m=Math.cos(p),g=1;;){g===u&&(g=0),t=l[g];var v=t[0],y=t[1]/2+Vo/4,b=Math.sin(y),x=Math.cos(y),w=v-f,_=w>=0?1:-1,E=_*w,M=E>Vo,T=d*b;if(Cs.add(Math.atan2(T*_*Math.sin(E),m*x+T*Math.cos(E))),a+=M?w+_*Go:w,M^f>=n^v>=n){var S=_e(xe(h),xe(t));Te(S);var A=_e(i,S);Te(A);var C=(M^w>=0?-1:1)*ot(A[2]);(r>C||r===C&&(S[0]||S[1]))&&(o+=M^w>=0?1:-1)}if(!g++)break;f=v,d=b,m=x,h=t}}return(a<-Uo||a<Uo&&Cs<-Uo)^1&o}function qe(t){function e(t,e){return Math.cos(t)*Math.cos(e)>a}function n(t){var n,a,c,l,u;return{lineStart:function(){l=c=!1,u=1},point:function(h,f){var p,d=[h,f],m=e(h,f),g=o?m?0:i(h,f):m?i(h+(h<0?Vo:-Vo),f):0;if(!n&&(l=c=m)&&t.lineStart(),m!==c&&(p=r(n,d),(Ae(n,p)||Ae(d,p))&&(d[0]+=Uo,d[1]+=Uo,m=e(d[0],d[1]))),m!==c)u=0,m?(t.lineStart(),p=r(d,n),t.point(p[0],p[1])):(p=r(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(s&&n&&o^m){var v;g&a||!(v=r(d,n,!0))||(u=0,o?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||n&&Ae(n,d)||t.point(d[0],d[1]),n=d,c=m,a=g},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return u|(l&&c)<<1}}}function r(t,e,n){var r=xe(t),i=xe(e),o=[1,0,0],s=_e(r,i),c=we(s,s),l=s[0],u=c-l*l;if(!u)return!n&&t;var h=a*c/u,f=-a*l/u,p=_e(o,s),d=Me(o,h),m=Me(s,f);Ee(d,m);var g=p,v=we(d,g),y=we(g,g),b=v*v-y*(we(d,d)-1);if(!(b<0)){var x=Math.sqrt(b),w=Me(g,(-v-x)/y);if(Ee(w,d),w=Se(w),!n)return w;var _,E=t[0],M=e[0],T=t[1],S=e[1];M<E&&(_=E,E=M,M=_);var A=M-E,C=Eo(A-Vo)<Uo,k=C||A<Uo;if(!C&&S<T&&(_=T,T=S,S=_),k?C?T+S>0^w[1]<(Eo(w[0]-E)<Uo?T:S):T<=w[1]&&w[1]<=S:A>Vo^(E<=w[0]&&w[0]<=M)){var L=Me(g,(-v+x)/y);return Ee(L,d),[w,Se(L)]}}}function i(e,n){var r=o?t:Vo-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var a=Math.cos(t),o=a>0,s=Eo(a)>Uo,c=xn(t,6*qo);return Ie(e,n,c,o?[0,-t]:[-Vo,t-Vo])}function Xe(t,e,n,r){return function(i){var a,o=i.a,s=i.b,c=o.x,l=o.y,u=s.x,h=s.y,f=0,p=1,d=u-c,m=h-l;if(a=t-c,d||!(a>0)){if(a/=d,d<0){if(a<f)return;a<p&&(p=a)}else if(d>0){if(a>p)return;a>f&&(f=a)}if(a=n-c,d||!(a<0)){if(a/=d,d<0){if(a>p)return;a>f&&(f=a)}else if(d>0){if(a<f)return;a<p&&(p=a)}if(a=e-l,m||!(a>0)){if(a/=m,m<0){if(a<f)return;a<p&&(p=a)}else if(m>0){if(a>p)return;a>f&&(f=a)}if(a=r-l,m||!(a<0)){if(a/=m,m<0){if(a>p)return;a>f&&(f=a)}else if(m>0){if(a<f)return;a<p&&(p=a)}return f>0&&(i.a={x:c+f*d,y:l+f*m}),p<1&&(i.b={x:c+p*d,y:l+p*m}),i}}}}}}function Ye(t,e,n,r){function i(r,i){return Eo(r[0]-t)<Uo?i>0?0:3:Eo(r[0]-n)<Uo?i>0?2:1:Eo(r[1]-e)<Uo?i>0?1:0:i>0?3:2}function a(t,e){return o(t.x,e.x)}function o(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function c(t){for(var e=0,n=g.length,r=t[1],i=0;i<n;++i)for(var a,o=1,s=g[i],c=s.length,l=s[0];o<c;++o)a=s[o],l[1]<=r?a[1]>r&&it(l,a,t)>0&&++e:a[1]<=r&&it(l,a,t)<0&&--e,l=a;return 0!==e}function l(a,s,c,l){var u=0,h=0;if(null==a||(u=i(a,c))!==(h=i(s,c))||o(a,s)<0^c>0){do l.point(0===u||3===u?t:n,u>1?r:e);while((u=(u+c+4)%4)!==h)}else l.point(s[0],s[1])}function u(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function h(t,e){u(t,e)&&s.point(t,e)}function f(){k.point=d,g&&g.push(v=[]),M=!0,E=!1,w=_=NaN}function p(){m&&(d(y,b),x&&E&&A.rejoin(),m.push(A.buffer())),k.point=h,E&&s.lineEnd()}function d(t,e){t=Math.max(-Gs,Math.min(Gs,t)),e=Math.max(-Gs,Math.min(Gs,e));var n=u(t,e);if(g&&v.push([t,e]),M)y=t,b=e,x=n,M=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&E)s.point(t,e);else{var r={a:{x:w,y:_},b:{x:t,y:e}};C(r)?(E||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),T=!1):n&&(s.lineStart(),s.point(t,e),T=!1)}w=t,_=e,E=n}var m,g,v,y,b,x,w,_,E,M,T,S=s,A=Ue(),C=Xe(t,e,n,r),k={point:h,lineStart:f,lineEnd:p,polygonStart:function(){s=A,m=[],g=[],T=!0},polygonEnd:function(){s=S,m=fo.merge(m);var e=c([t,r]),n=T&&e,i=m.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),i&&Ne(m,a,e,l,s),s.polygonEnd()),m=g=v=null}};return k}}function $e(t){var e=0,n=Vo/3,r=fn(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Vo/180,n=t[1]*Vo/180):[e/Vo*180,n/Vo*180]},i}function Ze(t,e){function n(t,e){var n=Math.sqrt(a-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,ot((a-(t*t+n*n)*i*i)/(2*i))]},n}function Ke(){function t(t,e){Ws+=i*t-r*e,r=t,i=e}var e,n,r,i;Zs.point=function(a,o){Zs.point=t,e=r=a,n=i=o},Zs.lineEnd=function(){t(e,n)}}function Je(t,e){t<qs&&(qs=t),t>Ys&&(Ys=t),e<Xs&&(Xs=e),e>$s&&($s=e)}function Qe(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function r(){s.point=t}function i(){o.push("Z")}var a=tn(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return a=tn(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}function tn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function en(t,e){Ps+=t,Ds+=e,++Bs}function nn(){function t(t,r){var i=t-e,a=r-n,o=Math.sqrt(i*i+a*a);Ns+=o*(e+t)/2,Os+=o*(n+r)/2,Fs+=o,en(e=t,n=r)}var e,n;Js.point=function(r,i){Js.point=t,en(e=r,n=i)}}function rn(){Js.point=en}function an(){function t(t,e){var n=t-r,a=e-i,o=Math.sqrt(n*n+a*a);Ns+=o*(r+t)/2,Os+=o*(i+e)/2,Fs+=o,o=i*t-r*e,Is+=o*(r+t),js+=o*(i+e),Us+=3*o,en(r=t,i=e)}var e,n,r,i;Js.point=function(a,o){Js.point=t,en(e=r=a,n=i=o)},Js.lineEnd=function(){t(e,n)}}function on(t){function e(e,n){t.moveTo(e+o,n),t.arc(e,n,o,0,Go)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function a(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return o=t,s},result:T};return s}function sn(t){function e(t){return(s?r:n)(t)}function n(e){return un(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){b=NaN,M.point=a,e.lineStart()}function a(n,r){var a=xe([n,r]),o=t(n,r);i(b,x,y,w,_,E,b=o[0],x=o[1],y=n,w=a[0],_=a[1],E=a[2],s,e),e.point(b,x)}function o(){M.point=n,e.lineEnd()}function c(){r(),M.point=l,M.lineEnd=u}function l(t,e){a(h=t,f=e),p=b,d=x,m=w,g=_,v=E,M.point=a}function u(){i(b,x,y,w,_,E,p,d,h,m,g,v,s,e),M.lineEnd=o,o()}var h,f,p,d,m,g,v,y,b,x,w,_,E,M={point:n,lineStart:r,lineEnd:o,polygonStart:function(){e.polygonStart(),M.lineStart=c},polygonEnd:function(){e.polygonEnd(),M.lineStart=r}};return M}function i(e,n,r,s,c,l,u,h,f,p,d,m,g,v){var y=u-e,b=h-n,x=y*y+b*b;if(x>4*a&&g--){var w=s+p,_=c+d,E=l+m,M=Math.sqrt(w*w+_*_+E*E),T=Math.asin(E/=M),S=Eo(Eo(E)-1)<Uo||Eo(r-f)<Uo?(r+f)/2:Math.atan2(_,w),A=t(S,T),C=A[0],k=A[1],L=C-e,R=k-n,P=b*L-y*R;(P*P/x>a||Eo((y*L+b*R)/x-.5)>.3||s*p+c*d+l*m<o)&&(i(e,n,r,s,c,l,C,k,S,w/=M,_/=M,E,g,v),v.point(C,k),i(C,k,S,w,_,E,u,h,f,p,d,m,g,v))}}var a=.5,o=Math.cos(30*qo),s=16;return e.precision=function(t){return arguments.length?(s=(a=t*t)>0&&16,e):Math.sqrt(a)},e}function cn(t){var e=sn(function(e,n){return t([e*Xo,n*Xo])});return function(t){return pn(e(t))}}function ln(t){this.stream=t}function un(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function hn(t){return fn(function(){return t})()}function fn(t){function e(t){return t=s(t[0]*qo,t[1]*qo),[t[0]*f+c,l-t[1]*f]}function n(t){return t=s.invert((t[0]-c)/f,(l-t[1])/f),t&&[t[0]*Xo,t[1]*Xo]}function r(){s=De(o=gn(v,y,b),a);var t=a(m,g);return c=p-t[0]*f,l=d+t[1]*f,i()}function i(){return u&&(u.valid=!1,u=null),e}var a,o,s,c,l,u,h=sn(function(t,e){return t=a(t,e),[t[0]*f+c,l-t[1]*f]}),f=150,p=480,d=250,m=0,g=0,v=0,y=0,b=0,x=Vs,w=_,E=null,M=null;return e.stream=function(t){return u&&(u.valid=!1),u=pn(x(o,h(w(t)))),u.valid=!0,u},e.clipAngle=function(t){return arguments.length?(x=null==t?(E=t,Vs):qe((E=+t)*qo),i()):E},e.clipExtent=function(t){return arguments.length?(M=t,w=t?Ye(t[0][0],t[0][1],t[1][0],t[1][1]):_,i()):M},e.scale=function(t){return arguments.length?(f=+t,r()):f},e.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},e.center=function(t){return arguments.length?(m=t[0]%360*qo,g=t[1]%360*qo,r()):[m*Xo,g*Xo]},e.rotate=function(t){return arguments.length?(v=t[0]%360*qo,y=t[1]%360*qo,b=t.length>2?t[2]%360*qo:0,r()):[v*Xo,y*Xo,b*Xo]},fo.rebind(e,h,"precision"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,r()}}function pn(t){return un(t,function(e,n){t.point(e*qo,n*qo)})}function dn(t,e){return[t,e]}function mn(t,e){return[t>Vo?t-Go:t<-Vo?t+Go:t,e]}function gn(t,e,n){return t?e||n?De(yn(t),bn(e,n)):yn(t):e||n?bn(e,n):mn}function vn(t){return function(e,n){return e+=t,[e>Vo?e-Go:e<-Vo?e+Go:e,n]}}function yn(t){var e=vn(t);return e.invert=vn(-t),e}function bn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,c=Math.sin(t)*n,l=Math.sin(e),u=l*r+s*i;return[Math.atan2(c*a-u*o,s*r-l*i),ot(u*a+c*o)]}var r=Math.cos(t),i=Math.sin(t),a=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,c=Math.sin(t)*n,l=Math.sin(e),u=l*a-c*o;return[Math.atan2(c*a+l*o,s*r+u*i),ot(u*r-s*i)]},n}function xn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,s){var c=o*e;null!=i?(i=wn(n,i),a=wn(n,a),(o>0?i<a:i>a)&&(i+=o*Go)):(i=t+o*Go,a=t-.5*c);for(var l,u=i;o>0?u>a:u<a;u-=c)s.point((l=Se([n,-r*Math.cos(u),-r*Math.sin(u)]))[0],l[1])}}function wn(t,e){var n=xe(e);n[0]-=t,Te(n);var r=at(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Uo)%(2*Math.PI)}function _n(t,e,n){var r=fo.range(t,e-Uo,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function En(t,e,n){var r=fo.range(t,e-Uo,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Mn(t){return t.source}function Tn(t){return t.target}function Sn(t,e,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(r),s=Math.sin(r),c=i*Math.cos(t),l=i*Math.sin(t),u=o*Math.cos(n),h=o*Math.sin(n),f=2*Math.asin(Math.sqrt(ut(r-e)+i*o*ut(n-t))),p=1/Math.sin(f),d=f?function(t){var e=Math.sin(t*=f)*p,n=Math.sin(f-t)*p,r=n*c+e*u,i=n*l+e*h,o=n*a+e*s;return[Math.atan2(i,r)*Xo,Math.atan2(o,Math.sqrt(r*r+i*i))*Xo]}:function(){return[t*Xo,e*Xo]};return d.distance=f,d}function An(){function t(t,i){var a=Math.sin(i*=qo),o=Math.cos(i),s=Eo((t*=qo)-e),c=Math.cos(s);Qs+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*a-n*o*c)*s),n*a+r*o*c),e=t,n=a,r=o}var e,n,r;tc.point=function(i,a){e=i*qo,n=Math.sin(a*=qo),r=Math.cos(a),tc.point=t},tc.lineEnd=function(){tc.point=tc.lineEnd=T}}function Cn(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),a=t(r*i);return[a*i*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,r*o),Math.asin(r&&n*a/r)]},n}function kn(t,e){function n(t,e){o>0?e<-Wo+Uo&&(e=-Wo+Uo):e>Wo-Uo&&(e=Wo-Uo);var n=o/Math.pow(i(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Vo/4+t/2)},a=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),o=r*Math.pow(i(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,r=rt(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/r,1/a))-Wo]},n):Rn}function Ln(t,e){function n(t,e){var n=a-e;return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),a=r/i+t;return Eo(i)<Uo?dn:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,a-rt(i)*Math.sqrt(t*t+n*n)]},n)}function Rn(t,e){return[t,Math.log(Math.tan(Vo/4+e/2))]}function Pn(t){var e,n=hn(t),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=Vo*r(),c=i();a([[c[0]-s,c[1]-s],[c[0]+s,c[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}function Dn(t,e){return[Math.log(Math.tan(Vo/4+e/2)),-t]}function Bn(t){return t[0]}function Nn(t){return t[1]}function On(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&it(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Fn(t,e){return t[0]-e[0]||t[1]-e[1]}function In(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function jn(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,c=t[1],l=n[1],u=e[1]-c,h=r[1]-l,f=(s*(c-l)-h*(i-a))/(h*o-s*u);return[i+f*o,c+f*u]}function Un(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function zn(){cr(this),this.edge=this.site=this.circle=null}function Vn(t){var e=fc.pop()||new zn;return e.site=t,e}function Gn(t){Qn(t),lc.remove(t),fc.push(t),cr(t)}function Hn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,s=[t];Gn(t);for(var c=a;c.circle&&Eo(n-c.circle.x)<Uo&&Eo(r-c.circle.cy)<Uo;)a=c.P,s.unshift(c),Gn(c),c=a;s.unshift(c),Qn(c);for(var l=o;l.circle&&Eo(n-l.circle.x)<Uo&&Eo(r-l.circle.cy)<Uo;)o=l.N,s.push(l),Gn(l),l=o;s.push(l),Qn(l);var u,h=s.length;for(u=1;u<h;++u)l=s[u],c=s[u-1],ar(l.edge,c.site,l.site,i);c=s[0],l=s[h-1],l.edge=rr(c.site,l.site,null,i),Jn(c),Jn(l)}function Wn(t){for(var e,n,r,i,a=t.x,o=t.y,s=lc._;s;)if(r=qn(s,o)-a,r>Uo)s=s.L;else{if(i=a-Xn(s,o),!(i>Uo)){r>-Uo?(e=s.P,n=s):i>-Uo?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var c=Vn(t);if(lc.insert(e,c),e||n){if(e===n)return Qn(e),n=Vn(e.site),lc.insert(c,n),c.edge=n.edge=rr(e.site,c.site),Jn(e),void Jn(n);if(!n)return void(c.edge=rr(e.site,c.site));Qn(e),Qn(n);var l=e.site,u=l.x,h=l.y,f=t.x-u,p=t.y-h,d=n.site,m=d.x-u,g=d.y-h,v=2*(f*g-p*m),y=f*f+p*p,b=m*m+g*g,x={x:(g*y-p*b)/v+u,y:(f*b-m*y)/v+h};ar(n.edge,l,d,x),c.edge=rr(l,t,null,x),n.edge=rr(t,d,null,x),Jn(e),Jn(n)}}function qn(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-(1/0);n=o.site;var s=n.x,c=n.y,l=c-e;if(!l)return s;var u=s-r,h=1/a-1/l,f=u/l;return h?(-f+Math.sqrt(f*f-2*h*(u*u/(-2*l)-c+l/2+i-a/2)))/h+r:(r+s)/2}function Xn(t,e){var n=t.N;if(n)return qn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Yn(t){this.site=t,this.edges=[]}function $n(t){for(var e,n,r,i,a,o,s,c,l,u,h=t[0][0],f=t[1][0],p=t[0][1],d=t[1][1],m=cc,g=m.length;g--;)if(a=m[g],a&&a.prepare())for(s=a.edges,c=s.length,o=0;o<c;)u=s[o].end(),r=u.x,i=u.y,l=s[++o%c].start(),e=l.x,n=l.y,(Eo(r-e)>Uo||Eo(i-n)>Uo)&&(s.splice(o,0,new or(ir(a.site,u,Eo(r-h)<Uo&&d-i>Uo?{x:h,y:Eo(e-h)<Uo?n:d}:Eo(i-d)<Uo&&f-r>Uo?{x:Eo(n-d)<Uo?e:f,y:d}:Eo(r-f)<Uo&&i-p>Uo?{x:f,y:Eo(e-f)<Uo?n:p}:Eo(i-p)<Uo&&r-h>Uo?{x:Eo(n-p)<Uo?e:h,y:p}:null),a.site,null)),++c)}function Zn(t,e){return e.angle-t.angle}function Kn(){cr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,s=i.y,c=r.x-o,l=r.y-s,u=a.x-o,h=a.y-s,f=2*(c*h-l*u);if(!(f>=-zo)){var p=c*c+l*l,d=u*u+h*h,m=(h*p-l*d)/f,g=(c*d-u*p)/f,h=g+s,v=pc.pop()||new Kn;v.arc=t,v.site=i,v.x=m+o,v.y=h+Math.sqrt(m*m+g*g),v.cy=h,t.circle=v;for(var y=null,b=hc._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}hc.insert(y,v),y||(uc=v)}}}}function Qn(t){var e=t.circle;e&&(e.P||(uc=e.N),hc.remove(e),pc.push(e),cr(e),t.circle=null)}function tr(t){for(var e,n=sc,r=Xe(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!er(e,t)||!r(e)||Eo(e.a.x-e.b.x)<Uo&&Eo(e.a.y-e.b.y)<Uo)&&(e.a=e.b=null,n.splice(i,1))}function er(t,e){var n=t.b;if(n)return!0;var r,i,a=t.a,o=e[0][0],s=e[1][0],c=e[0][1],l=e[1][1],u=t.l,h=t.r,f=u.x,p=u.y,d=h.x,m=h.y,g=(f+d)/2,v=(p+m)/2;if(m===p){if(g<o||g>=s)return;if(f>d){if(a){if(a.y>=l)return}else a={x:g,y:c};n={x:g,y:l}}else{if(a){if(a.y<c)return}else a={x:g,y:l};n={x:g,y:c}}}else if(r=(f-d)/(m-p),i=v-r*g,r<-1||r>1)if(f>d){if(a){if(a.y>=l)return}else a={x:(c-i)/r,y:c};n={x:(l-i)/r,y:l}}else{if(a){if(a.y<c)return}else a={x:(l-i)/r,y:l};n={x:(c-i)/r,y:c}}else if(p<m){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return t.a=a,t.b=n,!0}function nr(t,e){this.l=t,this.r=e,this.a=this.b=null}function rr(t,e,n,r){var i=new nr(t,e);return sc.push(i),n&&ar(i,t,e,n),r&&ar(i,e,t,r),cc[t.i].edges.push(new or(i,t,e)),cc[e.i].edges.push(new or(i,e,t)),i}function ir(t,e,n){var r=new nr(t,null);return r.a=e,r.b=n,sc.push(r),r}function ar(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function or(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function sr(){this._=null}function cr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function lr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ur(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function hr(t){for(;t.L;)t=t.L;return t}function fr(t,e){var n,r,i,a=t.sort(pr).pop();for(sc=[],cc=Array(t.length),lc=new sr,hc=new sr;;)if(i=uc,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(cc[a.i]=new Yn(a),Wn(a),n=a.x,r=a.y),a=t.pop();else{if(!i)break;Hn(i.arc)}e&&(tr(e),$n(e));var o={cells:cc,edges:sc};return lc=hc=sc=cc=null,o}function pr(t,e){return e.y-t.y||e.x-t.x}function dr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function mr(t){return t.x}function gr(t){return t.y}function vr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function yr(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),c=e.nodes;c[0]&&yr(t,c[0],n,r,o,s),c[1]&&yr(t,c[1],o,r,i,s),c[2]&&yr(t,c[2],n,s,o,a),c[3]&&yr(t,c[3],o,s,i,a)}}function br(t,e,n,r,i,a,o){var s,c=1/0;return function t(l,u,h,f,p){if(!(u>a||h>o||f<r||p<i)){if(d=l.point){var d,m=e-l.x,g=n-l.y,v=m*m+g*g;if(v<c){var y=Math.sqrt(c=v);r=e-y,i=n-y,a=e+y,o=n+y,s=d}}for(var b=l.nodes,x=.5*(u+f),w=.5*(h+p),_=e>=x,E=n>=w,M=E<<1|_,T=M+4;M<T;++M)if(l=b[3&M])switch(3&M){case 0:t(l,u,h,x,w);break;case 1:t(l,x,h,f,w);break;case 2:t(l,u,w,x,p);break;case 3:t(l,x,w,f,p)}}}(t,r,i,a,o),s}function xr(t,e){t=fo.rgb(t),e=fo.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,o=e.g-r,s=e.b-i;return function(t){return"#"+Tt(Math.round(n+a*t))+Tt(Math.round(r+o*t))+Tt(Math.round(i+s*t))}}function wr(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Mr(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function _r(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Er(t,e){var n,r,i,a=mc.lastIndex=gc.lastIndex=0,o=-1,s=[],c=[];for(t+="",e+="";(n=mc.exec(t))&&(r=gc.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,c.push({i:o,x:_r(n,r)})),a=gc.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?(e=c[0].x,function(t){return e(t)+""}):function(){return e}:(e=c.length,function(t){for(var n,r=0;r<e;++r)s[(n=c[r]).i]=n.x(t);return s.join("")})}function Mr(t,e){for(var n,r=fo.interpolators.length;--r>=0&&!(n=fo.interpolators[r](t,e)););return n}function Tr(t,e){var n,r=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(Mr(t[n],e[n]));for(;n<a;++n)i[n]=t[n];for(;n<o;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}function Sr(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function Ar(t){return function(e){return 1-t(1-e)}}function Cr(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function kr(t){return t*t}function Lr(t){return t*t*t}function Rr(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Pr(t){return function(e){return Math.pow(e,t)}}function Dr(t){return 1-Math.cos(t*Wo)}function Br(t){return Math.pow(2,10*(t-1))}function Nr(t){return 1-Math.sqrt(1-t*t)}function Or(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Go*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Go/e)}}function Fr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Ir(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function jr(t,e){t=fo.hcl(t),e=fo.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,o=e.c-r,s=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.c:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(t){return mt(n+a*t,r+o*t,i+s*t)+""}}function Ur(t,e){t=fo.hsl(t),e=fo.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,o=e.s-r,s=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.s:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(t){return pt(n+a*t,r+o*t,i+s*t)+""}}function zr(t,e){t=fo.lab(t),e=fo.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,o=e.a-r,s=e.b-i;return function(t){return vt(n+a*t,r+o*t,i+s*t)+""}}function Vr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Gr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Wr(e),i=Hr(e,n),a=Wr(qr(n,e,-i))||0;
e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Xo,this.translate=[t.e,t.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*Xo:0}function Hr(t,e){return t[0]*e[0]+t[1]*e[1]}function Wr(t){var e=Math.sqrt(Hr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function qr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Xr(t){return t.length?t.pop()+",":""}function Yr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:_r(t[0],e[0])},{i:i-2,x:_r(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function $r(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(Xr(n)+"rotate(",null,")")-2,x:_r(t,e)})):e&&n.push(Xr(n)+"rotate("+e+")")}function Zr(t,e,n,r){t!==e?r.push({i:n.push(Xr(n)+"skewX(",null,")")-2,x:_r(t,e)}):e&&n.push(Xr(n)+"skewX("+e+")")}function Kr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(Xr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:_r(t[0],e[0])},{i:i-2,x:_r(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(Xr(n)+"scale("+e+")")}function Jr(t,e){var n=[],r=[];return t=fo.transform(t),e=fo.transform(e),Yr(t.translate,e.translate,n,r),$r(t.rotate,e.rotate,n,r),Zr(t.skew,e.skew,n,r),Kr(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,a=r.length;++i<a;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function Qr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function ti(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function ei(t){for(var e=t.source,n=t.target,r=ri(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function ni(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function ri(t,e){if(t===e)return t;for(var n=ni(t),r=ni(e),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function ii(t){t.fixed|=2}function ai(t){t.fixed&=-7}function oi(t){t.fixed|=4,t.px=t.x,t.py=t.y}function si(t){t.fixed&=-5}function ci(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,c=-1;++c<s;)a=o[c],null!=a&&(ci(a,e,n),t.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,r+=l*t.point.x,i+=l*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function li(t,e){return fo.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=mi,t}function ui(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function hi(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(t=r.pop());)e(t)}function fi(t){return t.children}function pi(t){return t.value}function di(t,e){return e.value-t.value}function mi(t){return fo.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function gi(t){return t.x}function vi(t){return t.y}function yi(t,e,n){t.y0=e,t.y=n}function bi(t){return fo.range(t.length)}function xi(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function wi(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function _i(t){return t.reduce(Ei,0)}function Ei(t,e){return t+e[1]}function Mi(t,e){return Ti(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Ti(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function Si(t){return[fo.min(t),fo.max(t)]}function Ai(t,e){return t.value-e.value}function Ci(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function ki(t,e){t._pack_next=e,e._pack_prev=t}function Li(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Ri(t){function e(t){u=Math.min(t.x-t.r,u),h=Math.max(t.x+t.r,h),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(l=n.length)){var n,r,i,a,o,s,c,l,u=1/0,h=-(1/0),f=1/0,p=-(1/0);if(n.forEach(Pi),r=n[0],r.x=-r.r,r.y=0,e(r),l>1&&(i=n[1],i.x=i.r,i.y=0,e(i),l>2))for(a=n[2],Ni(r,i,a),e(a),Ci(r,a),r._pack_prev=a,Ci(a,i),i=r._pack_next,o=3;o<l;o++){Ni(r,i,a=n[o]);var d=0,m=1,g=1;for(s=i._pack_next;s!==i;s=s._pack_next,m++)if(Li(s,a)){d=1;break}if(1==d)for(c=r._pack_prev;c!==s._pack_prev&&!Li(c,a);c=c._pack_prev,g++);d?(m<g||m==g&&i.r<r.r?ki(r,i=s):ki(r=c,i),o--):(Ci(r,a),i=a,e(a))}var v=(u+h)/2,y=(f+p)/2,b=0;for(o=0;o<l;o++)a=n[o],a.x-=v,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=b,n.forEach(Di)}}function Pi(t){t._pack_next=t._pack_prev=t}function Di(t){delete t._pack_next,delete t._pack_prev}function Bi(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var a=-1,o=i.length;++a<o;)Bi(i[a],e,n,r)}function Ni(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a;o*=o,r*=r;var c=.5+(r-o)/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+c*i+l*a,n.y=t.y+c*a-l*i}else n.x=t.x+r,n.y=t.y}function Oi(t,e){return t.parent==e.parent?1:2}function Fi(t){var e=t.children;return e.length?e[0]:t.t}function Ii(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function ji(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Ui(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)e=i[a],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function zi(t,e,n){return t.a.parent===e.parent?t.a:n}function Vi(t){return 1+fo.max(t,function(t){return t.y})}function Gi(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Hi(t){var e=t.children;return e&&e.length?Hi(e[0]):t}function Wi(t){var e,n=t.children;return n&&(e=n.length)?Wi(n[e-1]):t}function qi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Xi(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Yi(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function $i(t){return t.rangeExtent?t.rangeExtent():Yi(t.range())}function Zi(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function Ki(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Ji(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Ac}function Qi(t,e,n,r){var i=[],a=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)i.push(n(t[o-1],t[o])),a.push(r(e[o-1],e[o]));return function(e){var n=fo.bisect(t,e,1,s)-1;return a[n](i[n](e))}}function ta(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Qi:Zi,c=r?ti:Qr;return o=i(t,e,c,n),s=i(e,t,c,Mr),a}function a(t){return o(t)}var o,s;return a.invert=function(t){return s(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},a.range=function(t){return arguments.length?(e=t,i()):e},a.rangeRound=function(t){return a.range(t).interpolate(Vr)},a.clamp=function(t){return arguments.length?(r=t,i()):r},a.interpolate=function(t){return arguments.length?(n=t,i()):n},a.ticks=function(e){return ia(t,e)},a.tickFormat=function(e,n){return aa(t,e,n)},a.nice=function(e){return na(t,e),i()},a.copy=function(){return ta(t,e,n,r)},i()}function ea(t,e){return fo.rebind(t,e,"range","rangeRound","interpolate","clamp")}function na(t,e){return Ki(t,Ji(ra(t,e)[2])),Ki(t,Ji(ra(t,e)[2])),t}function ra(t,e){null==e&&(e=10);var n=Yi(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function ia(t,e){return fo.range.apply(fo,ra(t,e))}function aa(t,e,n){var r=ra(t,e);if(n){var i=ms.exec(n);if(i.shift(),"s"===i[8]){var a=fo.formatPrefix(Math.max(Eo(r[0]),Eo(r[1])));return i[7]||(i[7]="."+oa(a.scale(r[2]))),i[8]="f",n=fo.format(i.join("")),function(t){return n(a.scale(t))+a.symbol}}i[7]||(i[7]="."+sa(i[8],r)),n=i.join("")}else n=",."+oa(r[2])+"f";return fo.format(n)}function oa(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function sa(t,e){var n=oa(e[2]);return t in Cc?Math.abs(n-oa(Math.max(Eo(e[0]),Eo(e[1]))))+ +("e"!==t):n-2*("%"===t)}function ca(t,e,n,r){function i(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(i(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),o):e},o.nice=function(){var e=Ki(r.map(i),n?Math:Lc);return t.domain(e),r=e.map(a),o},o.ticks=function(){var t=Yi(r),o=[],s=t[0],c=t[1],l=Math.floor(i(s)),u=Math.ceil(i(c)),h=e%1?2:e;if(isFinite(u-l)){if(n){for(;l<u;l++)for(var f=1;f<h;f++)o.push(a(l)*f);o.push(a(l))}else for(o.push(a(l));l++<u;)for(var f=h-1;f>0;f--)o.push(a(l)*f);for(l=0;o[l]<s;l++);for(u=o.length;o[u-1]>c;u--);o=o.slice(l,u)}return o},o.tickFormat=function(t,n){if(!arguments.length)return kc;arguments.length<2?n=kc:"function"!=typeof n&&(n=fo.format(n));var r=Math.max(1,e*t/o.ticks().length);return function(t){var o=t/a(Math.round(i(t)));return o*e<e-.5&&(o*=e),o<=r?n(t):""}},o.copy=function(){return ca(t.copy(),e,n,r)},ea(o,t)}function la(t,e,n){function r(e){return t(i(e))}var i=ua(e),a=ua(1/e);return r.invert=function(e){return a(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return ia(n,t)},r.tickFormat=function(t,e){return aa(n,t,e)},r.nice=function(t){return r.domain(na(n,t))},r.exponent=function(o){return arguments.length?(i=ua(e=o),a=ua(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return la(t.copy(),e,n)},ea(r,t)}function ua(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ha(t,e){function n(n){return a[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%a.length]}function r(e,n){return fo.range(t.length).map(function(t){return e+n*t})}var i,a,o;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new p;for(var a,o=-1,s=r.length;++o<s;)i.has(a=r[o])||i.set(a,t.push(a));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(a=t,o=0,e={t:"range",a:arguments},n):a},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var c=i[0],l=i[1],u=t.length<2?(c=(c+l)/2,0):(l-c)/(t.length-1+s);return a=r(c+u*s/2,u),o=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var c=i[0],l=i[1],u=t.length<2?(c=l=Math.round((c+l)/2),0):(l-c)/(t.length-1+s)|0;return a=r(c+Math.round(u*s/2+(l-c-(t.length-1+s)*u)/2),u),o=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,c){arguments.length<2&&(s=0),arguments.length<3&&(c=s);var l=i[1]<i[0],u=i[l-0],h=i[1-l],f=(h-u)/(t.length-s+2*c);return a=r(u+f*c,f),l&&a.reverse(),o=f*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,c){arguments.length<2&&(s=0),arguments.length<3&&(c=s);var l=i[1]<i[0],u=i[l-0],h=i[1-l],f=Math.floor((h-u)/(t.length-s+2*c));return a=r(u+Math.round((h-u-(t.length-s)*f)/2),f),l&&a.reverse(),o=Math.round(f*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Yi(e.a[0])},n.copy=function(){return ha(t,e)},n.domain(t)}function fa(t,e){function n(){var n=0,a=e.length;for(i=[];++n<a;)i[n-1]=fo.quantile(t,n/a);return r}function r(t){if(!isNaN(t=+t))return e[fo.bisect(i,t)]}var i;return r.domain=function(e){return arguments.length?(t=e.map(s).filter(c).sort(o),n()):t},r.range=function(t){return arguments.length?(e=t,n()):e},r.quantiles=function(){return i},r.invertExtent=function(n){return n=e.indexOf(n),n<0?[NaN,NaN]:[n>0?i[n-1]:t[0],n<i.length?i[n]:t[t.length-1]]},r.copy=function(){return fa(t,e)},n()}function pa(t,e,n){function r(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function i(){return a=n.length/(e-t),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=e<0?NaN:e/a+t,[e,e+1/a]},r.copy=function(){return pa(t,e,n)},i()}function da(t,e){function n(n){if(n<=n)return e[fo.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return da(t,e)},n}function ma(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return ia(t,e)},e.tickFormat=function(e,n){return aa(t,e,n)},e.copy=function(){return ma(t)},e}function ga(){return 0}function va(t){return t.innerRadius}function ya(t){return t.outerRadius}function ba(t){return t.startAngle}function xa(t){return t.endAngle}function wa(t){return t&&t.padAngle}function _a(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Ea(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),c=s*o,l=-s*a,u=t[0]+c,h=t[1]+l,f=e[0]+c,p=e[1]+l,d=(u+f)/2,m=(h+p)/2,g=f-u,v=p-h,y=g*g+v*v,b=n-r,x=u*p-f*h,w=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),_=(x*v-g*w)/y,E=(-x*g-v*w)/y,M=(x*v+g*w)/y,T=(-x*g+v*w)/y,S=_-d,A=E-m,C=M-d,k=T-m;return S*S+A*A>C*C+k*k&&(_=M,E=T),[[_-c,E-l],[_*n/b,E*n/b]]}function Ma(t){function e(e){function o(){l.push("M",a(t(u),s))}for(var c,l=[],u=[],h=-1,f=e.length,p=Rt(n),d=Rt(r);++h<f;)i.call(this,c=e[h],h)?u.push([+p.call(this,c,h),+d.call(this,c,h)]):u.length&&(o(),u=[]);return u.length&&o(),l.length?l.join(""):null}var n=Bn,r=Nn,i=Be,a=Ta,o=a.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=Oc.get(t)||Ta).key,e):o},e.tension=function(t){return arguments.length?(s=t,e):s},e}function Ta(t){return t.length>1?t.join("L"):t+"Z"}function Sa(t){return t.join("L")+"Z"}function Aa(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Ca(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function ka(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function La(t,e){return t.length<4?Ta(t):t[1]+Da(t.slice(1,-1),Ba(t,e))}function Ra(t,e){return t.length<3?Sa(t):t[0]+Da((t.push(t[0]),t),Ba([t[t.length-2]].concat(t,[t[1]]),e))}function Pa(t,e){return t.length<3?Ta(t):t[0]+Da(t,Ba(t,e))}function Da(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ta(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,c=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],c=2),e.length>1){s=e[1],a=t[c],c++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<e.length;l++,c++)a=t[c],s=e[l],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var u=t[c];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return r}function Ba(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,c=t.length;++s<c;)n=a,a=o,o=t[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Na(t){if(t.length<3)return Ta(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],c=[i,",",a,"L",ja(jc,o),",",ja(jc,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ua(c,o,s);return t.pop(),c.push("L",r),c.join("")}function Oa(t){if(t.length<4)return Ta(t);for(var e,n=[],r=-1,i=t.length,a=[0],o=[0];++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);for(n.push(ja(jc,a)+","+ja(jc,o)),--r;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Ua(n,a,o);return n.join("")}function Fa(t){for(var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];++r<4;)n=t[r%i],o.push(n[0]),s.push(n[1]);for(e=[ja(jc,o),",",ja(jc,s)],--r;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ua(e,o,s);return e.join("")}function Ia(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,c=t[n][1]-o,l=-1;++l<=n;)r=t[l],i=l/n,r[0]=e*r[0]+(1-e)*(a+i*s),r[1]=e*r[1]+(1-e)*(o+i*c);return Na(t)}function ja(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ua(t,e,n){t.push("C",ja(Fc,e),",",ja(Fc,n),",",ja(Ic,e),",",ja(Ic,n),",",ja(jc,e),",",ja(jc,n))}function za(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Va(t){for(var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=za(i,a);++e<n;)r[e]=(o+(o=za(i=a,a=t[e+1])))/2;return r[e]=o,r}function Ga(t){for(var e,n,r,i,a=[],o=Va(t),s=-1,c=t.length-1;++s<c;)e=za(t[s],t[s+1]),Eo(e)<Uo?o[s]=o[s+1]=0:(n=o[s]/e,r=o[s+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=c;)i=(t[Math.min(c,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function Ha(t){return t.length<3?Ta(t):t[0]+Da(t,Ga(t))}function Wa(t){for(var e,n,r,i=-1,a=t.length;++i<a;)e=t[i],n=e[0],r=e[1]-Wo,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function qa(t){function e(e){function c(){m.push("M",s(t(v),h),u,l(t(g.reverse()),h),"Z")}for(var f,p,d,m=[],g=[],v=[],y=-1,b=e.length,x=Rt(n),w=Rt(i),_=n===r?function(){return p}:Rt(r),E=i===a?function(){return d}:Rt(a);++y<b;)o.call(this,f=e[y],y)?(g.push([p=+x.call(this,f,y),d=+w.call(this,f,y)]),v.push([+_.call(this,f,y),+E.call(this,f,y)])):g.length&&(c(),g=[],v=[]);return g.length&&c(),m.length?m.join(""):null}var n=Bn,r=Bn,i=0,a=Nn,o=Be,s=Ta,c=s.key,l=s,u="L",h=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=a=t,e):a},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(c="function"==typeof t?s=t:(s=Oc.get(t)||Ta).key,l=s.reverse||s,u=s.closed?"M":"L",e):c},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Xa(t){return t.radius}function Ya(t){return[t.x,t.y]}function $a(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Wo;return[n*Math.cos(r),n*Math.sin(r)]}}function Za(){return 64}function Ka(){return"circle"}function Ja(t){var e=Math.sqrt(t/Vo);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Qa(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function to(t,e,n){return Co(t,qc),t.namespace=e,t.id=n,t}function eo(t,e,n,r){var i=t.id,a=t.namespace;return X(t,"function"==typeof n?function(t,o,s){t[a][i].tween.set(e,r(n.call(t,t.__data__,o,s)))}:(n=r(n),function(t){t[a][i].tween.set(e,n)}))}function no(t){return null==t&&(t=""),function(){this.textContent=t}}function ro(t){return null==t?"__transition__":"__transition_"+t+"__"}function io(t,e,n,r,i){function a(t){var e=m.delay;return l.t=e+c,e<=t?o(t-e):void(l.c=o)}function o(n){var i=d.active,a=d[i];a&&(a.timer.c=null,a.timer.t=NaN,--d.count,delete d[i],a.event&&a.event.interrupt.call(t,t.__data__,a.index));for(var o in d)if(+o<r){var p=d[o];p.timer.c=null,p.timer.t=NaN,--d.count,delete d[o]}l.c=s,Ot(function(){return l.c&&s(n||1)&&(l.c=null,l.t=NaN),1},0,c),d.active=r,m.event&&m.event.start.call(t,t.__data__,e),f=[],m.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&f.push(r)}),h=m.ease,u=m.duration}function s(i){for(var a=i/u,o=h(a),s=f.length;s>0;)f[--s].call(t,o);if(a>=1)return m.event&&m.event.end.call(t,t.__data__,e),--d.count?delete d[r]:delete t[n],1}var c,l,u,h,f,d=t[n]||(t[n]={active:0,count:0}),m=d[r];m||(c=i.time,l=Ot(a,0,c),m=d[r]={tween:new p,time:c,timer:l,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++d.count)}function ao(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function oo(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function so(t){return t.toISOString()}function co(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,a=fo.bisect(el,i);return a==el.length?[e.year,ra(t.map(function(t){return t/31536e6}),n)[2]]:a?e[i/el[a-1]<el[a]/i?a-1:a]:[il,ra(t,n)[2]]}return r.invert=function(e){return lo(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(lo)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,lo(+n+1),e).length}var a=r.domain(),o=Yi(a),s=null==t?i(o,10):"number"==typeof t&&i(o,t);return s&&(t=s[0],e=s[1]),r.domain(Ki(a,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=lo(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=lo(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Yi(r.domain()),a=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return a&&(t=a[0],e=a[1]),t.range(n[0],lo(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return co(t.copy(),e,n)},ea(r,t)}function lo(t){return new Date(t)}function uo(t){return JSON.parse(t.responseText)}function ho(t){var e=go.createRange();return e.selectNode(go.body),e.createContextualFragment(t.responseText)}var fo={version:"3.5.17"},po=[].slice,mo=function(t){return po.call(t)},go=this.document;if(go)try{mo(go.documentElement.childNodes)[0].nodeType}catch(t){mo=function(t){for(var e=t.length,n=Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),go)try{go.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var vo=this.Element.prototype,yo=vo.setAttribute,bo=vo.setAttributeNS,xo=this.CSSStyleDeclaration.prototype,wo=xo.setProperty;vo.setAttribute=function(t,e){yo.call(this,t,e+"")},vo.setAttributeNS=function(t,e,n){bo.call(this,t,e,n+"")},xo.setProperty=function(t,e,n){wo.call(this,t,e+"",n)}}fo.ascending=o,fo.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},fo.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},fo.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},fo.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},fo.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)c(n=+t[a])&&(r+=n);else for(;++a<i;)c(n=+e.call(t,t[a],a))&&(r+=n);return r},fo.mean=function(t,e){var n,r=0,i=t.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)c(n=s(t[a]))?r+=n:--o;else for(;++a<i;)c(n=s(e.call(t,t[a],a)))?r+=n:--o;if(o)return r/o},fo.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},fo.median=function(t,e){var n,r=[],i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)c(n=s(t[a]))&&r.push(n);else for(;++a<i;)c(n=s(e.call(t,t[a],a)))&&r.push(n);if(r.length)return fo.quantile(r.sort(o),.5)},fo.variance=function(t,e){var n,r,i=t.length,a=0,o=0,l=-1,u=0;if(1===arguments.length)for(;++l<i;)c(n=s(t[l]))&&(r=n-a,a+=r/++u,o+=r*(n-a));else for(;++l<i;)c(n=s(e.call(t,t[l],l)))&&(r=n-a,a+=r/++u,o+=r*(n-a));if(u>1)return o/(u-1)},fo.deviation=function(){var t=fo.variance.apply(this,arguments);return t?Math.sqrt(t):t};var _o=l(o);fo.bisectLeft=_o.left,fo.bisect=fo.bisectRight=_o.right,fo.bisector=function(t){return l(1===t.length?function(e,n){return o(t(e),n)}:t)},fo.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var r,i,a=n-e;a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},fo.permute=function(t,e){for(var n=e.length,r=Array(n);n--;)r[n]=t[e[n]];return r},fo.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],a=Array(r<0?0:r);n<r;)a[n]=[e=i,i=t[++n]];return a},fo.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=fo.min(t,u),r=Array(n);++e<n;)for(var i,a=-1,o=r[e]=Array(i);++a<i;)o[a]=t[a][e];return r},fo.zip=function(){return fo.transpose(arguments)},fo.keys=function(t){var e=[];for(var n in t)e.push(n);return e},fo.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},fo.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},fo.merge=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=Array(o);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--o]=r[e];return n};var Eo=Math.abs;fo.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw Error("infinite range");var r,i=[],a=h(Eo(n)),o=-1;if(t*=a,e*=a,n*=a,n<0)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},fo.map=function(t,e){var n=new p;if(t instanceof p)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,r=t[i],i),r)}else for(var o in t)n.set(o,t[o]);return n};var Mo="__proto__",To="\0";f(p,{has:g,get:function(t){return this._[d(t)]},set:function(t,e){return this._[d(t)]=e},remove:v,keys:y,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:m(e),value:this._[e]});return t},size:b,empty:x,forEach:function(t){for(var e in this._)t.call(this,m(e),this._[e])}}),fo.nest=function(){function t(e,o,s){if(s>=a.length)return r?r.call(i,o):n?o.sort(n):o;for(var c,l,u,h,f=-1,d=o.length,m=a[s++],g=new p;++f<d;)(h=g.get(c=m(l=o[f])))?h.push(l):g.set(c,[l]);return e?(l=e(),u=function(n,r){l.set(n,t(e,r,s))}):(l={},u=function(n,r){l[n]=t(e,r,s)}),g.forEach(u),l}function e(t,n){if(n>=a.length)return t;var r=[],i=o[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},a=[],o=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(fo.map,n,0),0)},i.key=function(t){return a.push(t),i},i.sortKeys=function(t){return o[a.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},fo.set=function(t){var e=new w;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},f(w,{has:g,add:function(t){return this._[d(t+="")]=!0,t},remove:v,values:y,size:b,empty:x,forEach:function(t){for(var e in this._)t.call(this,m(e))}}),fo.behavior={},fo.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=E(t,e,e[n]);return t};var So=["webkit","ms","moz","Moz","o","O"];fo.dispatch=function(){for(var t=new S,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=A(t);return t},S.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},fo.event=null,fo.requote=function(t){return t.replace(Ao,"\\$&")};var Ao=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Co={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ko=function(t,e){return e.querySelector(t)},Lo=function(t,e){return e.querySelectorAll(t)},Ro=function(t,e){var n=t.matches||t[M(t,"matchesSelector")];return(Ro=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(ko=function(t,e){return Sizzle(t,e)[0]||null},Lo=Sizzle,Ro=Sizzle.matchesSelector),fo.selection=function(){return fo.select(go.documentElement)};var Po=fo.selection.prototype=[];Po.select=function(t){var e,n,r,i,a=[];t=P(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(i=r[c])?(e.push(n=t.call(i,i.__data__,c,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return R(a)},Po.selectAll=function(t){var e,n,r=[];t=D(t);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,c=o.length;++s<c;)(n=o[s])&&(r.push(e=mo(t.call(n,n.__data__,s,i))),e.parentNode=n);return R(r)};var Do="http://www.w3.org/1999/xhtml",Bo={svg:"http://www.w3.org/2000/svg",xhtml:Do,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};fo.ns={prefix:Bo,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Bo.hasOwnProperty(n)?{space:Bo[n],local:t}:t}},Po.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=fo.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(B(e,t[e]));return this}return this.each(B(t,e))},Po.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=F(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!O(t[i]).test(e))return!1;return!0}for(e in t)this.each(I(e,t[e]));return this}return this.each(I(t,e))},Po.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(e="");for(n in t)this.each(U(n,t[n],e));return this}if(r<2){var i=this.node();return a(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(U(t,e,n))},Po.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(z(e,t[e]));return this}return this.each(z(t,e))},Po.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Po.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Po.append=function(t){return t=V(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Po.insert=function(t,e){return t=V(t),e=P(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Po.remove=function(){return this.each(G)},Po.data=function(t,e){function n(t,n){var r,i,a,o=t.length,u=n.length,h=Math.min(o,u),f=Array(u),d=Array(u),m=Array(o);if(e){var g,v=new p,y=Array(o);for(r=-1;++r<o;)(i=t[r])&&(v.has(g=e.call(i,i.__data__,r))?m[r]=i:v.set(g,i),y[r]=g);for(r=-1;++r<u;)(i=v.get(g=e.call(n,a=n[r],r)))?i!==!0&&(f[r]=i,i.__data__=a):d[r]=H(a),v.set(g,!0);for(r=-1;++r<o;)r in y&&v.get(y[r])!==!0&&(m[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],a=n[r],i?(i.__data__=a,f[r]=i):d[r]=H(a);for(;r<u;++r)d[r]=H(n[r]);for(;r<o;++r)m[r]=t[r]}d.update=f,d.parentNode=f.parentNode=m.parentNode=t.parentNode,s.push(d),c.push(f),l.push(m)}var r,i,a=-1,o=this.length;if(!arguments.length){for(t=Array(o=(r=this[0]).length);++a<o;)(i=r[a])&&(t[a]=i.__data__);return t}var s=Y([]),c=R([]),l=R([]);if("function"==typeof t)for(;++a<o;)n(r=this[a],t.call(r,r.parentNode.__data__,a));else for(;++a<o;)n(r=this[a],t);return c.enter=function(){return s},c.exit=function(){return l},c},Po.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Po.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=W(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,c=n.length;s<c;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return R(i)},Po.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),
a=n);return this},Po.sort=function(t){t=q.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Po.each=function(t){return X(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Po.call=function(t){var e=mo(arguments);return t.apply(e[0]=this,e),this},Po.empty=function(){return!this.node()},Po.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},Po.size=function(){var t=0;return X(this,function(){++t}),t};var No=[];fo.selection.enter=Y,fo.selection.enter.prototype=No,No.append=Po.append,No.empty=Po.empty,No.node=Po.node,No.call=Po.call,No.size=Po.size,No.select=function(t){for(var e,n,r,i,a,o=[],s=-1,c=this.length;++s<c;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,u=i.length;++l<u;)(a=i[l])?(e.push(r[l]=n=t.call(i.parentNode,a.__data__,l,s)),n.__data__=a.__data__):e.push(null)}return R(o)},No.insert=function(t,e){return arguments.length<2&&(e=Z(this)),Po.insert.call(this,t,e)},fo.select=function(t){var e;return"string"==typeof t?(e=[ko(t,go)],e.parentNode=go.documentElement):(e=[t],e.parentNode=i(t)),R([e])},fo.selectAll=function(t){var e;return"string"==typeof t?(e=mo(Lo(t,go)),e.parentNode=go.documentElement):(e=mo(t),e.parentNode=null),R([e])},Po.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(e=!1);for(n in t)this.each(K(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(K(t,e,n))};var Oo=fo.map({mouseenter:"mouseover",mouseleave:"mouseout"});go&&Oo.forEach(function(t){"on"+t in go&&Oo.remove(t)});var Fo,Io=0;fo.mouse=function(t){return et(t,k())};var jo=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;fo.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=k().changedTouches),e)for(var r,i=0,a=e.length;i<a;++i)if((r=e[i]).identifier===n)return et(t,r)},fo.behavior.drag=function(){function t(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function e(t,e,i,a,o){return function(){function s(){var t,n,r=e(f,m);r&&(t=r[0]-b[0],n=r[1]-b[1],d|=t|n,b=r,p({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:n}))}function c(){e(f,m)&&(v.on(a+g,null).on(o+g,null),y(d),p({type:"dragend"}))}var l,u=this,h=fo.event.target.correspondingElement||fo.event.target,f=u.parentNode,p=n.of(u,arguments),d=0,m=t(),g=".drag"+(null==m?"":"-"+m),v=fo.select(i(h)).on(a+g,s).on(o+g,c),y=tt(h),b=e(f,m);r?(l=r.apply(u,arguments),l=[l.x-b[0],l.y-b[1]]):l=[0,0],p({type:"dragstart"})}}var n=L(t,"drag","dragstart","dragend"),r=null,i=e(T,fo.mouse,a,"mousemove","mouseup"),o=e(nt,fo.touch,_,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},fo.rebind(t,n,"on")},fo.touches=function(t,e){return arguments.length<2&&(e=k().touches),e?mo(e).map(function(e){var n=et(t,e);return n.identifier=e.identifier,n}):[]};var Uo=1e-6,zo=Uo*Uo,Vo=Math.PI,Go=2*Vo,Ho=Go-Uo,Wo=Vo/2,qo=Vo/180,Xo=180/Vo,Yo=Math.SQRT2,$o=2,Zo=4;fo.interpolateZoom=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],c=e[1],l=e[2],u=s-i,h=c-a,f=u*u+h*h;if(f<zo)r=Math.log(l/o)/Yo,n=function(t){return[i+t*u,a+t*h,o*Math.exp(Yo*t*r)]};else{var p=Math.sqrt(f),d=(l*l-o*o+Zo*f)/(2*o*$o*p),m=(l*l-o*o-Zo*f)/(2*l*$o*p),g=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(m*m+1)-m);r=(v-g)/Yo,n=function(t){var e=t*r,n=ct(g),s=o/($o*p)*(n*lt(Yo*e+g)-st(g));return[i+s*u,a+s*h,o*n/ct(Yo*e+g)]}}return n.duration=1e3*r,n},fo.behavior.zoom=function(){function t(t){t.on(R,h).on(Jo+".zoom",p).on("dblclick.zoom",d).on(B,f)}function e(t){return[(t[0]-M.x)/M.k,(t[1]-M.y)/M.k]}function n(t){return[t[0]*M.k+M.x,t[1]*M.k+M.y]}function r(t){M.k=Math.max(S[0],Math.min(S[1],t))}function i(t,e){e=n(e),M.x+=t[0]-e[0],M.y+=t[1]-e[1]}function o(e,n,a,o){e.__chart__={x:M.x,y:M.y,k:M.k},r(Math.pow(2,o)),i(g=n,a),e=fo.select(e),A>0&&(e=e.transition().duration(A)),e.call(t.event)}function s(){w&&w.domain(x.range().map(function(t){return(t-M.x)/M.k}).map(x.invert)),E&&E.domain(_.range().map(function(t){return(t-M.y)/M.k}).map(_.invert))}function c(t){k++||t({type:"zoomstart"})}function l(t){s(),t({type:"zoom",scale:M.k,translate:[M.x,M.y]})}function u(t){--k||(t({type:"zoomend"}),g=null)}function h(){function t(){s=1,i(fo.mouse(r),f),l(o)}function n(){h.on(P,null).on(D,null),p(s),u(o)}var r=this,o=N.of(r,arguments),s=0,h=fo.select(a(r)).on(P,t).on(D,n),f=e(fo.mouse(r)),p=tt(r);Wc.call(r),c(o)}function f(){function t(){var t=fo.touches(d);return p=M.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=e(t))}),t}function n(){var e=fo.event.target;fo.select(e).on(x,a).on(w,s),_.push(e);for(var n=fo.event.changedTouches,r=0,i=n.length;r<i;++r)g[n[r].identifier]=null;var c=t(),l=Date.now();if(1===c.length){if(l-b<500){var u=c[0];o(d,u,g[u.identifier],Math.floor(Math.log(M.k)/Math.LN2)+1),C()}b=l}else if(c.length>1){var u=c[0],h=c[1],f=u[0]-h[0],p=u[1]-h[1];v=f*f+p*p}}function a(){var t,e,n,a,o=fo.touches(d);Wc.call(d);for(var s=0,c=o.length;s<c;++s,a=null)if(n=o[s],a=g[n.identifier]){if(e)break;t=n,e=a}if(a){var u=(u=n[0]-t[0])*u+(u=n[1]-t[1])*u,h=v&&Math.sqrt(u/v);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+a[0])/2,(e[1]+a[1])/2],r(h*p)}b=null,i(t,e),l(m)}function s(){if(fo.event.touches.length){for(var e=fo.event.changedTouches,n=0,r=e.length;n<r;++n)delete g[e[n].identifier];for(var i in g)return void t()}fo.selectAll(_).on(y,null),E.on(R,h).on(B,f),T(),u(m)}var p,d=this,m=N.of(d,arguments),g={},v=0,y=".zoom-"+fo.event.changedTouches[0].identifier,x="touchmove"+y,w="touchend"+y,_=[],E=fo.select(d),T=tt(d);n(),c(m),E.on(R,null).on(B,n)}function p(){var t=N.of(this,arguments);y?clearTimeout(y):(Wc.call(this),m=e(g=v||fo.mouse(this)),c(t)),y=setTimeout(function(){y=null,u(t)},50),C(),r(Math.pow(2,.002*Ko())*M.k),i(g,m),l(t)}function d(){var t=fo.mouse(this),n=Math.log(M.k)/Math.LN2;o(this,t,e(t),fo.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var m,g,v,y,b,x,w,_,E,M={x:0,y:0,k:1},T=[960,500],S=Qo,A=250,k=0,R="mousedown.zoom",P="mousemove.zoom",D="mouseup.zoom",B="touchstart.zoom",N=L(t,"zoomstart","zoom","zoomend");return Jo||(Jo="onwheel"in go?(Ko=function(){return-fo.event.deltaY*(fo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in go?(Ko=function(){return fo.event.wheelDelta},"mousewheel"):(Ko=function(){return-fo.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=N.of(this,arguments),e=M;Gc?fo.select(this).transition().each("start.zoom",function(){M=this.__chart__||{x:0,y:0,k:1},c(t)}).tween("zoom:zoom",function(){var n=T[0],r=T[1],i=g?g[0]:n/2,a=g?g[1]:r/2,o=fo.interpolateZoom([(i-M.x)/M.k,(a-M.y)/M.k,n/M.k],[(i-e.x)/e.k,(a-e.y)/e.k,n/e.k]);return function(e){var r=o(e),s=n/r[2];this.__chart__=M={x:i-r[0]*s,y:a-r[1]*s,k:s},l(t)}}).each("interrupt.zoom",function(){u(t)}).each("end.zoom",function(){u(t)}):(this.__chart__=M,c(t),l(t),u(t))})},t.translate=function(e){return arguments.length?(M={x:+e[0],y:+e[1],k:M.k},s(),t):[M.x,M.y]},t.scale=function(e){return arguments.length?(M={x:M.x,y:M.y,k:null},r(+e),s(),t):M.k},t.scaleExtent=function(e){return arguments.length?(S=null==e?Qo:[+e[0],+e[1]],t):S},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(T=e&&[+e[0],+e[1]],t):T},t.duration=function(e){return arguments.length?(A=+e,t):A},t.x=function(e){return arguments.length?(w=e,x=e.copy(),M={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(E=e,_=e.copy(),M={x:0,y:0,k:1},t):E},fo.rebind(t,N,"on")};var Ko,Jo,Qo=[0,1/0];fo.color=ht,ht.prototype.toString=function(){return this.rgb()+""},fo.hsl=ft;var ts=ft.prototype=new ht;ts.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ft(this.h,this.s,this.l/t)},ts.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ft(this.h,this.s,t*this.l)},ts.rgb=function(){return pt(this.h,this.s,this.l)},fo.hcl=dt;var es=dt.prototype=new ht;es.brighter=function(t){return new dt(this.h,this.c,Math.min(100,this.l+ns*(arguments.length?t:1)))},es.darker=function(t){return new dt(this.h,this.c,Math.max(0,this.l-ns*(arguments.length?t:1)))},es.rgb=function(){return mt(this.h,this.c,this.l).rgb()},fo.lab=gt;var ns=18,rs=.95047,is=1,as=1.08883,os=gt.prototype=new ht;os.brighter=function(t){return new gt(Math.min(100,this.l+ns*(arguments.length?t:1)),this.a,this.b)},os.darker=function(t){return new gt(Math.max(0,this.l-ns*(arguments.length?t:1)),this.a,this.b)},os.rgb=function(){return vt(this.l,this.a,this.b)},fo.rgb=_t;var ss=_t.prototype=new ht;ss.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new _t(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new _t(i,i,i)},ss.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new _t(t*this.r,t*this.g,t*this.b)},ss.hsl=function(){return At(this.r,this.g,this.b)},ss.toString=function(){return"#"+Tt(this.r)+Tt(this.g)+Tt(this.b)};var cs=fo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});cs.forEach(function(t,e){cs.set(t,Et(e))}),fo.functor=Rt,fo.xhr=Pt(_),fo.dsv=function(t,e){function n(t,n,a){arguments.length<3&&(a=n,n=null);var o=Dt(t,e,null==n?r:i(n),a);return o.row=function(t){return arguments.length?o.response(null==(n=t)?r:i(t)):n},o}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=RegExp('["'+t+"\n]"),c=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(u>=l)return o;if(i)return i=!1,a;var e=u;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}u=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++u):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u<l;){var r=t.charCodeAt(u++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(u)&&(++u,++s);else if(r!==c)continue;return t.slice(e,u-s)}return t.slice(e)}for(var r,i,a={},o={},s=[],l=t.length,u=0,h=0;(r=n())!==o;){for(var f=[];r!==a&&r!==o;)f.push(r),r=n();e&&null==(f=e(f,h++))||s.push(f)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new w,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(o).join(t)].concat(e.map(function(e){return i.map(function(t){return o(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(a).join("\n")},n},fo.csv=fo.dsv(",","text/csv"),fo.tsv=fo.dsv("\t","text/tab-separated-values");var ls,us,hs,fs,ps=this[M(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};fo.timer=function(){Ot.apply(this,arguments)},fo.timer.flush=function(){It(),jt()},fo.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ds=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(zt);fo.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=fo.round(t,Ut(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ds[8+n/3]};var ms=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,gs=fo.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=fo.round(t,Ut(t,e))).toFixed(Math.max(0,Math.min(20,Ut(t*(1+1e-15),e))))}}),vs=fo.time={},ys=Date;Ht.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){bs.setUTCDate.apply(this._,arguments)},setDay:function(){bs.setUTCDay.apply(this._,arguments)},setFullYear:function(){bs.setUTCFullYear.apply(this._,arguments)},setHours:function(){bs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){bs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){bs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){bs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){bs.setUTCSeconds.apply(this._,arguments)},setTime:function(){bs.setTime.apply(this._,arguments)}};var bs=Date.prototype;vs.year=Wt(function(t){return t=vs.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),vs.years=vs.year.range,vs.years.utc=vs.year.utc.range,vs.day=Wt(function(t){var e=new ys(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),vs.days=vs.day.range,vs.days.utc=vs.day.utc.range,vs.dayOfYear=function(t){var e=vs.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=vs[t]=Wt(function(t){return(t=vs.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=vs.year(t).getDay();return Math.floor((vs.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});vs[t+"s"]=n.range,vs[t+"s"].utc=n.utc.range,vs[t+"OfYear"]=function(t){var n=vs.year(t).getDay();return Math.floor((vs.dayOfYear(t)+(n+e)%7)/7)}}),vs.week=vs.sunday,vs.weeks=vs.sunday.range,vs.weeks.utc=vs.sunday.utc.range,vs.weekOfYear=vs.sundayOfYear;var xs={"-":"",_:" ",0:"0"},ws=/^\s*\d+/,_s=/^%/;fo.locale=function(t){return{numberFormat:Vt(t),timeFormat:Xt(t)}};var Es=fo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});fo.format=Es.numberFormat,fo.geo={},de.prototype={s:0,t:0,add:function(t){me(t,this.t,Ms),me(Ms.s,this.s,this),this.s?this.t+=Ms.t:this.s=Ms.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ms=new de;fo.geo.stream=function(t,e){t&&Ts.hasOwnProperty(t.type)?Ts[t.type](t,e):ge(t,e)};var Ts={Feature:function(t,e){ge(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ge(n[r].geometry,e)}},Ss={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ve(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ve(n[r],e,0)},Polygon:function(t,e){ye(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ye(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ge(n[r],e)}};fo.geo.area=function(t){return As=0,fo.geo.stream(t,ks),As};var As,Cs=new de,ks={sphere:function(){As+=4*Vo},point:T,lineStart:T,lineEnd:T,polygonStart:function(){Cs.reset(),ks.lineStart=be},polygonEnd:function(){var t=2*Cs;As+=t<0?4*Vo+t:t,ks.lineStart=ks.lineEnd=ks.point=T}};fo.geo.bounds=function(){function t(t,e){b.push(x=[u=t,f=t]),e<h&&(h=e),e>p&&(p=e)}function e(e,n){var r=xe([e*qo,n*qo]);if(v){var i=_e(v,r),a=[i[1],-i[0],0],o=_e(a,i);Te(o),o=Se(o);var c=e-d,l=c>0?1:-1,m=o[0]*Xo*l,g=Eo(c)>180;if(g^(l*d<m&&m<l*e)){var y=o[1]*Xo;y>p&&(p=y)}else if(m=(m+360)%360-180,g^(l*d<m&&m<l*e)){var y=-o[1]*Xo;y<h&&(h=y)}else n<h&&(h=n),n>p&&(p=n);g?e<d?s(u,e)>s(u,f)&&(f=e):s(e,f)>s(u,f)&&(u=e):f>=u?(e<u&&(u=e),e>f&&(f=e)):e>d?s(u,e)>s(u,f)&&(f=e):s(e,f)>s(u,f)&&(u=e)}else t(e,n);v=r,d=e}function n(){w.point=e}function r(){x[0]=u,x[1]=f,w.point=t,v=null}function i(t,n){if(v){var r=t-d;y+=Eo(r)>180?r+(r>0?360:-360):r}else m=t,g=n;ks.point(t,n),e(t,n)}function a(){ks.lineStart()}function o(){i(m,g),ks.lineEnd(),Eo(y)>Uo&&(u=-(f=180)),x[0]=u,x[1]=f,v=null}function s(t,e){return(e-=t)<0?e+360:e}function c(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var u,h,f,p,d,m,g,v,y,b,x,w={point:t,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=a,w.lineEnd=o,y=0,ks.polygonStart()},polygonEnd:function(){ks.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=r,Cs<0?(u=-(f=180),h=-(p=90)):y>Uo?p=90:y<-Uo&&(h=-90),x[0]=u,x[1]=f}};return function(t){p=f=-(u=h=1/0),b=[],fo.geo.stream(t,w);var e=b.length;if(e){b.sort(c);for(var n,r=1,i=b[0],a=[i];r<e;++r)n=b[r],l(n[0],i)||l(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(var o,n,d=-(1/0),e=a.length-1,r=0,i=a[e];r<=e;i=n,++r)n=a[r],(o=s(i[1],n[0]))>d&&(d=o,u=n[0],f=i[1])}return b=x=null,u===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[u,h],[f,p]]}}(),fo.geo.centroid=function(t){Ls=Rs=Ps=Ds=Bs=Ns=Os=Fs=Is=js=Us=0,fo.geo.stream(t,zs);var e=Is,n=js,r=Us,i=e*e+n*n+r*r;return i<zo&&(e=Ns,n=Os,r=Fs,Rs<Uo&&(e=Ps,n=Ds,r=Bs),i=e*e+n*n+r*r,i<zo)?[NaN,NaN]:[Math.atan2(n,e)*Xo,ot(r/Math.sqrt(i))*Xo]};var Ls,Rs,Ps,Ds,Bs,Ns,Os,Fs,Is,js,Us,zs={sphere:T,point:Ce,lineStart:Le,lineEnd:Re,polygonStart:function(){zs.lineStart=Pe},polygonEnd:function(){zs.lineStart=Le}},Vs=Ie(Be,Ve,He,[-Vo,-Vo/2]),Gs=1e9;fo.geo.clipExtent=function(){var t,e,n,r,i,a,o={stream:function(t){return i&&(i.valid=!1),i=a(t),i.valid=!0,i},extent:function(s){return arguments.length?(a=Ye(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[t,e],[n,r]]}};return o.extent([[0,0],[960,500]])},(fo.geo.conicEqualArea=function(){return $e(Ze)}).raw=Ze,fo.geo.albers=function(){return fo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},fo.geo.albersUsa=function(){function t(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(r(a,o),e)||i(a,o),e}var e,n,r,i,a=fo.geo.albers(),o=fo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=fo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:a).invert(t)},t.stream=function(t){var e=a.stream(t),n=o.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),s.precision(e),t):a.precision()},t.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),s.scale(e),t.translate(a.translate())):a.scale()},t.translate=function(e){if(!arguments.length)return a.translate();var l=a.scale(),u=+e[0],h=+e[1];return n=a.translate(e).clipExtent([[u-.455*l,h-.238*l],[u+.455*l,h+.238*l]]).stream(c).point,r=o.translate([u-.307*l,h+.201*l]).clipExtent([[u-.425*l+Uo,h+.12*l+Uo],[u-.214*l-Uo,h+.234*l-Uo]]).stream(c).point,i=s.translate([u-.205*l,h+.212*l]).clipExtent([[u-.214*l+Uo,h+.166*l+Uo],[u-.115*l-Uo,h+.234*l-Uo]]).stream(c).point,t},t.scale(1070)};var Hs,Ws,qs,Xs,Ys,$s,Zs={point:T,lineStart:T,lineEnd:T,polygonStart:function(){Ws=0,Zs.lineStart=Ke},polygonEnd:function(){Zs.lineStart=Zs.lineEnd=Zs.point=T,Hs+=Eo(Ws/2)}},Ks={point:Je,lineStart:T,lineEnd:T,polygonStart:T,polygonEnd:T},Js={point:en,lineStart:nn,lineEnd:rn,polygonStart:function(){Js.lineStart=an},polygonEnd:function(){Js.point=en,Js.lineStart=nn,Js.lineEnd=rn}};fo.geo.path=function(){function t(t){return t&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=i(a)),fo.geo.stream(t,o)),a.result()}function e(){return o=null,t}var n,r,i,a,o,s=4.5;return t.area=function(t){return Hs=0,fo.geo.stream(t,i(Zs)),Hs},t.centroid=function(t){return Ps=Ds=Bs=Ns=Os=Fs=Is=js=Us=0,fo.geo.stream(t,i(Js)),Us?[Is/Us,js/Us]:Fs?[Ns/Fs,Os/Fs]:Bs?[Ps/Bs,Ds/Bs]:[NaN,NaN]},t.bounds=function(t){return Ys=$s=-(qs=Xs=1/0),fo.geo.stream(t,i(Ks)),[[qs,Xs],[Ys,$s]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||cn(t):_,e()):n},t.context=function(t){return arguments.length?(a=null==(r=t)?new Qe:new on(t),"function"!=typeof s&&a.pointRadius(s),e()):r},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(a.pointRadius(+e),+e),t):s},t.projection(fo.geo.albersUsa()).context(null)},fo.geo.transform=function(t){return{stream:function(e){var n=new ln(e);for(var r in t)n[r]=t[r];return n}}},ln.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},fo.geo.projection=hn,fo.geo.projectionMutator=fn,(fo.geo.equirectangular=function(){return hn(dn)}).raw=dn.invert=dn,fo.geo.rotation=function(t){function e(e){return e=t(e[0]*qo,e[1]*qo),e[0]*=Xo,e[1]*=Xo,e}return t=gn(t[0]%360*qo,t[1]*qo,t.length>2?t[2]*qo:0),e.invert=function(e){return e=t.invert(e[0]*qo,e[1]*qo),e[0]*=Xo,e[1]*=Xo,e},e},mn.invert=dn,fo.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=gn(-t[0]*qo,-t[1]*qo,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=Xo,t[1]*=Xo}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=xn((e=+r)*qo,i*qo),t):e},t.precision=function(r){return arguments.length?(n=xn(e*qo,(i=+r)*qo),t):i},t.angle(90)},fo.geo.distance=function(t,e){var n,r=(e[0]-t[0])*qo,i=t[1]*qo,a=e[1]*qo,o=Math.sin(r),s=Math.cos(r),c=Math.sin(i),l=Math.cos(i),u=Math.sin(a),h=Math.cos(a);return Math.atan2(Math.sqrt((n=h*o)*n+(n=l*u-c*h*s)*n),c*u+l*h*s)},fo.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return fo.range(Math.ceil(a/g)*g,i,g).map(f).concat(fo.range(Math.ceil(l/v)*v,c,v).map(p)).concat(fo.range(Math.ceil(r/d)*d,n,d).filter(function(t){return Eo(t%g)>Uo}).map(u)).concat(fo.range(Math.ceil(s/m)*m,o,m).filter(function(t){return Eo(t%v)>Uo}).map(h))}var n,r,i,a,o,s,c,l,u,h,f,p,d=10,m=d,g=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(p(c).slice(1),f(i).reverse().slice(1),p(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(a=+e[0][0],i=+e[1][0],l=+e[0][1],c=+e[1][1],a>i&&(e=a,a=i,i=e),l>c&&(e=l,l=c,c=e),t.precision(y)):[[a,l],[i,c]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(y)):[[r,s],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(g=+e[0],v=+e[1],t):[g,v]},t.minorStep=function(e){return arguments.length?(d=+e[0],m=+e[1],t):[d,m]},t.precision=function(e){return arguments.length?(y=+e,u=_n(s,o,90),h=En(r,n,y),f=_n(l,c,90),p=En(a,i,y),t):y},t.majorExtent([[-180,-90+Uo],[180,90-Uo]]).minorExtent([[-180,-80-Uo],[180,80+Uo]])},fo.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=Mn,i=Tn;return t.distance=function(){return fo.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},fo.geo.interpolate=function(t,e){return Sn(t[0]*qo,t[1]*qo,e[0]*qo,e[1]*qo)},fo.geo.length=function(t){return Qs=0,fo.geo.stream(t,tc),Qs};var Qs,tc={sphere:T,point:T,lineStart:An,lineEnd:T,polygonStart:T,polygonEnd:T},ec=Cn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(fo.geo.azimuthalEqualArea=function(){return hn(ec)}).raw=ec;var nc=Cn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},_);(fo.geo.azimuthalEquidistant=function(){return hn(nc)}).raw=nc,(fo.geo.conicConformal=function(){return $e(kn)}).raw=kn,(fo.geo.conicEquidistant=function(){return $e(Ln)}).raw=Ln;var rc=Cn(function(t){return 1/t},Math.atan);(fo.geo.gnomonic=function(){return hn(rc)}).raw=rc,Rn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Wo]},(fo.geo.mercator=function(){return Pn(Rn)}).raw=Rn;var ic=Cn(function(){return 1},Math.asin);(fo.geo.orthographic=function(){return hn(ic)}).raw=ic;var ac=Cn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(fo.geo.stereographic=function(){return hn(ac)}).raw=ac,Dn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Wo]},(fo.geo.transverseMercator=function(){var t=Pn(Dn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Dn,fo.geom={},fo.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=Rt(n),a=Rt(r),o=t.length,s=[],c=[];for(e=0;e<o;e++)s.push([+i.call(this,t[e],e),+a.call(this,t[e],e),e]);for(s.sort(Fn),e=0;e<o;e++)c.push([s[e][0],-s[e][1]]);var l=On(s),u=On(c),h=u[0]===l[0],f=u[u.length-1]===l[l.length-1],p=[];for(e=l.length-1;e>=0;--e)p.push(t[s[l[e]][2]]);for(e=+h;e<u.length-f;++e)p.push(t[s[u[e]][2]]);return p}var n=Bn,r=Nn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},fo.geom.polygon=function(t){return Co(t,oc),t};var oc=fo.geom.polygon.prototype=[];oc.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},oc.centroid=function(t){var e,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},oc.clip=function(t){for(var e,n,r,i,a,o,s=Un(t),c=-1,l=this.length-Un(this),u=this[l-1];++c<l;){for(e=t.slice(),t.length=0,i=this[c],a=e[(r=e.length-s)-1],n=-1;++n<r;)o=e[n],In(o,u,i)?(In(a,u,i)||t.push(jn(a,o,u,i)),t.push(o)):In(a,u,i)&&t.push(jn(a,o,u,i)),a=o;s&&t.push(t[0]),u=i}return t};var sc,cc,lc,uc,hc,fc=[],pc=[];Yn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Zn),e.length},or.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},sr.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=hr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(lr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ur(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ur(this,n),t=n,n=t.U),n.C=!1,r.C=!0,lr(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?hr(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,lr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ur(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,lr(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,ur(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,lr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ur(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},fo.geom.voronoi=function(t){function e(t){var e=Array(t.length),r=s[0][0],i=s[0][1],a=s[1][0],o=s[1][1];return fr(n(t),s).cells.forEach(function(n,s){var c=n.edges,l=n.site,u=e[s]=c.length?c.map(function(t){var e=t.start();return[e.x,e.y];
}):l.x>=r&&l.x<=a&&l.y>=i&&l.y<=o?[[r,o],[a,o],[a,i],[r,i]]:[];u.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/Uo)*Uo,y:Math.round(o(t,e)/Uo)*Uo,i:e}})}var r=Bn,i=Nn,a=r,o=i,s=dc;return t?e(t):(e.links=function(t){return fr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return fr(n(t)).cells.forEach(function(n,r){for(var i,a,o=n.site,s=n.edges.sort(Zn),c=-1,l=s.length,u=s[l-1].edge,h=u.l===o?u.r:u.l;++c<l;)i=u,a=h,u=s[c].edge,h=u.l===o?u.r:u.l,r<a.i&&r<h.i&&dr(o,a,h)<0&&e.push([t[r],t[a.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(a=Rt(r=t),e):r},e.y=function(t){return arguments.length?(o=Rt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?dc:t,e):s===dc?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===dc?null:s&&s[1]},e)};var dc=[[-1e6,-1e6],[1e6,1e6]];fo.geom.delaunay=function(t){return fo.geom.voronoi().triangles(t)},fo.geom.quadtree=function(t,e,n,r,i){function a(t){function a(t,e,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var c=t.x,u=t.y;if(null!=c)if(Eo(c-n)+Eo(u-r)<.01)l(t,e,n,r,i,a,o,s);else{var h=t.point;t.x=t.y=t.point=null,l(t,h,c,u,i,a,o,s),l(t,e,n,r,i,a,o,s)}else t.x=n,t.y=r,t.point=e}else l(t,e,n,r,i,a,o,s)}function l(t,e,n,r,i,o,s,c){var l=.5*(i+s),u=.5*(o+c),h=n>=l,f=r>=u,p=f<<1|h;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=vr()),h?i=l:s=l,f?o=u:c=u,a(t,e,n,r,i,o,s,c)}var u,h,f,p,d,m,g,v,y,b=Rt(s),x=Rt(c);if(null!=e)m=e,g=n,v=r,y=i;else if(v=y=-(m=g=1/0),h=[],f=[],d=t.length,o)for(p=0;p<d;++p)u=t[p],u.x<m&&(m=u.x),u.y<g&&(g=u.y),u.x>v&&(v=u.x),u.y>y&&(y=u.y),h.push(u.x),f.push(u.y);else for(p=0;p<d;++p){var w=+b(u=t[p],p),_=+x(u,p);w<m&&(m=w),_<g&&(g=_),w>v&&(v=w),_>y&&(y=_),h.push(w),f.push(_)}var E=v-m,M=y-g;E>M?y=g+E:v=m+M;var T=vr();if(T.add=function(t){a(T,t,+b(t,++p),+x(t,p),m,g,v,y)},T.visit=function(t){yr(t,T,m,g,v,y)},T.find=function(t){return br(T,t[0],t[1],m,g,v,y)},p=-1,null==e){for(;++p<d;)a(T,t[p],h[p],f[p],m,g,v,y);--p}else t.forEach(T.add);return h=f=t=u=null,T}var o,s=Bn,c=Nn;return(o=arguments.length)?(s=mr,c=gr,3===o&&(i=n,r=e,n=e=0),a(t)):(a.x=function(t){return arguments.length?(s=t,a):s},a.y=function(t){return arguments.length?(c=t,a):c},a.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),a):null==e?null:[[e,n],[r,i]]},a.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),a):null==e?null:[r-e,i-n]},a)},fo.interpolateRgb=xr,fo.interpolateObject=wr,fo.interpolateNumber=_r,fo.interpolateString=Er;var mc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gc=RegExp(mc.source,"g");fo.interpolate=Mr,fo.interpolators=[function(t,e){var n=typeof e;return("string"===n?cs.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?xr:Er:e instanceof ht?xr:Array.isArray(e)?Tr:"object"===n&&isNaN(e)?wr:_r)(t,e)}],fo.interpolateArray=Tr;var vc=function(){return _},yc=fo.map({linear:vc,poly:Pr,quad:function(){return kr},cubic:function(){return Lr},sin:function(){return Dr},exp:function(){return Br},circle:function(){return Nr},elastic:Or,back:Fr,bounce:function(){return Ir}}),bc=fo.map({in:_,out:Ar,"in-out":Cr,"out-in":function(t){return Cr(Ar(t))}});fo.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=yc.get(n)||vc,r=bc.get(r)||_,Sr(r(n.apply(null,po.call(arguments,1))))},fo.interpolateHcl=jr,fo.interpolateHsl=Ur,fo.interpolateLab=zr,fo.interpolateRound=Vr,fo.transform=function(t){var e=go.createElementNS(fo.ns.prefix.svg,"g");return(fo.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Gr(n?n.matrix:xc)})(t)},Gr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var xc={a:1,b:0,c:0,d:1,e:0,f:0};fo.interpolateTransform=Jr,fo.layout={},fo.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(ei(t[n]));return e}},fo.layout.chord=function(){function t(){var t,l,h,f,p,d={},m=[],g=fo.range(a),v=[];for(n=[],r=[],t=0,f=-1;++f<a;){for(l=0,p=-1;++p<a;)l+=i[f][p];m.push(l),v.push(fo.range(a)),t+=l}for(o&&g.sort(function(t,e){return o(m[t],m[e])}),s&&v.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(Go-u*a)/t,l=0,f=-1;++f<a;){for(h=l,p=-1;++p<a;){var y=g[f],b=v[y][p],x=i[y][b],w=l,_=l+=x*t;d[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:_,value:x}}r[y]={index:y,startAngle:h,endAngle:l,value:m[y]},l+=u}for(f=-1;++f<a;)for(p=f-1;++p<a;){var E=d[f+"-"+p],M=d[p+"-"+f];(E.value||M.value)&&n.push(E.value<M.value?{source:M,target:E}:{source:E,target:M})}c&&e()}function e(){n.sort(function(t,e){return c((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,a,o,s,c,l={},u=0;return l.matrix=function(t){return arguments.length?(a=(i=t)&&i.length,n=r=null,l):i},l.padding=function(t){return arguments.length?(u=t,n=r=null,l):u},l.sortGroups=function(t){return arguments.length?(o=t,n=r=null,l):o},l.sortSubgroups=function(t){return arguments.length?(s=t,n=null,l):s},l.sortChords=function(t){return arguments.length?(c=t,n&&e(),l):c},l.chords=function(){return n||t(),n},l.groups=function(){return r||t(),r},l},fo.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=i-n,c=a*a+o*o;if(s*s/v<c){if(c<m){var l=e.charge/c;t.px-=a*l,t.py-=o*l}return!0}if(e.point&&c&&c<m){var l=e.pointCharge/c;t.px-=a*l,t.py-=o*l}}return!e.charge}}function e(t){t.px=fo.event.x,t.py=fo.event.y,c.resume()}var n,r,i,a,o,s,c={},l=fo.dispatch("start","tick","end"),u=[1,1],h=.9,f=wc,p=_c,d=-30,m=Ec,g=.1,v=.64,y=[],b=[];return c.tick=function(){if((i*=.99)<.005)return n=null,l.end({type:"end",alpha:i=0}),!0;var e,r,c,f,p,m,v,x,w,_=y.length,E=b.length;for(r=0;r<E;++r)c=b[r],f=c.source,p=c.target,x=p.x-f.x,w=p.y-f.y,(m=x*x+w*w)&&(m=i*o[r]*((m=Math.sqrt(m))-a[r])/m,x*=m,w*=m,p.x-=x*(v=f.weight+p.weight?f.weight/(f.weight+p.weight):.5),p.y-=w*v,f.x+=x*(v=1-v),f.y+=w*v);if((v=i*g)&&(x=u[0]/2,w=u[1]/2,r=-1,v))for(;++r<_;)c=y[r],c.x+=(x-c.x)*v,c.y+=(w-c.y)*v;if(d)for(ci(e=fo.geom.quadtree(y),i,s),r=-1;++r<_;)(c=y[r]).fixed||e.visit(t(c));for(r=-1;++r<_;)c=y[r],c.fixed?(c.x=c.px,c.y=c.py):(c.x-=(c.px-(c.px=c.x))*h,c.y-=(c.py-(c.py=c.y))*h);l.tick({type:"tick",alpha:i})},c.nodes=function(t){return arguments.length?(y=t,c):y},c.links=function(t){return arguments.length?(b=t,c):b},c.size=function(t){return arguments.length?(u=t,c):u},c.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,c):f},c.distance=c.linkDistance,c.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,c):p},c.friction=function(t){return arguments.length?(h=+t,c):h},c.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,c):d},c.chargeDistance=function(t){return arguments.length?(m=t*t,c):Math.sqrt(m)},c.gravity=function(t){return arguments.length?(g=+t,c):g},c.theta=function(t){return arguments.length?(v=t*t,c):Math.sqrt(v)},c.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(n.c=null,n.t=NaN,n=null,l.end({type:"end",alpha:i=0})):t>0&&(l.start({type:"start",alpha:i=t}),n=Ot(c.tick)),c):i},c.start=function(){function t(t,r){if(!n){for(n=Array(i),c=0;c<i;++c)n[c]=[];for(c=0;c<l;++c){var a=b[c];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,s=n[e],c=-1,u=s.length;++c<u;)if(!isNaN(o=s[c][t]))return o;return Math.random()*r}var e,n,r,i=y.length,l=b.length,h=u[0],m=u[1];for(e=0;e<i;++e)(r=y[e]).index=e,r.weight=0;for(e=0;e<l;++e)r=b[e],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(e=0;e<i;++e)r=y[e],isNaN(r.x)&&(r.x=t("x",h)),isNaN(r.y)&&(r.y=t("y",m)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof f)for(e=0;e<l;++e)a[e]=+f.call(this,b[e],e);else for(e=0;e<l;++e)a[e]=f;if(o=[],"function"==typeof p)for(e=0;e<l;++e)o[e]=+p.call(this,b[e],e);else for(e=0;e<l;++e)o[e]=p;if(s=[],"function"==typeof d)for(e=0;e<i;++e)s[e]=+d.call(this,y[e],e);else for(e=0;e<i;++e)s[e]=d;return c.resume()},c.resume=function(){return c.alpha(.1)},c.stop=function(){return c.alpha(0)},c.drag=function(){return r||(r=fo.behavior.drag().origin(_).on("dragstart.force",ii).on("drag.force",e).on("dragend.force",ai)),arguments.length?void this.on("mouseover.force",oi).on("mouseout.force",si).call(r):r},fo.rebind(c,l,"on")};var wc=20,_c=1,Ec=1/0;fo.layout.hierarchy=function(){function t(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(l=n.call(t,a,a.depth))&&(c=l.length)){for(var c,l,u;--c>=0;)o.push(u=l[c]),u.parent=a,u.depth=a.depth+1;r&&(a.value=0),a.children=l}else r&&(a.value=+r.call(t,a,a.depth)||0),delete a.children;return hi(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),s}var e=di,n=fi,r=pi;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(ui(e,function(t){t.children&&(t.value=0)}),hi(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},fo.layout.partition=function(){function t(e,n,r,i){var a=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,c,l=-1;for(r=e.value?r/e.value:0;++l<o;)t(s=a[l],n,c=s.value*r,i),n+=c}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return t(o[0],0,i[0],i[1]/e(o[0])),o}var r=fo.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},li(n,r)},fo.layout.pie=function(){function t(o){var s,c=o.length,l=o.map(function(n,r){return+e.call(t,n,r)}),u=+("function"==typeof r?r.apply(this,arguments):r),h=("function"==typeof i?i.apply(this,arguments):i)-u,f=Math.min(Math.abs(h)/c,+("function"==typeof a?a.apply(this,arguments):a)),p=f*(h<0?-1:1),d=fo.sum(l),m=d?(h-c*p)/d:0,g=fo.range(c),v=[];return null!=n&&g.sort(n===Mc?function(t,e){return l[e]-l[t]}:function(t,e){return n(o[t],o[e])}),g.forEach(function(t){v[t]={data:o[t],value:s=l[t],startAngle:u,endAngle:u+=s*m+p,padAngle:f}}),v}var e=Number,n=Mc,r=0,i=Go,a=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(a=e,t):a},t};var Mc={};fo.layout.stack=function(){function t(s,c){if(!(f=s.length))return s;var l=s.map(function(n,r){return e.call(t,n,r)}),u=l.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),o.call(t,e,n)]})}),h=n.call(t,u,c);l=fo.permute(l,h),u=fo.permute(u,h);var f,p,d,m,g=r.call(t,u,c),v=l[0].length;for(d=0;d<v;++d)for(i.call(t,l[0][d],m=g[d],u[0][d][1]),p=1;p<f;++p)i.call(t,l[p][d],m+=u[p-1][d][1],u[p][d][1]);return s}var e=_,n=bi,r=xi,i=yi,a=gi,o=vi;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Tc.get(e)||bi,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:Sc.get(e)||xi,t):r},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(i=e,t):i},t};var Tc=fo.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(wi),a=t.map(_i),o=fo.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,c=0,l=[],u=[];for(e=0;e<r;++e)n=o[e],s<c?(s+=a[n],l.push(n)):(c+=a[n],u.push(n));return u.reverse().concat(l)},reverse:function(t){return fo.range(t.length).reverse()},default:bi}),Sc=fo.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],s=0,c=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)c[n]=(s-o[n])/2;return c},wiggle:function(t){var e,n,r,i,a,o,s,c,l,u=t.length,h=t[0],f=h.length,p=[];for(p[0]=c=l=0,n=1;n<f;++n){for(e=0,i=0;e<u;++e)i+=t[e][n][1];for(e=0,a=0,s=h[n][0]-h[n-1][0];e<u;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}p[n]=c-=i?a/i*s:0,c<l&&(l=c)}for(n=0;n<f;++n)p[n]-=l;return p},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:xi});fo.layout.histogram=function(){function t(t,a){for(var o,s,c=[],l=t.map(n,this),u=r.call(this,l,a),h=i.call(this,u,l,a),a=-1,f=l.length,p=h.length-1,d=e?1:1/f;++a<p;)o=c[a]=[],o.dx=h[a+1]-(o.x=h[a]),o.y=0;if(p>0)for(a=-1;++a<f;)s=l[a],s>=u[0]&&s<=u[1]&&(o=c[fo.bisect(h,s,1,p)-1],o.y+=d,o.push(t[a]));return c}var e=!0,n=Number,r=Si,i=Mi;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Rt(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return Ti(t,e)}:Rt(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},fo.layout.pack=function(){function t(t,a){var o=n.call(this,t,a),s=o[0],c=i[0],l=i[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,hi(s,function(t){t.r=+u(t.value)}),hi(s,Ri),r){var h=r*(e?1:Math.max(2*s.r/c,2*s.r/l))/2;hi(s,function(t){t.r+=h}),hi(s,Ri),hi(s,function(t){t.r-=h})}return Bi(s,c/2,l/2,e?1:1/Math.max(2*s.r/c,2*s.r/l)),o}var e,n=fo.layout.hierarchy().sort(Ai),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},li(t,n)},fo.layout.tree=function(){function t(t,i){var u=o.call(this,t,i),h=u[0],f=e(h);if(hi(f,n),f.parent.m=-f.z,ui(f,r),l)ui(h,a);else{var p=h,d=h,m=h;ui(h,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>m.depth&&(m=t)});var g=s(p,d)/2-p.x,v=c[0]/(d.x+s(d,p)/2+g),y=c[1]/(m.depth||1);ui(h,function(t){t.x=(t.x+g)*v,t.y=t.depth*y})}return u}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,a=e.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Ui(t);var a=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+s(t._,r._),t.m=t.z-a):t.z=a}else r&&(t.z=r.z+s(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,a=t,o=e,c=i.parent.children[0],l=i.m,u=a.m,h=o.m,f=c.m;o=Ii(o),i=Fi(i),o&&i;)c=Fi(c),a=Ii(a),a.a=t,r=o.z+h-i.z-l+s(o._,i._),r>0&&(ji(zi(o,t,n),t,r),l+=r,u+=r),h+=o.m,l+=i.m,f+=c.m,u+=a.m;o&&!Ii(a)&&(a.t=o,a.m+=h-u),i&&!Fi(c)&&(c.t=i,c.m+=l-f,n=t)}return n}function a(t){t.x*=c[0],t.y=t.depth*c[1]}var o=fo.layout.hierarchy().sort(null).value(null),s=Oi,c=[1,1],l=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(l=null==(c=e)?a:null,t):l?null:c},t.nodeSize=function(e){return arguments.length?(l=null==(c=e)?null:a,t):l?c:null},li(t,o)},fo.layout.cluster=function(){function t(t,a){var o,s=e.call(this,t,a),c=s[0],l=0;hi(c,function(t){var e=t.children;e&&e.length?(t.x=Gi(e),t.y=Vi(e)):(t.x=o?l+=n(t,o):0,t.y=0,o=t)});var u=Hi(c),h=Wi(c),f=u.x-n(u,h)/2,p=h.x+n(h,u)/2;return hi(c,i?function(t){t.x=(t.x-c.x)*r[0],t.y=(c.y-t.y)*r[1]}:function(t){t.x=(t.x-f)/(p-f)*r[0],t.y=(1-(c.y?t.y/c.y:1))*r[1]}),s}var e=fo.layout.hierarchy().sort(null).value(null),n=Oi,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},li(t,e)},fo.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function e(n){var a=n.children;if(a&&a.length){var o,s,c,l=h(n),u=[],f=a.slice(),d=1/0,m="slice"===p?l.dx:"dice"===p?l.dy:"slice-dice"===p?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(f,l.dx*l.dy/n.value),u.area=0;(c=f.length)>0;)u.push(o=f[c-1]),u.area+=o.area,"squarify"!==p||(s=r(u,m))<=d?(f.pop(),d=s):(u.area-=u.pop().area,i(u,m,l,!1),m=Math.min(l.dx,l.dy),u.length=u.area=0,d=1/0);u.length&&(i(u,m,l,!0),u.length=u.area=0),a.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var a,o=h(e),s=r.slice(),c=[];for(t(s,o.dx*o.dy/e.value),c.area=0;a=s.pop();)c.push(a),c.area+=a.area,null!=a.z&&(i(c,a.z?o.dx:o.dy,o,!s.length),c.length=c.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(n<a&&(a=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*d/r,r/(e*a*d)):1/0}function i(t,e,n,r){var i,a=-1,o=t.length,s=n.x,l=n.y,u=e?c(t.area/e):0;if(e==n.dx){for((r||u>n.dy)&&(u=n.dy);++a<o;)i=t[a],i.x=s,i.y=l,i.dy=u,s+=i.dx=Math.min(n.x+n.dx-s,u?c(i.area/u):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((r||u>n.dx)&&(u=n.dx);++a<o;)i=t[a],i.x=s,i.y=l,i.dx=u,l+=i.dy=Math.min(n.y+n.dy-l,u?c(i.area/u):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=u,n.dx-=u}}function a(r){var i=o||s(r),a=i[0];return a.x=a.y=0,a.value?(a.dx=l[0],a.dy=l[1]):a.dx=a.dy=0,o&&s.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),f&&(o=i),i}var o,s=fo.layout.hierarchy(),c=Math.round,l=[1,1],u=null,h=qi,f=!1,p="squarify",d=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(l=t,a):l},a.padding=function(t){function e(e){var n=t.call(a,e,e.depth);return null==n?qi(e):Xi(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Xi(e,t)}if(!arguments.length)return u;var r;return h=null==(u=t)?qi:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,a},a.round=function(t){return arguments.length?(c=t?Math.round:Number,a):c!=Number},a.sticky=function(t){return arguments.length?(f=t,o=null,a):f},a.ratio=function(t){return arguments.length?(d=t,a):d},a.mode=function(t){return arguments.length?(p=t+"",a):p},li(a,s)},fo.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=fo.random.normal.apply(fo,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=fo.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},fo.scale={};var Ac={floor:_,ceil:_};fo.scale.linear=function(){return ta([0,1],[0,1],Mr,!1)};var Cc={s:1,g:1,p:1,r:1,e:1};fo.scale.log=function(){return ca(fo.scale.linear().domain([0,1]),10,!0,[1,10])};var kc=fo.format(".0e"),Lc={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};fo.scale.pow=function(){return la(fo.scale.linear(),1,[0,1])},fo.scale.sqrt=function(){return fo.scale.pow().exponent(.5)},fo.scale.ordinal=function(){return ha([],{t:"range",a:[[]]})},fo.scale.category10=function(){return fo.scale.ordinal().range(Rc)},fo.scale.category20=function(){return fo.scale.ordinal().range(Pc)},fo.scale.category20b=function(){return fo.scale.ordinal().range(Dc)},fo.scale.category20c=function(){return fo.scale.ordinal().range(Bc)};var Rc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Mt),Pc=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Mt),Dc=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Mt),Bc=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Mt);fo.scale.quantile=function(){return fa([],[])},fo.scale.quantize=function(){return pa(0,1,[0,1])},fo.scale.threshold=function(){return da([.5],[0,1])},fo.scale.identity=function(){return ma([0,1])},fo.svg={},fo.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),u=o.apply(this,arguments)-Wo,h=s.apply(this,arguments)-Wo,f=Math.abs(h-u),p=u>h?0:1;if(l<t&&(d=l,l=t,t=d),f>=Ho)return e(l,p)+(t?e(t,1-p):"")+"Z";var d,m,g,v,y,b,x,w,_,E,M,T,S=0,A=0,C=[];if((v=(+c.apply(this,arguments)||0)/2)&&(g=a===Nc?Math.sqrt(t*t+l*l):+a.apply(this,arguments),p||(A*=-1),l&&(A=ot(g/l*Math.sin(v))),t&&(S=ot(g/t*Math.sin(v)))),l){y=l*Math.cos(u+A),b=l*Math.sin(u+A),x=l*Math.cos(h-A),w=l*Math.sin(h-A);var k=Math.abs(h-u-2*A)<=Vo?0:1;if(A&&_a(y,b,x,w)===p^k){var L=(u+h)/2;y=l*Math.cos(L),b=l*Math.sin(L),x=w=null}}else y=b=0;if(t){_=t*Math.cos(h-S),E=t*Math.sin(h-S),M=t*Math.cos(u+S),T=t*Math.sin(u+S);var R=Math.abs(u-h+2*S)<=Vo?0:1;if(S&&_a(_,E,M,T)===1-p^R){var P=(u+h)/2;_=t*Math.cos(P),E=t*Math.sin(P),M=T=null}}else _=E=0;if(f>Uo&&(d=Math.min(Math.abs(l-t)/2,+i.apply(this,arguments)))>.001){m=t<l^p?0:1;var D=d,B=d;if(f<Vo){var N=null==M?[_,E]:null==x?[y,b]:jn([y,b],[M,T],[x,w],[_,E]),O=y-N[0],F=b-N[1],I=x-N[0],j=w-N[1],U=1/Math.sin(Math.acos((O*I+F*j)/(Math.sqrt(O*O+F*F)*Math.sqrt(I*I+j*j)))/2),z=Math.sqrt(N[0]*N[0]+N[1]*N[1]);B=Math.min(d,(t-z)/(U-1)),D=Math.min(d,(l-z)/(U+1))}if(null!=x){var V=Ea(null==M?[_,E]:[M,T],[y,b],l,D,p),G=Ea([x,w],[_,E],l,D,p);d===D?C.push("M",V[0],"A",D,",",D," 0 0,",m," ",V[1],"A",l,",",l," 0 ",1-p^_a(V[1][0],V[1][1],G[1][0],G[1][1]),",",p," ",G[1],"A",D,",",D," 0 0,",m," ",G[0]):C.push("M",V[0],"A",D,",",D," 0 1,",m," ",G[0])}else C.push("M",y,",",b);if(null!=M){var H=Ea([y,b],[M,T],t,-B,p),W=Ea([_,E],null==x?[y,b]:[x,w],t,-B,p);d===B?C.push("L",W[0],"A",B,",",B," 0 0,",m," ",W[1],"A",t,",",t," 0 ",p^_a(W[1][0],W[1][1],H[1][0],H[1][1]),",",1-p," ",H[1],"A",B,",",B," 0 0,",m," ",H[0]):C.push("L",W[0],"A",B,",",B," 0 0,",m," ",H[0])}else C.push("L",_,",",E)}else C.push("M",y,",",b),null!=x&&C.push("A",l,",",l," 0 ",k,",",p," ",x,",",w),C.push("L",_,",",E),null!=M&&C.push("A",t,",",t," 0 ",R,",",1-p," ",M,",",T);return C.push("Z"),C.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=va,r=ya,i=ga,a=Nc,o=ba,s=xa,c=wa;return t.innerRadius=function(e){return arguments.length?(n=Rt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=Rt(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=Rt(e),t):i},t.padRadius=function(e){return arguments.length?(a=e==Nc?Nc:Rt(e),t):a},t.startAngle=function(e){return arguments.length?(o=Rt(e),t):o},t.endAngle=function(e){return arguments.length?(s=Rt(e),t):s},t.padAngle=function(e){return arguments.length?(c=Rt(e),t):c},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Wo;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Nc="auto";fo.svg.line=function(){return Ma(_)};var Oc=fo.map({linear:Ta,"linear-closed":Sa,step:Aa,"step-before":Ca,"step-after":ka,basis:Na,"basis-open":Oa,"basis-closed":Fa,bundle:Ia,cardinal:Pa,"cardinal-open":La,"cardinal-closed":Ra,monotone:Ha});Oc.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Fc=[0,2/3,1/3,0],Ic=[0,1/3,2/3,0],jc=[0,1/6,2/3,1/6];fo.svg.line.radial=function(){var t=Ma(Wa);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ca.reverse=ka,ka.reverse=Ca,fo.svg.area=function(){return qa(_)},fo.svg.area.radial=function(){var t=qa(Wa);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},fo.svg.chord=function(){function t(t,s){var c=e(this,a,t,s),l=e(this,o,t,s);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(n(c,l)?i(c.r,c.p1,c.r,c.p0):i(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,c.r,c.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),a=s.call(t,i,r),o=c.call(t,i,r)-Wo,u=l.call(t,i,r)-Wo;return{r:a,a0:o,a1:u,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(u),a*Math.sin(u)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Vo)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var a=Mn,o=Tn,s=Xa,c=ba,l=xa;return t.radius=function(e){return arguments.length?(s=Rt(e),t):s},t.source=function(e){return arguments.length?(a=Rt(e),t):a},t.target=function(e){return arguments.length?(o=Rt(e),t):o},t.startAngle=function(e){return arguments.length?(c=Rt(e),t):c},t.endAngle=function(e){return arguments.length?(l=Rt(e),t):l},t},fo.svg.diagonal=function(){function t(t,i){var a=e.call(this,t,i),o=n.call(this,t,i),s=(a.y+o.y)/2,c=[a,{x:a.x,y:s},{x:o.x,y:s},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var e=Mn,n=Tn,r=Ya;return t.source=function(n){return arguments.length?(e=Rt(n),t):e},t.target=function(e){return arguments.length?(n=Rt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},fo.svg.diagonal.radial=function(){var t=fo.svg.diagonal(),e=Ya,n=t.projection;return t.projection=function(t){return arguments.length?n($a(e=t)):e},t},fo.svg.symbol=function(){function t(t,r){return(Uc.get(e.call(this,t,r))||Ja)(n.call(this,t,r))}var e=Ka,n=Za;return t.type=function(n){return arguments.length?(e=Rt(n),t):e},t.size=function(e){return arguments.length?(n=Rt(e),t):n},t};var Uc=fo.map({circle:Ja,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Vc)),n=e*Vc;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/zc),n=e*zc/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/zc),n=e*zc/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});fo.svg.symbolTypes=Uc.keys();var zc=Math.sqrt(3),Vc=Math.tan(30*qo);Po.transition=function(t){for(var e,n,r=Gc||++Xc,i=ro(t),a=[],o=Hc||{time:Date.now(),ease:Rr,delay:0,duration:250},s=-1,c=this.length;++s<c;){a.push(e=[]);for(var l=this[s],u=-1,h=l.length;++u<h;)(n=l[u])&&io(n,u,i,r,o),e.push(n)}return to(a,i,r)},Po.interrupt=function(t){return this.each(null==t?Wc:Qa(ro(t)))};var Gc,Hc,Wc=Qa(ro()),qc=[],Xc=0;qc.call=Po.call,qc.empty=Po.empty,qc.node=Po.node,qc.size=Po.size,fo.transition=function(t,e){return t&&t.transition?Gc?t.transition(e):t:fo.selection().transition(t)},fo.transition.prototype=qc,qc.select=function(t){var e,n,r,i=this.id,a=this.namespace,o=[];t=P(t);for(var s=-1,c=this.length;++s<c;){o.push(e=[]);for(var l=this[s],u=-1,h=l.length;++u<h;)(r=l[u])&&(n=t.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),io(n,u,a,i,r[a][i]),e.push(n)):e.push(null)}return to(o,a,i)},qc.selectAll=function(t){var e,n,r,i,a,o=this.id,s=this.namespace,c=[];t=D(t);for(var l=-1,u=this.length;++l<u;)for(var h=this[l],f=-1,p=h.length;++f<p;)if(r=h[f]){a=r[s][o],n=t.call(r,r.__data__,f,l),c.push(e=[]);for(var d=-1,m=n.length;++d<m;)(i=n[d])&&io(i,d,s,o,a),e.push(i)}return to(c,s,o)},qc.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=W(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]);for(var n=this[a],s=0,c=n.length;s<c;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return to(i,this.namespace,this.id)},qc.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):X(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},qc.attr=function(t,e){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=o(n,t),function(t){this.setAttribute(s,e(t))})})}function a(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=o(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var o="transform"==t?Jr:Mr,s=fo.ns.qualify(t);return eo(this,"attr."+t,e,s.local?a:i)},qc.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=fo.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},qc.style=function(t,e,n){function r(){this.style.removeProperty(t)}function i(e){return null==e?r:(e+="",function(){var r,i=a(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Mr(i,e),function(e){this.style.setProperty(t,r(e),n)})})}var o=arguments.length;if(o<3){if("string"!=typeof t){o<2&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return eo(this,"style."+t,e,i)},qc.styleTween=function(t,e,n){function r(r,i){var o=e.call(this,r,i,a(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},qc.text=function(t){return eo(this,"text",t,no)},qc.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},qc.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=fo.ease.apply(fo,arguments)),X(this,function(r){r[n][e].ease=t}))},qc.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:X(this,"function"==typeof t?function(r,i,a){r[n][e].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[n][e].delay=t}))},qc.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:X(this,"function"==typeof t?function(r,i,a){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},qc.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Hc,a=Gc;try{Gc=n,X(this,function(e,i,a){Hc=e[r][n],t.call(e,e.__data__,i,a)})}finally{Hc=i,Gc=a}}else X(this,function(i){var a=i[r][n];(a.event||(a.event=fo.dispatch("start","end","interrupt"))).on(t,e)});return this},qc.transition=function(){for(var t,e,n,r,i=this.id,a=++Xc,o=this.namespace,s=[],c=0,l=this.length;c<l;c++){s.push(t=[]);for(var e=this[c],u=0,h=e.length;u<h;u++)(n=e[u])&&(r=n[o][i],io(n,u,o,a,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return to(s,o,a)},fo.svg.axis=function(){function t(t){t.each(function(){var t,l=fo.select(this),u=this.__chart__||n,h=this.__chart__=n.copy(),f=null==c?h.ticks?h.ticks.apply(h,s):h.domain():c,p=null==e?h.tickFormat?h.tickFormat.apply(h,s):_:e,d=l.selectAll(".tick").data(f,h),m=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Uo),g=fo.transition(d.exit()).style("opacity",Uo).remove(),v=fo.transition(d.order()).style("opacity",1),y=Math.max(i,0)+o,b=$i(h),x=l.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),fo.transition(x));m.append("line"),m.append("text");var E,M,T,S,A=m.select("line"),C=v.select("line"),k=d.select("text").text(p),L=m.select("text"),R=v.select("text"),P="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=ao,E="x",T="y",M="x2",S="y2",k.attr("dy",P<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+b[0]+","+P*a+"V0H"+b[1]+"V"+P*a)):(t=oo,E="y",T="x",M="y2",S="x2",k.attr("dy",".32em").style("text-anchor",P<0?"end":"start"),w.attr("d","M"+P*a+","+b[0]+"H0V"+b[1]+"H"+P*a)),
A.attr(S,P*i),L.attr(T,P*y),C.attr(M,0).attr(S,P*i),R.attr(E,0).attr(T,P*y),h.rangeBand){var D=h,B=D.rangeBand()/2;u=h=function(t){return D(t)+B}}else u.rangeBand?u=h:g.call(t,h,u);m.call(t,u,h),v.call(t,h,h)})}var e,n=fo.scale.linear(),r=Yc,i=6,a=6,o=3,s=[10],c=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in $c?e+"":Yc,t):r},t.ticks=function(){return arguments.length?(s=mo(arguments),t):s},t.tickValues=function(e){return arguments.length?(c=e,t):c},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,a=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(a=+e,t):a},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Yc="bottom",$c={top:1,right:1,bottom:1,left:1};fo.svg.brush=function(){function t(a){a.each(function(){var a=fo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=a.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=a.selectAll(".resize").data(m,_);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Zc[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var c,h=fo.transition(a),f=fo.transition(o);l&&(c=$i(l),f.attr("x",c[0]).attr("width",c[1]-c[0]),n(h)),u&&(c=$i(u),f.attr("y",c[0]).attr("height",c[1]-c[0]),r(h)),e(h)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",h[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function r(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function i(){function i(){32==fo.event.keyCode&&(k||(b=null,R[0]-=h[1],R[1]-=f[1],k=2),C())}function m(){32==fo.event.keyCode&&2==k&&(R[0]+=h[1],R[1]+=f[1],k=0,C())}function g(){var t=fo.mouse(w),i=!1;x&&(t[0]+=x[0],t[1]+=x[1]),k||(fo.event.altKey?(b||(b=[(h[0]+h[1])/2,(f[0]+f[1])/2]),R[0]=h[+(t[0]<b[0])],R[1]=f[+(t[1]<b[1])]):b=null),S&&v(t,l,0)&&(n(M),i=!0),A&&v(t,u,1)&&(r(M),i=!0),i&&(e(M),E({type:"brush",mode:k?"move":"resize"}))}function v(t,e,n){var r,i,a=$i(e),c=a[0],l=a[1],u=R[n],m=n?f:h,g=m[1]-m[0];if(k&&(c-=u,l-=g+u),r=(n?d:p)?Math.max(c,Math.min(l,t[n])):t[n],k?i=(r+=u)+g:(b&&(u=Math.max(c,Math.min(l,2*b[n]-r))),u<r?(i=r,r=u):i=u),m[0]!=r||m[1]!=i)return n?s=null:o=null,m[0]=r,m[1]=i,!0}function y(){g(),M.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),fo.select("body").style("cursor",null),P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),L(),E({type:"brushend"})}var b,x,w=this,_=fo.select(fo.event.target),E=c.of(w,arguments),M=fo.select(w),T=_.datum(),S=!/^(n|s)$/.test(T)&&l,A=!/^(e|w)$/.test(T)&&u,k=_.classed("extent"),L=tt(w),R=fo.mouse(w),P=fo.select(a(w)).on("keydown.brush",i).on("keyup.brush",m);if(fo.event.changedTouches?P.on("touchmove.brush",g).on("touchend.brush",y):P.on("mousemove.brush",g).on("mouseup.brush",y),M.interrupt().selectAll("*").interrupt(),k)R[0]=h[0]-R[0],R[1]=f[0]-R[1];else if(T){var D=+/w$/.test(T),B=+/^n/.test(T);x=[h[1-D]-R[0],f[1-B]-R[1]],R[0]=h[D],R[1]=f[B]}else fo.event.altKey&&(b=R.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null),fo.select("body").style("cursor",_.style("cursor")),E({type:"brushstart"}),g()}var o,s,c=L(t,"brushstart","brush","brushend"),l=null,u=null,h=[0,0],f=[0,0],p=!0,d=!0,m=Kc[0];return t.event=function(t){t.each(function(){var t=c.of(this,arguments),e={x:h,y:f,i:o,j:s},n=this.__chart__||e;this.__chart__=e,Gc?fo.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,h=n.x,f=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Tr(h,e.x),r=Tr(f,e.y);return o=s=null,function(i){h=e.x=n(i),f=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,m=Kc[!l<<1|!u],t):l},t.y=function(e){return arguments.length?(u=e,m=Kc[!l<<1|!u],t):u},t.clamp=function(e){return arguments.length?(l&&u?(p=!!e[0],d=!!e[1]):l?p=!!e:u&&(d=!!e),t):l&&u?[p,d]:l?p:u?d:null},t.extent=function(e){var n,r,i,a,c;return arguments.length?(l&&(n=e[0],r=e[1],u&&(n=n[0],r=r[0]),o=[n,r],l.invert&&(n=l(n),r=l(r)),r<n&&(c=n,n=r,r=c),n==h[0]&&r==h[1]||(h=[n,r])),u&&(i=e[0],a=e[1],l&&(i=i[1],a=a[1]),s=[i,a],u.invert&&(i=u(i),a=u(a)),a<i&&(c=i,i=a,a=c),i==f[0]&&a==f[1]||(f=[i,a])),t):(l&&(o?(n=o[0],r=o[1]):(n=h[0],r=h[1],l.invert&&(n=l.invert(n),r=l.invert(r)),r<n&&(c=n,n=r,r=c))),u&&(s?(i=s[0],a=s[1]):(i=f[0],a=f[1],u.invert&&(i=u.invert(i),a=u.invert(a)),a<i&&(c=i,i=a,a=c))),l&&u?[[n,i],[r,a]]:l?[n,r]:u&&[i,a])},t.clear=function(){return t.empty()||(h=[0,0],f=[0,0],o=s=null),t},t.empty=function(){return!!l&&h[0]==h[1]||!!u&&f[0]==f[1]},fo.rebind(t,c,"on")};var Zc={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Kc=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Jc=vs.format=Es.timeFormat,Qc=Jc.utc,tl=Qc("%Y-%m-%dT%H:%M:%S.%LZ");Jc.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?so:tl,so.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},so.toString=tl.toString,vs.second=Wt(function(t){return new ys(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),vs.seconds=vs.second.range,vs.seconds.utc=vs.second.utc.range,vs.minute=Wt(function(t){return new ys(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),vs.minutes=vs.minute.range,vs.minutes.utc=vs.minute.utc.range,vs.hour=Wt(function(t){var e=t.getTimezoneOffset()/60;return new ys(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),vs.hours=vs.hour.range,vs.hours.utc=vs.hour.utc.range,vs.month=Wt(function(t){return t=vs.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),vs.months=vs.month.range,vs.months.utc=vs.month.utc.range;var el=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],nl=[[vs.second,1],[vs.second,5],[vs.second,15],[vs.second,30],[vs.minute,1],[vs.minute,5],[vs.minute,15],[vs.minute,30],[vs.hour,1],[vs.hour,3],[vs.hour,6],[vs.hour,12],[vs.day,1],[vs.day,2],[vs.week,1],[vs.month,1],[vs.month,3],[vs.year,1]],rl=Jc.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Be]]),il={range:function(t,e,n){return fo.range(Math.ceil(t/n)*n,+e,n).map(lo)},floor:_,ceil:_};nl.year=vs.year,vs.scale=function(){return co(fo.scale.linear(),nl,rl)};var al=nl.map(function(t){return[t[0].utc,t[1]]}),ol=Qc.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Be]]);al.year=vs.year.utc,vs.scale.utc=function(){return co(fo.scale.linear(),al,ol)},fo.text=Pt(function(t){return t.responseText}),fo.json=function(t,e){return Dt(t,"application/json",uo,e)},fo.html=function(t,e){return Dt(t,"text/html",ho,e)},fo.xml=Pt(function(t){return t.responseXML}),this.d3=fo,n=fo,r="function"==typeof n?n.call(exports,e,exports,t):n,!(void 0!==r&&(t.exports=r))}()},1217:function(t,exports,e){var require,require,n,r;(function(t,e,i){!function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!s&&c)return require(o,!0);if(a)return a(o,!0);var l=Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(require,e,exports){(function(t,n){function r(){for(var t=(new o).getTime();h.length&&(new o).getTime()-t<100;)h.shift()();u=h.length?s(r,0):null}t.stdout=require("browser-stdout")();var i=require("./lib/mocha"),a=new i({reporter:"html"}),o=n.Date,s=n.setTimeout,c=(n.setInterval,n.clearTimeout,n.clearInterval,[]),l=n.onerror;t.removeListener=function(t,e){if("uncaughtException"==t){l?n.onerror=l:n.onerror=function(){};var r=i.utils.indexOf(c,e);r!=-1&&c.splice(r,1)}},t.on=function(t,e){"uncaughtException"==t&&(n.onerror=function(t,n,r){return e(Error(t+" ("+n+":"+r+")")),!a.allowUncaught},c.push(e))},a.suite.removeAllListeners("pre-require");var u,h=[];i.Runner.immediately=function(t){h.push(t),u||(u=s(r,0))},a.throwError=function(t){throw i.utils.forEach(c,function(e){e(t)}),t},a.ui=function(t){return i.prototype.ui.call(this,t),this.suite.emit("pre-require",n,null,this),this},a.setup=function(t){"string"==typeof t&&(t={ui:t});for(var e in t)this[e](t[e]);return this},a.run=function(t){var e=a.options;a.globals("location");var r=i.utils.parseQuery(n.location.search||"");return r.grep&&a.grep(RegExp(r.grep)),r.fgrep&&a.grep(r.fgrep),r.invert&&a.invert(),i.prototype.run.call(a,function(r){var a=n.document;a&&a.getElementById("mocha")&&e.noHighlighting!==!0&&i.utils.highlightTags("code"),t&&t(r)})},i.process=t,n.Mocha=i,n.mocha=a,e.exports=n}).call(this,require("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/mocha":14,_process:58,"browser-stdout":42}],2:[function(require,t,exports){t.exports=function(t){return function(){}}},{}],3:[function(require,t,exports){function e(t){return"[object Array]"===r.call(t)}function n(){}exports.EventEmitter=n;var r=Object.prototype.toString;n.prototype.on=function(t,n){return this.$events||(this.$events={}),this.$events[t]?e(this.$events[t])?this.$events[t].push(n):this.$events[t]=[this.$events[t],n]:this.$events[t]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(t,e){function n(){r.removeListener(t,n),e.apply(this,arguments)}var r=this;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,n){if(this.$events&&this.$events[t]){var r=this.$events[t];if(e(r)){for(var i=-1,a=0,o=r.length;a<o;a++)if(r[a]===n||r[a].listener&&r[a].listener===n){i=a;break}if(i<0)return this;r.splice(i,1),r.length||delete this.$events[t]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[t]}return this},n.prototype.removeAllListeners=function(t){return void 0===t?(this.$events={},this):(this.$events&&this.$events[t]&&(this.$events[t]=null),this)},n.prototype.listeners=function(t){return this.$events||(this.$events={}),this.$events[t]||(this.$events[t]=[]),e(this.$events[t])||(this.$events[t]=[this.$events[t]]),this.$events[t]},n.prototype.emit=function(t){if(!this.$events)return!1;var n=this.$events[t];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!e(n))return!1;for(var i=n.slice(),a=0,o=i.length;a<o;a++)i[a].apply(this,r)}return!0}},{}],4:[function(require,t,exports){function e(){this.percent=0,this.size(0),this.fontSize(11),this.font("helvetica, arial, sans-serif")}t.exports=e,e.prototype.size=function(t){return this._size=t,this},e.prototype.text=function(t){return this._text=t,this},e.prototype.fontSize=function(t){return this._fontSize=t,this},e.prototype.font=function(t){return this._font=t,this},e.prototype.update=function(t){return this.percent=t,this},e.prototype.draw=function(t){try{var e=Math.min(this.percent,100),n=this._size,r=n/2,i=r,a=r,o=r-1,s=this._fontSize;t.font=s+"px "+this._font;var c=2*Math.PI*(e/100);t.clearRect(0,0,n,n),t.strokeStyle="#9f9f9f",t.beginPath(),t.arc(i,a,o,0,c,!1),t.stroke(),t.strokeStyle="#eee",t.beginPath(),t.arc(i,a,o-1,0,c,!0),t.stroke();var l=this._text||(0|e)+"%",u=t.measureText(l).width;t.fillText(l,i-u/2+1,a+s/2-1)}catch(t){}return this}},{}],5:[function(require,e,exports){(function(t){exports.isatty=function(){return!0},exports.getWindowSize=function(){return"innerHeight"in t?[t.innerHeight,t.innerWidth]:[640,480]}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(require,t,exports){function e(){}t.exports=e,e.prototype.runnable=function(t){return arguments.length?(this.test=this._runnable=t,this):this._runnable},e.prototype.timeout=function(t){return arguments.length?(this.runnable().timeout(t),this):this.runnable().timeout()},e.prototype.enableTimeouts=function(t){return this.runnable().enableTimeouts(t),this},e.prototype.slow=function(t){return this.runnable().slow(t),this},e.prototype.skip=function(){return this.runnable().skip(),this},e.prototype.retries=function(t){return arguments.length?(this.runnable().retries(t),this):this.runnable().retries()},e.prototype.inspect=function(){return JSON.stringify(this,function(t,e){return"runnable"===t||"test"===t?void 0:e},2)}},{}],7:[function(require,t,exports){function e(t,e){n.call(this,t,e),this.type="hook"}var n=require("./runnable"),r=require("./utils").inherits;t.exports=e,r(e,n),e.prototype.error=function(t){return arguments.length?void(this._error=t):(t=this._error,this._error=null,t)}},{"./runnable":35,"./utils":39}],8:[function(require,t,exports){var e=require("../suite"),n=require("../test"),r=require("escape-string-regexp");t.exports=function(t){var i=[t];t.on("pre-require",function(a,o,s){var c=require("./common")(i,a);a.before=c.before,a.after=c.after,a.beforeEach=c.beforeEach,a.afterEach=c.afterEach,a.run=s.options.delay&&c.runWithSuite(t),a.describe=a.context=function(t,n){var r=e.create(i[0],t);return r.file=o,i.unshift(r),n.call(r),i.shift(),r},a.xdescribe=a.xcontext=a.describe.skip=function(t,n){var r=e.create(i[0],t);r.pending=!0,i.unshift(r),n.call(r),i.shift()},a.describe.only=function(t,e){var n=a.describe(t,e);return s.grep(n.fullTitle()),n};var l=a.it=a.specify=function(t,e){var r=i[0];r.isPending()&&(e=null);var a=new n(t,e);return a.file=o,r.addTest(a),a};a.it.only=function(t,e){var n=l(t,e),i="^"+r(n.fullTitle())+"$";return s.grep(RegExp(i)),n},a.xit=a.xspecify=a.it.skip=function(t){a.it(t)},a.it.retries=function(t){a.retries(t)}})}},{"../suite":37,"../test":38,"./common":9,"escape-string-regexp":49}],9:[function(require,t,exports){"use strict";t.exports=function(t,e){return{runWithSuite:function(t){return function(){t.run()}},before:function(e,n){t[0].beforeAll(e,n)},after:function(e,n){t[0].afterAll(e,n)},beforeEach:function(e,n){t[0].beforeEach(e,n)},afterEach:function(e,n){t[0].afterEach(e,n)},test:{skip:function(t){e.test(t)},retries:function(t){e.retries(t)}}}}},{}],10:[function(require,t,exports){var e=require("../suite"),n=require("../test");t.exports=function(t){function r(t,a){var o;for(var s in t)if("function"==typeof t[s]){var c=t[s];switch(s){case"before":i[0].beforeAll(c);break;case"after":i[0].afterAll(c);break;case"beforeEach":i[0].beforeEach(c);break;case"afterEach":i[0].afterEach(c);break;default:var l=new n(s,c);l.file=a,i[0].addTest(l)}}else o=e.create(i[0],s),i.unshift(o),r(t[s],a),i.shift()}var i=[t];t.on("require",r)}},{"../suite":37,"../test":38}],11:[function(require,t,exports){exports.bdd=require("./bdd"),exports.tdd=require("./tdd"),exports.qunit=require("./qunit"),exports.exports=require("./exports")},{"./bdd":8,"./exports":10,"./qunit":12,"./tdd":13}],12:[function(require,t,exports){var e=require("../suite"),n=require("../test"),r=require("escape-string-regexp");t.exports=function(t){var i=[t];t.on("pre-require",function(a,o,s){var c=require("./common")(i,a);a.before=c.before,a.after=c.after,a.beforeEach=c.beforeEach,a.afterEach=c.afterEach,a.run=s.options.delay&&c.runWithSuite(t),a.suite=function(t){i.length>1&&i.shift();var n=e.create(i[0],t);return n.file=o,i.unshift(n),n},a.suite.only=function(t,e){var n=a.suite(t,e);s.grep(n.fullTitle())},a.test=function(t,e){var r=new n(t,e);return r.file=o,i[0].addTest(r),r},a.test.only=function(t,e){var n=a.test(t,e),i="^"+r(n.fullTitle())+"$";s.grep(RegExp(i))},a.test.skip=c.test.skip,a.test.retries=c.test.retries})}},{"../suite":37,"../test":38,"./common":9,"escape-string-regexp":49}],13:[function(require,t,exports){var e=require("../suite"),n=require("../test"),r=require("escape-string-regexp");t.exports=function(t){var i=[t];t.on("pre-require",function(a,o,s){var c=require("./common")(i,a);a.setup=c.beforeEach,a.teardown=c.afterEach,a.suiteSetup=c.before,a.suiteTeardown=c.after,a.run=s.options.delay&&c.runWithSuite(t),a.suite=function(t,n){var r=e.create(i[0],t);return r.file=o,i.unshift(r),n.call(r),i.shift(),r},a.suite.skip=function(t,n){var r=e.create(i[0],t);r.pending=!0,i.unshift(r),n.call(r),i.shift()},a.suite.only=function(t,e){var n=a.suite(t,e);s.grep(n.fullTitle())},a.test=function(t,e){var r=i[0];r.isPending()&&(e=null);var a=new n(t,e);return a.file=o,r.addTest(a),a},a.test.only=function(t,e){var n=a.test(t,e),i="^"+r(n.fullTitle())+"$";s.grep(RegExp(i))},a.test.skip=c.test.skip,a.test.retries=c.test.retries})}},{"../suite":37,"../test":38,"./common":9,"escape-string-regexp":49}],14:[function(require,e,exports){(function(t,n,r){function i(t){return s.join(r,"../images",t+".png")}function a(t){t=t||{},this.files=[],this.options=t,t.grep&&this.grep(RegExp(t.grep)),t.fgrep&&this.grep(t.fgrep),this.suite=new exports.Suite("",new exports.Context),this.ui(t.ui),this.bail(t.bail),this.reporter(t.reporter,t.reporterOptions),void 0!==t.timeout&&null!==t.timeout&&this.timeout(t.timeout),void 0!==t.retries&&null!==t.retries&&this.retries(t.retries),this.useColors(t.useColors),null!==t.enableTimeouts&&this.enableTimeouts(t.enableTimeouts),t.slow&&this.slow(t.slow)}var o=require("escape-string-regexp"),s=require("path"),c=require("./reporters"),l=require("./utils");if(exports=e.exports=a,!t.browser){var u=t.cwd();e.paths.push(u,s.join(u,"node_modules"))}exports.utils=l,exports.interfaces=require("./interfaces"),exports.reporters=c,exports.Runnable=require("./runnable"),exports.Context=require("./context"),exports.Runner=require("./runner"),exports.Suite=require("./suite"),exports.Hook=require("./hook"),exports.Test=require("./test"),a.prototype.bail=function(t){return arguments.length||(t=!0),this.suite.bail(t),this},a.prototype.addFile=function(t){return this.files.push(t),this},a.prototype.reporter=function(t,e){if("function"==typeof t)this._reporter=t;else{t=t||"spec";var n;if(c[t]&&(n=c[t]),!n)try{n=require(t)}catch(e){e.message.indexOf("Cannot find module")!==-1?console.warn('"'+t+'" reporter not found'):console.warn('"'+t+'" reporter blew up with error:\n'+e.stack)}if(n||"teamcity"!==t||console.warn("The Teamcity reporter was moved to a package named mocha-teamcity-reporter (https://npmjs.org/package/mocha-teamcity-reporter)."),!n)throw Error('invalid reporter "'+t+'"');this._reporter=n}return this.options.reporterOptions=e,this},a.prototype.ui=function(t){if(t=t||"bdd",this._ui=exports.interfaces[t],!this._ui)try{this._ui=require(t)}catch(e){throw Error('invalid interface "'+t+'"')}return this._ui=this._ui(this.suite),this.suite.on("pre-require",function(t){exports.afterEach=t.afterEach||t.teardown,exports.after=t.after||t.suiteTeardown,exports.beforeEach=t.beforeEach||t.setup,exports.before=t.before||t.suiteSetup,exports.describe=t.describe||t.suite,exports.it=t.it||t.test,exports.setup=t.setup||t.beforeEach,exports.suiteSetup=t.suiteSetup||t.before,exports.suiteTeardown=t.suiteTeardown||t.after,exports.suite=t.suite||t.describe,exports.teardown=t.teardown||t.afterEach,exports.test=t.test||t.it,exports.run=t.run}),this},a.prototype.loadFiles=function(t){var e=this,r=this.suite;this.files.forEach(function(t){t=s.resolve(t),r.emit("pre-require",n,t,e),r.emit("require",require(t),t,e),r.emit("post-require",n,t,e)}),t&&t()},a.prototype._growl=function(t,e){var n=require("growl");t.on("end",function(){var r=e.stats;if(r.failures){var a=r.failures+" of "+t.total+" tests failed";n(a,{name:"mocha",title:"Failed",image:i("error")})}else n(r.passes+" tests passed in "+r.duration+"ms",{name:"mocha",title:"Passed",image:i("ok")})})},a.prototype.grep=function(t){return this.options.grep="string"==typeof t?RegExp(o(t)):t,this},a.prototype.invert=function(){return this.options.invert=!0,this},a.prototype.ignoreLeaks=function(t){return this.options.ignoreLeaks=!!t,this},a.prototype.checkLeaks=function(){return this.options.ignoreLeaks=!1,this},a.prototype.fullTrace=function(){return this.options.fullStackTrace=!0,this},a.prototype.growl=function(){return this.options.growl=!0,this},a.prototype.globals=function(t){return this.options.globals=(this.options.globals||[]).concat(t),this},a.prototype.useColors=function(t){return void 0!==t&&(this.options.useColors=t),this},a.prototype.useInlineDiffs=function(t){return this.options.useInlineDiffs=void 0!==t&&t,this},a.prototype.timeout=function(t){return this.suite.timeout(t),this},a.prototype.retries=function(t){return this.suite.retries(t),this},a.prototype.slow=function(t){return this.suite.slow(t),this},a.prototype.enableTimeouts=function(t){return this.suite.enableTimeouts(!arguments.length||void 0===t||t),this},a.prototype.asyncOnly=function(){return this.options.asyncOnly=!0,this},a.prototype.noHighlighting=function(){return this.options.noHighlighting=!0,this},a.prototype.allowUncaught=function(){return this.options.allowUncaught=!0,this},a.prototype.delay=function(){return this.options.delay=!0,this},a.prototype.run=function(t){function e(e){a.done?a.done(e,t):t&&t(e)}this.files.length&&this.loadFiles();var n=this.suite,r=this.options;r.files=this.files;var i=new exports.Runner(n,r.delay),a=new this._reporter(i,r);return i.ignoreLeaks=r.ignoreLeaks!==!1,i.fullStackTrace=r.fullStackTrace,i.asyncOnly=r.asyncOnly,i.allowUncaught=r.allowUncaught,r.grep&&i.grep(r.grep,r.invert),r.globals&&i.globals(r.globals),r.growl&&this._growl(i,a),void 0!==r.useColors&&(exports.reporters.Base.useColors=r.useColors),exports.reporters.Base.inlineDiffs=r.useInlineDiffs,i.run(e)}}).call(this,require("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/lib")},{"./context":6,"./hook":7,"./interfaces":11,"./reporters":22,"./runnable":35,"./runner":36,"./suite":37,"./test":38,"./utils":39,_process:58,"escape-string-regexp":49,growl:51,path:43}],15:[function(require,t,exports){function e(t){var e=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return n*l;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"h":return n*s;case"minutes":case"minute":case"m":return n*o;case"seconds":case"second":case"s":return n*a;case"ms":return n}}}function n(t){return t>=c?Math.round(t/c)+"d":t>=s?Math.round(t/s)+"h":t>=o?Math.round(t/o)+"m":t>=a?Math.round(t/a)+"s":t+"ms"}function r(t){return i(t,c,"day")||i(t,s,"hour")||i(t,o,"minute")||i(t,a,"second")||t+" ms"}function i(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var a=1e3,o=60*a,s=60*o,c=24*s,l=365.25*c;t.exports=function(t,i){return i=i||{},"string"==typeof t?e(t):i.long?r(t):n(t)}},{}],16:[function(require,t,exports){function e(t){this.message=t}t.exports=e},{}],17:[function(require,e,exports){(function(t,n){function r(t){var e=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},n=this.failures=[];t&&(this.runner=t,t.stats=e,t.on("start",function(){e.start=new g}),t.on("suite",function(t){e.suites=e.suites||0,t.root||e.suites++}),t.on("test end",function(){e.tests=e.tests||0,e.tests++}),t.on("pass",function(t){e.passes=e.passes||0,t.duration>t.slow()?t.speed="slow":t.duration>t.slow()/2?t.speed="medium":t.speed="fast",e.passes++}),t.on("fail",function(t,r){e.failures=e.failures||0,e.failures++,t.err=r,n.push(t)}),t.on("end",function(){e.end=new g,e.duration=new g-e.start}),t.on("pending",function(){e.pending++}))}function i(t,e){return t+="",Array(e-t.length+1).join(" ")+t}function a(t,e){var n=s(t,"WordsWithSpace",e),r=n.split("\n");if(r.length>4){var a=(r.length+"").length;n=r.map(function(t,e){return i(++e,a)+" | "+t}).join("\n")}return n="\n"+y("diff removed","actual")+" "+y("diff added","expected")+"\n\n"+n+"\n",n=n.replace(/^/gm,"      ")}function o(t,e){function n(t){return e&&(t=c(t)),"+"===t[0]?i+l("diff added",t):"-"===t[0]?i+l("diff removed",t):t.match(/\@\@/)?null:t.match(/\\ No newline/)?null:i+t}function r(t){return void 0!==t&&null!==t}var i="      ",a=f.createPatch("string",t.actual,t.expected),o=a.split("\n").splice(4);return"\n      "+l("diff added","+ expected")+" "+l("diff removed","- actual")+"\n\n"+o.map(n).filter(r).join("\n")}function s(t,e,n){var r=n?c(t.actual):t.actual,i=n?c(t.expected):t.expected;return f["diff"+e](r,i).map(function(t){return t.added?l("diff added",t.value):t.removed?l("diff removed",t.value):t.value}).join("")}function c(t){return t.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")}function l(t,e){return e.split("\n").map(function(e){return y(t,e)}).join("\n")}function u(t,e){return b.call(t)===b.call(e)}var h=require("tty"),f=require("diff"),p=require("../ms"),d=require("../utils"),m=t.browser?null:require("supports-color");exports=e.exports=r;var g=n.Date,v=(n.setTimeout,n.setInterval,n.clearTimeout,n.clearInterval,h.isatty(1)&&h.isatty(2));exports.useColors=!t.browser&&(m||void 0!==t.env.MOCHA_COLORS),exports.inlineDiffs=!1,exports.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":32,"diff removed":31},exports.symbols={ok:"",err:"",dot:""},"win32"===t.platform&&(exports.symbols.ok="",exports.symbols.err="",exports.symbols.dot=".");var y=exports.color=function(t,e){return exports.useColors?"["+exports.colors[t]+"m"+e+"[0m":e+""};exports.window={width:75},v&&(exports.window.width=t.stdout.getWindowSize?t.stdout.getWindowSize(1)[0]:h.getWindowSize()[1]),exports.cursor={hide:function(){v&&t.stdout.write("[?25l")},show:function(){v&&t.stdout.write("[?25h")},deleteLine:function(){v&&t.stdout.write("[2K")},beginningOfLine:function(){v&&t.stdout.write("[0G")},CR:function(){v?(exports.cursor.deleteLine(),exports.cursor.beginningOfLine()):t.stdout.write("\r")}},exports.list=function(t){console.log(),t.forEach(function(t,e){var n,r,i=y("error title","  %s) %s:\n")+y("error message","     %s")+y("error stack","\n%s\n"),s=t.err;r=s.message&&"function"==typeof s.message.toString?s.message+"":"function"==typeof s.inspect?s.inspect()+"":"";var c=s.stack||r,l=c.indexOf(r),h=s.actual,f=s.expected,p=!0;if(l===-1?n=r:(l+=r.length,n=c.slice(0,l),c=c.slice(l+1)),s.uncaught&&(n="Uncaught "+n),s.showDiff!==!1&&u(h,f)&&void 0!==f){p=!1,d.isString(h)&&d.isString(f)||(s.actual=h=d.stringify(h),s.expected=f=d.stringify(f)),i=y("error title","  %s) %s:\n%s")+y("error stack","\n%s\n");var m=r.match(/^([^:]+): expected/);n="\n      "+y("error message",m?m[1]:n),n+=exports.inlineDiffs?a(s,p):o(s,p)}c=c.replace(/^/gm,"  "),console.log(i,e+1,t.fullTitle(),n,c)})},r.prototype.epilogue=function(){var t,e=this.stats;console.log(),t=y("bright pass"," ")+y("green"," %d passing")+y("light"," (%s)"),console.log(t,e.passes||0,p(e.duration)),e.pending&&(t=y("pending"," ")+y("pending"," %d pending"),console.log(t,e.pending)),e.failures&&(t=y("fail","  %d failing"),console.log(t,e.failures),r.list(this.failures),console.log()),console.log()};var b=Object.prototype.toString}).call(this,require("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../ms":15,"../utils":39,_process:58,diff:48,"supports-color":43,tty:5}],18:[function(require,t,exports){function e(t){function e(){return Array(i).join("  ")}n.call(this,t);var i=2;t.on("suite",function(t){t.root||(++i,console.log('%s<section class="suite">',e()),++i,console.log("%s<h1>%s</h1>",e(),r.escape(t.title)),console.log("%s<dl>",e()))}),t.on("suite end",function(t){t.root||(console.log("%s</dl>",e()),--i,console.log("%s</section>",e()),--i)}),t.on("pass",function(t){console.log("%s  <dt>%s</dt>",e(),r.escape(t.title));var n=r.escape(r.clean(t.body));console.log("%s  <dd><pre><code>%s</code></pre></dd>",e(),n)}),t.on("fail",function(t,n){console.log('%s  <dt class="error">%s</dt>',e(),r.escape(t.title));var i=r.escape(r.clean(t.fn.body));console.log('%s  <dd class="error"><pre><code>%s</code></pre></dd>',e(),i),console.log('%s  <dd class="error">%s</dd>',e(),r.escape(n))})}var n=require("./base"),r=require("../utils");exports=t.exports=e},{"../utils":39,"./base":17}],19:[function(require,t,exports){(function(e){function n(t){r.call(this,t);var n=this,i=.75*r.window.width|0,o=-1;t.on("start",function(){e.stdout.write("\n")}),t.on("pending",function(){++o%i===0&&e.stdout.write("\n  "),e.stdout.write(a("pending",r.symbols.dot))}),t.on("pass",function(t){++o%i===0&&e.stdout.write("\n  "),"slow"===t.speed?e.stdout.write(a("bright yellow",r.symbols.dot)):e.stdout.write(a(t.speed,r.symbols.dot))}),t.on("fail",function(){++o%i===0&&e.stdout.write("\n  "),e.stdout.write(a("fail",r.symbols.dot))}),t.on("end",function(){console.log(),n.epilogue()})}var r=require("./base"),i=require("../utils").inherits,a=r.color;exports=t.exports=n,i(n,r)}).call(this,require("_process"))},{"../utils":39,"./base":17,_process:58}],20:[function(require,t,exports){(function(e,n){function r(t){var r=require("jade"),c=s(n,"/templates/coverage.jade"),l=o(c,"utf8"),u=r.compile(l,{filename:c}),h=this;a.call(this,t,!1),t.on("end",function(){e.stdout.write(u({cov:h.cov,coverageClass:i}))})}function i(t){return t>=75?"high":t>=50?"medium":t>=25?"low":"terrible"}var a=require("./json-cov"),o=require("fs").readFileSync,s=require("path").join;exports=t.exports=r}).call(this,require("_process"),"/lib/reporters")},{"./json-cov":23,_process:58,fs:43,jade:43,path:43}],21:[function(require,e,exports){(function(t){function n(t){function e(t){A[0]&&A[0].appendChild(t)}function n(){var t=v.tests/this.total*100|0;r&&r.update(t).draw(h);var e=new m-v.start;c(x,v.passes),c(_,v.failures),c(M,(e/1e3).toFixed(2))}u.call(this,t);var r,h,p=this,v=this.stats,y=a(g),b=y.getElementsByTagName("li"),x=b[1].getElementsByTagName("em")[0],w=b[1].getElementsByTagName("a")[0],_=b[2].getElementsByTagName("em")[0],E=b[2].getElementsByTagName("a")[0],M=b[3].getElementsByTagName("em")[0],T=y.getElementsByTagName("canvas")[0],S=a('<ul id="mocha-report"></ul>'),A=[S],C=document.getElementById("mocha");if(T.getContext){var k=window.devicePixelRatio||1;T.style.width=T.width,T.style.height=T.height,T.width*=k,T.height*=k,h=T.getContext("2d"),h.scale(k,k),r=new f}return C?(l(w,"click",function(t){t.preventDefault(),s();var e=/pass/.test(S.className)?"":" pass";
S.className=S.className.replace(/fail|pass/g,"")+e,S.className.trim()&&o("test pass")}),l(E,"click",function(t){t.preventDefault(),s();var e=/fail/.test(S.className)?"":" fail";S.className=S.className.replace(/fail|pass/g,"")+e,S.className.trim()&&o("test fail")}),C.appendChild(y),C.appendChild(S),r&&r.size(40),t.on("suite",function(t){if(!t.root){var e=p.suiteURL(t),n=a('<li class="suite"><h1><a href="%s">%s</a></h1></li>',e,d(t.title));A[0].appendChild(n),A.unshift(document.createElement("ul")),n.appendChild(A[0])}}),t.on("suite end",function(t){t.root||A.shift()}),t.on("pass",function(t){var r=p.testURL(t),i='<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="%s" class="replay"></a></h2></li>',o=a(i,t.speed,t.title,t.duration,r);p.addCodeToggle(o,t.body),e(o),n()}),t.on("fail",function(t){var r,i=a('<li class="test fail"><h2>%e <a href="%e" class="replay"></a></h2></li>',t.title,p.testURL(t)),o=""+t.err;if("[object Error]"===o&&(o=t.err.message),t.err.stack){var s=t.err.stack.indexOf(t.err.message);r=s===-1?t.err.stack:t.err.stack.substr(t.err.message.length+s)}else t.err.sourceURL&&void 0!==t.err.line&&(r="\n("+t.err.sourceURL+":"+t.err.line+")");r=r||"",t.err.htmlMessage&&r?i.appendChild(a('<div class="html-error">%s\n<pre class="error">%e</pre></div>',t.err.htmlMessage,r)):t.err.htmlMessage?i.appendChild(a('<div class="html-error">%s</div>',t.err.htmlMessage)):i.appendChild(a('<pre class="error">%e%e</pre>',o,r)),p.addCodeToggle(i,t.body),e(i),n()}),void t.on("pending",function(t){var r=a('<li class="test pass pending"><h2>%e</h2></li>',t.title);e(r),n()})):i("#mocha div missing, add it to your document")}function r(t){var e=window.location.search;return e&&(e=e.replace(/[?&]grep=[^&\s]*/g,"").replace(/^&/,"?")),window.location.pathname+(e?e+"&":"?")+"grep="+encodeURIComponent(p(t))}function i(t){document.body.appendChild(a('<div id="mocha-error">%s</div>',t))}function a(t){var e=arguments,n=document.createElement("div"),r=1;return n.innerHTML=t.replace(/%([se])/g,function(t,n){switch(n){case"s":return e[r++]+"";case"e":return d(e[r++])}}),n.firstChild}function o(t){for(var e=document.getElementsByClassName("suite"),n=0;n<e.length;n++){var r=e[n].getElementsByClassName(t);r.length||(e[n].className+=" hidden")}}function s(){for(var t=document.getElementsByClassName("suite hidden"),e=0;e<t.length;++e)t[e].className=t[e].className.replace("suite hidden","suite")}function c(t,e){t.textContent?t.textContent=e:t.innerText=e}function l(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}var u=require("./base"),h=require("../utils"),f=require("../browser/progress"),p=require("escape-string-regexp"),d=h.escape,m=t.Date;t.setTimeout,t.setInterval,t.clearTimeout,t.clearInterval;exports=e.exports=n;var g='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="javascript:void(0);">passes:</a> <em>0</em></li><li class="failures"><a href="javascript:void(0);">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>';n.prototype.suiteURL=function(t){return r(t.fullTitle())},n.prototype.testURL=function(t){return r(t.fullTitle())},n.prototype.addCodeToggle=function(t,e){var n=t.getElementsByTagName("h2")[0];l(n,"click",function(){r.style.display="none"===r.style.display?"block":"none"});var r=a("<pre><code>%e</code></pre>",h.clean(e));t.appendChild(r),r.style.display="none"}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../browser/progress":4,"../utils":39,"./base":17,"escape-string-regexp":49}],22:[function(require,t,exports){exports.Base=exports.base=require("./base"),exports.Dot=exports.dot=require("./dot"),exports.Doc=exports.doc=require("./doc"),exports.TAP=exports.tap=require("./tap"),exports.JSON=exports.json=require("./json"),exports.HTML=exports.html=require("./html"),exports.List=exports.list=require("./list"),exports.Min=exports.min=require("./min"),exports.Spec=exports.spec=require("./spec"),exports.Nyan=exports.nyan=require("./nyan"),exports.XUnit=exports.xunit=require("./xunit"),exports.Markdown=exports.markdown=require("./markdown"),exports.Progress=exports.progress=require("./progress"),exports.Landing=exports.landing=require("./landing"),exports.JSONCov=exports["json-cov"]=require("./json-cov"),exports.HTMLCov=exports["html-cov"]=require("./html-cov"),exports.JSONStream=exports["json-stream"]=require("./json-stream")},{"./base":17,"./doc":18,"./dot":19,"./html":21,"./html-cov":20,"./json":25,"./json-cov":23,"./json-stream":24,"./landing":26,"./list":27,"./markdown":28,"./min":29,"./nyan":30,"./progress":31,"./spec":32,"./tap":33,"./xunit":34}],23:[function(require,e,exports){(function(t,n){function r(e,r){s.call(this,e),r=1===arguments.length||r;var a=this,c=[],l=[],u=[];e.on("test end",function(t){c.push(t)}),e.on("pass",function(t){u.push(t)}),e.on("fail",function(t){l.push(t)}),e.on("end",function(){var e=n._$jscoverage||{},s=a.cov=i(e);s.stats=a.stats,s.tests=c.map(o),s.failures=l.map(o),s.passes=u.map(o),r&&t.stdout.write(JSON.stringify(s,null,2))})}function i(t){var e={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=a(n,t[n]);e.files.push(r),e.hits+=r.hits,e.misses+=r.misses,e.sloc+=r.sloc}return e.files.sort(function(t,e){return t.filename.localeCompare(e.filename)}),e.sloc>0&&(e.coverage=e.hits/e.sloc*100),e}function a(t,e){var n={filename:t,coverage:0,hits:0,misses:0,sloc:0,source:{}};return e.source.forEach(function(t,r){r++,0===e[r]?(n.misses++,n.sloc++):void 0!==e[r]&&(n.hits++,n.sloc++),n.source[r]={source:t,coverage:void 0===e[r]?"":e[r]}}),n.coverage=n.hits/n.sloc*100,n}function o(t){return{duration:t.duration,currentRetry:t.currentRetry(),fullTitle:t.fullTitle(),title:t.title}}var s=require("./base");exports=e.exports=r}).call(this,require("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./base":17,_process:58}],24:[function(require,t,exports){(function(e){function n(t){i.call(this,t);var n=this,a=t.total;t.on("start",function(){console.log(JSON.stringify(["start",{total:a}]))}),t.on("pass",function(t){console.log(JSON.stringify(["pass",r(t)]))}),t.on("fail",function(t,e){t=r(t),t.err=e.message,t.stack=e.stack||null,console.log(JSON.stringify(["fail",t]))}),t.on("end",function(){e.stdout.write(JSON.stringify(["end",n.stats]))})}function r(t){return{title:t.title,fullTitle:t.fullTitle(),duration:t.duration,currentRetry:t.currentRetry()}}var i=require("./base");exports=t.exports=n}).call(this,require("_process"))},{"./base":17,_process:58}],25:[function(require,t,exports){(function(e){function n(t){a.call(this,t);var n=this,i=[],o=[],s=[],c=[];t.on("test end",function(t){i.push(t)}),t.on("pass",function(t){c.push(t)}),t.on("fail",function(t){s.push(t)}),t.on("pending",function(t){o.push(t)}),t.on("end",function(){var a={stats:n.stats,tests:i.map(r),pending:o.map(r),failures:s.map(r),passes:c.map(r)};t.testResults=a,e.stdout.write(JSON.stringify(a,null,2))})}function r(t){return{title:t.title,fullTitle:t.fullTitle(),duration:t.duration,currentRetry:t.currentRetry(),err:i(t.err||{})}}function i(t){var e={};return Object.getOwnPropertyNames(t).forEach(function(n){e[n]=t[n]},t),e}var a=require("./base");exports=t.exports=n}).call(this,require("_process"))},{"./base":17,_process:58}],26:[function(require,t,exports){(function(e){function n(t){function n(){var t=Array(s).join("-");return"  "+o("runway",t)}r.call(this,t);var i=this,s=.75*r.window.width|0,c=t.total,l=e.stdout,u=o("plane",""),h=-1,f=0;t.on("start",function(){l.write("\n\n\n  "),a.hide()}),t.on("test end",function(t){var e=h===-1?s*++f/c|0:h;"failed"===t.state&&(u=o("plane crash",""),h=e),l.write("["+(s+1)+"D[2A"),l.write(n()),l.write("\n  "),l.write(o("runway",Array(e).join(""))),l.write(u),l.write(o("runway",Array(s-e).join("")+"\n")),l.write(n()),l.write("[0m")}),t.on("end",function(){a.show(),console.log(),i.epilogue()})}var r=require("./base"),i=require("../utils").inherits,a=r.cursor,o=r.color;exports=t.exports=n,r.colors.plane=0,r.colors["plane crash"]=31,r.colors.runway=90,i(n,r)}).call(this,require("_process"))},{"../utils":39,"./base":17,_process:58}],27:[function(require,t,exports){(function(e){function n(t){r.call(this,t);var n=this,i=0;t.on("start",function(){console.log()}),t.on("test",function(t){e.stdout.write(a("pass","    "+t.fullTitle()+": "))}),t.on("pending",function(t){var e=a("checkmark","  -")+a("pending"," %s");console.log(e,t.fullTitle())}),t.on("pass",function(t){var e=a("checkmark","  "+r.symbols.dot)+a("pass"," %s: ")+a(t.speed,"%dms");o.CR(),console.log(e,t.fullTitle(),t.duration)}),t.on("fail",function(t){o.CR(),console.log(a("fail","  %d) %s"),++i,t.fullTitle())}),t.on("end",n.epilogue.bind(n))}var r=require("./base"),i=require("../utils").inherits,a=r.color,o=r.cursor;exports=t.exports=n,i(n,r)}).call(this,require("_process"))},{"../utils":39,"./base":17,_process:58}],28:[function(require,t,exports){(function(e){function n(t){function n(t){return Array(l).join("#")+" "+t}function o(t,e){var n=e,r=a+t.title;return e=e[r]=e[r]||{suite:t},t.suites.forEach(function(t){o(t,e)}),n}function s(t,e){++e;var n,r="";for(var o in t)"suite"!==o&&(o!==a&&(n=" - ["+o.substring(1)+"]",n+="(#"+i.slug(t[o].suite.fullTitle())+")\n",r+=Array(e).join("  ")+n),r+=s(t[o],e));return r}function c(t){var e=o(t,{});return s(e,0)}r.call(this,t);var l=0,u="";c(t.suite),t.on("suite",function(t){++l;var e=i.slug(t.fullTitle());u+='<a name="'+e+'"></a>\n',u+=n(t.title)+"\n"}),t.on("suite end",function(){--l}),t.on("pass",function(t){var e=i.clean(t.body);u+=t.title+".\n",u+="\n```js\n",u+=e+"\n",u+="```\n\n"}),t.on("end",function(){e.stdout.write("# TOC\n"),e.stdout.write(c(t.suite)),e.stdout.write(u)})}var r=require("./base"),i=require("../utils"),a="$";exports=t.exports=n}).call(this,require("_process"))},{"../utils":39,"./base":17,_process:58}],29:[function(require,t,exports){(function(e){function n(t){r.call(this,t),t.on("start",function(){e.stdout.write("[2J"),e.stdout.write("[1;3H")}),t.on("end",this.epilogue.bind(this))}var r=require("./base"),i=require("../utils").inherits;exports=t.exports=n,i(n,r)}).call(this,require("_process"))},{"../utils":39,"./base":17,_process:58}],30:[function(require,t,exports){(function(e){function n(t){i.call(this,t);var e=this,n=.75*i.window.width|0,a=this.nyanCatWidth=11;this.colorIndex=0,this.numberOfLines=4,this.rainbowColors=e.generateColors(),this.scoreboardWidth=5,this.tick=0,this.trajectories=[[],[],[],[]],this.trajectoryWidthMax=n-a,t.on("start",function(){i.cursor.hide(),e.draw()}),t.on("pending",function(){e.draw()}),t.on("pass",function(){e.draw()}),t.on("fail",function(){e.draw()}),t.on("end",function(){i.cursor.show();for(var t=0;t<e.numberOfLines;t++)r("\n");e.epilogue()})}function r(t){e.stdout.write(t)}var i=require("./base"),a=require("../utils").inherits;exports=t.exports=n,a(n,i),n.prototype.draw=function(){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(),this.tick=!this.tick},n.prototype.drawScoreboard=function(){function t(t,e){r(" "),r(i.color(t,e)),r("\n")}var e=this.stats;t("green",e.passes),t("fail",e.failures),t("pending",e.pending),r("\n"),this.cursorUp(this.numberOfLines)},n.prototype.appendRainbow=function(){for(var t=this.tick?"_":"-",e=this.rainbowify(t),n=0;n<this.numberOfLines;n++){var r=this.trajectories[n];r.length>=this.trajectoryWidthMax&&r.shift(),r.push(e)}},n.prototype.drawRainbow=function(){var t=this;this.trajectories.forEach(function(e){r("["+t.scoreboardWidth+"C"),r(e.join("")),r("\n")}),this.cursorUp(this.numberOfLines)},n.prototype.drawNyanCat=function(){var t=this,e=this.scoreboardWidth+this.trajectories[0].length,n="["+e+"C",i="";r(n),r("_,------,"),r("\n"),r(n),i=t.tick?"  ":"   ",r("_|"+i+"/\\_/\\ "),r("\n"),r(n),i=t.tick?"_":"__";var a=t.tick?"~":"^";r(a+"|"+i+this.face()+" "),r("\n"),r(n),i=t.tick?" ":"  ",r(i+'""  "" '),r("\n"),this.cursorUp(this.numberOfLines)},n.prototype.face=function(){var t=this.stats;return t.failures?"( x .x)":t.pending?"( o .o)":t.passes?"( ^ .^)":"( - .-)"},n.prototype.cursorUp=function(t){r("["+t+"A")},n.prototype.cursorDown=function(t){r("["+t+"B")},n.prototype.generateColors=function(){for(var t=[],e=0;e<42;e++){var n=Math.floor(Math.PI/3),r=e*(1/6),i=Math.floor(3*Math.sin(r)+3),a=Math.floor(3*Math.sin(r+2*n)+3),o=Math.floor(3*Math.sin(r+4*n)+3);t.push(36*i+6*a+o+16)}return t},n.prototype.rainbowify=function(t){if(!i.useColors)return t;var e=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"[38;5;"+e+"m"+t+"[0m"}}).call(this,require("_process"))},{"../utils":39,"./base":17,_process:58}],31:[function(require,t,exports){(function(e){function n(t,n){r.call(this,t);var i=this,s=.5*r.window.width|0,c=t.total,l=0,u=-1;n=n||{},n.open=n.open||"[",n.complete=n.complete||"",n.incomplete=n.incomplete||r.symbols.dot,n.close=n.close||"]",n.verbose=!1,t.on("start",function(){console.log(),o.hide()}),t.on("test end",function(){l++;var t=l/c,r=s*t|0,i=s-r;(r!==u||n.verbose)&&(u=r,o.CR(),e.stdout.write("[J"),e.stdout.write(a("progress","  "+n.open)),e.stdout.write(Array(r).join(n.complete)),e.stdout.write(Array(i).join(n.incomplete)),e.stdout.write(a("progress",n.close)),n.verbose&&e.stdout.write(a("progress"," "+l+" of "+c)))}),t.on("end",function(){o.show(),console.log(),i.epilogue()})}var r=require("./base"),i=require("../utils").inherits,a=r.color,o=r.cursor;exports=t.exports=n,r.colors.progress=90,i(n,r)}).call(this,require("_process"))},{"../utils":39,"./base":17,_process:58}],32:[function(require,t,exports){function e(t){function e(){return Array(o).join("  ")}n.call(this,t);var r=this,o=0,s=0;t.on("start",function(){console.log()}),t.on("suite",function(t){++o,console.log(i("suite","%s%s"),e(),t.title)}),t.on("suite end",function(){--o,1===o&&console.log()}),t.on("pending",function(t){var n=e()+i("pending","  - %s");console.log(n,t.title)}),t.on("pass",function(t){var r;"fast"===t.speed?(r=e()+i("checkmark","  "+n.symbols.ok)+i("pass"," %s"),a.CR(),console.log(r,t.title)):(r=e()+i("checkmark","  "+n.symbols.ok)+i("pass"," %s")+i(t.speed," (%dms)"),a.CR(),console.log(r,t.title,t.duration))}),t.on("fail",function(t){a.CR(),console.log(e()+i("fail","  %d) %s"),++s,t.title)}),t.on("end",r.epilogue.bind(r))}var n=require("./base"),r=require("../utils").inherits,i=n.color,a=n.cursor;exports=t.exports=e,r(e,n)},{"../utils":39,"./base":17}],33:[function(require,t,exports){function e(t){r.call(this,t);var e=1,i=0,a=0;t.on("start",function(){var e=t.grepTotal(t.suite);console.log("%d..%d",1,e)}),t.on("test end",function(){++e}),t.on("pending",function(t){console.log("ok %d %s # SKIP -",e,n(t))}),t.on("pass",function(t){i++,console.log("ok %d %s",e,n(t))}),t.on("fail",function(t,r){a++,console.log("not ok %d %s",e,n(t)),r.stack&&console.log(r.stack.replace(/^/gm,"  "))}),t.on("end",function(){console.log("# tests "+(i+a)),console.log("# pass "+i),console.log("# fail "+a)})}function n(t){return t.fullTitle().replace(/#/g,"")}var r=require("./base");exports=t.exports=e},{"./base":17}],34:[function(require,e,exports){(function(t,n){function r(t,e){a.call(this,t);var n=this.stats,r=[],o=this;if(e.reporterOptions&&e.reporterOptions.output){if(!c.createWriteStream)throw Error("file output not supported in browser");u.sync(h.dirname(e.reporterOptions.output)),o.fileStream=c.createWriteStream(e.reporterOptions.output)}t.on("pending",function(t){r.push(t)}),t.on("pass",function(t){r.push(t)}),t.on("fail",function(t){r.push(t)}),t.on("end",function(){o.write(i("testsuite",{name:"Mocha Tests",tests:n.tests,failures:n.failures,errors:n.failures,skipped:n.tests-n.failures-n.passes,timestamp:(new f).toUTCString(),time:n.duration/1e3||0},!1)),r.forEach(function(t){o.test(t)}),o.write("</testsuite>")})}function i(t,e,n,r){var i,a=n?"/>":">",o=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&o.push(s+'="'+l(e[s])+'"');return i="<"+t+(o.length?" "+o.join(" "):"")+a,r&&(i+=r+"</"+t+a),i}var a=require("./base"),o=require("../utils"),s=o.inherits,c=require("fs"),l=o.escape,u=require("mkdirp"),h=require("path"),f=n.Date;n.setTimeout,n.setInterval,n.clearTimeout,n.clearInterval;exports=e.exports=r,s(r,a),r.prototype.done=function(t,e){this.fileStream?this.fileStream.end(function(){e(t)}):e(t)},r.prototype.write=function(e){this.fileStream?this.fileStream.write(e+"\n"):"object"==typeof t&&t.stdout?t.stdout.write(e+"\n"):console.log(e)},r.prototype.test=function(t){var e={classname:t.parent.fullTitle(),name:t.title,time:t.duration/1e3||0};if("failed"===t.state){var n=t.err;this.write(i("testcase",e,!1,i("failure",{},!1,l(n.message)+"\n"+l(n.stack))))}else t.isPending()?this.write(i("testcase",e,!1,i("skipped",{},!0))):this.write(i("testcase",e,!0))}}).call(this,require("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils":39,"./base":17,_process:58,fs:43,mkdirp:55,path:43}],35:[function(require,e,exports){(function(t){function n(t,e){this.title=t,this.fn=e,this.body=""+(e||""),this.async=e&&e.length,this.sync=!this.async,this._timeout=2e3,this._slow=75,this._enableTimeouts=!0,this.timedOut=!1,this._trace=Error("done() called multiple times"),this._retries=-1,this._currentRetry=0,this.pending=!1}var r=require("events").EventEmitter,i=require("./pending"),a=require("debug")("mocha:runnable"),o=require("./ms"),s=require("./utils"),c=s.inherits,l=t.Date,u=t.setTimeout,h=(t.setInterval,t.clearTimeout),f=(t.clearInterval,Object.prototype.toString);e.exports=n,c(n,r),n.prototype.timeout=function(t){return arguments.length?(0===t&&(this._enableTimeouts=!1),"string"==typeof t&&(t=o(t)),a("timeout %d",t),this._timeout=t,this.timer&&this.resetTimeout(),this):this._timeout},n.prototype.slow=function(t){return arguments.length?("string"==typeof t&&(t=o(t)),a("timeout %d",t),this._slow=t,this):this._slow},n.prototype.enableTimeouts=function(t){return arguments.length?(a("enableTimeouts %s",t),this._enableTimeouts=t,this):this._enableTimeouts},n.prototype.skip=function(){throw new i},n.prototype.isPending=function(){return this.pending||this.parent&&this.parent.isPending()},n.prototype.retries=function(t){return arguments.length?void(this._retries=t):this._retries},n.prototype.currentRetry=function(t){return arguments.length?void(this._currentRetry=t):this._currentRetry},n.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},n.prototype.clearTimeout=function(){h(this.timer)},n.prototype.inspect=function(){return JSON.stringify(this,function(t,e){if("_"!==t[0])return"parent"===t?"#<Suite>":"ctx"===t?"#<Context>":e},2)},n.prototype.resetTimeout=function(){var t=this,e=this.timeout()||1e9;this._enableTimeouts&&(this.clearTimeout(),this.timer=u(function(){t._enableTimeouts&&(t.callback(Error("timeout of "+e+"ms exceeded. Ensure the done() callback is being called in this test.")),t.timedOut=!0)},e))},n.prototype.globals=function(t){return arguments.length?void(this._allowedGlobals=t):this._allowedGlobals},n.prototype.run=function(t){function e(t){o||(o=!0,c.emit("error",t||Error("done() called multiple times; stacktrace may be inaccurate")))}function n(n){var r=c.timeout();if(!c.timedOut){if(a)return e(n||c._trace);c.clearTimeout(),c.duration=new l-u,a=!0,!n&&c.duration>r&&c._enableTimeouts&&(n=Error("timeout of "+r+"ms exceeded. Ensure the done() callback is being called in this test.")),t(n)}}function r(t){var e=t.call(h);if(e&&"function"==typeof e.then)c.resetTimeout(),e.then(function(){return n(),null},function(t){n(t||Error("Promise rejected with no or falsy reason"))});else{if(c.asyncOnly)return n(Error("--async-only option in use without declaring `done()` or returning a promise"));n()}}function i(t){t.call(h,function(t){return t instanceof Error||"[object Error]"===f.call(t)?n(t):t?n("[object Object]"===Object.prototype.toString.call(t)?Error("done() invoked with non-Error: "+JSON.stringify(t)):Error("done() invoked with non-Error: "+t)):void n()})}var a,o,c=this,u=new l,h=this.ctx;if(h&&h.runnable&&h.runnable(this),this.callback=n,this.async){if(this.resetTimeout(),this.allowUncaught)return i(this.fn);try{i(this.fn)}catch(t){n(s.getError(t))}}else{if(this.allowUncaught)return r(this.fn),void n();try{this.isPending()?n():r(this.fn)}catch(t){n(s.getError(t))}}}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ms":15,"./pending":16,"./utils":39,debug:2,events:3}],36:[function(require,e,exports){(function(t,n){function r(t,e){var n=this;this._globals=[],this._abort=!1,this._delay=e,this.suite=t,this.started=!1,this.total=t.total(),this.failures=0,this.on("test end",function(t){n.checkGlobals(t)}),this.on("hook end",function(t){n.checkGlobals(t)}),this._defaultGrep=/.*/,this.grep(this._defaultGrep),this.globals(this.globalProps().concat(o()))}function i(t){function e(t){for(var e=0;e<t.length;e++)delete t[e].fn}x(t._beforeAll)&&e(t._beforeAll),x(t._beforeEach)&&e(t._beforeEach),x(t._afterAll)&&e(t._afterAll),x(t._afterEach)&&e(t._afterEach);for(var n=0;n<t.tests.length;n++)delete t.tests[n].fn}function a(t,e){return p(e,function(e){if(/^d+/.test(e))return!1;if(n.navigator&&/^getInterface/.test(e))return!1;if(n.navigator&&/^\d+/.test(e))return!1;if(/^mocha-/.test(e))return!1;var r=p(t,function(t){return~t.indexOf("*")?0===e.indexOf(t.split("*")[0]):e===t});return!(r.length||n.navigator&&"onerror"===e)})}function o(){if("object"==typeof t&&"string"==typeof t.version){var e=t.version.split("."),n=l.reduce(e,function(t,e){return t<<8|e});if(n<2315)return["errno"]}return[]}var s=require("events").EventEmitter,c=require("./pending"),l=require("./utils"),u=l.inherits,h=require("debug")("mocha:runner"),f=require("./runnable"),p=l.filter,d=l.indexOf,m=l.keys,g=l.stackTraceFilter(),v=l.stringify,y=l.type,b=l.undefinedError,x=l.isArray,w=["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date","setImmediate","clearImmediate"];e.exports=r,r.immediately=n.setImmediate||t.nextTick,u(r,s),r.prototype.grep=function(t,e){return h("grep %s",t),this._grep=t,this._invert=e,this.total=this.grepTotal(this.suite),this},r.prototype.grepTotal=function(t){var e=this,n=0;return t.eachTest(function(t){var r=e._grep.test(t.fullTitle());e._invert&&(r=!r),r&&n++}),n},r.prototype.globalProps=function(){for(var t=m(n),e=0;e<w.length;++e)~d(t,w[e])||t.push(w[e]);return t},r.prototype.globals=function(t){return arguments.length?(h("globals %j",t),this._globals=this._globals.concat(t),this):this._globals},r.prototype.checkGlobals=function(t){if(!this.ignoreLeaks){var e,n=this._globals,r=this.globalProps();t&&(n=n.concat(t._allowedGlobals||[])),this.prevGlobalsLength!==r.length&&(this.prevGlobalsLength=r.length,e=a(n,r),this._globals=this._globals.concat(e),e.length>1?this.fail(t,Error("global leaks detected: "+e.join(", "))):e.length&&this.fail(t,Error("global leak detected: "+e[0])))}},r.prototype.fail=function(t,e){++this.failures,t.state="failed",e instanceof Error||e&&"string"==typeof e.message||(e=Error("the "+y(e)+" "+v(e)+" was thrown, throw an Error :)")),e.stack=this.fullStackTrace||!e.stack?e.stack:g(e.stack),this.emit("fail",t,e)},r.prototype.failHook=function(t,e){t.ctx&&t.ctx.currentTest&&(t.originalTitle=t.originalTitle||t.title,t.title=t.originalTitle+' for "'+t.ctx.currentTest.title+'"'),this.fail(t,e),this.suite.bail()&&this.emit("end")},r.prototype.hook=function(t,e){function n(t){var r=a[t];return r?(o.currentRunnable=r,r.ctx.currentTest=o.test,o.emit("hook",r),r.listeners("error").length||r.on("error",function(t){o.failHook(r,t)}),void r.run(function(a){var s=r.error();if(s&&o.fail(o.test,s),a){if(!(a instanceof c))return o.failHook(r,a),e(a);i.pending=!0}o.emit("hook end",r),delete r.ctx.currentTest,n(++t)})):e()}var i=this.suite,a=i["_"+t],o=this;r.immediately(function(){n(0)})},r.prototype.hooks=function(t,e,n){function r(o){return i.suite=o,o?void i.hook(t,function(t){if(t){var o=i.suite;return i.suite=a,n(t,o)}r(e.pop())}):(i.suite=a,n())}var i=this,a=this.suite;r(e.pop())},r.prototype.hookUp=function(t,e){var n=[this.suite].concat(this.parents()).reverse();this.hooks(t,n,e)},r.prototype.hookDown=function(t,e){var n=[this.suite].concat(this.parents());this.hooks(t,n,e)},r.prototype.parents=function(){for(var t=this.suite,e=[];t.parent;)t=t.parent,e.push(t);return e},r.prototype.runTest=function(t){var e=this,n=this.test;if(this.asyncOnly&&(n.asyncOnly=!0),this.allowUncaught)return n.allowUncaught=!0,n.run(t);try{n.on("error",function(t){e.fail(n,t)}),n.run(t)}catch(e){t(e)}},r.prototype.runTests=function(t,e){function n(t,r,i){var a=o.suite;o.suite=i?r.parent:r,o.suite?o.hookUp("afterEach",function(t,i){return o.suite=a,t?n(t,i,!0):void e(r)}):(o.suite=a,e(r))}function i(l,u){if(o.failures&&t._bail)return e();if(o._abort)return e();if(l)return n(l,u,!0);if(a=s.shift(),!a)return e();var h=o._grep.test(a.fullTitle());return o._invert&&(h=!h),h?a.isPending()?(o.emit("pending",a),o.emit("test end",a),i()):(o.emit("test",o.test=a),void o.hookDown("beforeEach",function(e,r){return t.isPending()?(o.emit("pending",a),o.emit("test end",a),i()):e?n(e,r,!1):(o.currentRunnable=o.test,void o.runTest(function(t){if(a=o.test,t){var e=a.currentRetry();if(t instanceof c)a.pending=!0,o.emit("pending",a);else{if(e<a.retries()){var n=a.clone();return n.currentRetry(e+1),s.unshift(n),o.hookUp("afterEach",i)}o.fail(a,t)}return o.emit("test end",a),t instanceof c?i():o.hookUp("afterEach",i)}a.state="passed",o.emit("pass",a),o.emit("test end",a),o.hookUp("afterEach",i)}))})):void(o._grep!==o._defaultGrep?r.immediately(i):i())}var a,o=this,s=t.tests.slice();this.next=i,this.hookErr=n,i()},r.prototype.runSuite=function(t,e){function n(e){if(e)return e===t?i():i(e);if(o._abort)return i();var s=t.suites[a++];return s?void(o._grep!==o._defaultGrep?r.immediately(function(){o.runSuite(s,n)}):o.runSuite(s,n)):i()}function i(r){o.suite=t,o.nextSuite=n,c?e(r):(c=!0,delete o.test,o.hook("afterAll",function(){o.emit("suite end",t),e(r)}))}var a=0,o=this,s=this.grepTotal(t),c=!1;return h("run suite %s",t.fullTitle()),!s||o.failures&&t._bail?e():(this.emit("suite",this.suite=t),this.nextSuite=n,void this.hook("beforeAll",function(e){return e?i():void o.runTests(t,n)}))},r.prototype.uncaught=function(t){t?h("uncaught exception %s",t!==function(){return this}.call(t)?t:t.message||t):(h("uncaught undefined exception"),t=b()),t.uncaught=!0;var e=this.currentRunnable;if(!e)return e=new f("Uncaught error outside test suite"),e.parent=this.suite,void(this.started?this.fail(e,t):(this.emit("start"),this.fail(e,t),this.emit("end")));if(e.clearTimeout(),!e.state){if(this.fail(e,t),"test"===e.type)return this.emit("test end",e),void this.hookUp("afterEach",this.next);if("hook"===e.type){var n=this.suite;return e.fullTitle().indexOf("after each")>-1?this.hookErr(t,n,!0):e.fullTitle().indexOf("before each")>-1?this.hookErr(t,n,!1):this.nextSuite(n)}this.emit("end")}},r.prototype.run=function(e){function n(t){a.uncaught(t)}function r(){a.started=!0,a.emit("start"),a.runSuite(o,function(){h("finished running"),a.emit("end")})}var a=this,o=this.suite;return e=e||function(){},h("start"),this.on("suite end",i),this.on("end",function(){h("end"),t.removeListener("uncaughtException",n),e(a.failures)}),t.on("uncaughtException",n),this._delay?(this.emit("waiting",o),o.once("run",r)):r(),this},r.prototype.abort=function(){return h("aborting"),this._abort=!0,this}}).call(this,require("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./pending":16,"./runnable":35,"./utils":39,_process:58,debug:2,events:3}],37:[function(require,t,exports){function e(t,e){function n(){}this.title=t,n.prototype=e,this.ctx=new n,this.suites=[],this.tests=[],this.pending=!1,this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!t,this._timeout=2e3,this._enableTimeouts=!0,this._slow=75,this._bail=!1,this._retries=-1,this.delayed=!1}var n=require("events").EventEmitter,r=require("./hook"),i=require("./utils"),a=i.inherits,o=require("debug")("mocha:suite"),s=require("./ms");exports=t.exports=e,exports.create=function(t,n){var r=new e(n,t.ctx);return r.parent=t,n=r.fullTitle(),t.addSuite(r),r},a(e,n),e.prototype.clone=function(){var t=new e(this.title);return o("clone"),t.ctx=this.ctx,t.timeout(this.timeout()),t.retries(this.retries()),t.enableTimeouts(this.enableTimeouts()),t.slow(this.slow()),t.bail(this.bail()),t},e.prototype.timeout=function(t){return arguments.length?(""+t=="0"&&(this._enableTimeouts=!1),"string"==typeof t&&(t=s(t)),o("timeout %d",t),this._timeout=parseInt(t,10),this):this._timeout},e.prototype.retries=function(t){return arguments.length?(o("retries %d",t),this._retries=parseInt(t,10)||0,this):this._retries},e.prototype.enableTimeouts=function(t){return arguments.length?(o("enableTimeouts %s",t),this._enableTimeouts=t,this):this._enableTimeouts},e.prototype.slow=function(t){return arguments.length?("string"==typeof t&&(t=s(t)),o("slow %d",t),this._slow=t,this):this._slow},e.prototype.bail=function(t){return arguments.length?(o("bail %s",t),this._bail=t,this):this._bail},e.prototype.isPending=function(){return this.pending||this.parent&&this.parent.isPending()},e.prototype.beforeAll=function(t,e){if(this.isPending())return this;"function"==typeof t&&(e=t,t=e.name),t='"before all" hook'+(t?": "+t:"");var n=new r(t,e);return n.parent=this,n.timeout(this.timeout()),n.retries(this.retries()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.ctx=this.ctx,this._beforeAll.push(n),this.emit("beforeAll",n),this},e.prototype.afterAll=function(t,e){if(this.isPending())return this;"function"==typeof t&&(e=t,t=e.name),t='"after all" hook'+(t?": "+t:"");var n=new r(t,e);return n.parent=this,n.timeout(this.timeout()),n.retries(this.retries()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.ctx=this.ctx,this._afterAll.push(n),this.emit("afterAll",n),this},e.prototype.beforeEach=function(t,e){if(this.isPending())return this;"function"==typeof t&&(e=t,t=e.name),t='"before each" hook'+(t?": "+t:"");var n=new r(t,e);return n.parent=this,n.timeout(this.timeout()),n.retries(this.retries()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.ctx=this.ctx,this._beforeEach.push(n),this.emit("beforeEach",n),this},e.prototype.afterEach=function(t,e){if(this.isPending())return this;"function"==typeof t&&(e=t,t=e.name),t='"after each" hook'+(t?": "+t:"");var n=new r(t,e);return n.parent=this,n.timeout(this.timeout()),n.retries(this.retries()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.ctx=this.ctx,this._afterEach.push(n),this.emit("afterEach",n),this},e.prototype.addSuite=function(t){return t.parent=this,t.timeout(this.timeout()),t.retries(this.retries()),t.enableTimeouts(this.enableTimeouts()),t.slow(this.slow()),t.bail(this.bail()),this.suites.push(t),this.emit("suite",t),this},e.prototype.addTest=function(t){return t.parent=this,t.timeout(this.timeout()),t.retries(this.retries()),t.enableTimeouts(this.enableTimeouts()),t.slow(this.slow()),t.ctx=this.ctx,this.tests.push(t),this.emit("test",t),this},e.prototype.fullTitle=function(){if(this.parent){var t=this.parent.fullTitle();if(t)return t+" "+this.title}return this.title},e.prototype.total=function(){return i.reduce(this.suites,function(t,e){return t+e.total()},0)+this.tests.length},e.prototype.eachTest=function(t){return i.forEach(this.tests,t),i.forEach(this.suites,function(e){e.eachTest(t)}),this},e.prototype.run=function(){this.root&&this.emit("run")}},{"./hook":7,"./ms":15,"./utils":39,debug:2,events:3}],38:[function(require,t,exports){function e(t,e){n.call(this,t,e),this.pending=!e,this.type="test"}var n=require("./runnable"),r=require("./utils").inherits;t.exports=e,r(e,n),e.prototype.clone=function(){
var t=new e(this.title,this.fn);return t.timeout(this.timeout()),t.slow(this.slow()),t.enableTimeouts(this.enableTimeouts()),t.retries(this.retries()),t.currentRetry(this.currentRetry()),t.globals(this.globals()),t.parent=this.parent,t.file=this.file,t.ctx=this.ctx,t}},{"./runnable":35,"./utils":39}],39:[function(require,t,exports){(function(t,e){function n(t){return!~m.indexOf(t)}function r(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew[ \t]+(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}function i(t,e){switch(e=e||exports.type(t)){case"function":return"[Function]";case"object":return"{}";case"array":return"[]";default:return""+t}}function a(t,e,n){function r(t,e){return Array(e).join(t)}function i(t){switch(exports.type(t)){case"null":case"undefined":t="["+t+"]";break;case"array":case"object":t=a(t,e,n+1);break;case"boolean":case"regexp":case"symbol":case"number":t=0===t&&1/t===-(1/0)?"-0":""+t;break;case"date":var r;r=isNaN(t.getTime())?""+t:t.toISOString?t.toISOString():d(t),t="[Date: "+r+"]";break;case"buffer":var i=t.toJSON();i=i.data&&i.type?i.data:i,t="[Buffer: "+a(i,2,n+1)+"]";break;default:t="[Function]"===t||"[Circular]"===t?t:JSON.stringify(t)}return t}if(void 0===e)return i(t);n=n||1;var o=e*n,s=g(t)?"[":"{",c=g(t)?"]":"}",l="number"==typeof t.length?t.length:exports.keys(t).length;for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(--l,s+="\n "+r(" ",o)+(g(t)?"":'"'+u+'": ')+i(t[u])+(l?",":""));return s+(1!==s.length?"\n"+r(" ",--o)+c:c)}var o=require("path").basename,s=require("debug")("mocha:watch"),c=require("fs").existsSync||require("path").existsSync,l=require("glob"),u=require("path").join,h=require("fs").readdirSync,f=require("fs").statSync,p=require("fs").watchFile,d=require("to-iso-string"),m=["node_modules",".git"];exports.inherits=require("util").inherits,exports.escape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},exports.forEach=function(t,e,n){for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r)},exports.isString=function(t){return"string"==typeof t},exports.map=function(t,e,n){for(var r=[],i=0,a=t.length;i<a;i++)r.push(e.call(n,t[i],i,t));return r},exports.indexOf=function(t,e,n){for(var r=n||0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1},exports.reduce=function(t,e,n){for(var r=n,i=0,a=t.length;i<a;i++)r=e(r,t[i],i,t);return r},exports.filter=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var a=t[r];e(a,r,t)&&n.push(a)}return n},exports.keys="function"==typeof Object.keys?Object.keys:function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e},exports.watch=function(t,e){var n={interval:100};t.forEach(function(t){s("file %s",t),p(t,n,function(n,r){r.mtime<n.mtime&&e(t)})})};var g="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};exports.isArray=g,void 0!==e&&e.prototype&&(e.prototype.toJSON=e.prototype.toJSON||function(){return Array.prototype.slice.call(this,0)}),exports.files=function(t,e,r){r=r||[],e=e||["js"];var i=RegExp("\\.("+e.join("|")+")$");return h(t).filter(n).forEach(function(n){n=u(t,n),f(n).isDirectory()?exports.files(n,e,r):n.match(i)&&r.push(n)}),r},exports.slug=function(t){return t.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},exports.clean=function(t){t=t.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,"").replace(/^function *\(.*\)\s*\{|\(.*\) *=> *\{?/,"").replace(/\s+\}$/,"");var e=t.match(/^\n?( *)/)[1].length,n=t.match(/^\n?(\t*)/)[1].length,r=RegExp("^\n?"+(n?"\t":" ")+"{"+(n?n:e)+"}","gm");return t=t.replace(r,""),exports.trim(t)},exports.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},exports.parseQuery=function(t){return exports.reduce(t.replace("?","").split("&"),function(t,e){var n=e.indexOf("="),r=e.slice(0,n),i=e.slice(++n);return t[r]=decodeURIComponent(i),t},{})},exports.highlightTags=function(t){for(var e=document.getElementById("mocha").getElementsByTagName(t),n=0,i=e.length;n<i;++n)e[n].innerHTML=r(e[n].innerHTML)},exports.type=function(t){return void 0===t?"undefined":null===t?"null":void 0!==e&&e.isBuffer(t)?"buffer":Object.prototype.toString.call(t).replace(/^\[.+\s(.+?)\]$/,"$1").toLowerCase()},exports.stringify=function(t){var e=exports.type(t);if(!~exports.indexOf(["object","array","function"],e)){if("buffer"!==e)return a(t);var n=t.toJSON();return a(n.data&&n.type?n.data:n,2).replace(/,(\n|$)/g,"$1")}for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))return a(exports.canonicalize(t),2).replace(/,(\n|$)/g,"$1");return i(t,e)},exports.isBuffer=function(t){return void 0!==e&&e.isBuffer(t)},exports.canonicalize=function(t,e){function n(t,n){e.push(t),n(),e.pop()}var r,a,o=exports.type(t);if(e=e||[],exports.indexOf(e,t)!==-1)return"[Circular]";switch(o){case"undefined":case"buffer":case"null":r=t;break;case"array":n(t,function(){r=exports.map(t,function(t){return exports.canonicalize(t,e)})});break;case"function":for(a in t){r={};break}if(!r){r=i(t,o);break}case"object":r=r||{},n(t,function(){exports.forEach(exports.keys(t).sort(),function(n){r[n]=exports.canonicalize(t[n],e)})});break;case"date":case"number":case"regexp":case"boolean":case"symbol":r=t;break;default:r=t+""}return r},exports.lookupFiles=function t(e,n,r){var i=[],a=RegExp("\\.("+n.join("|")+")$");if(!c(e)){if(!c(e+".js")){if(i=l.sync(e),!i.length)throw Error("cannot resolve path (or pattern) '"+e+"'");return i}e+=".js"}try{var s=f(e);if(s.isFile())return e}catch(t){return}return h(e).forEach(function(s){s=u(e,s);try{var c=f(s);if(c.isDirectory())return void(r&&(i=i.concat(t(s,n,r))))}catch(t){return}c.isFile()&&a.test(s)&&"."!==o(s)[0]&&i.push(s)}),i},exports.undefinedError=function(){return Error("Caught undefined error, did you throw without specifying what?")},exports.getError=function(t){return t||exports.undefinedError()},exports.stackTraceFilter=function(){function e(t){return~t.indexOf("node_modules"+r+"mocha"+r)||~t.indexOf("components"+r+"mochajs"+r)||~t.indexOf("components"+r+"mocha"+r)||~t.indexOf(r+"mocha.js")}function n(t){return~t.indexOf("(timers.js:")||~t.indexOf("(events.js:")||~t.indexOf("(node.js:")||~t.indexOf("(module.js:")||~t.indexOf("GeneratorFunctionPrototype.next (native)")||!1}var r="/",i="undefined"==typeof document?{node:!0}:{browser:!0},a=i.node?t.cwd()+r:("undefined"==typeof location?window.location:location).href.replace(/\/[^\/]*$/,"/");return function(t){return t=t.split("\n"),t=exports.reduce(t,function(t,r){return e(r)?t:i.node&&n(r)?t:(/\(?.+:\d+:\d+\)?$/.test(r)&&(r=r.replace(a,"")),t.push(r),t)},[]),t.join("\n")}}}).call(this,require("_process"),require("buffer").Buffer)},{_process:58,buffer:45,debug:2,fs:43,glob:43,path:43,"to-iso-string":72,util:75}],40:[function(require,t,exports){"use strict";function e(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)o[e]=t[e],s[t.charCodeAt(e)]=e;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63}function n(t){var e,n,r,i,a,o,l=t.length;if(l%4>0)throw Error("Invalid string. Length must be a multiple of 4");a="="===t[l-2]?2:"="===t[l-1]?1:0,o=new c(3*l/4-a),r=a>0?l-4:l;var u=0;for(e=0,n=0;e<r;e+=4,n+=3)i=s[t.charCodeAt(e)]<<18|s[t.charCodeAt(e+1)]<<12|s[t.charCodeAt(e+2)]<<6|s[t.charCodeAt(e+3)],o[u++]=i>>16&255,o[u++]=i>>8&255,o[u++]=255&i;return 2===a?(i=s[t.charCodeAt(e)]<<2|s[t.charCodeAt(e+1)]>>4,o[u++]=255&i):1===a&&(i=s[t.charCodeAt(e)]<<10|s[t.charCodeAt(e+1)]<<4|s[t.charCodeAt(e+2)]>>2,o[u++]=i>>8&255,o[u++]=255&i),o}function r(t){return o[t>>18&63]+o[t>>12&63]+o[t>>6&63]+o[63&t]}function i(t,e,n){for(var i,a=[],o=e;o<n;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],a.push(r(i));return a.join("")}function a(t){for(var e,n=t.length,r=n%3,a="",s=[],c=16383,l=0,u=n-r;l<u;l+=c)s.push(i(t,l,l+c>u?u:l+c));return 1===r?(e=t[n-1],a+=o[e>>2],a+=o[e<<4&63],a+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],a+=o[e>>10],a+=o[e>>4&63],a+=o[e<<2&63],a+="="),s.push(a),s.join("")}exports.toByteArray=n,exports.fromByteArray=a;var o=[],s=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array;e()},{}],41:[function(require,t,exports){},{}],42:[function(require,t,exports){(function(e){function n(t){return this instanceof n?(t=t||{},r.call(this,t),void(this.label=void 0!==t.label?t.label:"stdout")):new n(t)}var r=require("stream").Writable,i=require("util").inherits;t.exports=n,i(n,r),n.prototype._write=function(t,n,r){var i=t.toString?""+t:t;this.label===!1?console.log(i):console.log(this.label+":",i),e.nextTick(r)}}).call(this,require("_process"))},{_process:58,stream:59,util:75}],43:[function(require,t,exports){arguments[4][41][0].apply(exports,arguments)},{dup:41}],44:[function(require,e,exports){(function(t){"use strict";var e=require("buffer"),n=e.Buffer,r=e.SlowBuffer,i=e.kMaxLength||2147483647;exports.alloc=function(t,e,r){if("function"==typeof n.alloc)return n.alloc(t,e,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof t)throw new TypeError("size must be a number");if(t>i)throw new RangeError("size is too large");var a=r,o=e;void 0===o&&(a=void 0,o=0);var s=new n(t);if("string"==typeof o)for(var c=new n(o,a),l=c.length,u=-1;++u<t;)s[u]=c[u%l];else s.fill(o);return s},exports.allocUnsafe=function(t){if("function"==typeof n.allocUnsafe)return n.allocUnsafe(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>i)throw new RangeError("size is too large");return new n(t)},exports.from=function(e,r,i){if("function"==typeof n.from&&(!t.Uint8Array||Uint8Array.from!==n.from))return n.from(e,r,i);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new n(e,r);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var a=r;if(1===arguments.length)return new n(e);void 0===a&&(a=0);var o=i;if(void 0===o&&(o=e.byteLength-a),a>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(o>e.byteLength-a)throw new RangeError("'length' is out of bounds");return new n(e.slice(a,a+o))}if(n.isBuffer(e)){var s=new n(e.length);return e.copy(s,0,0,e.length),s}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new n(e);if("Buffer"===e.type&&Array.isArray(e.data))return new n(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},exports.allocUnsafeSlow=function(t){if("function"==typeof n.allocUnsafeSlow)return n.allocUnsafeSlow(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>=i)throw new RangeError("size is too large");return new r(t)}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:45}],45:[function(require,e,exports){(function(t){"use strict";function e(){try{var t=new Uint8Array(1);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=i.prototype):(null===t&&(t=new i(e)),t.length=e),t}function i(t,e,n){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(t,e,n);if("number"==typeof t){if("string"==typeof e)throw Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,e,n)}function a(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,n,r):"string"==typeof e?l(t,e,n):f(t,e)}function o(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number')}function s(t,e,n,i){return o(e),e<=0?r(t,e):void 0!==n?"string"==typeof i?r(t,e).fill(n,i):r(t,e).fill(n):r(t,e)}function c(t,e){if(o(e),t=r(t,e<0?0:0|p(e)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;n++)t[n]=0;return t}function l(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!i.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var a=0|m(e,n);return t=r(t,a),t.write(e,n),t}function u(t,e){var n=0|p(e.length);t=r(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function h(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),i.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=i.prototype):t=u(t,e),t}function f(t,e){if(i.isBuffer(e)){var n=0|p(e.length);return t=r(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||X(e.length)?r(t,0):u(t,e);if("Buffer"===e.type&&K(e.data))return u(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),i.alloc(+t)}function m(t,e){if(i.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(r)return V(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return C(this,e,n);case"binary":return k(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r){function i(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,o=t.length,s=e.length;if(void 0!==r&&(r=(r+"").toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,o/=2,s/=2,n/=2}for(var c=-1,l=0;n+l<o;l++)if(i(t,n+l)===i(e,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===s)return(n+c)*a}else c!==-1&&(l-=l-c),c=-1;return-1}function b(t,e,n,r){n=+n||0;var i=t.length-n;r?(r=+r,r>i&&(r=i)):r=i;var a=e.length;if(a%2!==0)throw Error("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;o++){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function x(t,e,n,r){return q(V(e,t.length-n),t,n,r)}function w(t,e,n,r){return q(G(e),t,n,r)}function _(t,e,n,r){return w(t,e,n,r)}function E(t,e,n,r){return q(W(e),t,n,r)}function M(t,e,n,r){return q(H(e,t.length-n),t,n,r)}function T(t,e,n){return 0===e&&n===t.length?Y.fromByteArray(t):Y.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a=t[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var c,l,u,h;switch(s){case 1:a<128&&(o=a);break;case 2:c=t[i+1],128===(192&c)&&(h=(31&a)<<6|63&c,h>127&&(o=h));break;case 3:c=t[i+1],l=t[i+2],128===(192&c)&&128===(192&l)&&(h=(15&a)<<12|(63&c)<<6|63&l,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:c=t[i+1],l=t[i+2],u=t[i+3],128===(192&c)&&128===(192&l)&&128===(192&u)&&(h=(15&a)<<18|(63&c)<<12|(63&l)<<6|63&u,h>65535&&h<1114112&&(o=h))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return A(r)}function A(t){var e=t.length;if(e<=J)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=J));return n}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(t[i]);return r}function L(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;a++)i+=z(t[a]);return i}function R(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function P(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,a,o){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function B(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function O(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,i){return i||O(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,n,r,23,4),n+4}function I(t,e,n,r,i){return i||O(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,n,r,52,8),n+8}function j(t){if(t=U(t).replace(Q,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function U(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){e=e||1/0;for(var n,r=t.length,i=null,a=[],o=0;o<r;o++){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function G(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function H(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);o++)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function W(t){return Y.toByteArray(j(t))}function q(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function X(t){return t!==t}var Y=require("base64-js"),Z=require("ieee754"),K=require("isarray");exports.Buffer=i,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:e(),exports.kMaxLength=n(),i.poolSize=8192,i._augment=function(t){return t.__proto__=i.prototype,t},i.from=function(t,e,n){return a(null,t,e,n)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(t,e,n){return s(null,t,e,n)},i.allocUnsafe=function(t){return c(null,t)},i.allocUnsafeSlow=function(t){return c(null,t)},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,a=0,o=Math.min(n,r);a<o;++a)if(t[a]!==e[a]){n=t[a],r=e[a];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!K(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var r=i.allocUnsafe(e),a=0;for(n=0;n<t.length;n++){var o=t[n];if(!i.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},i.byteLength=m,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},i.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):g.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,n,r,a){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),e<0||n>t.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&e>=n)return 0;if(r>=a)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,a>>>=0,this===t)return 0;for(var o=a-r,s=n-e,c=Math.min(o,s),l=this.slice(r,a),u=t.slice(e,n),h=0;h<c;++h)if(l[h]!==u[h]){o=l[h],s=u[h];break}return o<s?-1:s<o?1:0},i.prototype.indexOf=function(t,e,n){if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:y(this,t,e,n);if("number"==typeof t)return i.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):y(this,[t],e,n);throw new TypeError("val must be string, number or Buffer")},i.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return w(this,t,e,n);case"binary":return _(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;i.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r;if(i.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=i.prototype;else{var a=e-t;r=new i(a,void 0);for(var o=0;o<a;o++)r[o]=this[o+t]}return r},i.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},i.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},i.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*e)),a},i.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},i.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),Z.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),Z.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),Z.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),Z.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;D(this,t,e,n,i,0)}var a=1,o=0;for(this[e]=255&t;++o<n&&(a*=256);)this[e+o]=t/a&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;D(this,t,e,n,i,0)}var a=n-1,o=1;for(this[e+a]=255&t;--a>=0&&(o*=256);)this[e+a]=t/o&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},i.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return I(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return I(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var a,o=r-n;if(this===t&&n<e&&e<r)for(a=o-1;a>=0;a--)t[a+e]=this[a+n];else if(o<1e3||!i.TYPED_ARRAY_SUPPORT)for(a=0;a<o;a++)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},i.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;o++)this[o]=t;else{var s=i.isBuffer(t)?t:V(""+new i(t,r)),c=s.length;for(o=0;o<n-e;o++)this[o+e]=s[o%c]}return this};var Q=/[^+\/0-9A-Za-z-_]/g}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":40,ieee754:52,isarray:46}],46:[function(require,t,exports){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},{}],47:[function(require,t,exports){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function n(t){return"boolean"==typeof t}function r(t){return null===t}function i(t){return null==t}function a(t){return"number"==typeof t}function o(t){return"string"==typeof t}function s(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return"[object RegExp]"===m(t)}function u(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===m(t)}function f(t){return"[object Error]"===m(t)||t instanceof Error}function p(t){return"function"==typeof t}function d(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function m(t){return Object.prototype.toString.call(t)}exports.isArray=e,exports.isBoolean=n,exports.isNull=r,exports.isNullOrUndefined=i,exports.isNumber=a,exports.isString=o,exports.isSymbol=s,exports.isUndefined=c,exports.isRegExp=l,exports.isObject=u,exports.isDate=h,exports.isError=f,exports.isFunction=p,exports.isPrimitive=d,exports.isBuffer=t.isBuffer}).call(this,{isBuffer:require("../../is-buffer/index.js")})},{"../../is-buffer/index.js":54}],48:[function(require,t,exports){!function(e,i){function a(t,e,n){if(Array.prototype.map)return Array.prototype.map.call(t,e,n);for(var r=Array(t.length),i=0,a=t.length;i<a;i++)r[i]=e.call(n,t[i],i,t);return r}function o(t){return{newPos:t.newPos,components:t.components.slice(0)}}function s(t){
for(var e=[],n=0;n<t.length;n++)t[n]&&e.push(t[n]);return e}function c(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;")}function l(t,e,n){e=e||[],n=n||[];var r;for(r=0;r<e.length;r+=1)if(e[r]===t)return n[r];var i;if("[object Array]"===f.call(t)){for(e.push(t),i=Array(t.length),n.push(i),r=0;r<t.length;r+=1)i[r]=l(t[r],e,n);e.pop(),n.pop()}else if("object"==typeof t&&null!==t){e.push(t),i={},n.push(i);var a,o=[];for(a in t)o.push(a);for(o.sort(),r=0;r<o.length;r+=1)a=o[r],i[a]=l(t[a],e,n);e.pop(),n.pop()}else i=t;return i}function u(t,e,n,r){for(var i=0,o=t.length,s=0,c=0;i<o;i++){var l=t[i];if(l.removed){if(l.value=n.slice(c,c+l.count).join(""),c+=l.count,i&&t[i-1].added){var u=t[i-1];t[i-1]=t[i],t[i]=u}}else{if(!l.added&&r){var h=e.slice(s,s+l.count);h=a(h,function(t,e){var r=n[c+e];return r.length>t.length?r:t}),l.value=h.join("")}else l.value=e.slice(s,s+l.count).join("");s+=l.count,l.added||(c+=l.count)}}return t}function h(t){this.ignoreWhitespace=t}var f=Object.prototype.toString;h.prototype={diff:function(t,e,n){function r(t){return n?(setTimeout(function(){n(i,t)},0),!0):t}function a(){for(var n=-1*h;n<=h;n+=2){var a,f=p[n-1],d=p[n+1],m=(d?d.newPos:0)-n;f&&(p[n-1]=i);var g=f&&f.newPos+1<c,v=d&&0<=m&&m<l;if(g||v){if(!g||v&&f.newPos<d.newPos?(a=o(d),s.pushComponent(a.components,i,!0)):(a=f,a.newPos++,s.pushComponent(a.components,!0,i)),m=s.extractCommon(a,e,t,n),a.newPos+1>=c&&m+1>=l)return r(u(a.components,e,t,s.useLongestToken));p[n]=a}else p[n]=i}h++}var s=this;if(e===t)return r([{value:e}]);if(!e)return r([{value:t,removed:!0}]);if(!t)return r([{value:e,added:!0}]);e=this.tokenize(e),t=this.tokenize(t);var c=e.length,l=t.length,h=1,f=c+l,p=[{newPos:-1,components:[]}],d=this.extractCommon(p[0],e,t,0);if(p[0].newPos+1>=c&&d+1>=l)return r([{value:e.join("")}]);if(n)!function t(){setTimeout(function(){return h>f?n():(a()||t(),i)},0)}();else for(;h<=f;){var m=a();if(m)return m}},pushComponent:function(t,e,n){var r=t[t.length-1];r&&r.added===e&&r.removed===n?t[t.length-1]={count:r.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,r){for(var i=e.length,a=n.length,o=t.newPos,s=o-r,c=0;o+1<i&&s+1<a&&this.equals(e[o+1],n[s+1]);)o++,s++,c++;return c&&t.components.push({count:c}),t.newPos=o,s},equals:function(t,e){var n=/\S/;return t===e||this.ignoreWhitespace&&!n.test(t)&&!n.test(e)},tokenize:function(t){return t.split("")}};var p=new h,d=new h(!0),m=new h;d.tokenize=m.tokenize=function(t){return s(t.split(/(\s+|\b)/))};var g=new h(!0);g.tokenize=function(t){return s(t.split(/([{}:;,]|\s+)/))};var v=new h,y=new h;y.ignoreTrim=!0,v.tokenize=y.tokenize=function(t){for(var e=[],n=t.split(/^/m),r=0;r<n.length;r++){var i=n[r],a=n[r-1],o=a&&a[a.length-1];"\n"===i&&"\r"===o?e[e.length-1]=e[e.length-1].slice(0,-1)+"\r\n":(this.ignoreTrim&&(i=i.trim(),r<n.length-1&&(i+="\n")),e.push(i))}return e};var b=new h;b.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2?e[e.length-1]+=i:e.push(i)}return e};var x=new h;x.tokenize=function(t){return s(t.split(/(\S.+?[.!?])(?=\s+|$)/))};var w=new h;w.useLongestToken=!0,w.tokenize=v.tokenize,w.equals=function(t,e){return v.equals(t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};var _={Diff:h,diffChars:function(t,e,n){return p.diff(t,e,n)},diffWords:function(t,e,n){return d.diff(t,e,n)},diffWordsWithSpace:function(t,e,n){return m.diff(t,e,n)},diffLines:function(t,e,n){return v.diff(t,e,n)},diffTrimmedLines:function(t,e,n){return y.diff(t,e,n)},diffSentences:function(t,e,n){return x.diff(t,e,n)},diffCss:function(t,e,n){return g.diff(t,e,n)},diffJson:function(t,e,n){return w.diff("string"==typeof t?t:JSON.stringify(l(t),i,"  "),"string"==typeof e?e:JSON.stringify(l(e),i,"  "),n)},createTwoFilesPatch:function(t,e,n,r,o,s){function c(t){return a(t,function(t){return" "+t})}function l(t,e,n){var r=h[h.length-2],i=e===h.length-2,a=e===h.length-3&&n.added!==r.added;/\n$/.test(n.value)||!i&&!a||t.push("\\ No newline at end of file")}var u=[];t==e&&u.push("Index: "+t),u.push("==================================================================="),u.push("--- "+t+(i===o?"":"\t"+o)),u.push("+++ "+e+(i===s?"":"\t"+s));var h=b.diff(n,r);h.push({value:"",lines:[]});for(var f=0,p=0,d=[],m=1,g=1,v=0;v<h.length;v++){var y=h[v],x=y.lines||y.value.replace(/\n$/,"").split("\n");if(y.lines=x,y.added||y.removed){if(!f){var w=h[v-1];f=m,p=g,w&&(d=c(w.lines.slice(-4)),f-=d.length,p-=d.length)}d.push.apply(d,a(x,function(t){return(y.added?"+":"-")+t})),l(d,v,y),y.added?g+=x.length:m+=x.length}else{if(f)if(x.length<=8&&v<h.length-2)d.push.apply(d,c(x));else{var _=Math.min(x.length,4);u.push("@@ -"+f+","+(m-f+_)+" +"+p+","+(g-p+_)+" @@"),u.push.apply(u,d),u.push.apply(u,c(x.slice(0,_))),x.length<=4&&l(u,v,y),f=0,p=0,d=[]}m+=x.length,g+=x.length}}return u.join("\n")+"\n"},createPatch:function(t,e,n,r,i){return _.createTwoFilesPatch(t,t,e,n,r,i)},applyPatch:function(t,e){for(var n=e.split("\n"),r=[],i=0,a=!1,o=!1;i<n.length&&!/^@@/.test(n[i]);)i++;for(;i<n.length;i++)if("@"===n[i][0]){var s=n[i].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);r.unshift({start:s[3],oldlength:+s[2],removed:[],newlength:s[4],added:[]})}else"+"===n[i][0]?r[0].added.push(n[i].substr(1)):"-"===n[i][0]?r[0].removed.push(n[i].substr(1)):" "===n[i][0]?(r[0].added.push(n[i].substr(1)),r[0].removed.push(n[i].substr(1))):"\\"===n[i][0]&&("+"===n[i-1][0]?a=!0:"-"===n[i-1][0]&&(o=!0));var c=t.split("\n");for(i=r.length-1;i>=0;i--){for(var l=r[i],u=0;u<l.oldlength;u++)if(c[l.start-1+u]!==l.removed[u])return!1;Array.prototype.splice.apply(c,[l.start-1,l.oldlength].concat(l.added))}if(a)for(;!c[c.length-1];)c.pop();else o&&c.push("");return c.join("\n")},convertChangesToXML:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(c(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")},convertChangesToDMP:function(t){for(var e,n,r=[],i=0;i<t.length;i++)e=t[i],n=e.added?1:e.removed?-1:0,r.push([n,e.value]);return r},canonicalize:l};i!==t&&t.exports?t.exports=_:(n=[],r=function(){return _}.apply(exports,n),!(r!==i&&(t.exports=r)))}(this)},{}],49:[function(require,t,exports){"use strict";var e=/[|\\{}()[\]^$+*?.]/g;t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(e,"\\$&")}},{}],50:[function(require,t,exports){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,r,o,s,c,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),l=r.slice(),o=l.length,c=0;c<o;c++)l[c].apply(this,s);return!0},e.prototype.addListener=function(t,r){var o;if(!n(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(r.listener)?r.listener:r),this._events[t]?i(this._events[t])?this._events[t].push(r):this._events[t]=[this._events[t],r]:this._events[t]=r,i(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},e.prototype.removeListener=function(t,e){var r,a,o,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,a=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(s=o;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){a=s;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},e.listenerCount=function(t,e){return t.listenerCount(e)}},{}],51:[function(require,t,exports){(function(e){function n(t){for(var n,r=e.env.PATH.split(":"),i=0,a=r.length;i<a;++i)if(n=s.join(r[i],t),c(n))return n}function r(t,e,n){var r,o,e=e||{},n=n||function(){};if(e.exec&&(i={type:"Custom",pkg:e.exec,range:[]}),!i)return n(Error("growl not supported on this platform"));if(o=[i.pkg],r=e.image)switch(i.type){case"Darwin-Growl":var c,l=s.extname(r).substr(1);c=c||"icns"==l&&"iconpath",c=c||/^[A-Z]/.test(r)&&"appIcon",c=c||/^png|gif|jpe?g$/.test(l)&&"image",c=c||l&&(r=l)&&"icon",c=c||"icon",o.push("--"+c,u(r));break;case"Darwin-NotificationCenter":o.push(i.icon,u(r));break;case"Linux":o.push(i.icon,u(r)),e.sticky||o.push("--hint=int:transient:1");break;case"Windows":o.push(i.icon+u(r))}if(e.sticky&&o.push(i.sticky),e.priority){var h=e.priority+"";i.priority.range.indexOf(h);~i.priority.range.indexOf(h)&&o.push(i.priority,e.priority)}switch(e.sound&&"Darwin-NotificationCenter"===i.type&&o.push(i.sound,e.sound),e.name&&"Darwin-Growl"===i.type&&o.push("--name",e.name),i.type){case"Darwin-Growl":o.push(i.msg),o.push(u(t).replace(/\\n/g,"\n")),e.title&&o.push(u(e.title));break;case"Darwin-NotificationCenter":o.push(i.msg);var f=u(t),p=f.replace(/\\n/g,"\n");o.push(p),e.title&&(o.push(i.title),o.push(u(e.title))),e.subtitle&&(o.push(i.subtitle),o.push(u(e.subtitle))),e.url&&(o.push(i.url),o.push(u(e.url)));break;case"Linux-Growl":o.push(i.msg),o.push(u(t).replace(/\\n/g,"\n")),e.title&&o.push(u(e.title)),i.host&&o.push(i.host.cmd,i.host.hostname);break;case"Linux":e.title?(o.push(u(e.title)),o.push(i.msg),o.push(u(t).replace(/\\n/g,"\n"))):o.push(u(t).replace(/\\n/g,"\n"));break;case"Windows":o.push(u(t).replace(/\\n/g,"\n")),e.title&&o.push(i.title+u(e.title)),e.url&&o.push(i.url+u(e.url));break;case"Custom":o[0]=function(n){var r=e.title?e.title+": "+t:t,i=n.replace(/(^|[^%])%s/g,"$1"+u(r));return i===n&&o.push(u(r)),i}(o[0])}a(o.join(" "),n)}var i,a=require("child_process").exec,o=require("fs"),s=require("path"),c=o.existsSync||s.existsSync,l=require("os"),u=JSON.stringify;switch(l.type()){case"Darwin":i=n("terminal-notifier")?{type:"Darwin-NotificationCenter",pkg:"terminal-notifier",msg:"-message",title:"-title",subtitle:"-subtitle",icon:"-appIcon",sound:"-sound",url:"-open",priority:{cmd:"-execute",range:[]}}:{type:"Darwin-Growl",pkg:"growlnotify",msg:"-m",sticky:"--sticky",priority:{cmd:"--priority",range:[-2,-1,0,1,2,"Very Low","Moderate","Normal","High","Emergency"]}};break;case"Linux":i=n("growl")?{type:"Linux-Growl",pkg:"growl",msg:"-m",title:"-title",subtitle:"-subtitle",host:{cmd:"-H",hostname:"192.168.33.1"}}:{type:"Linux",pkg:"notify-send",msg:"",sticky:"-t 0",icon:"-i",priority:{cmd:"-u",range:["low","normal","critical"]}};break;case"Windows_NT":i={type:"Windows",pkg:"growlnotify",msg:"",sticky:"/s:true",title:"/t:",icon:"/i:",url:"/cu:",priority:{cmd:"/p:",range:[-2,-1,0,1,2]}}}exports=t.exports=r,exports.version="1.4.1"}).call(this,require("_process"))},{_process:58,child_process:43,fs:43,os:56,path:43}],52:[function(require,t,exports){exports.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=256*a+t[e+h],h+=f,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=256*o+t[e+h],h+=f,u-=8);if(0===a)a=1-l;else{if(a===c)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,r),a-=l}return(p?-1:1)*o*Math.pow(2,a-r)},exports.write=function(t,e,n,r,i,a){var o,s,c,l=8*a-i-1,u=(1<<l)-1,h=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),e+=o+h>=1?f/c:f*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=u?(s=0,o=u):o+h>=1?(s=(e*c-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[n+p]=255&o,p+=d,o/=256,l-=8);t[n+p-d]|=128*m}},{}],53:[function(require,t,exports){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],54:[function(require,t,exports){t.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}},{}],55:[function(require,t,exports){(function(e){function n(t,o,s,c){"function"==typeof o?(s=o,o={}):o&&"object"==typeof o||(o={mode:o});var l=o.mode,u=o.fs||i;void 0===l&&(l=a&~e.umask()),c||(c=null);var h=s||function(){};t=r.resolve(t),u.mkdir(t,l,function(e){if(!e)return c=c||t,h(null,c);switch(e.code){case"ENOENT":n(r.dirname(t),o,function(e,r){e?h(e,r):n(t,o,h,r)});break;default:u.stat(t,function(t,n){t||!n.isDirectory()?h(e,c):h(null,c)})}})}var r=require("path"),i=require("fs"),a=parseInt("0777",8);t.exports=n.mkdirp=n.mkdirP=n,n.sync=function t(n,o,s){o&&"object"==typeof o||(o={mode:o});var c=o.mode,l=o.fs||i;void 0===c&&(c=a&~e.umask()),s||(s=null),n=r.resolve(n);try{l.mkdirSync(n,c),s=s||n}catch(e){switch(e.code){case"ENOENT":s=t(r.dirname(n),o,s),t(n,o,s);break;default:var u;try{u=l.statSync(n)}catch(t){throw e}if(!u.isDirectory())throw e}}return s}}).call(this,require("_process"))},{_process:58,fs:43,path:43}],56:[function(require,t,exports){exports.endianness=function(){return"LE"},exports.hostname=function(){return"undefined"!=typeof location?location.hostname:""},exports.loadavg=function(){return[]},exports.uptime=function(){return 0},exports.freemem=function(){return Number.MAX_VALUE},exports.totalmem=function(){return Number.MAX_VALUE},exports.cpus=function(){return[]},exports.type=function(){return"Browser"},exports.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},exports.networkInterfaces=exports.getNetworkInterfaces=function(){return{}},exports.arch=function(){return"javascript"},exports.platform=function(){return"browser"},exports.tmpdir=exports.tmpDir=function(){return"/tmp"},exports.EOL="\n"},{}],57:[function(require,t,exports){(function(e){"use strict";function n(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(a=Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return e.nextTick(function(){t.apply(null,a)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=n:t.exports=e.nextTick}).call(this,require("_process"))},{_process:58}],58:[function(require,t,exports){function e(){c&&a&&(c=!1,a.length?s=a.concat(s):l=-1,s.length&&n())}function n(){if(!c){var t=setTimeout(e);c=!0;for(var n=s.length;n;){for(a=s,s=[];++l<n;)a&&a[l].run();l=-1,n=s.length}a=null,c=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function i(){}var a,o=t.exports={},s=[],c=!1,l=-1;o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.push(new r(t,e)),1!==s.length||c||setTimeout(n,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],59:[function(require,t,exports){function e(){n.call(this)}t.exports=e;var n=require("events").EventEmitter,r=require("inherits");r(e,n),e.Readable=require("readable-stream/readable.js"),e.Writable=require("readable-stream/writable.js"),e.Duplex=require("readable-stream/duplex.js"),e.Transform=require("readable-stream/transform.js"),e.PassThrough=require("readable-stream/passthrough.js"),e.Stream=e,e.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function i(){l.readable&&l.resume&&l.resume()}function a(){u||(u=!0,t.end())}function o(){u||(u=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(c(),0===n.listenerCount(this,"error"))throw t}function c(){l.removeListener("data",r),t.removeListener("drain",i),l.removeListener("end",a),l.removeListener("close",o),l.removeListener("error",s),t.removeListener("error",s),l.removeListener("end",c),l.removeListener("close",c),t.removeListener("close",c)}var l=this;l.on("data",r),t.on("drain",i),t._isStdio||e&&e.end===!1||(l.on("end",a),l.on("close",o));var u=!1;return l.on("error",s),t.on("error",s),l.on("end",c),l.on("close",c),t.on("close",c),t.emit("pipe",l),t}},{events:50,inherits:53,"readable-stream/duplex.js":61,"readable-stream/passthrough.js":67,"readable-stream/readable.js":68,"readable-stream/transform.js":69,"readable-stream/writable.js":70}],60:[function(require,t,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],61:[function(require,t,exports){t.exports=require("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":62}],62:[function(require,t,exports){"use strict";function e(t){return this instanceof e?(s.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",n)):new e(t)}function n(){this.allowHalfOpen||this._writableState.ended||a(r,this)}function r(t){t.end()}var i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=e;var a=require("process-nextick-args"),o=require("core-util-is");o.inherits=require("inherits");var s=require("./_stream_readable"),c=require("./_stream_writable");o.inherits(e,s);for(var l=i(c.prototype),u=0;u<l.length;u++){var h=l[u];e.prototype[h]||(e.prototype[h]=c.prototype[h])}},{"./_stream_readable":64,"./_stream_writable":66,"core-util-is":47,inherits:53,"process-nextick-args":57}],63:[function(require,t,exports){"use strict";function e(t){return this instanceof e?void n.call(this,t):new e(t)}t.exports=e;var n=require("./_stream_transform"),r=require("core-util-is");r.inherits=require("inherits"),r.inherits(e,n),e.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":65,"core-util-is":47,inherits:53}],64:[function(require,t,exports){(function(e){"use strict";function n(t,e,n){return F?t.prependListener(e,n):void(t._events&&t._events[e]?S(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n))}function r(t,e){O=O||require("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,e instanceof O&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(N||(N=require("string_decoder/").StringDecoder),this.decoder=new N(t.encoding),this.encoding=t.encoding)}function i(t){return O=O||require("./_stream_duplex"),this instanceof i?(this._readableState=new r(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void A.call(this)):new i(t)}function a(t,e,n,r,i){var a=l(e,n);if(a)t.emit("error",a);else if(null===n)e.reading=!1,u(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var s=Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&i){var c=Error("stream.unshift() after end event");t.emit("error",c)}else{var f;!e.decoder||i||r||(n=e.decoder.write(n),f=!e.objectMode&&0===n.length),i||(e.reading=!1),f||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&h(t))),p(t,e)}else i||(e.reading=!1);return o(e)}function o(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function s(t){return t>=I?t=I:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function c(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=s(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function l(t,e){var n=null;return L.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function u(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,h(t)}}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(B("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?T(f,t):f(t))}function f(t){B("emit readable"),t.emit("readable"),b(t)}function p(t,e){e.readingMore||(e.readingMore=!0,T(d,t,e))}function d(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(B("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function m(t){return function(){var e=t._readableState;B("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&k(t,"data")&&(e.flowing=!0,b(t))}}function g(t){B("readable nexttick read 0"),t.read(0)}function v(t,e){e.resumeScheduled||(e.resumeScheduled=!0,T(y,t,e))}function y(t,e){e.reading||(B("resume read 0"),t.read(0)),e.resumeScheduled=!1,t.emit("resume"),b(t),e.flowing&&!e.reading&&t.read(0)}function b(t){var e=t._readableState;if(B("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function x(t,e){var n,r=e.buffer,i=e.length,a=!!e.decoder,o=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(o)n=r.shift();else if(!t||t>=i)n=a?r.join(""):1===r.length?r[0]:L.concat(r,i),r.length=0;else if(t<r[0].length){var s=r[0];n=s.slice(0,t),r[0]=s.slice(t)}else if(t===r[0].length)n=r.shift();else{n=a?"":R.allocUnsafe(t);for(var c=0,l=0,u=r.length;l<u&&c<t;l++){var h=r[0],f=Math.min(t-c,h.length);a?n+=h.slice(0,f):h.copy(n,c,0,f),f<h.length?r[0]=h.slice(f):r.shift(),c+=f}}return n}function w(t){var e=t._readableState;if(e.length>0)throw Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,T(_,e,t))}function _(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function E(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function M(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}t.exports=i;var T=require("process-nextick-args"),S=require("isarray");i.ReadableState=r;var A,C=require("events").EventEmitter,k=function(t,e){return t.listeners(e).length};!function(){try{A=require("stream")}catch(t){}finally{A||(A=require("events").EventEmitter)}}();var L=require("buffer").Buffer,R=require("buffer-shims"),P=require("core-util-is");P.inherits=require("inherits");var D=require("util"),B=void 0;B=D&&D.debuglog?D.debuglog("stream"):function(){};var N;P.inherits(i,A);var O,O,F="function"==typeof C.prototype.prependListener;i.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding,e!==n.encoding&&(t=R.from(t,e),e="")),a(this,n,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return a(this,e,t,"",!0)},i.prototype.isPaused=function(){return this._readableState.flowing===!1},i.prototype.setEncoding=function(t){return N||(N=require("string_decoder/").StringDecoder),this._readableState.decoder=new N(t),this._readableState.encoding=t,this};var I=8388608;i.prototype.read=function(t){B("read",t);var e=this._readableState,n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return B("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?w(this):h(this),null;if(t=c(t,e),0===t&&e.ended)return 0===e.length&&w(this),null;var r=e.needReadable;B("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,B("length less than watermark",r)),(e.ended||e.reading)&&(r=!1,B("reading or ended",r)),r&&(B("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=c(n,e));var i;return i=t>0?x(t,e):null,null===i&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&w(this),null!==i&&this.emit("data",i),i},i.prototype._read=function(t){this.emit("error",Error("not implemented"))},i.prototype.pipe=function(t,r){function i(t){B("onunpipe"),t===f&&o()}function a(){B("onend"),t.end()}function o(){B("cleanup"),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("drain",v),t.removeListener("error",c),t.removeListener("unpipe",i),f.removeListener("end",a),f.removeListener("end",o),f.removeListener("data",s),y=!0,!p.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function s(e){B("ondata");var n=t.write(e);!1===n&&((1===p.pipesCount&&p.pipes===t||p.pipesCount>1&&M(p.pipes,t)!==-1)&&!y&&(B("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++),f.pause())}function c(e){B("onerror",e),h(),t.removeListener("error",c),0===k(t,"error")&&t.emit("error",e)}function l(){t.removeListener("finish",u),h()}function u(){B("onfinish"),t.removeListener("close",l),h()}function h(){B("unpipe"),f.unpipe(t)}var f=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,B("pipe count=%d opts=%j",p.pipesCount,r);var d=(!r||r.end!==!1)&&t!==e.stdout&&t!==e.stderr,g=d?a:o;p.endEmitted?T(g):f.once("end",g),t.on("unpipe",i);var v=m(f);t.on("drain",v);var y=!1;return f.on("data",s),n(t,"error",c),t.once("close",l),t.once("finish",u),t.emit("pipe",f),p.flowing||(B("pipe resume"),f.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var a=M(e.pipes,t);return a===-1?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var n=A.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&!this._readableState.endEmitted){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&h(this,r):T(g,this))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(B("resume"),t.flowing=!0,v(this,t)),this},i.prototype.pause=function(){return B("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(B("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(B("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(B("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){var a=r.push(i);a||(n=!0,t.pause())}});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return E(a,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){B("wrapped _read",e),n&&(n=!1,t.resume())},r},i._fromList=x}).call(this,require("_process"))},{"./_stream_duplex":62,_process:58,buffer:45,"buffer-shims":44,"core-util-is":47,events:50,inherits:53,isarray:60,"process-nextick-args":57,"string_decoder/":71,util:41}],65:[function(require,t,exports){"use strict";function e(t){this.afterTransform=function(e,r){return n(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function n(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i(e);var a=t._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&t._read(a.highWaterMark)}function r(t){if(!(this instanceof r))return new r(t);a.call(this,t),this._transformState=new e(this);var n=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t){i(n,t)}):i(n)})}function i(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw Error("Calling transform done when ws.length != 0");if(r.transforming)throw Error("Calling transform done when still transforming");return t.push(null)}t.exports=r;var a=require("./_stream_duplex"),o=require("core-util-is");o.inherits=require("inherits"),o.inherits(r,a),r.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},r.prototype._transform=function(t,e,n){throw Error("Not implemented")},r.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;
(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":62,"core-util-is":47,inherits:53}],66:[function(require,t,exports){(function(e){"use strict";function n(){}function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function a(t,e){L=L||require("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,e instanceof L&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new _(this)}function o(t){return L=L||require("./_stream_duplex"),this instanceof o||this instanceof L?(this._writableState=new a(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void S.call(this)):new o(t)}function s(t,e){var n=Error("write after end");t.emit("error",n),E(e,n)}function c(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):C.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),E(r,a),i=!1),i}function l(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=k.from(e,n)),e}function u(t,e,n,i,a){n=l(e,n,i),C.isBuffer(n)&&(i="buffer");var o=e.objectMode?1:n.length;e.length+=o;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest=new r(n,i,a),c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else h(t,e,!1,o,n,i,a);return s}function h(t,e,n,r,i,a,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,a,e.onwrite),e.sync=!1}function f(t,e,n,r,i){--e.pendingcb,n?E(i,r):i(r),t._writableState.errorEmitted=!0,t.emit("error",r)}function p(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(p(n),e)f(t,n,r,e,i);else{var a=y(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||v(t,n),r?M(m,t,n,a,i):m(t,n,a,i)}}function m(t,e,n,r){n||g(t,e),e.pendingcb--,r(),x(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=Array(r),a=e.corkedRequestsFree;a.entry=n;for(var o=0;n;)i[o]=n,n=n.next,o+=1;h(t,e,!0,e.length,i,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new _(e)}else{for(;n;){var s=n.chunk,c=n.encoding,l=n.callback,u=e.objectMode?1:s.length;if(h(t,e,!1,u,s,c,l),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function y(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function b(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function x(t,e){var n=y(e);return n&&(0===e.pendingcb?(b(t,e),e.finished=!0,t.emit("finish")):b(t,e)),n}function w(t,e,n){e.ending=!0,x(t,e),n&&(e.finished?E(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function _(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}t.exports=o;var E=require("process-nextick-args"),M=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?i:E;o.WritableState=a;var T=require("core-util-is");T.inherits=require("inherits");var S,A={deprecate:require("util-deprecate")};!function(){try{S=require("stream")}catch(t){}finally{S||(S=require("events").EventEmitter)}}();var C=require("buffer").Buffer,k=require("buffer-shims");T.inherits(o,S);var L;a.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(a.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();var L;o.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},o.prototype.write=function(t,e,r){var i=this._writableState,a=!1;return"function"==typeof e&&(r=e,e=null),C.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=n),i.ended?s(this,r):c(this,i,t,r)&&(i.pendingcb++,a=u(this,i,t,e,r)),a},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||v(this,t))},o.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},o.prototype._write=function(t,e,n){n(Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,require("_process"))},{"./_stream_duplex":62,_process:58,buffer:45,"buffer-shims":44,"core-util-is":47,events:50,inherits:53,"process-nextick-args":57,"util-deprecate":73}],67:[function(require,t,exports){t.exports=require("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":63}],68:[function(require,t,exports){(function(e){var n=function(){try{return require("stream")}catch(t){}}();exports=t.exports=require("./lib/_stream_readable.js"),exports.Stream=n||exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"),!e.browser&&"disable"===e.env.READABLE_STREAM&&n&&(t.exports=n)}).call(this,require("_process"))},{"./lib/_stream_duplex.js":62,"./lib/_stream_passthrough.js":63,"./lib/_stream_readable.js":64,"./lib/_stream_transform.js":65,"./lib/_stream_writable.js":66,_process:58}],69:[function(require,t,exports){t.exports=require("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":65}],70:[function(require,t,exports){t.exports=require("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":66}],71:[function(require,t,exports){function e(t){if(t&&!o(t))throw Error("Unknown encoding: "+t)}function n(t){return t.toString(this.encoding)}function r(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function i(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=require("buffer").Buffer,o=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},s=exports.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),e(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=r;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=i;break;default:return void(this.write=n)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};s.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,r=e.charCodeAt(i);if(r>=55296&&r<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),t.copy(this.charBuffer,0,0,a),e.substring(0,i)}return e},s.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},s.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}},{buffer:45}],72:[function(require,t,exports){function e(t){return t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+((t.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}function n(t){var e=""+t;return 1===e.length?"0"+e:e}t.exports=e},{}],73:[function(require,e,exports){(function(t){function n(t,e){function n(){if(!i){if(r("throwDeprecation"))throw Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}if(r("noDeprecation"))return t;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(t){return!1}var n=t.localStorage[e];return null!=n&&"true"===(n+"").toLowerCase()}e.exports=n}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],74:[function(require,t,exports){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],75:[function(require,e,exports){(function(t,e){function n(t,e){var n={seen:[],stylize:i};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(e)?n.showHidden=e:e&&exports._extend(n,e),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=r),o(n,t,n.depth)}function r(t,e){var r=n.styles[e];return r?"["+n.colors[r][0]+"m"+t+"["+n.colors[r][1]+"m":t}function i(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function o(t,e,n){if(t.customInspect&&e&&M(e.inspect)&&e.inspect!==exports.inspect&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return v(r)||(r=o(t,r,n)),r}var i=s(t,e);if(i)return i;var p=Object.keys(e),d=a(p);if(t.showHidden&&(p=Object.getOwnPropertyNames(e)),E(e)&&(p.indexOf("message")>=0||p.indexOf("description")>=0))return c(e);if(0===p.length){if(M(e)){var m=e.name?": "+e.name:"";return t.stylize("[Function"+m+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(_(e))return t.stylize(Date.prototype.toString.call(e),"date");if(E(e))return c(e)}var g="",y=!1,b=["{","}"];if(f(e)&&(y=!0,b=["[","]"]),M(e)){var w=e.name?": "+e.name:"";g=" [Function"+w+"]"}if(x(e)&&(g=" "+RegExp.prototype.toString.call(e)),_(e)&&(g=" "+Date.prototype.toUTCString.call(e)),E(e)&&(g=" "+c(e)),0===p.length&&(!y||0==e.length))return b[0]+g+b[1];if(n<0)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var T;return T=y?l(t,e,n,d,p):p.map(function(r){return u(t,e,n,d,r,y)}),t.seen.pop(),h(T,g,b)}function s(t,e){if(b(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):p(e)?t.stylize(""+e,"boolean"):d(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,i){for(var a=[],o=0,s=e.length;o<s;++o)k(e,o+"")?a.push(u(t,e,n,r,o+"",!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(u(t,e,n,r,i,!0))}),a}function u(t,e,n,r,i,a){var s,c,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?c=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(c=t.stylize("[Setter]","special")),k(r,i)||(s="["+i+"]"),c||(t.seen.indexOf(l.value)<0?(c=d(n)?o(t,l.value,null):o(t,l.value,n-1),c.indexOf("\n")>-1&&(c=a?c.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+c.split("\n").map(function(t){return"   "+t}).join("\n"))):c=t.stylize("[Circular]","special")),b(s)){if(a&&i.match(/^\d+$/))return c;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+c}function h(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function f(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function d(t){return null===t}function m(t){return null==t}function g(t){return"number"==typeof t}function v(t){return"string"==typeof t}function y(t){return"symbol"==typeof t}function b(t){return void 0===t}function x(t){return w(t)&&"[object RegExp]"===S(t)}function w(t){return"object"==typeof t&&null!==t}function _(t){return w(t)&&"[object Date]"===S(t)}function E(t){return w(t)&&("[object Error]"===S(t)||t instanceof Error)}function M(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function S(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}function C(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var L=/%[sdj%]/g;exports.format=function(t){if(!v(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(n(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,a=i.length,o=(t+"").replace(L,function(t){if("%%"===t)return"%";if(r>=a)return t;switch(t){case"%s":return i[r++]+"";case"%d":return+i[r++];case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return t}}),s=i[r];r<a;s=i[++r])o+=d(s)||!w(s)?" "+s:" "+n(s);return o},exports.deprecate=function(n,r){function i(){if(!a){if(t.throwDeprecation)throw Error(r);t.traceDeprecation?console.trace(r):console.error(r),a=!0}return n.apply(this,arguments)}if(b(e.process))return function(){return exports.deprecate(n,r).apply(this,arguments)};if(t.noDeprecation===!0)return n;var a=!1;return i};var R,P={};exports.debuglog=function(e){if(b(R)&&(R=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!P[e])if(RegExp("\\b"+e+"\\b","i").test(R)){var n=t.pid;P[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,n,t)}}else P[e]=function(){};return P[e]},exports.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=f,exports.isBoolean=p,exports.isNull=d,exports.isNullOrUndefined=m,exports.isNumber=g,exports.isString=v,exports.isSymbol=y,exports.isUndefined=b,exports.isRegExp=x,exports.isObject=w,exports.isDate=_,exports.isError=E,exports.isFunction=M,exports.isPrimitive=T,exports.isBuffer=require("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",C(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,require("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":74,_process:58,inherits:53}]},{},[1])}).call(exports,function(){return this}(),e(195).Buffer,e(306).setImmediate)},1271:function(t,exports,e){function n(t){return e(r(t))}function r(t){return i[t]||function(){throw Error("Cannot find module '"+t+"'.")}()}var i={"./account":806,"./account.coffee":806,"./init":101,"./init.coffee":101,"./page":807,"./page.coffee":807,"./project":808,"./project.coffee":808,"./projects":809,"./projects.coffee":809};n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id=1271}});